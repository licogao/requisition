var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var l=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var ee=Array.isArray;function te(){}var S={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function re(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function ie(e,t){return re(e.type,t,e.props)}function ae(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function oe(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var se=/\/+/g;function ce(e,t){return typeof e==`object`&&e&&e.key!=null?oe(``+e.key):t.toString(36)}function le(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(te,te):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function ue(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,ue(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+ce(e,0):a,ee(o)?(i=``,c!=null&&(i=c.replace(se,`$&/`)+`/`),ue(o,r,i,``,function(e){return e})):o!=null&&(ae(o)&&(o=ie(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(se,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(ee(e))for(var u=0;u<e.length;u++)a=e[u],s=l+ce(a,u),c+=ue(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+ce(a,u++),c+=ue(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return ue(le(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function de(e,t,n){if(e==null)return e;var r=[],i=0;return ue(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function fe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var C=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},w={map:de,forEach:function(e,t,n){de(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return de(e,function(){t++}),t},toArray:function(e){return de(e,function(e){return e})||[]},only:function(e){if(!ae(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=w,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!ne.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return re(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)ne.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return re(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=ae,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:fe}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(te,C)}catch(e){C(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),S.T=t}},e.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},e.use=function(e){return S.H.use(e)},e.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},e.useCallback=function(e,t){return S.H.useCallback(e,t)},e.useContext=function(e){return S.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return S.H.useEffect(e,t)},e.useEffectEvent=function(e){return S.H.useEffectEvent(e)},e.useId=function(){return S.H.useId()},e.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return S.H.useMemo(e,t)},e.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},e.useRef=function(e){return S.H.useRef(e)},e.useState=function(e){return S.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return S.H.useTransition()},e.version=`19.2.3`})),u=o(((e,t)=>{t.exports=l()})),d=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,ee||(ee=!0,ae());else{var t=n(l);t!==null&&ce(x,t.startTime-e)}}var ee=!1,te=-1,S=5,ne=-1;function re(){return g?!0:!(e.unstable_now()-ne<S)}function ie(){if(g=!1,ee){var t=e.unstable_now();ne=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(te),te=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&re());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&ce(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?ae():ee=!1}}}var ae;if(typeof y==`function`)ae=function(){y(ie)};else if(typeof MessageChannel<`u`){var oe=new MessageChannel,se=oe.port2;oe.port1.onmessage=ie,ae=function(){se.postMessage(null)}}else ae=function(){_(ie,0)};function ce(t,n){te=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(te),te=-1):h=!0,ce(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,ee||(ee=!0,ae()))),r},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),f=o(((e,t)=>{t.exports=d()})),p=o((e=>{var t=u();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.3`})),m=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=p()})),h=o((e=>{var t=f(),n=u(),r=m();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function d(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),ee=Symbol.for(`react.consumer`),te=Symbol.for(`react.context`),S=Symbol.for(`react.forward_ref`),ne=Symbol.for(`react.suspense`),re=Symbol.for(`react.suspense_list`),ie=Symbol.for(`react.memo`),ae=Symbol.for(`react.lazy`),oe=Symbol.for(`react.activity`),se=Symbol.for(`react.memo_cache_sentinel`),ce=Symbol.iterator;function le(e){return typeof e!=`object`||!e?null:(e=ce&&e[ce]||e[`@@iterator`],typeof e==`function`?e:null)}var ue=Symbol.for(`react.client.reference`);function de(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===ue?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case ne:return`Suspense`;case re:return`SuspenseList`;case oe:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case te:return e.displayName||`Context`;case ee:return(e._context.displayName||`Context`)+`.Consumer`;case S:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case ie:return t=e.displayName||null,t===null?de(e.type)||`Memo`:t;case ae:t=e._payload,e=e._init;try{return de(e(t))}catch{}}return null}var fe=Array.isArray,C=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},me=[],he=-1;function ge(e){return{current:e}}function T(e){0>he||(e.current=me[he],me[he]=null,he--)}function _e(e,t){he++,me[he]=e.current,e.current=t}var ve=ge(null),ye=ge(null),be=ge(null),xe=ge(null);function Se(e,t){switch(_e(be,t),_e(ye,e),_e(ve,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Gd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Gd(t),e=Kd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}T(ve),_e(ve,e)}function Ce(){T(ve),T(ye),T(be)}function we(e){e.memoizedState!==null&&_e(xe,e);var t=ve.current,n=Kd(t,e.type);t!==n&&(_e(ye,e),_e(ve,n))}function Te(e){ye.current===e&&(T(ve),T(ye)),xe.current===e&&(T(xe),tp._currentValue=pe)}var Ee,De;function Oe(e){if(Ee===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ee=t&&t[1]||``,De=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+Ee+e+De}var ke=!1;function Ae(e,t){if(!e||ke)return``;ke=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{ke=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?Oe(n):``}function je(e,t){switch(e.tag){case 26:case 27:case 5:return Oe(e.type);case 16:return Oe(`Lazy`);case 13:return e.child!==t&&t!==null?Oe(`Suspense Fallback`):Oe(`Suspense`);case 19:return Oe(`SuspenseList`);case 0:case 15:return Ae(e.type,!1);case 11:return Ae(e.type.render,!1);case 1:return Ae(e.type,!0);case 31:return Oe(`Activity`);default:return``}}function Me(e){try{var t=``,n=null;do t+=je(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Ne=Object.prototype.hasOwnProperty,Pe=t.unstable_scheduleCallback,Fe=t.unstable_cancelCallback,Ie=t.unstable_shouldYield,Le=t.unstable_requestPaint,Re=t.unstable_now,ze=t.unstable_getCurrentPriorityLevel,Be=t.unstable_ImmediatePriority,Ve=t.unstable_UserBlockingPriority,E=t.unstable_NormalPriority,He=t.unstable_LowPriority,Ue=t.unstable_IdlePriority,We=t.log,Ge=t.unstable_setDisableYieldValue,Ke=null,qe=null;function Je(e){if(typeof We==`function`&&Ge(e),qe&&typeof qe.setStrictMode==`function`)try{qe.setStrictMode(Ke,e)}catch{}}var D=Math.clz32?Math.clz32:Ze,Ye=Math.log,Xe=Math.LN2;function Ze(e){return e>>>=0,e===0?32:31-(Ye(e)/Xe|0)|0}var Qe=256,$e=262144,et=4194304;function tt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function nt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=tt(n))):i=tt(o):i=tt(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=tt(n))):i=tt(o)):i=tt(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function rt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function it(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function at(){var e=et;return et<<=1,!(et&62914560)&&(et=4194304),e}function ot(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function st(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ct(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-D(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&lt(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function lt(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-D(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function ut(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-D(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function dt(e,t){var n=t&-t;return n=n&42?1:ft(n),(n&(e.suspendedLanes|t))===0?n:0}function ft(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pt(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function mt(){var e=w.p;return e===0?(e=window.event,e===void 0?32:gp(e.type)):e}function ht(e,t){var n=w.p;try{return w.p=e,t()}finally{w.p=n}}var gt=Math.random().toString(36).slice(2),_t=`__reactFiber$`+gt,vt=`__reactProps$`+gt,yt=`__reactContainer$`+gt,bt=`__reactEvents$`+gt,xt=`__reactListeners$`+gt,St=`__reactHandles$`+gt,Ct=`__reactResources$`+gt,wt=`__reactMarker$`+gt;function Tt(e){delete e[_t],delete e[vt],delete e[bt],delete e[xt],delete e[St]}function Et(e){var t=e[_t];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yt]||n[_t]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hf(e);e!==null;){if(n=e[_t])return n;e=hf(e)}return t}e=n,n=e.parentNode}return null}function Dt(e){if(e=e[_t]||e[yt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ot(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function kt(e){var t=e[Ct];return t||=e[Ct]={hoistableStyles:new Map,hoistableScripts:new Map},t}function At(e){e[wt]=!0}var jt=new Set,Mt={};function Nt(e,t){Pt(e,t),Pt(e+`Capture`,t)}function Pt(e,t){for(Mt[e]=t,e=0;e<t.length;e++)jt.add(t[e])}var Ft=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),It={},Lt={};function Rt(e){return Ne.call(Lt,e)?!0:Ne.call(It,e)?!1:Ft.test(e)?Lt[e]=!0:(It[e]=!0,!1)}function zt(e,t,n){if(Rt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Bt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Vt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function O(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Ht(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Ut(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wt(e){if(!e._valueTracker){var t=Ht(e)?`checked`:`value`;e._valueTracker=Ut(e,t,``+e[t])}}function Gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Ht(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Kt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var qt=/[\n"\\]/g;function Jt(e){return e.replace(qt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Yt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+O(t)):e.value!==``+O(t)&&(e.value=``+O(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Zt(e,o,O(n)):Zt(e,o,O(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+O(s):e.removeAttribute(`name`)}function Xt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Wt(e);return}n=n==null?``:``+O(n),t=t==null?n:``+O(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Wt(e)}function Zt(e,t,n){t===`number`&&Kt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Qt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+O(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function $t(e,t,n){if(t!=null&&(t=``+O(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+O(n)}function en(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(fe(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=O(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Wt(e)}function tn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var nn=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function rn(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||nn.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function an(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&rn(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&rn(e,o,t[o])}function on(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var sn=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),cn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ln(e){return cn.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function un(){}var dn=null;function fn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pn=null,mn=null;function hn(e){var t=Dt(e);if(t&&(e=t.stateNode)){var n=e[vt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Jt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[vt]||null;if(!a)throw Error(i(90));Yt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Gt(r)}break a;case`textarea`:$t(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Qt(e,!!n.multiple,t,!1)}}}var gn=!1;function _n(e,t,n){if(gn)return e(t,n);gn=!0;try{return e(t)}finally{if(gn=!1,(pn!==null||mn!==null)&&(wu(),pn&&(t=pn,e=mn,mn=pn=null,hn(t),e)))for(t=0;t<e.length;t++)hn(e[t])}}function k(e,t){var n=e.stateNode;if(n===null)return null;var r=n[vt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var vn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),yn=!1;if(vn)try{var bn={};Object.defineProperty(bn,`passive`,{get:function(){yn=!0}}),window.addEventListener(`test`,bn,bn),window.removeEventListener(`test`,bn,bn)}catch{yn=!1}var xn=null,Sn=null,Cn=null;function wn(){if(Cn)return Cn;var e,t=Sn,n=t.length,r,i=`value`in xn?xn.value:xn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Cn=i.slice(e,1<r?1-r:void 0)}function Tn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function En(){return!0}function Dn(){return!1}function On(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?En:Dn,this.isPropagationStopped=Dn,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=En)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=En)},persist:function(){},isPersistent:En}),t}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},An=On(kn),jn=h({},kn,{view:0,detail:0}),Mn=On(jn),Nn,Pn,Fn,In=h({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Fn&&(Fn&&e.type===`mousemove`?(Nn=e.screenX-Fn.screenX,Pn=e.screenY-Fn.screenY):Pn=Nn=0,Fn=e),Nn)},movementY:function(e){return`movementY`in e?e.movementY:Pn}}),Ln=On(In),Rn=On(h({},In,{dataTransfer:0})),zn=On(h({},jn,{relatedTarget:0})),Bn=On(h({},kn,{animationName:0,elapsedTime:0,pseudoElement:0})),Vn=On(h({},kn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Hn=On(h({},kn,{data:0})),A={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Un={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Wn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wn[e])?!!t[e]:!1}function Kn(){return Gn}var qn=On(h({},jn,{key:function(e){if(e.key){var t=A[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=Tn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Un[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kn,charCode:function(e){return e.type===`keypress`?Tn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?Tn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Jn=On(h({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Yn=On(h({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kn})),Xn=On(h({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Zn=On(h({},In,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Qn=On(h({},kn,{newState:0,oldState:0})),$n=[9,13,27,32],er=vn&&`CompositionEvent`in window,tr=null;vn&&`documentMode`in document&&(tr=document.documentMode);var nr=vn&&`TextEvent`in window&&!tr,rr=vn&&(!er||tr&&8<tr&&11>=tr),ir=` `,ar=!1;function or(e,t){switch(e){case`keyup`:return $n.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function sr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var cr=!1;function lr(e,t){switch(e){case`compositionend`:return sr(t);case`keypress`:return t.which===32?(ar=!0,ir):null;case`textInput`:return e=t.data,e===ir&&ar?null:e;default:return null}}function ur(e,t){if(cr)return e===`compositionend`||!er&&or(e,t)?(e=wn(),Cn=Sn=xn=null,cr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return rr&&t.locale!==`ko`?null:t.data;default:return null}}var dr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!dr[e.type]:t===`textarea`}function pr(e,t,n,r){pn?mn?mn.push(r):mn=[r]:pn=r,t=kd(t,`onChange`),0<t.length&&(n=new An(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var mr=null,hr=null;function gr(e){Cd(e,0)}function _r(e){if(Gt(Ot(e)))return e}function vr(e,t){if(e===`change`)return t}var yr=!1;if(vn){var br;if(vn){var xr=`oninput`in document;if(!xr){var Sr=document.createElement(`div`);Sr.setAttribute(`oninput`,`return;`),xr=typeof Sr.oninput==`function`}br=xr}else br=!1;yr=br&&(!document.documentMode||9<document.documentMode)}function Cr(){mr&&(mr.detachEvent(`onpropertychange`,wr),hr=mr=null)}function wr(e){if(e.propertyName===`value`&&_r(hr)){var t=[];pr(t,hr,e,fn(e)),_n(gr,t)}}function Tr(e,t,n){e===`focusin`?(Cr(),mr=t,hr=n,mr.attachEvent(`onpropertychange`,wr)):e===`focusout`&&Cr()}function Er(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return _r(hr)}function Dr(e,t){if(e===`click`)return _r(t)}function Or(e,t){if(e===`input`||e===`change`)return _r(t)}function kr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Ar=typeof Object.is==`function`?Object.is:kr;function jr(e,t){if(Ar(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ne.call(t,i)||!Ar(e[i],t[i]))return!1}return!0}function Mr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nr(e,t){var n=Mr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Mr(n)}}function Pr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Kt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kt(e.document)}return t}function Ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Lr=vn&&`documentMode`in document&&11>=document.documentMode,Rr=null,zr=null,Br=null,Vr=!1;function Hr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vr||Rr==null||Rr!==Kt(r)||(r=Rr,`selectionStart`in r&&Ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Br&&jr(Br,r)||(Br=r,r=kd(zr,`onSelect`),0<r.length&&(t=new An(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Rr)))}function Ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Wr={animationend:Ur(`Animation`,`AnimationEnd`),animationiteration:Ur(`Animation`,`AnimationIteration`),animationstart:Ur(`Animation`,`AnimationStart`),transitionrun:Ur(`Transition`,`TransitionRun`),transitionstart:Ur(`Transition`,`TransitionStart`),transitioncancel:Ur(`Transition`,`TransitionCancel`),transitionend:Ur(`Transition`,`TransitionEnd`)},Gr={},Kr={};vn&&(Kr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),`TransitionEvent`in window||delete Wr.transitionend.transition);function qr(e){if(Gr[e])return Gr[e];if(!Wr[e])return e;var t=Wr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Kr)return Gr[e]=t[n];return e}var Jr=qr(`animationend`),Yr=qr(`animationiteration`),Xr=qr(`animationstart`),Zr=qr(`transitionrun`),Qr=qr(`transitionstart`),$r=qr(`transitioncancel`),ei=qr(`transitionend`),ti=new Map,ni=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);ni.push(`scrollEnd`);function ri(e,t){ti.set(e,t),Nt(t,[e])}var ii=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},ai=[],oi=0,si=0;function ci(){for(var e=oi,t=si=oi=0;t<e;){var n=ai[t];ai[t++]=null;var r=ai[t];ai[t++]=null;var i=ai[t];ai[t++]=null;var a=ai[t];if(ai[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&fi(n,i,a)}}function li(e,t,n,r){ai[oi++]=e,ai[oi++]=t,ai[oi++]=n,ai[oi++]=r,si|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ui(e,t,n,r){return li(e,t,n,r),pi(e)}function di(e,t){return li(e,null,null,t),pi(e)}function fi(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-D(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function pi(e){if(50<hu)throw hu=0,gu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var mi={};function hi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(e,t,n,r){return new hi(e,t,n,r)}function _i(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vi(e,t){var n=e.alternate;return n===null?(n=gi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function yi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function bi(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)_i(e)&&(s=1);else if(typeof e==`string`)s=Kf(e,n,ve.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case oe:return e=gi(31,n,t,a),e.elementType=oe,e.lanes=o,e;case y:return xi(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=gi(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case ne:return e=gi(13,n,t,a),e.elementType=ne,e.lanes=o,e;case re:return e=gi(19,n,t,a),e.elementType=re,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case te:s=10;break a;case ee:s=9;break a;case S:s=11;break a;case ie:s=14;break a;case ae:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=gi(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function xi(e,t,n,r){return e=gi(7,e,r,t),e.lanes=n,e}function Si(e,t,n){return e=gi(6,e,null,t),e.lanes=n,e}function Ci(e){var t=gi(18,null,null,0);return t.stateNode=e,t}function wi(e,t,n){return t=gi(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ti=new WeakMap;function Ei(e,t){if(typeof e==`object`&&e){var n=Ti.get(e);return n===void 0?(t={value:e,source:t,stack:Me(t)},Ti.set(e,t),t):n}return{value:e,source:t,stack:Me(t)}}var Di=[],Oi=0,ki=null,Ai=0,ji=[],Mi=0,Ni=null,Pi=1,Fi=``;function Ii(e,t){Di[Oi++]=Ai,Di[Oi++]=ki,ki=e,Ai=t}function Li(e,t,n){ji[Mi++]=Pi,ji[Mi++]=Fi,ji[Mi++]=Ni,Ni=e;var r=Pi;e=Fi;var i=32-D(r)-1;r&=~(1<<i),n+=1;var a=32-D(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pi=1<<32-D(t)+i|n<<i|r,Fi=a+e}else Pi=1<<a|n<<i|r,Fi=e}function Ri(e){e.return!==null&&(Ii(e,1),Li(e,1,0))}function zi(e){for(;e===ki;)ki=Di[--Oi],Di[Oi]=null,Ai=Di[--Oi],Di[Oi]=null;for(;e===Ni;)Ni=ji[--Mi],ji[Mi]=null,Fi=ji[--Mi],ji[Mi]=null,Pi=ji[--Mi],ji[Mi]=null}function Bi(e,t){ji[Mi++]=Pi,ji[Mi++]=Fi,ji[Mi++]=Ni,Pi=t.id,Fi=t.overflow,Ni=e}var Vi=null,Hi=null,j=!1,Ui=null,Wi=!1,Gi=Error(i(519));function Ki(e){throw Qi(Ei(Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Gi}function qi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[_t]=e,t[vt]=r,n){case`dialog`:J(`cancel`,t),J(`close`,t);break;case`iframe`:case`object`:case`embed`:J(`load`,t);break;case`video`:case`audio`:for(n=0;n<xd.length;n++)J(xd[n],t);break;case`source`:J(`error`,t);break;case`img`:case`image`:case`link`:J(`error`,t),J(`load`,t);break;case`details`:J(`toggle`,t);break;case`input`:J(`invalid`,t),Xt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:J(`invalid`,t);break;case`textarea`:J(`invalid`,t),en(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Fd(t.textContent,n)?(r.popover!=null&&(J(`beforetoggle`,t),J(`toggle`,t)),r.onScroll!=null&&J(`scroll`,t),r.onScrollEnd!=null&&J(`scrollend`,t),r.onClick!=null&&(t.onclick=un),t=!0):t=!1,t||Ki(e,!0)}function Ji(e){for(Vi=e.return;Vi;)switch(Vi.tag){case 5:case 31:case 13:Wi=!1;return;case 27:case 3:Wi=!0;return;default:Vi=Vi.return}}function Yi(e){if(e!==Vi)return!1;if(!j)return Ji(e),j=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||qd(e.type,e.memoizedProps)),n=!n),n&&Hi&&Ki(e),Ji(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Hi=mf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Hi=mf(e)}else t===27?(t=Hi,tf(e.type)?(e=pf,pf=null,Hi=e):Hi=t):Hi=Vi?ff(e.stateNode.nextSibling):null;return!0}function Xi(){Hi=Vi=null,j=!1}function Zi(){var e=Ui;return e!==null&&(tu===null?tu=e:tu.push.apply(tu,e),Ui=null),e}function Qi(e){Ui===null?Ui=[e]:Ui.push(e)}var $i=ge(null),ea=null,ta=null;function na(e,t,n){_e($i,t._currentValue),t._currentValue=n}function ra(e){e._currentValue=$i.current,T($i)}function ia(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function aa(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ia(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),ia(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function oa(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Ar(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===xe.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[tp]:e.push(tp))}a=a.return}e!==null&&aa(t,e,n,r),t.flags|=262144}function sa(e){for(e=e.firstContext;e!==null;){if(!Ar(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ca(e){ea=e,ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function la(e){return da(ea,e)}function ua(e,t){return ea===null&&ca(e),da(e,t)}function da(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ta===null){if(e===null)throw Error(i(308));ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ta=ta.next=t;return n}var fa=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},pa=t.unstable_scheduleCallback,ma=t.unstable_NormalPriority,ha={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ga(){return{controller:new fa,data:new Map,refCount:0}}function _a(e){e.refCount--,e.refCount===0&&pa(ma,function(){e.controller.abort()})}var va=null,ya=0,ba=0,xa=null;function Sa(e,t){if(va===null){var n=va=[];ya=0,ba=hd(),xa={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return ya++,t.then(Ca,Ca),t}function Ca(){if(--ya===0&&va!==null){xa!==null&&(xa.status=`fulfilled`);var e=va;va=null,ba=0,xa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function wa(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var Ta=C.S;C.S=function(e,t){iu=Re(),typeof t==`object`&&t&&typeof t.then==`function`&&Sa(e,t),Ta!==null&&Ta(e,t)};var Ea=ge(null);function Da(){var e=Ea.current;return e===null?Vl.pooledCache:e}function Oa(e,t){t===null?_e(Ea,Ea.current):_e(Ea,t.pool)}function ka(){var e=Da();return e===null?null:{parent:ha._currentValue,pool:e}}var Aa=Error(i(460)),ja=Error(i(474)),Ma=Error(i(542)),Na={then:function(){}};function Pa(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Fa(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(un,un),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,za(e),e;default:if(typeof t.status==`string`)t.then(un,un);else{if(e=Vl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,za(e),e}throw La=t,Aa}}function Ia(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(La=e,Aa):e}}var La=null;function Ra(){if(La===null)throw Error(i(459));var e=La;return La=null,e}function za(e){if(e===Aa||e===Ma)throw Error(i(483))}var Ba=null,Va=0;function Ha(e){var t=Va;return Va+=1,Ba===null&&(Ba=[]),Fa(Ba,e,t)}function Ua(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Wa(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Ga(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=vi(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=Si(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===ae&&Ia(i)===t.type)?(t=a(t,n.props),Ua(t,n),t.return=e,t):(t=bi(n.type,n.key,n.props,null,e.mode,r),Ua(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=wi(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=xi(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=Si(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=bi(t.type,t.key,t.props,null,e.mode,n),Ua(n,t),n.return=e,n;case v:return t=wi(t,e.mode,n),t.return=e,t;case ae:return t=Ia(t),f(e,t,n)}if(fe(t)||le(t))return t=xi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Ha(t),n);if(t.$$typeof===te)return f(e,ua(e,t),n);Wa(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case ae:return n=Ia(n),p(e,t,n,r)}if(fe(n)||le(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Ha(n),r);if(n.$$typeof===te)return p(e,t,ua(e,n),r);Wa(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case ae:return r=Ia(r),m(e,t,n,r,i)}if(fe(r)||le(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Ha(r),i);if(r.$$typeof===te)return m(e,t,n,ua(t,r),i);Wa(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),j&&Ii(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return j&&Ii(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),j&&Ii(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),j&&Ii(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return j&&Ii(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),j&&Ii(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===ae&&Ia(l)===r.type){n(e,r.sibling),c=a(r,o.props),Ua(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=xi(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=bi(o.type,o.key,o.props,null,e.mode,c),Ua(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=wi(o,e.mode,c),c.return=e,e=c}return s(e);case ae:return o=Ia(o),b(e,r,o,c)}if(fe(o))return h(e,r,o,c);if(le(o)){if(l=le(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Ha(o),c);if(o.$$typeof===te)return b(e,r,ua(e,o),c);Wa(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=Si(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Va=0;var i=b(e,t,n,r);return Ba=null,i}catch(t){if(t===Aa||t===Ma)throw t;var a=gi(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ka=Ga(!0),qa=Ga(!1),Ja=!1;function Ya(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Za(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Qa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,W&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=pi(e),fi(e,null,n),t}return li(e,r,t,n),pi(e)}function $a(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ut(e,n)}}function eo(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var to=!1;function no(){if(to){var e=xa;if(e!==null)throw e}}function ro(e,t,n,r){to=!1;var i=e.updateQueue;Ja=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(K&f)===f:(r&f)===f){f!==0&&f===ba&&(to=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:Ja=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Yl|=o,e.lanes=o,e.memoizedState=d}}function io(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function ao(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)io(n[e],t)}var oo=ge(null),so=ge(0);function co(e,t){e=ql,_e(so,e),_e(oo,t),ql=e|t.baseLanes}function lo(){_e(so,ql),_e(oo,oo.current)}function uo(){ql=so.current,T(oo),T(so)}var fo=ge(null),po=null;function mo(e){var t=e.alternate;_e(yo,yo.current&1),_e(fo,e),po===null&&(t===null||oo.current!==null||t.memoizedState!==null)&&(po=e)}function ho(e){_e(yo,yo.current),_e(fo,e),po===null&&(po=e)}function go(e){e.tag===22?(_e(yo,yo.current),_e(fo,e),po===null&&(po=e)):_o(e)}function _o(){_e(yo,yo.current),_e(fo,fo.current)}function vo(e){T(fo),po===e&&(po=null),T(yo)}var yo=ge(0);function bo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||lf(n)||uf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xo=0,M=null,So=null,Co=null,wo=!1,To=!1,Eo=!1,Do=0,Oo=0,ko=null,Ao=0;function jo(){throw Error(i(321))}function Mo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ar(e[n],t[n]))return!1;return!0}function No(e,t,n,r,i,a){return xo=a,M=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?L:R,Eo=!1,a=n(r,i),Eo=!1,To&&(a=Fo(t,n,r,i)),Po(e),a}function Po(e){C.H=I;var t=So!==null&&So.next!==null;if(xo=0,Co=So=M=null,wo=!1,Oo=0,ko=null,t)throw Error(i(300));e===null||sc||(e=e.dependencies,e!==null&&sa(e)&&(sc=!0))}function Fo(e,t,n,r){M=e;var a=0;do{if(To&&(ko=null),Oo=0,To=!1,25<=a)throw Error(i(301));if(a+=1,Co=So=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}C.H=Ks,o=t(n,r)}while(To);return o}function Io(){var e=C.H,t=e.useState()[0];return t=typeof t.then==`function`?Uo(t):t,e=e.useState()[0],(So===null?null:So.memoizedState)!==e&&(M.flags|=1024),t}function Lo(){var e=Do!==0;return Do=0,e}function Ro(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function zo(e){if(wo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}wo=!1}xo=0,Co=So=M=null,To=!1,Oo=Do=0,ko=null}function Bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Co===null?M.memoizedState=Co=e:Co=Co.next=e,Co}function Vo(){if(So===null){var e=M.alternate;e=e===null?null:e.memoizedState}else e=So.next;var t=Co===null?M.memoizedState:Co.next;if(t!==null)Co=t,So=e;else{if(e===null)throw M.alternate===null?Error(i(467)):Error(i(310));So=e,e={memoizedState:So.memoizedState,baseState:So.baseState,baseQueue:So.baseQueue,queue:So.queue,next:null},Co===null?M.memoizedState=Co=e:Co=Co.next=e}return Co}function Ho(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uo(e){var t=Oo;return Oo+=1,ko===null&&(ko=[]),e=Fa(ko,e,t),t=M,(Co===null?t.memoizedState:Co.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?L:R),e}function Wo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Uo(e);if(e.$$typeof===te)return la(e)}throw Error(i(438,String(e)))}function Go(e){var t=null,n=M.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=M.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Ho(),M.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=se;return t.index++,n}function Ko(e,t){return typeof t==`function`?t(e):t}function qo(e){return Jo(Vo(),So,e)}function Jo(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(xo&f)===f:(K&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===ba&&(d=!0);else if((xo&p)===p){u=u.next,p===ba&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,M.lanes|=p,Yl|=p;f=u.action,Eo&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,M.lanes|=f,Yl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Ar(o,e.memoizedState)&&(sc=!0,d&&(n=xa,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Yo(e){var t=Vo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Ar(o,t.memoizedState)||(sc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Xo(e,t,n){var r=M,a=Vo(),o=j;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Ar((So||a).memoizedState,n);if(s&&(a.memoizedState=n,sc=!0),a=a.queue,xs($o.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||Co!==null&&Co.memoizedState.tag&1){if(r.flags|=2048,gs(9,{destroy:void 0},Qo.bind(null,r,a,n,t),null),Vl===null)throw Error(i(349));o||xo&127||Zo(r,t,n)}return n}function Zo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=M.updateQueue,t===null?(t=Ho(),M.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qo(e,t,n,r){t.value=n,t.getSnapshot=r,es(t)&&ts(e)}function $o(e,t,n){return n(function(){es(t)&&ts(e)})}function es(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ar(e,n)}catch{return!0}}function ts(e){var t=di(e,2);t!==null&&yu(t,e,2)}function ns(e){var t=Bo();if(typeof e==`function`){var n=e;if(e=n(),Eo){Je(!0);try{n()}finally{Je(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:e},t}function rs(e,t,n,r){return e.baseState=n,Jo(e,So,typeof r==`function`?r:Ko)}function is(e,t,n,r,a){if(P(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};C.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,as(t,o)):(o.next=n.next,t.pending=n.next=o)}}function as(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=C.T,o={};C.T=o;try{var s=n(i,r),c=C.S;c!==null&&c(o,s),os(e,t,s)}catch(n){cs(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),C.T=a}}else try{a=n(i,r),os(e,t,a)}catch(n){cs(e,t,n)}}function os(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){ss(e,t,n)},function(n){return cs(e,t,n)}):ss(e,t,n)}function ss(e,t,n){t.status=`fulfilled`,t.value=n,ls(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,as(e,n)))}function cs(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,ls(t),t=t.next;while(t!==r)}e.action=null}function ls(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function us(e,t){return t}function ds(e,t){if(j){var n=Vl.formState;if(n!==null){a:{var r=M;if(j){if(Hi){b:{for(var i=Hi,a=Wi;i.nodeType!==8;){if(!a){i=null;break b}if(i=ff(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Hi=ff(i.nextSibling),r=i.data===`F!`;break a}}Ki(r)}r=!1}r&&(t=n[0])}}return n=Bo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:t},n.queue=r,n=Hs.bind(null,M,r),r.dispatch=n,r=ns(!1),a=Ws.bind(null,M,!1,r.queue),r=Bo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=is.bind(null,M,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function fs(e){return ps(Vo(),So,e)}function ps(e,t,n){if(t=Jo(e,t,us)[0],e=qo(Ko)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Uo(t)}catch(e){throw e===Aa?Ma:e}else r=t;t=Vo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(M.flags|=2048,gs(9,{destroy:void 0},ms.bind(null,i,n),null)),[r,a,e]}function ms(e,t){e.action=t}function hs(e){var t=Vo(),n=So;if(n!==null)return ps(t,n,e);Vo(),t=t.memoizedState,n=Vo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function gs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=M.updateQueue,t===null&&(t=Ho(),M.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function _s(){return Vo().memoizedState}function vs(e,t,n,r){var i=Bo();M.flags|=e,i.memoizedState=gs(1|t,{destroy:void 0},n,r===void 0?null:r)}function ys(e,t,n,r){var i=Vo();r=r===void 0?null:r;var a=i.memoizedState.inst;So!==null&&r!==null&&Mo(r,So.memoizedState.deps)?i.memoizedState=gs(t,a,n,r):(M.flags|=e,i.memoizedState=gs(1|t,a,n,r))}function bs(e,t){vs(8390656,8,e,t)}function xs(e,t){ys(2048,8,e,t)}function Ss(e){M.flags|=4;var t=M.updateQueue;if(t===null)t=Ho(),M.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Cs(e){var t=Vo().memoizedState;return Ss({ref:t,nextImpl:e}),function(){if(W&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function ws(e,t){return ys(4,2,e,t)}function Ts(e,t){return ys(4,4,e,t)}function Es(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ds(e,t,n){n=n==null?null:n.concat([e]),ys(4,4,Es.bind(null,t,e),n)}function Os(){}function ks(e,t){var n=Vo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function As(e,t){var n=Vo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Mo(t,r[1]))return r[0];if(r=e(),Eo){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r}function js(e,t,n){return n===void 0||xo&1073741824&&!(K&261930)?e.memoizedState=t:(e.memoizedState=n,e=vu(),M.lanes|=e,Yl|=e,n)}function Ms(e,t,n,r){return Ar(n,t)?n:oo.current===null?!(xo&42)||xo&1073741824&&!(K&261930)?(sc=!0,e.memoizedState=n):(e=vu(),M.lanes|=e,Yl|=e,t):(e=js(e,n,r),Ar(e,t)||(sc=!0),e)}function Ns(e,t,n,r,i){var a=w.p;w.p=a!==0&&8>a?a:8;var o=C.T,s={};C.T=s,Ws(e,!1,t,n);try{var c=i(),l=C.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?Us(e,t,wa(c,r),_u(e)):Us(e,t,r,_u(e))}catch(n){Us(e,t,{then:function(){},status:`rejected`,reason:n},_u())}finally{w.p=a,o!==null&&s.types!==null&&(o.types=s.types),C.T=o}}function Ps(){}function Fs(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Is(e).queue;Ns(e,a,t,pe,n===null?Ps:function(){return Ls(e),n(r)})}function Is(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:pe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ls(e){var t=Is(e);t.next===null&&(t=e.alternate.memoizedState),Us(e,t.next.queue,{},_u())}function Rs(){return la(tp)}function zs(){return Vo().memoizedState}function Bs(){return Vo().memoizedState}function Vs(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=_u();e=Za(n);var r=Qa(t,e,n);r!==null&&(yu(r,t,n),$a(r,t,n)),t={cache:ga()},e.payload=t;return}t=t.return}}function N(e,t,n){var r=_u();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},P(e)?Gs(t,n):(n=ui(e,t,n,r),n!==null&&(yu(n,e,r),F(n,t,r)))}function Hs(e,t,n){Us(e,t,n,_u())}function Us(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(P(e))Gs(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Ar(s,o))return li(e,t,i,0),Vl===null&&ci(),!1}catch{}if(n=ui(e,t,i,r),n!==null)return yu(n,e,r),F(n,t,r),!0}return!1}function Ws(e,t,n,r){if(r={lane:2,revertLane:hd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},P(e)){if(t)throw Error(i(479))}else t=ui(e,n,r,2),t!==null&&yu(t,e,2)}function P(e){var t=e.alternate;return e===M||t!==null&&t===M}function Gs(e,t){To=wo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function F(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ut(e,n)}}var I={readContext:la,use:Wo,useCallback:jo,useContext:jo,useEffect:jo,useImperativeHandle:jo,useLayoutEffect:jo,useInsertionEffect:jo,useMemo:jo,useReducer:jo,useRef:jo,useState:jo,useDebugValue:jo,useDeferredValue:jo,useTransition:jo,useSyncExternalStore:jo,useId:jo,useHostTransitionStatus:jo,useFormState:jo,useActionState:jo,useOptimistic:jo,useMemoCache:jo,useCacheRefresh:jo};I.useEffectEvent=jo;var L={readContext:la,use:Wo,useCallback:function(e,t){return Bo().memoizedState=[e,t===void 0?null:t],e},useContext:la,useEffect:bs,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),vs(4194308,4,Es.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vs(4194308,4,e,t)},useInsertionEffect:function(e,t){vs(4,2,e,t)},useMemo:function(e,t){var n=Bo();t=t===void 0?null:t;var r=e();if(Eo){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Bo();if(n!==void 0){var i=n(t);if(Eo){Je(!0);try{n(t)}finally{Je(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=N.bind(null,M,e),[r.memoizedState,e]},useRef:function(e){var t=Bo();return e={current:e},t.memoizedState=e},useState:function(e){e=ns(e);var t=e.queue,n=Hs.bind(null,M,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Os,useDeferredValue:function(e,t){return js(Bo(),e,t)},useTransition:function(){var e=ns(!1);return e=Ns.bind(null,M,e.queue,!0,!1),Bo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=M,a=Bo();if(j){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Vl===null)throw Error(i(349));K&127||Zo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,bs($o.bind(null,r,o,e),[e]),r.flags|=2048,gs(9,{destroy:void 0},Qo.bind(null,r,o,n,t),null),n},useId:function(){var e=Bo(),t=Vl.identifierPrefix;if(j){var n=Fi,r=Pi;n=(r&~(1<<32-D(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=Do++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=Ao++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Rs,useFormState:ds,useActionState:ds,useOptimistic:function(e){var t=Bo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ws.bind(null,M,!0,n),n.dispatch=t,[e,t]},useMemoCache:Go,useCacheRefresh:function(){return Bo().memoizedState=Vs.bind(null,M)},useEffectEvent:function(e){var t=Bo(),n={impl:e};return t.memoizedState=n,function(){if(W&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},R={readContext:la,use:Wo,useCallback:ks,useContext:la,useEffect:xs,useImperativeHandle:Ds,useInsertionEffect:ws,useLayoutEffect:Ts,useMemo:As,useReducer:qo,useRef:_s,useState:function(){return qo(Ko)},useDebugValue:Os,useDeferredValue:function(e,t){return Ms(Vo(),So.memoizedState,e,t)},useTransition:function(){var e=qo(Ko)[0],t=Vo().memoizedState;return[typeof e==`boolean`?e:Uo(e),t]},useSyncExternalStore:Xo,useId:zs,useHostTransitionStatus:Rs,useFormState:fs,useActionState:fs,useOptimistic:function(e,t){return rs(Vo(),So,e,t)},useMemoCache:Go,useCacheRefresh:Bs};R.useEffectEvent=Cs;var Ks={readContext:la,use:Wo,useCallback:ks,useContext:la,useEffect:xs,useImperativeHandle:Ds,useInsertionEffect:ws,useLayoutEffect:Ts,useMemo:As,useReducer:Yo,useRef:_s,useState:function(){return Yo(Ko)},useDebugValue:Os,useDeferredValue:function(e,t){var n=Vo();return So===null?js(n,e,t):Ms(n,So.memoizedState,e,t)},useTransition:function(){var e=Yo(Ko)[0],t=Vo().memoizedState;return[typeof e==`boolean`?e:Uo(e),t]},useSyncExternalStore:Xo,useId:zs,useHostTransitionStatus:Rs,useFormState:hs,useActionState:hs,useOptimistic:function(e,t){var n=Vo();return So===null?(n.baseState=e,[e,n.queue.dispatch]):rs(n,So,e,t)},useMemoCache:Go,useCacheRefresh:Bs};Ks.useEffectEvent=Cs;function qs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Js={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_u(),i=Za(r);i.payload=t,n!=null&&(i.callback=n),t=Qa(e,i,r),t!==null&&(yu(t,e,r),$a(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_u(),i=Za(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Qa(e,i,r),t!==null&&(yu(t,e,r),$a(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_u(),r=Za(n);r.tag=2,t!=null&&(r.callback=t),t=Qa(e,r,n),t!==null&&(yu(t,e,n),$a(t,e,n))}};function Ys(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!jr(n,r)||!jr(i,a):!0}function Xs(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Js.enqueueReplaceState(t,t.state,null)}function Zs(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Qs(e){ii(e)}function $s(e){console.error(e)}function ec(e){ii(e)}function tc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function z(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function nc(e,t,n){return n=Za(n),n.tag=3,n.payload={element:null},n.callback=function(){tc(e,t)},n}function rc(e){return e=Za(e),e.tag=3,e}function ic(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){z(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){z(t,n,r),typeof i!=`function`&&(su===null?su=new Set([this]):su.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function ac(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&oa(t,n,a,!0),n=fo.current,n!==null){switch(n.tag){case 31:case 13:return po===null?ju():n.alternate===null&&Jl===0&&(Jl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Na?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Yu(e,r,a)),!1;case 22:return n.flags|=65536,r===Na?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Yu(e,r,a)),!1}throw Error(i(435,n.tag))}return Yu(e,r,a),ju(),!1}if(j)return t=fo.current,t===null?(r!==Gi&&(t=Error(i(423),{cause:r}),Qi(Ei(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=Ei(r,n),a=nc(e.stateNode,r,a),eo(e,a),Jl!==4&&(Jl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Gi&&(e=Error(i(422),{cause:r}),Qi(Ei(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=Ei(o,n),eu===null?eu=[o]:eu.push(o),Jl!==4&&(Jl=2),t===null)return!0;r=Ei(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=nc(n.stateNode,r,e),eo(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(su===null||!su.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=rc(a),ic(a,e,n,r),eo(n,a),!1}n=n.return}while(n!==null);return!1}var oc=Error(i(461)),sc=!1;function cc(e,t,n,r){t.child=e===null?qa(t,null,n,r):Ka(t,e.child,n,r)}function lc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return ca(t),r=No(e,t,n,o,a,i),s=Lo(),e!==null&&!sc?(Ro(e,t,i),jc(e,t,i)):(j&&s&&Ri(t),t.flags|=1,cc(e,t,r,i),t.child)}function uc(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!_i(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,dc(e,t,a,r,i)):(e=bi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Mc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?jr:n,n(o,r)&&e.ref===t.ref)return jc(e,t,i)}return t.flags|=1,e=vi(a,r),e.ref=t.ref,e.return=t,t.child=e}function dc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(jr(a,r)&&e.ref===t.ref)if(sc=!1,t.pendingProps=r=a,Mc(e,i))e.flags&131072&&(sc=!0);else return t.lanes=e.lanes,jc(e,t,i)}return vc(e,t,n,r,i)}function fc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return pc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Oa(t,a===null?null:a.cachePool),a===null?lo():co(t,a),go(t);else return r=t.lanes=536870912,pc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&Oa(t,null),lo(),_o(t)):(Oa(t,a.cachePool),co(t,a),_o(t),t.memoizedState=null);return cc(e,t,i,n),t.child}function B(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function pc(e,t,n,r,i){var a=Da();return a=a===null?null:{parent:ha._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&Oa(t,null),lo(),go(t),e!==null&&oa(e,t,r,!0),t.childLanes=i,null}function mc(e,t){return t=Ec({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function hc(e,t,n){return Ka(t,e.child,null,n),e=mc(t,t.pendingProps),e.flags|=2,vo(t),t.memoizedState=null,e}function gc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(j){if(r.mode===`hidden`)return e=mc(t,r),t.lanes=536870912,B(null,e);if(ho(t),(e=Hi)?(e=cf(e,Wi),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ni===null?null:{id:Pi,overflow:Fi},retryLane:536870912,hydrationErrors:null},n=Ci(e),n.return=t,t.child=n,Vi=t,Hi=null)):e=null,e===null)throw Ki(t);return t.lanes=536870912,null}return mc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(ho(t),a)if(t.flags&256)t.flags&=-257,t=hc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(sc||oa(e,t,n,!1),a=(n&e.childLanes)!==0,sc||a){if(r=Vl,r!==null&&(s=dt(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,di(e,s),yu(r,e,s),oc;ju(),t=hc(e,t,n)}else e=o.treeContext,Hi=ff(s.nextSibling),Vi=t,j=!0,Ui=null,Wi=!1,e!==null&&Bi(t,e),t=mc(t,r),t.flags|=4096;return t}return e=vi(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function _c(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function vc(e,t,n,r,i){return ca(t),n=No(e,t,n,r,void 0,i),r=Lo(),e!==null&&!sc?(Ro(e,t,i),jc(e,t,i)):(j&&r&&Ri(t),t.flags|=1,cc(e,t,n,i),t.child)}function yc(e,t,n,r,i,a){return ca(t),t.updateQueue=null,n=Fo(t,r,n,i),Po(e),r=Lo(),e!==null&&!sc?(Ro(e,t,a),jc(e,t,a)):(j&&r&&Ri(t),t.flags|=1,cc(e,t,n,a),t.child)}function bc(e,t,n,r,i){if(ca(t),t.stateNode===null){var a=mi,o=n.contextType;typeof o==`object`&&o&&(a=la(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Js,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Ya(t),o=n.contextType,a.context=typeof o==`object`&&o?la(o):mi,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(qs(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Js.enqueueReplaceState(a,a.state,null),ro(t,r,a,i),no(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Zs(n,s);a.props=c;var l=a.context,u=n.contextType;o=mi,typeof u==`object`&&u&&(o=la(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Xs(t,a,r,o),Ja=!1;var f=t.memoizedState;a.state=f,ro(t,r,a,i),no(),l=t.memoizedState,s||f!==l||Ja?(typeof d==`function`&&(qs(t,n,d,r),l=t.memoizedState),(c=Ja||Ys(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Xa(e,t),o=t.memoizedProps,u=Zs(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=mi,typeof l==`object`&&l&&(c=la(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Xs(t,a,r,c),Ja=!1,f=t.memoizedState,a.state=f,ro(t,r,a,i),no();var p=t.memoizedState;o!==d||f!==p||Ja||e!==null&&e.dependencies!==null&&sa(e.dependencies)?(typeof s==`function`&&(qs(t,n,s,r),p=t.memoizedState),(u=Ja||Ys(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&sa(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,_c(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ka(t,e.child,null,i),t.child=Ka(t,null,n,i)):cc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=jc(e,t,i),e}function xc(e,t,n,r){return Xi(),t.flags|=256,cc(e,t,n,r),t.child}var Sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cc(e){return{baseLanes:e,cachePool:ka()}}function wc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Ql),e}function Tc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(yo.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(j){if(a?mo(t):_o(t),(e=Hi)?(e=cf(e,Wi),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ni===null?null:{id:Pi,overflow:Fi},retryLane:536870912,hydrationErrors:null},n=Ci(e),n.return=t,t.child=n,Vi=t,Hi=null)):e=null,e===null)throw Ki(t);return uf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(_o(t),a=t.mode,c=Ec({mode:`hidden`,children:c},a),r=xi(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=Cc(n),r.childLanes=wc(e,s,n),t.memoizedState=Sc,B(null,r)):(mo(t),V(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(mo(t),t.flags&=-257,t=Dc(e,t,n)):t.memoizedState===null?(_o(t),c=r.fallback,a=t.mode,r=Ec({mode:`visible`,children:r.children},a),c=xi(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ka(t,e.child,null,n),r=t.child,r.memoizedState=Cc(n),r.childLanes=wc(e,s,n),t.memoizedState=Sc,t=B(null,r)):(_o(t),t.child=e.child,t.flags|=128,t=null);else if(mo(t),uf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,Qi({value:r,source:null,stack:null}),t=Dc(e,t,n)}else if(sc||oa(e,t,n,!1),s=(n&e.childLanes)!==0,sc||s){if(s=Vl,s!==null&&(r=dt(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,di(e,r),yu(s,e,r),oc;lf(c)||ju(),t=Dc(e,t,n)}else lf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Hi=ff(c.nextSibling),Vi=t,j=!0,Ui=null,Wi=!1,e!==null&&Bi(t,e),t=V(t,r.children),t.flags|=4096);return t}return a?(_o(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=vi(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=xi(c,a,n,null),c.flags|=2):c=vi(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,B(null,r),r=t.child,c=e.child.memoizedState,c===null?c=Cc(n):(a=c.cachePool,a===null?a=ka():(l=ha._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=wc(e,s,n),t.memoizedState=Sc,B(e.child,r)):(mo(t),n=e.child,e=n.sibling,n=vi(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function V(e,t){return t=Ec({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Ec(e,t){return e=gi(22,e,null,t),e.lanes=0,e}function Dc(e,t,n){return Ka(t,e.child,null,n),e=V(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Oc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ia(e.return,t,n)}function kc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Ac(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=yo.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,_e(yo,o),cc(e,t,r,n),r=j?Ai:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oc(e,n,t);else if(e.tag===19)Oc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&bo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),kc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&bo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}kc(t,!0,n,null,a,r);break;case`together`:kc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function jc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(oa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=vi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Mc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&sa(e))):!0}function Nc(e,t,n){switch(t.tag){case 3:Se(t,t.stateNode.containerInfo),na(t,ha,e.memoizedState.cache),Xi();break;case 27:case 5:we(t);break;case 4:Se(t,t.stateNode.containerInfo);break;case 10:na(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ho(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(mo(t),e=jc(e,t,n),e===null?null:e.sibling):Tc(e,t,n):(mo(t),t.flags|=128,null);mo(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(oa(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Ac(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(yo,yo.current),r)break;return null;case 22:return t.lanes=0,fc(e,t,n,t.pendingProps);case 24:na(t,ha,e.memoizedState.cache)}return jc(e,t,n)}function Pc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)sc=!0;else{if(!Mc(e,n)&&!(t.flags&128))return sc=!1,Nc(e,t,n);sc=!!(e.flags&131072)}else sc=!1,j&&t.flags&1048576&&Li(t,Ai,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Ia(t.elementType),t.type=e,typeof e==`function`)_i(e)?(r=Zs(e,r),t.tag=1,t=bc(null,t,e,r,n)):(t.tag=0,t=vc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===S){t.tag=11,t=lc(null,t,e,r,n);break a}else if(a===ie){t.tag=14,t=uc(null,t,e,r,n);break a}}throw t=de(e)||e,Error(i(306,t,``))}}return t;case 0:return vc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=Zs(r,t.pendingProps),bc(e,t,r,a,n);case 3:a:{if(Se(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Xa(e,t),ro(t,r,null,n);var s=t.memoizedState;if(r=s.cache,na(t,ha,r),r!==o.cache&&aa(t,[ha],n,!0),no(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=xc(e,t,r,n);break a}else if(r!==a){a=Ei(Error(i(424)),t),Qi(a),t=xc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Hi=ff(e.firstChild),Vi=t,j=!0,Ui=null,Wi=!0,n=qa(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Xi(),r===a){t=jc(e,t,n);break a}cc(e,t,r,n)}t=t.child}return t;case 26:return _c(e,t),e===null?(n=Mf(t.type,null,t.pendingProps,null))?t.memoizedState=n:j||(n=t.type,e=t.pendingProps,r=Wd(be.current).createElement(n),r[_t]=t,r[vt]=e,Rd(r,n,e),At(r),t.stateNode=r):t.memoizedState=Mf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return we(t),e===null&&j&&(r=t.stateNode=gf(t.type,t.pendingProps,be.current),Vi=t,Wi=!0,a=Hi,tf(t.type)?(pf=a,Hi=ff(r.firstChild)):Hi=a),cc(e,t,t.pendingProps.children,n),_c(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&j&&((a=r=Hi)&&(r=of(r,t.type,t.pendingProps,Wi),r===null?a=!1:(t.stateNode=r,Vi=t,Hi=ff(r.firstChild),Wi=!1,a=!0)),a||Ki(t)),we(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,qd(a,o)?r=null:s!==null&&qd(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=No(e,t,Io,null,null,n),tp._currentValue=a),_c(e,t),cc(e,t,r,n),t.child;case 6:return e===null&&j&&((e=n=Hi)&&(n=sf(n,t.pendingProps,Wi),n===null?e=!1:(t.stateNode=n,Vi=t,Hi=null,e=!0)),e||Ki(t)),null;case 13:return Tc(e,t,n);case 4:return Se(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ka(t,null,r,n):cc(e,t,r,n),t.child;case 11:return lc(e,t,t.type,t.pendingProps,n);case 7:return cc(e,t,t.pendingProps,n),t.child;case 8:return cc(e,t,t.pendingProps.children,n),t.child;case 12:return cc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,na(t,t.type,r.value),cc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,ca(t),a=la(a),r=r(a),t.flags|=1,cc(e,t,r,n),t.child;case 14:return uc(e,t,t.type,t.pendingProps,n);case 15:return dc(e,t,t.type,t.pendingProps,n);case 19:return Ac(e,t,n);case 31:return gc(e,t,n);case 22:return fc(e,t,n,t.pendingProps);case 24:return ca(t),r=la(ha),e===null?(a=Da(),a===null&&(a=Vl,o=ga(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Ya(t),na(t,ha,a)):((e.lanes&n)!==0&&(Xa(e,t),ro(t,null,null,n),no()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,na(t,ha,r),r!==a.cache&&aa(t,[ha],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),na(t,ha,r))),cc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Fc(e){e.flags|=4}function Ic(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Ou())e.flags|=8192;else throw La=Na,ja}else e.flags&=-16777217}function Lc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!qf(t))if(Ou())e.flags|=8192;else throw La=Na,ja}function Rc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:at(),e.lanes|=t,$l|=t)}function H(e,t){if(!j)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function U(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zc(e,t,n){var r=t.pendingProps;switch(zi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return U(t),null;case 1:return U(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ra(ha),Ce(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Yi(t)?Fc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zi())),U(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(Fc(t),o===null?(U(t),Ic(t,a,null,r,n)):(U(t),Lc(t,o))):o?o===e.memoizedState?(U(t),t.flags&=-16777217):(Fc(t),U(t),Lc(t,o)):(e=e.memoizedProps,e!==r&&Fc(t),U(t),Ic(t,a,e,r,n)),null;case 27:if(Te(t),n=be.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Fc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return U(t),null}e=ve.current,Yi(t)?qi(t,e):(e=gf(a,r,n),t.stateNode=e,Fc(t))}return U(t),null;case 5:if(Te(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Fc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return U(t),null}if(o=ve.current,Yi(t))qi(t,o);else{var s=Wd(be.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[_t]=t,o[vt]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Rd(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Fc(t)}}return U(t),Ic(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Fc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=be.current,Yi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Vi,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[_t]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Fd(e.nodeValue,n)),e||Ki(t,!0)}else e=Wd(e).createTextNode(r),e[_t]=t,t.stateNode=e}return U(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Yi(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[_t]=t}else Xi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;U(t),e=!1}else n=Zi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(vo(t),t):(vo(t),null);if(t.flags&128)throw Error(i(558))}return U(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Yi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[_t]=t}else Xi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;U(t),a=!1}else a=Zi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(vo(t),t):(vo(t),null)}return vo(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Rc(t,t.updateQueue),U(t),null);case 4:return Ce(),e===null&&Ed(t.stateNode.containerInfo),U(t),null;case 10:return ra(t.type),U(t),null;case 19:if(T(yo),r=t.memoizedState,r===null)return U(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)H(r,!1);else{if(Jl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=bo(e),o!==null){for(t.flags|=128,H(r,!1),e=o.updateQueue,t.updateQueue=e,Rc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)yi(n,e),n=n.sibling;return _e(yo,yo.current&1|2),j&&Ii(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Re()>au&&(t.flags|=128,a=!0,H(r,!1),t.lanes=4194304)}else{if(!a)if(e=bo(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Rc(t,e),H(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!j)return U(t),null}else 2*Re()-r.renderingStartTime>au&&n!==536870912&&(t.flags|=128,a=!0,H(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(U(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Re(),e.sibling=null,n=yo.current,_e(yo,a?n&1|2:n&1),j&&Ii(t,r.treeForkCount),e);case 22:case 23:return vo(t),uo(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(U(t),t.subtreeFlags&6&&(t.flags|=8192)):U(t),n=t.updateQueue,n!==null&&Rc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&T(Ea),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ra(ha),U(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Bc(e,t){switch(zi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ra(ha),Ce(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Te(t),null;case 31:if(t.memoizedState!==null){if(vo(t),t.alternate===null)throw Error(i(340));Xi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(vo(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Xi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return T(yo),null;case 4:return Ce(),null;case 10:return ra(t.type),null;case 22:case 23:return vo(t),uo(),e!==null&&T(Ea),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ra(ha),null;case 25:return null;default:return null}}function Vc(e,t){switch(zi(t),t.tag){case 3:ra(ha),Ce();break;case 26:case 27:case 5:Te(t);break;case 4:Ce();break;case 31:t.memoizedState!==null&&vo(t);break;case 13:vo(t);break;case 19:T(yo);break;case 10:ra(t.type);break;case 22:case 23:vo(t),uo(),e!==null&&T(Ea);break;case 24:ra(ha)}}function Hc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){q(t,t.return,e)}}function Uc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){q(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){q(t,t.return,e)}}function Wc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{ao(t,n)}catch(t){q(e,e.return,t)}}}function Gc(e,t,n){n.props=Zs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){q(e,t,n)}}function Kc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){q(e,t,n)}}function qc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){q(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){q(e,t,n)}else n.current=null}function Jc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){q(e,e.return,t)}}function Yc(e,t,n){try{var r=e.stateNode;zd(r,e.type,n,t),r[vt]=t}catch(t){q(e,e.return,t)}}function Xc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&tf(e.type)||e.tag===4}function Zc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Xc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&tf(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=un));else if(r!==4&&(r===27&&tf(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Qc(e,t,n),e=e.sibling;e!==null;)Qc(e,t,n),e=e.sibling}function $c(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&tf(e.type)&&(n=e.stateNode),e=e.child,e!==null))for($c(e,t,n),e=e.sibling;e!==null;)$c(e,t,n),e=e.sibling}function el(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Rd(t,r,n),t[_t]=e,t[vt]=n}catch(t){q(e,e.return,t)}}var tl=!1,nl=!1,rl=!1,il=typeof WeakSet==`function`?WeakSet:Set,al=null;function ol(e,t){if(e=e.containerInfo,Hd=up,e=Fr(e),Ir(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Ud={focusedElem:e,selectionRange:n},up=!1,al=t;al!==null;)if(t=al,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,al=e;else for(;al!==null;){switch(t=al,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=Zs(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){q(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)af(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:af(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,al=e;break}al=t.return}}function sl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Sl(e,n),r&4&&Hc(5,n);break;case 1:if(Sl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){q(n,n.return,e)}else{var i=Zs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){q(n,n.return,e)}}r&64&&Wc(n),r&512&&Kc(n,n.return);break;case 3:if(Sl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{ao(e,t)}catch(e){q(n,n.return,e)}}break;case 27:t===null&&r&4&&el(n);case 26:case 5:Sl(e,n),t===null&&r&4&&Jc(n),r&512&&Kc(n,n.return);break;case 12:Sl(e,n);break;case 31:Sl(e,n),r&4&&pl(e,n);break;case 13:Sl(e,n),r&4&&ml(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Qu.bind(null,n),df(e,n))));break;case 22:if(r=n.memoizedState!==null||tl,!r){t=t!==null&&t.memoizedState!==null||nl,i=tl;var a=nl;tl=r,(nl=t)&&!a?wl(e,n,(n.subtreeFlags&8772)!=0):Sl(e,n),tl=i,nl=a}break;case 30:break;default:Sl(e,n)}}function cl(e){var t=e.alternate;t!==null&&(e.alternate=null,cl(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Tt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ll=null,ul=!1;function dl(e,t,n){for(n=n.child;n!==null;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(qe&&typeof qe.onCommitFiberUnmount==`function`)try{qe.onCommitFiberUnmount(Ke,n)}catch{}switch(n.tag){case 26:nl||qc(n,t),dl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:nl||qc(n,t);var r=ll,i=ul;tf(n.type)&&(ll=n.stateNode,ul=!1),dl(e,t,n),_f(n.stateNode),ll=r,ul=i;break;case 5:nl||qc(n,t);case 6:if(r=ll,i=ul,ll=null,dl(e,t,n),ll=r,ul=i,ll!==null)if(ul)try{(ll.nodeType===9?ll.body:ll.nodeName===`HTML`?ll.ownerDocument.body:ll).removeChild(n.stateNode)}catch(e){q(n,t,e)}else try{ll.removeChild(n.stateNode)}catch(e){q(n,t,e)}break;case 18:ll!==null&&(ul?(e=ll,nf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Fp(e)):nf(ll,n.stateNode));break;case 4:r=ll,i=ul,ll=n.stateNode.containerInfo,ul=!0,dl(e,t,n),ll=r,ul=i;break;case 0:case 11:case 14:case 15:Uc(2,n,t),nl||Uc(4,n,t),dl(e,t,n);break;case 1:nl||(qc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Gc(n,t,r)),dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:nl=(r=nl)||n.memoizedState!==null,dl(e,t,n),nl=r;break;default:dl(e,t,n)}}function pl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Fp(e)}catch(e){q(t,t.return,e)}}}function ml(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Fp(e)}catch(e){q(t,t.return,e)}}function hl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new il),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new il),t;default:throw Error(i(435,e.tag))}}function gl(e,t){var n=hl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=$u.bind(null,e,t);t.then(r,r)}})}function _l(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(tf(c.type)){ll=c.stateNode,ul=!1;break a}break;case 5:ll=c.stateNode,ul=!1;break a;case 3:case 4:ll=c.stateNode.containerInfo,ul=!0;break a}c=c.return}if(ll===null)throw Error(i(160));fl(o,s,a),ll=null,ul=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)yl(t,e),t=t.sibling}var vl=null;function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_l(t,e),bl(e),r&4&&(Uc(3,e,e.return),Hc(3,e),Uc(5,e,e.return));break;case 1:_l(t,e),bl(e),r&512&&(nl||n===null||qc(n,n.return)),r&64&&tl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=vl;if(_l(t,e),bl(e),r&512&&(nl||n===null||qc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[wt]||o[_t]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Rd(o,r,n),o[_t]=e,At(o),r=o;break a;case`link`:var s=Wf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Rd(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Wf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Rd(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[_t]=e,At(o),r=o}e.stateNode=r}else Gf(a,e.type,e.stateNode);else e.stateNode=zf(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&Yc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?Gf(a,e.type,e.stateNode):zf(a,r,e.memoizedProps))}break;case 27:_l(t,e),bl(e),r&512&&(nl||n===null||qc(n,n.return)),n!==null&&r&4&&Yc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(_l(t,e),bl(e),r&512&&(nl||n===null||qc(n,n.return)),e.flags&32){a=e.stateNode;try{tn(a,``)}catch(t){q(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,Yc(e,a,n===null?a:n.memoizedProps)),r&1024&&(rl=!0);break;case 6:if(_l(t,e),bl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){q(e,e.return,t)}}break;case 3:if(Uf=null,a=vl,vl=bf(t.containerInfo),_l(t,e),vl=a,bl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fp(t.containerInfo)}catch(t){q(e,e.return,t)}rl&&(rl=!1,xl(e));break;case 4:r=vl,vl=bf(e.stateNode.containerInfo),_l(t,e),bl(e),vl=r;break;case 12:_l(t,e),bl(e);break;case 31:_l(t,e),bl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 13:_l(t,e),bl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ru=Re()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=tl,d=nl;if(tl=u||a,nl=d||l,_l(t,e),nl=d,tl=u,bl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||tl||nl||Cl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){q(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){q(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?rf(m,!0):rf(l.stateNode,!1)}catch(e){q(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,gl(e,n))));break;case 19:_l(t,e),bl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 30:break;case 21:break;default:_l(t,e),bl(e)}}function bl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Xc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;$c(e,Zc(e),a);break;case 5:var o=n.stateNode;n.flags&32&&(tn(o,``),n.flags&=-33),$c(e,Zc(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;Qc(e,Zc(e),s);break;default:throw Error(i(161))}}catch(t){q(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;xl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Sl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)sl(e,t.alternate,t),t=t.sibling}function Cl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Uc(4,t,t.return),Cl(t);break;case 1:qc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Gc(t,t.return,n),Cl(t);break;case 27:_f(t.stateNode);case 26:case 5:qc(t,t.return),Cl(t);break;case 22:t.memoizedState===null&&Cl(t);break;case 30:Cl(t);break;default:Cl(t)}e=e.sibling}}function wl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:wl(i,a,n),Hc(4,a);break;case 1:if(wl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){q(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)io(c[i],s)}catch(e){q(r,r.return,e)}}n&&o&64&&Wc(a),Kc(a,a.return);break;case 27:el(a);case 26:case 5:wl(i,a,n),n&&r===null&&o&4&&Jc(a),Kc(a,a.return);break;case 12:wl(i,a,n);break;case 31:wl(i,a,n),n&&o&4&&pl(i,a);break;case 13:wl(i,a,n),n&&o&4&&ml(i,a);break;case 22:a.memoizedState===null&&wl(i,a,n),Kc(a,a.return);break;case 30:break;default:wl(i,a,n)}t=t.sibling}}function Tl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&_a(n))}function El(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_a(e))}function Dl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ol(e,t,n,r),t=t.sibling}function Ol(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Dl(e,t,n,r),i&2048&&Hc(9,t);break;case 1:Dl(e,t,n,r);break;case 3:Dl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_a(e)));break;case 12:if(i&2048){Dl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){q(t,t.return,e)}}else Dl(e,t,n,r);break;case 31:Dl(e,t,n,r);break;case 13:Dl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Dl(e,t,n,r):(a._visibility|=2,kl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Dl(e,t,n,r):Al(e,t),i&2048&&Tl(o,t);break;case 24:Dl(e,t,n,r),i&2048&&El(t.alternate,t);break;default:Dl(e,t,n,r)}}function kl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:kl(a,o,s,c,i),Hc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,kl(a,o,s,c,i)):u._visibility&2?kl(a,o,s,c,i):Al(a,o),i&&l&2048&&Tl(o.alternate,o);break;case 24:kl(a,o,s,c,i),i&&l&2048&&El(o.alternate,o);break;default:kl(a,o,s,c,i)}t=t.sibling}}function Al(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Al(n,r),i&2048&&Tl(r.alternate,r);break;case 24:Al(n,r),i&2048&&El(r.alternate,r);break;default:Al(n,r)}t=t.sibling}}var jl=8192;function Ml(e,t,n){if(e.subtreeFlags&jl)for(e=e.child;e!==null;)Nl(e,t,n),e=e.sibling}function Nl(e,t,n){switch(e.tag){case 26:Ml(e,t,n),e.flags&jl&&e.memoizedState!==null&&Jf(n,vl,e.memoizedState,e.memoizedProps);break;case 5:Ml(e,t,n);break;case 3:case 4:var r=vl;vl=bf(e.stateNode.containerInfo),Ml(e,t,n),vl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=jl,jl=16777216,Ml(e,t,n),jl=r):Ml(e,t,n));break;default:Ml(e,t,n)}}function Pl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Fl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];al=r,Rl(r,e)}Pl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Il(e),e=e.sibling}function Il(e){switch(e.tag){case 0:case 11:case 15:Fl(e),e.flags&2048&&Uc(9,e,e.return);break;case 3:Fl(e);break;case 12:Fl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ll(e)):Fl(e);break;default:Fl(e)}}function Ll(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];al=r,Rl(r,e)}Pl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Uc(8,t,t.return),Ll(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ll(t));break;default:Ll(t)}e=e.sibling}}function Rl(e,t){for(;al!==null;){var n=al;switch(n.tag){case 0:case 11:case 15:Uc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:_a(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,al=r;else a:for(n=e;al!==null;){r=al;var i=r.sibling,a=r.return;if(cl(r),r===n){al=null;break a}if(i!==null){i.return=a,al=i;break a}al=a}}}var zl={getCacheForType:function(e){var t=la(ha),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return la(ha).controller.signal}},Bl=typeof WeakMap==`function`?WeakMap:Map,W=0,Vl=null,G=null,K=0,Hl=0,Ul=null,Wl=!1,Gl=!1,Kl=!1,ql=0,Jl=0,Yl=0,Xl=0,Zl=0,Ql=0,$l=0,eu=null,tu=null,nu=!1,ru=0,iu=0,au=1/0,ou=null,su=null,cu=0,lu=null,uu=null,du=0,fu=0,pu=null,mu=null,hu=0,gu=null;function _u(){return W&2&&K!==0?K&-K:C.T===null?mt():hd()}function vu(){if(Ql===0)if(!(K&536870912)||j){var e=$e;$e<<=1,!($e&3932160)&&($e=262144),Ql=e}else Ql=536870912;return e=fo.current,e!==null&&(e.flags|=32),Ql}function yu(e,t,n){(e===Vl&&(Hl===2||Hl===9)||e.cancelPendingCommit!==null)&&(Eu(e,0),Cu(e,K,Ql,!1)),st(e,n),(!(W&2)||e!==Vl)&&(e===Vl&&(!(W&2)&&(Xl|=n),Jl===4&&Cu(e,K,Ql,!1)),sd(e))}function bu(e,t,n){if(W&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||rt(e,t),a=r?Pu(e,t):Mu(e,t,!0),o=r;do{if(a===0){Gl&&!r&&Cu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Su(n)){a=Mu(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=eu;var l=c.current.memoizedState.isDehydrated;if(l&&(Eu(c,s).flags|=256),s=Mu(c,s,!1),s!==2){if(Kl&&!l){c.errorRecoveryDisabledLanes|=o,Xl|=o,a=4;break a}o=tu,tu=a,o!==null&&(tu===null?tu=o:tu.push.apply(tu,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Eu(e,0),Cu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Cu(r,t,Ql,!Wl);break a;case 2:tu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=ru+300-Re(),10<a)){if(Cu(r,t,Ql,!Wl),nt(r,0,!0)!==0)break a;du=t,r.timeoutHandle=Xd(xu.bind(null,r,n,tu,ou,nu,t,Ql,Xl,$l,Wl,o,`Throttled`,-0,0),a);break a}xu(r,n,tu,ou,nu,t,Ql,Xl,$l,Wl,o,null,-0,0)}}break}while(1);sd(e)}function xu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:un},Nl(t,a,d);var m=(a&62914560)===a?ru-Re():(a&4194048)===a?iu-Re():0;if(m=Xf(d,m),m!==null){du=a,e.cancelPendingCommit=m(Vu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),Cu(e,a,o,!l);return}}Vu(e,t,a,n,r,i,o,s,c)}function Su(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ar(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cu(e,t,n,r){t&=~Zl,t&=~Xl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-D(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&lt(e,n,t)}function wu(){return W&6?!0:(cd(0,!1),!1)}function Tu(){if(G!==null){if(Hl===0)var e=G.return;else e=G,ta=ea=null,zo(e),Ba=null,Va=0,e=G;for(;e!==null;)Vc(e.alternate,e),e=e.return;G=null}}function Eu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Zd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),du=0,Tu(),Vl=e,G=n=vi(e.current,null),K=t,Hl=0,Ul=null,Wl=!1,Gl=rt(e,t),Kl=!1,$l=Ql=Zl=Xl=Yl=Jl=0,tu=eu=null,nu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-D(r),a=1<<i;t|=e[i],r&=~a}return ql=t,ci(),n}function Du(e,t){M=null,C.H=I,t===Aa||t===Ma?(t=Ra(),Hl=3):t===ja?(t=Ra(),Hl=4):Hl=t===oc?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Ul=t,G===null&&(Jl=1,tc(e,Ei(t,e.current)))}function Ou(){var e=fo.current;return e===null?!0:(K&4194048)===K?po===null:(K&62914560)===K||K&536870912?e===po:!1}function ku(){var e=C.H;return C.H=I,e===null?I:e}function Au(){var e=C.A;return C.A=zl,e}function ju(){Jl=4,Wl||(K&4194048)!==K&&fo.current!==null||(Gl=!0),!(Yl&134217727)&&!(Xl&134217727)||Vl===null||Cu(Vl,K,Ql,!1)}function Mu(e,t,n){var r=W;W|=2;var i=ku(),a=Au();(Vl!==e||K!==t)&&(ou=null,Eu(e,t)),t=!1;var o=Jl;a:do try{if(Hl!==0&&G!==null){var s=G,c=Ul;switch(Hl){case 8:Tu(),o=6;break a;case 3:case 2:case 9:case 6:fo.current===null&&(t=!0);var l=Hl;if(Hl=0,Ul=null,Ru(e,s,c,l),n&&Gl){o=0;break a}break;default:l=Hl,Hl=0,Ul=null,Ru(e,s,c,l)}}Nu(),o=Jl;break}catch(t){Du(e,t)}while(1);return t&&e.shellSuspendCounter++,ta=ea=null,W=r,C.H=i,C.A=a,G===null&&(Vl=null,K=0,ci()),o}function Nu(){for(;G!==null;)Iu(G)}function Pu(e,t){var n=W;W|=2;var r=ku(),a=Au();Vl!==e||K!==t?(ou=null,au=Re()+500,Eu(e,t)):Gl=rt(e,t);a:do try{if(Hl!==0&&G!==null){t=G;var o=Ul;b:switch(Hl){case 1:Hl=0,Ul=null,Ru(e,t,o,1);break;case 2:case 9:if(Pa(o)){Hl=0,Ul=null,Lu(t);break}t=function(){Hl!==2&&Hl!==9||Vl!==e||(Hl=7),sd(e)},o.then(t,t);break a;case 3:Hl=7;break a;case 4:Hl=5;break a;case 7:Pa(o)?(Hl=0,Ul=null,Lu(t)):(Hl=0,Ul=null,Ru(e,t,o,7));break;case 5:var s=null;switch(G.tag){case 26:s=G.memoizedState;case 5:case 27:var c=G;if(s?qf(s):c.stateNode.complete){Hl=0,Ul=null;var l=c.sibling;if(l!==null)G=l;else{var u=c.return;u===null?G=null:(G=u,zu(u))}break b}}Hl=0,Ul=null,Ru(e,t,o,5);break;case 6:Hl=0,Ul=null,Ru(e,t,o,6);break;case 8:Tu(),Jl=6;break a;default:throw Error(i(462))}}Fu();break}catch(t){Du(e,t)}while(1);return ta=ea=null,C.H=r,C.A=a,W=n,G===null?(Vl=null,K=0,ci(),Jl):0}function Fu(){for(;G!==null&&!Ie();)Iu(G)}function Iu(e){var t=Pc(e.alternate,e,ql);e.memoizedProps=e.pendingProps,t===null?zu(e):G=t}function Lu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=yc(n,t,t.pendingProps,t.type,void 0,K);break;case 11:t=yc(n,t,t.pendingProps,t.type.render,t.ref,K);break;case 5:zo(t);default:Vc(n,t),t=G=yi(t,ql),t=Pc(n,t,ql)}e.memoizedProps=e.pendingProps,t===null?zu(e):G=t}function Ru(e,t,n,r){ta=ea=null,zo(t),Ba=null,Va=0;var i=t.return;try{if(ac(e,i,t,n,K)){Jl=1,tc(e,Ei(n,e.current)),G=null;return}}catch(t){if(i!==null)throw G=i,t;Jl=1,tc(e,Ei(n,e.current)),G=null;return}t.flags&32768?(j||r===1?e=!0:Gl||K&536870912?e=!1:(Wl=e=!0,(r===2||r===9||r===3||r===6)&&(r=fo.current,r!==null&&r.tag===13&&(r.flags|=16384))),Bu(t,e)):zu(t)}function zu(e){var t=e;do{if(t.flags&32768){Bu(t,Wl);return}e=t.return;var n=zc(t.alternate,t,ql);if(n!==null){G=n;return}if(t=t.sibling,t!==null){G=t;return}G=t=e}while(t!==null);Jl===0&&(Jl=5)}function Bu(e,t){do{var n=Bc(e.alternate,e);if(n!==null){n.flags&=32767,G=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){G=e;return}G=e=n}while(e!==null);Jl=6,G=null}function Vu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do Ku();while(cu!==0);if(W&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=si,ct(e,n,o,s,c,l),e===Vl&&(G=Vl=null,K=0),uu=t,lu=e,du=n,fu=o,pu=a,mu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,ed(E,function(){return qu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=C.T,C.T=null,a=w.p,w.p=2,s=W,W|=4;try{ol(e,t,n)}finally{W=s,w.p=a,C.T=r}}cu=1,Hu(),Uu(),Wu()}}function Hu(){if(cu===1){cu=0;var e=lu,t=uu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=C.T,C.T=null;var r=w.p;w.p=2;var i=W;W|=4;try{yl(t,e);var a=Ud,o=Fr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Pr(s.ownerDocument.documentElement,s)){if(c!==null&&Ir(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Nr(s,h),v=Nr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}up=!!Hd,Ud=Hd=null}finally{W=i,w.p=r,C.T=n}}e.current=t,cu=2}}function Uu(){if(cu===2){cu=0;var e=lu,t=uu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=C.T,C.T=null;var r=w.p;w.p=2;var i=W;W|=4;try{sl(e,t.alternate,t)}finally{W=i,w.p=r,C.T=n}}cu=3}}function Wu(){if(cu===4||cu===3){cu=0,Le();var e=lu,t=uu,n=du,r=mu;t.subtreeFlags&10256||t.flags&10256?cu=5:(cu=0,uu=lu=null,Gu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(su=null),pt(n),t=t.stateNode,qe&&typeof qe.onCommitFiberRoot==`function`)try{qe.onCommitFiberRoot(Ke,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=C.T,i=w.p,w.p=2,C.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{C.T=t,w.p=i}}du&3&&Ku(),sd(e),i=e.pendingLanes,n&261930&&i&42?e===gu?hu++:(hu=0,gu=e):hu=0,cd(0,!1)}}function Gu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,_a(t)))}function Ku(){return Hu(),Uu(),Wu(),qu()}function qu(){if(cu!==5)return!1;var e=lu,t=fu;fu=0;var n=pt(du),r=C.T,a=w.p;try{w.p=32>n?32:n,C.T=null,n=pu,pu=null;var o=lu,s=du;if(cu=0,uu=lu=null,du=0,W&6)throw Error(i(331));var c=W;if(W|=4,Il(o.current),Ol(o,o.current,s,n),W=c,cd(0,!1),qe&&typeof qe.onPostCommitFiberRoot==`function`)try{qe.onPostCommitFiberRoot(Ke,o)}catch{}return!0}finally{w.p=a,C.T=r,Gu(e,t)}}function Ju(e,t,n){t=Ei(n,t),t=nc(e.stateNode,t,2),e=Qa(e,t,2),e!==null&&(st(e,2),sd(e))}function q(e,t,n){if(e.tag===3)Ju(e,e,n);else for(;t!==null;){if(t.tag===3){Ju(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(su===null||!su.has(r))){e=Ei(n,e),n=rc(2),r=Qa(t,n,2),r!==null&&(ic(n,r,t,e),st(r,2),sd(r));break}}t=t.return}}function Yu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Bl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Kl=!0,i.add(n),e=Xu.bind(null,e,t,n),t.then(e,e))}function Xu(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Vl===e&&(K&n)===n&&(Jl===4||Jl===3&&(K&62914560)===K&&300>Re()-ru?!(W&2)&&Eu(e,0):Zl|=n,$l===K&&($l=0)),sd(e)}function Zu(e,t){t===0&&(t=at()),e=di(e,t),e!==null&&(st(e,t),sd(e))}function Qu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zu(e,n)}function $u(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Zu(e,n)}function ed(e,t){return Pe(e,t)}var td=null,nd=null,rd=!1,id=!1,ad=!1,od=0;function sd(e){e!==nd&&e.next===null&&(nd===null?td=nd=e:nd=nd.next=e),id=!0,rd||(rd=!0,md())}function cd(e,t){if(!ad&&id){ad=!0;do for(var n=!1,r=td;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-D(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,pd(r,a))}else a=K,a=nt(r,r===Vl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||rt(r,a)||(n=!0,pd(r,a));r=r.next}while(n);ad=!1}}function ld(){ud()}function ud(){id=rd=!1;var e=0;od!==0&&Yd()&&(e=od);for(var t=Re(),n=null,r=td;r!==null;){var i=r.next,a=dd(r,t);a===0?(r.next=null,n===null?td=i:n.next=i,i===null&&(nd=n)):(n=r,(e!==0||a&3)&&(id=!0)),r=i}cu!==0&&cu!==5||cd(e,!1),od!==0&&(od=0)}function dd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-D(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=it(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Vl,n=K,n=nt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Hl===2||Hl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Fe(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||rt(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Fe(r),pt(n)){case 2:case 8:n=Ve;break;case 32:n=E;break;case 268435456:n=Ue;break;default:n=E}return r=fd.bind(null,e),n=Pe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Fe(r),e.callbackPriority=2,e.callbackNode=null,2}function fd(e,t){if(cu!==0&&cu!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ku()&&e.callbackNode!==n)return null;var r=K;return r=nt(e,e===Vl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(bu(e,r,t),dd(e,Re()),e.callbackNode!=null&&e.callbackNode===n?fd.bind(null,e):null)}function pd(e,t){if(Ku())return null;bu(e,t,!0)}function md(){$d(function(){W&6?Pe(Be,ld):ud()})}function hd(){if(od===0){var e=ba;e===0&&(e=Qe,Qe<<=1,!(Qe&261888)&&(Qe=256)),od=e}return od}function gd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:ln(``+e)}function _d(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function vd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=gd((i[vt]||null).action),o=r.submitter;o&&(t=(t=o[vt]||null)?gd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new An(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(od!==0){var e=o?_d(i,o):new FormData(i);Fs(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?_d(i,o):new FormData(i),Fs(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var yd=0;yd<ni.length;yd++){var bd=ni[yd];ri(bd.toLowerCase(),`on`+(bd[0].toUpperCase()+bd.slice(1)))}ri(Jr,`onAnimationEnd`),ri(Yr,`onAnimationIteration`),ri(Xr,`onAnimationStart`),ri(`dblclick`,`onDoubleClick`),ri(`focusin`,`onFocus`),ri(`focusout`,`onBlur`),ri(Zr,`onTransitionRun`),ri(Qr,`onTransitionStart`),ri($r,`onTransitionCancel`),ri(ei,`onTransitionEnd`),Pt(`onMouseEnter`,[`mouseout`,`mouseover`]),Pt(`onMouseLeave`,[`mouseout`,`mouseover`]),Pt(`onPointerEnter`,[`pointerout`,`pointerover`]),Pt(`onPointerLeave`,[`pointerout`,`pointerover`]),Nt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Nt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Nt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Nt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Nt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Nt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var xd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),Sd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(xd));function Cd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ii(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ii(e)}i.currentTarget=null,a=c}}}}function J(e,t){var n=t[bt];n===void 0&&(n=t[bt]=new Set);var r=e+`__bubble`;n.has(r)||(Y(t,e,2,!1),n.add(r))}function wd(e,t,n){var r=0;t&&(r|=4),Y(n,e,r,t)}var Td=`_reactListening`+Math.random().toString(36).slice(2);function Ed(e){if(!e[Td]){e[Td]=!0,jt.forEach(function(t){t!==`selectionchange`&&(Sd.has(t)||wd(t,!1,e),wd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Td]||(t[Td]=!0,wd(`selectionchange`,!1,t))}}function Y(e,t,n,r){switch(gp(t)){case 2:var i=dp;break;case 8:i=fp;break;default:i=Z}n=i.bind(null,t,n,e),i=void 0,!yn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Dd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=Et(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}_n(function(){var r=a,i=fn(n),s=[];a:{var c=ti.get(e);if(c!==void 0){var l=An,u=e;switch(e){case`keypress`:if(Tn(n)===0)break a;case`keydown`:case`keyup`:l=qn;break;case`focusin`:u=`focus`,l=zn;break;case`focusout`:u=`blur`,l=zn;break;case`beforeblur`:case`afterblur`:l=zn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=Ln;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Rn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Yn;break;case Jr:case Yr:case Xr:l=Bn;break;case ei:l=Xn;break;case`scroll`:case`scrollend`:l=Mn;break;case`wheel`:l=Zn;break;case`copy`:case`cut`:case`paste`:l=Vn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Jn;break;case`toggle`:case`beforetoggle`:l=Qn}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=k(m,p),g!=null&&d.push(Od(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==dn&&(u=n.relatedTarget||n.fromElement)&&(Et(u)||u[yt]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?Et(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=Ln,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Jn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:Ot(l),h=u==null?c:Ot(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,Et(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Ad,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&jd(s,c,l,d,!1),u!==null&&f!==null&&jd(s,f,u,d,!0)}}a:{if(c=r?Ot(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=vr;else if(fr(c))if(yr)v=Or;else{v=Er;var y=Tr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&on(r.elementType)&&(v=vr):v=Dr;if(v&&=v(e,r)){pr(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Zt(c,`number`,c.value)}switch(y=r?Ot(r):window,e){case`focusin`:(fr(y)||y.contentEditable===`true`)&&(Rr=y,zr=r,Br=null);break;case`focusout`:Br=zr=Rr=null;break;case`mousedown`:Vr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Vr=!1,Hr(s,n,i);break;case`selectionchange`:if(Lr)break;case`keydown`:case`keyup`:Hr(s,n,i)}var b;if(er)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else cr?or(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(rr&&n.locale!==`ko`&&(cr||x!==`onCompositionStart`?x===`onCompositionEnd`&&cr&&(b=wn()):(xn=i,Sn=`value`in xn?xn.value:xn.textContent,cr=!0)),y=kd(r,x),0<y.length&&(x=new Hn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=sr(n),b!==null&&(x.data=b)))),(b=nr?lr(e,n):ur(e,n))&&(x=kd(r,`onBeforeInput`),0<x.length&&(y=new Hn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),vd(s,e,r,n,i)}Cd(s,t)})}function Od(e,t,n){return{instance:e,listener:t,currentTarget:n}}function kd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=k(e,n),i!=null&&r.unshift(Od(e,i,a)),i=k(e,t),i!=null&&r.push(Od(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Ad(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=k(n,a),l!=null&&o.unshift(Od(n,l,c))):i||(l=k(n,a),l!=null&&o.push(Od(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Md=/\r\n?/g,Nd=/\u0000|\uFFFD/g;function Pd(e){return(typeof e==`string`?e:``+e).replace(Md,`
`).replace(Nd,``)}function Fd(e,t){return t=Pd(t),Pd(e)===t}function Id(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||tn(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&tn(e,``+r);break;case`className`:Bt(e,`class`,r);break;case`tabIndex`:Bt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Bt(e,n,r);break;case`style`:an(e,r,o);break;case`data`:if(t!==`object`){Bt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=ln(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Id(e,t,`name`,a.name,a,null),Id(e,t,`formEncType`,a.formEncType,a,null),Id(e,t,`formMethod`,a.formMethod,a,null),Id(e,t,`formTarget`,a.formTarget,a,null)):(Id(e,t,`encType`,a.encType,a,null),Id(e,t,`method`,a.method,a,null),Id(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=ln(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=un);break;case`onScroll`:r!=null&&J(`scroll`,e);break;case`onScrollEnd`:r!=null&&J(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=ln(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:J(`beforetoggle`,e),J(`toggle`,e),zt(e,`popover`,r);break;case`xlinkActuate`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Vt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Vt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Vt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:zt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=sn.get(n)||n,zt(e,n,r))}}function Ld(e,t,n,r,a,o){switch(n){case`style`:an(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?tn(e,r):(typeof r==`number`||typeof r==`bigint`)&&tn(e,``+r);break;case`onScroll`:r!=null&&J(`scroll`,e);break;case`onScrollEnd`:r!=null&&J(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=un);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Mt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[vt]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):zt(e,n,r)}}}function Rd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:J(`error`,e),J(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Id(e,t,o,s,n,null)}}a&&Id(e,t,`srcSet`,n.srcSet,n,null),r&&Id(e,t,`src`,n.src,n,null);return;case`input`:J(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Id(e,t,r,d,n,null)}}Xt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in J(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Id(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Qt(e,!!r,n,!0):Qt(e,!!r,t,!1);return;case`textarea`:for(s in J(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Id(e,t,s,c,n,null)}en(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Id(e,t,l,r,n,null)}return;case`dialog`:J(`beforetoggle`,e),J(`toggle`,e),J(`cancel`,e),J(`close`,e);break;case`iframe`:case`object`:J(`load`,e);break;case`video`:case`audio`:for(r=0;r<xd.length;r++)J(xd[r],e);break;case`image`:J(`error`,e),J(`load`,e);break;case`details`:J(`toggle`,e);break;case`embed`:case`source`:case`link`:J(`error`,e),J(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Id(e,t,u,r,n,null)}return;default:if(on(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Ld(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Id(e,t,c,r,n,null))}function zd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Id(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Id(e,t,p,m,r,f)}}Yt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Id(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Id(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Qt(e,!!n,n?[]:``,!1):Qt(e,!!n,t,!0)):Qt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Id(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Id(e,t,s,a,r,o)}$t(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Id(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Id(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Id(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Id(e,t,u,p,r,m)}return;default:if(on(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Ld(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Ld(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Id(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Id(e,t,f,p,r,m)}function Bd(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Vd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Bd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Bd(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Hd=null,Ud=null;function Wd(e){return e.nodeType===9?e:e.ownerDocument}function Gd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Kd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function qd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jd=null;function Yd(){var e=window.event;return e&&e.type===`popstate`?e===Jd?!1:(Jd=e,!0):(Jd=null,!1)}var Xd=typeof setTimeout==`function`?setTimeout:void 0,Zd=typeof clearTimeout==`function`?clearTimeout:void 0,Qd=typeof Promise==`function`?Promise:void 0,$d=typeof queueMicrotask==`function`?queueMicrotask:Qd===void 0?Xd:function(e){return Qd.resolve(null).then(e).catch(ef)};function ef(e){setTimeout(function(){throw e})}function tf(e){return e===`head`}function nf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Fp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)_f(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,_f(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[wt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&_f(e.ownerDocument.body);n=i}while(n);Fp(t)}function rf(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function af(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:af(n),Tt(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function of(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[wt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=ff(e.nextSibling),e===null)break}return null}function sf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=ff(e.nextSibling),e===null))return null;return e}function cf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=ff(e.nextSibling),e===null))return null;return e}function lf(e){return e.data===`$?`||e.data===`$~`}function uf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function df(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function ff(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var pf=null;function mf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return ff(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function hf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function gf(e,t,n){switch(t=Wd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function _f(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Tt(e)}var vf=new Map,yf=new Set;function bf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xf=w.d;w.d={f:Sf,r:Cf,D:Ef,C:X,L:Df,m:Of,X:Af,S:kf,M:jf};function Sf(){var e=xf.f(),t=wu();return e||t}function Cf(e){var t=Dt(e);t!==null&&t.tag===5&&t.type===`form`?Ls(t):xf.r(e)}var wf=typeof document>`u`?null:document;function Tf(e,t,n){var r=wf;if(r&&typeof t==`string`&&t){var i=Jt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),yf.has(i)||(yf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Rd(t,`link`,e),At(t),r.head.appendChild(t)))}}function Ef(e){xf.D(e),Tf(`dns-prefetch`,e,null)}function X(e,t){xf.C(e,t),Tf(`preconnect`,e,t)}function Df(e,t,n){xf.L(e,t,n);var r=wf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Jt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Jt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Jt(n.imageSizes)+`"]`)):i+=`[href="`+Jt(e)+`"]`;var a=i;switch(t){case`style`:a=Nf(e);break;case`script`:a=Lf(e)}vf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),vf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Pf(a))||t===`script`&&r.querySelector(Rf(a))||(t=r.createElement(`link`),Rd(t,`link`,e),At(t),r.head.appendChild(t)))}}function Of(e,t){xf.m(e,t);var n=wf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Jt(r)+`"][href="`+Jt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Lf(e)}if(!vf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),vf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Rf(a)))return}r=n.createElement(`link`),Rd(r,`link`,e),At(r),n.head.appendChild(r)}}}function kf(e,t,n){xf.S(e,t,n);var r=wf;if(r&&e){var i=kt(r).hoistableStyles,a=Nf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Pf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=vf.get(a))&&Vf(e,n);var c=o=r.createElement(`link`);At(c),Rd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Bf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Af(e,t){xf.X(e,t);var n=wf;if(n&&e){var r=kt(n).hoistableScripts,i=Lf(e),a=r.get(i);a||(a=n.querySelector(Rf(i)),a||(e=h({src:e,async:!0},t),(t=vf.get(i))&&Hf(e,t),a=n.createElement(`script`),At(a),Rd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function jf(e,t){xf.M(e,t);var n=wf;if(n&&e){var r=kt(n).hoistableScripts,i=Lf(e),a=r.get(i);a||(a=n.querySelector(Rf(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=vf.get(i))&&Hf(e,t),a=n.createElement(`script`),At(a),Rd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Mf(e,t,n,r){var a=(a=be.current)?bf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Nf(n.href),n=kt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Nf(n.href);var o=kt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(Pf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),vf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},vf.set(e,n),o||If(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Lf(n),n=kt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Nf(e){return`href="`+Jt(e)+`"`}function Pf(e){return`link[rel="stylesheet"][`+e+`]`}function Ff(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function If(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Rd(t,`link`,n),At(t),e.head.appendChild(t))}function Lf(e){return`[src="`+Jt(e)+`"]`}function Rf(e){return`script[async]`+e}function zf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Jt(n.href)+`"]`);if(r)return t.instance=r,At(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),At(r),Rd(r,`style`,a),Bf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=Nf(n.href);var o=e.querySelector(Pf(a));if(o)return t.state.loading|=4,t.instance=o,At(o),o;r=Ff(n),(a=vf.get(a))&&Vf(r,a),o=(e.ownerDocument||e).createElement(`link`),At(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Rd(o,`link`,r),t.state.loading|=4,Bf(o,n.precedence,e),t.instance=o;case`script`:return o=Lf(n.src),(a=e.querySelector(Rf(o)))?(t.instance=a,At(a),a):(r=n,(a=vf.get(o))&&(r=h({},n),Hf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),At(a),Rd(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Bf(r,n.precedence,e));return t.instance}function Bf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Vf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Hf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Uf=null;function Wf(e,t,n){if(Uf===null){var r=new Map,i=Uf=new Map;i.set(n,r)}else i=Uf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[wt]||a[_t]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Gf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Kf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function qf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Jf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Nf(r.href),a=t.querySelector(Pf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Zf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,At(a);return}a=t.ownerDocument||t,r=Ff(r),(i=vf.get(i))&&Vf(r,i),a=a.createElement(`link`),At(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Rd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Zf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var Yf=0;function Xf(e,t){return e.stylesheets&&e.count===0&&$f(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&$f(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&Yf===0&&(Yf=62500*Vd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&$f(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>Yf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Zf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$f(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Qf=null;function $f(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Qf=new Map,t.forEach(ep,e),Qf=null,Zf.call(e))}function ep(e,t){if(!(t.state.loading&4)){var n=Qf.get(e);if(n)var r=n.get(null);else{n=new Map,Qf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Zf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var tp={$$typeof:te,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function np(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ot(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ot(0),this.hiddenUpdates=ot(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function rp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new np(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=gi(3,null,null,t),e.current=a,a.stateNode=e,t=ga(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Ya(a),e}function ip(e){return e?(e=mi,e):mi}function ap(e,t,n,r,i,a){i=ip(i),r.context===null?r.context=i:r.pendingContext=i,r=Za(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Qa(e,r,t),n!==null&&(yu(n,e,t),$a(n,e,t))}function op(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function sp(e,t){op(e,t),(e=e.alternate)&&op(e,t)}function cp(e){if(e.tag===13||e.tag===31){var t=di(e,67108864);t!==null&&yu(t,e,67108864),sp(e,67108864)}}function lp(e){if(e.tag===13||e.tag===31){var t=_u();t=ft(t);var n=di(e,t);n!==null&&yu(n,e,t),sp(e,t)}}var up=!0;function dp(e,t,n,r){var i=C.T;C.T=null;var a=w.p;try{w.p=2,Z(e,t,n,r)}finally{w.p=a,C.T=i}}function fp(e,t,n,r){var i=C.T;C.T=null;var a=w.p;try{w.p=8,Z(e,t,n,r)}finally{w.p=a,C.T=i}}function Z(e,t,n,r){if(up){var i=pp(r);if(i===null)Dd(e,t,r,mp,n),Tp(e,r);else if(Dp(i,e,t,n,r))r.stopPropagation();else if(Tp(e,r),t&4&&-1<wp.indexOf(e)){for(;i!==null;){var a=Dt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=tt(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-D(o);s.entanglements[1]|=c,o&=~c}sd(a),!(W&6)&&(au=Re()+500,cd(0,!1))}}break;case 31:case 13:s=di(a,2),s!==null&&yu(s,a,2),wu(),sp(a,2)}if(a=pp(r),a===null&&Dd(e,t,r,mp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Dd(e,t,r,null,n)}}function pp(e){return e=fn(e),hp(e)}var mp=null;function hp(e){if(mp=null,e=Et(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return mp=e,null}function gp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(ze()){case Be:return 2;case Ve:return 8;case E:case He:return 32;case Ue:return 268435456;default:return 32}default:return 32}}var _p=!1,vp=null,yp=null,bp=null,xp=new Map,Sp=new Map,Cp=[],wp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Tp(e,t){switch(e){case`focusin`:case`focusout`:vp=null;break;case`dragenter`:case`dragleave`:yp=null;break;case`mouseover`:case`mouseout`:bp=null;break;case`pointerover`:case`pointerout`:xp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Sp.delete(t.pointerId)}}function Ep(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Dt(t),t!==null&&cp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Dp(e,t,n,r,i){switch(t){case`focusin`:return vp=Ep(vp,e,t,n,r,i),!0;case`dragenter`:return yp=Ep(yp,e,t,n,r,i),!0;case`mouseover`:return bp=Ep(bp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return xp.set(a,Ep(xp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Sp.set(a,Ep(Sp.get(a)||null,e,t,n,r,i)),!0}return!1}function Op(e){var t=Et(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,ht(e.priority,function(){lp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,ht(e.priority,function(){lp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);dn=r,n.target.dispatchEvent(r),dn=null}else return t=Dt(n),t!==null&&cp(t),e.blockedOn=n,!1;t.shift()}return!0}function Ap(e,t,n){kp(e)&&n.delete(t)}function jp(){_p=!1,vp!==null&&kp(vp)&&(vp=null),yp!==null&&kp(yp)&&(yp=null),bp!==null&&kp(bp)&&(bp=null),xp.forEach(Ap),Sp.forEach(Ap)}function Mp(e,n){e.blockedOn===n&&(e.blockedOn=null,_p||(_p=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jp)))}var Np=null;function Pp(e){Np!==e&&(Np=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Np===e&&(Np=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(hp(r||n)===null)continue;break}var a=Dt(n);a!==null&&(e.splice(t,3),t-=3,Fs(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Fp(e){function t(t){return Mp(t,e)}vp!==null&&Mp(vp,e),yp!==null&&Mp(yp,e),bp!==null&&Mp(bp,e),xp.forEach(t),Sp.forEach(t);for(var n=0;n<Cp.length;n++){var r=Cp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Cp.length&&(n=Cp[0],n.blockedOn===null);)Op(n),n.blockedOn===null&&Cp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[vt]||null;if(typeof a==`function`)o||Pp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[vt]||null)s=o.formAction;else if(hp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Pp(n)}}}function Ip(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Lp(e){this._internalRoot=e}Rp.prototype.render=Lp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current;ap(n,_u(),e,t,null,null)},Rp.prototype.unmount=Lp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ap(e.current,2,null,e,null,null),wu(),t[yt]=null}};function Rp(e){this._internalRoot=e}Rp.prototype.unstable_scheduleHydration=function(e){if(e){var t=mt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Cp.length&&t!==0&&t<Cp[n].priority;n++);Cp.splice(n,0,e),n===0&&Op(e)}};var zp=n.version;if(zp!==`19.2.3`)throw Error(i(527,zp,`19.2.3`));w.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=d(t),e=e===null?null:p(e),e=e===null?null:e.stateNode,e};var Bp={bundleType:0,version:`19.2.3`,rendererPackageName:`react-dom`,currentDispatcherRef:C,reconcilerVersion:`19.2.3`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vp.isDisabled&&Vp.supportsFiber)try{Ke=Vp.inject(Bp),qe=Vp}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=Qs,s=$s,c=ec;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=rp(e,1,!1,null,null,n,r,null,o,s,c,Ip),e[yt]=t.current,Ed(e),new Lp(t)}})),g=c(o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=h()}))(),1),_=c(u(),1),v=()=>void 0,y=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},b=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(y(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):b(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new ee;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ee=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},te=function(e){let t=y(e);return x.encodeByteArray(t,!0)},S=function(e){return te(e).replace(/\./g,``)},ne=function(e){try{return x.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function re(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var ie=()=>re().__FIREBASE_DEFAULTS__,ae=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},oe=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&ne(e[1]);return t&&JSON.parse(t)},se=()=>{try{return v()||ie()||ae()||oe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ce=e=>se()?.emulatorHosts?.[e],le=()=>se()?.config,ue=e=>se()?.[`_${e}`],de=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function fe(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function C(e){return(await fetch(e,{credentials:`include`})).ok}var w={};function pe(){let e={prod:[],emulator:[]};for(let t of Object.keys(w))w[t]?e.emulator.push(t):e.prod.push(t);return e}function me(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var he=!1;function ge(e,t){if(typeof window>`u`||typeof document>`u`||!fe(window.location.host)||w[e]===t||w[e]||he)return;w[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=pe().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{he=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=me(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function T(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function _e(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())}function ve(){let e=se()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function ye(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function be(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function xe(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function Se(){let e=T();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function Ce(){return!ve()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function we(){return!ve()&&!!navigator.userAgent&&(navigator.userAgent.includes(`Safari`)||navigator.userAgent.includes(`WebKit`))&&!navigator.userAgent.includes(`Chrome`)}function Te(){try{return typeof indexedDB==`object`}catch{return!1}}function Ee(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var De=`FirebaseError`,Oe=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=De,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}},ke=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Ae(i,n):`Error`;return new Oe(r,`${this.serviceName}: ${a} (${r}).`,n)}};function Ae(e,t){return e.replace(je,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var je=/\{\$([^}]+)}/g;function Me(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ne(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(Pe(n)&&Pe(a)){if(!Ne(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function Pe(e){return typeof e==`object`&&!!e}function Fe(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function Ie(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Le(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function Re(e,t){let n=new ze(e,t);return n.subscribe.bind(n)}var ze=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=Be(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=Ve),r.error===void 0&&(r.error=Ve),r.complete===void 0&&(r.complete=Ve);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Be(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function Ve(){}function E(e){return e&&e._delegate?e._delegate:e}var He=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Ue=`[DEFAULT]`,We=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new de;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Ke(e))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Ue){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ue){return this.instances.has(e)}getOptions(e=Ue){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Ge(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ue){return this.component?this.component.multipleInstances?e:Ue:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Ge(e){return e===Ue?void 0:e}function Ke(e){return e.instantiationMode===`EAGER`}var qe=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new We(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},Je=[],D;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(D||={});var Ye={debug:D.DEBUG,verbose:D.VERBOSE,info:D.INFO,warn:D.WARN,error:D.ERROR,silent:D.SILENT},Xe=D.INFO,Ze={[D.DEBUG]:`log`,[D.VERBOSE]:`log`,[D.INFO]:`info`,[D.WARN]:`warn`,[D.ERROR]:`error`},Qe=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=Ze[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},$e=class{constructor(e){this.name=e,this._logLevel=Xe,this._logHandler=Qe,this._userLogHandler=null,Je.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in D))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?Ye[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,D.DEBUG,...e),this._logHandler(this,D.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,D.VERBOSE,...e),this._logHandler(this,D.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,D.INFO,...e),this._logHandler(this,D.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,D.WARN,...e),this._logHandler(this,D.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,D.ERROR,...e),this._logHandler(this,D.ERROR,...e)}},et=(e,t)=>t.some(t=>e instanceof t),tt,nt;function rt(){return tt||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function it(){return nt||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var at=new WeakMap,ot=new WeakMap,st=new WeakMap,ct=new WeakMap,lt=new WeakMap;function ut(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(gt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&at.set(t,e)}).catch(()=>{}),lt.set(t,e),t}function dt(e){if(ot.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});ot.set(e,t)}var ft={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return ot.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||st.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gt(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function pt(e){ft=e(ft)}function mt(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(_t(this),t,...n);return st.set(r,t.sort?t.sort():[t]),gt(r)}:it().includes(e)?function(...t){return e.apply(_t(this),t),gt(at.get(this))}:function(...t){return gt(e.apply(_t(this),t))}}function ht(e){return typeof e==`function`?mt(e):(e instanceof IDBTransaction&&dt(e),et(e,rt())?new Proxy(e,ft):e)}function gt(e){if(e instanceof IDBRequest)return ut(e);if(ct.has(e))return ct.get(e);let t=ht(e);return t!==e&&(ct.set(e,t),lt.set(t,e)),t}var _t=e=>lt.get(e);function vt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=gt(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(gt(o.result),e.oldVersion,e.newVersion,gt(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var yt=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],bt=[`put`,`add`,`delete`,`clear`],xt=new Map;function St(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(xt.get(t))return xt.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=bt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yt.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return xt.set(t,a),a}pt(e=>({...e,get:(t,n,r)=>St(t,n)||e.get(t,n,r),has:(t,n)=>!!St(t,n)||e.has(t,n)}));var Ct=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(wt(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function wt(e){return e.getComponent()?.type===`VERSION`}var Tt=`@firebase/app`,Et=`0.14.6`,Dt=new $e(`@firebase/app`),Ot=`@firebase/app-compat`,kt=`@firebase/analytics-compat`,At=`@firebase/analytics`,jt=`@firebase/app-check-compat`,Mt=`@firebase/app-check`,Nt=`@firebase/auth`,Pt=`@firebase/auth-compat`,Ft=`@firebase/database`,It=`@firebase/data-connect`,Lt=`@firebase/database-compat`,Rt=`@firebase/functions`,zt=`@firebase/functions-compat`,Bt=`@firebase/installations`,Vt=`@firebase/installations-compat`,O=`@firebase/messaging`,Ht=`@firebase/messaging-compat`,Ut=`@firebase/performance`,Wt=`@firebase/performance-compat`,Gt=`@firebase/remote-config`,Kt=`@firebase/remote-config-compat`,qt=`@firebase/storage`,Jt=`@firebase/storage-compat`,Yt=`@firebase/firestore`,Xt=`@firebase/ai`,Zt=`@firebase/firestore-compat`,Qt=`firebase`,$t=`12.6.0`,en=`[DEFAULT]`,tn={[Tt]:`fire-core`,[Ot]:`fire-core-compat`,[At]:`fire-analytics`,[kt]:`fire-analytics-compat`,[Mt]:`fire-app-check`,[jt]:`fire-app-check-compat`,[Nt]:`fire-auth`,[Pt]:`fire-auth-compat`,[Ft]:`fire-rtdb`,[It]:`fire-data-connect`,[Lt]:`fire-rtdb-compat`,[Rt]:`fire-fn`,[zt]:`fire-fn-compat`,[Bt]:`fire-iid`,[Vt]:`fire-iid-compat`,[O]:`fire-fcm`,[Ht]:`fire-fcm-compat`,[Ut]:`fire-perf`,[Wt]:`fire-perf-compat`,[Gt]:`fire-rc`,[Kt]:`fire-rc-compat`,[qt]:`fire-gcs`,[Jt]:`fire-gcs-compat`,[Yt]:`fire-fst`,[Zt]:`fire-fst-compat`,[Xt]:`fire-vertex`,"fire-js":`fire-js`,[Qt]:`fire-js-all`},nn=new Map,rn=new Map,an=new Map;function on(e,t){try{e.container.addComponent(t)}catch(n){Dt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function sn(e){let t=e.name;if(an.has(t))return Dt.debug(`There were multiple attempts to register component ${t}.`),!1;an.set(t,e);for(let t of nn.values())on(t,e);for(let t of rn.values())on(t,e);return!0}function cn(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ln(e){return e==null?!1:e.settings!==void 0}var un=new ke(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),dn=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new He(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw un.create(`app-deleted`,{appName:this._name})}},fn=$t;function pn(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:en,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw un.create(`bad-app-name`,{appName:String(i)});if(n||=le(),!n)throw un.create(`no-options`);let a=nn.get(i);if(a){if(Ne(n,a.options)&&Ne(r,a.config))return a;throw un.create(`duplicate-app`,{appName:i})}let o=new qe(i);for(let e of an.values())o.addComponent(e);let s=new dn(n,r,o);return nn.set(i,s),s}function mn(e=en){let t=nn.get(e);if(!t&&e===`[DEFAULT]`&&le())return pn();if(!t)throw un.create(`no-app`,{appName:e});return t}function hn(e,t,n){let r=tn[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Dt.warn(e.join(` `));return}sn(new He(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var gn=`firebase-heartbeat-database`,_n=1,k=`firebase-heartbeat-store`,vn=null;function yn(){return vn||=vt(gn,_n,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(k)}catch(e){console.warn(e)}}}}).catch(e=>{throw un.create(`idb-open`,{originalErrorMessage:e.message})}),vn}async function bn(e){try{let t=(await yn()).transaction(k),n=await t.objectStore(k).get(Sn(e));return await t.done,n}catch(e){if(e instanceof Oe)Dt.warn(e.message);else{let t=un.create(`idb-get`,{originalErrorMessage:e?.message});Dt.warn(t.message)}}}async function xn(e,t){try{let n=(await yn()).transaction(k,`readwrite`);await n.objectStore(k).put(t,Sn(e)),await n.done}catch(e){if(e instanceof Oe)Dt.warn(e.message);else{let t=un.create(`idb-set`,{originalErrorMessage:e?.message});Dt.warn(t.message)}}}function Sn(e){return`${e.name}!${e.options.appId}`}var Cn=1024,wn=30,Tn=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new On(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=En();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>wn){let e=An(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Dt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=En(),{heartbeatsToSend:t,unsentEntries:n}=Dn(this._heartbeatsCache.heartbeats),r=S(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Dt.warn(e),``}}};function En(){return new Date().toISOString().substring(0,10)}function Dn(e,t=Cn){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),kn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var On=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Te()?Ee().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await bn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return xn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return xn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function kn(e){return S(JSON.stringify({version:2,heartbeats:e})).length}function An(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function jn(e){sn(new He(`platform-logger`,e=>new Ct(e),`PRIVATE`)),sn(new He(`heartbeat`,e=>new Tn(e),`PRIVATE`)),hn(Tt,Et,e),hn(Tt,Et,`esm2020`),hn(`fire-js`,``)}jn(``);function Mn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Nn=Mn,Pn=new ke(`auth`,`Firebase`,Mn()),Fn=new $e(`@firebase/auth`);function In(e,...t){Fn.logLevel<=D.WARN&&Fn.warn(`Auth (${fn}): ${e}`,...t)}function Ln(e,...t){Fn.logLevel<=D.ERROR&&Fn.error(`Auth (${fn}): ${e}`,...t)}function Rn(e,...t){throw Hn(e,...t)}function zn(e,...t){return Hn(e,...t)}function Bn(e,t,n){return new ke(`auth`,`Firebase`,{...Nn(),[t]:n}).create(t,{appName:e.name})}function Vn(e){return Bn(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function Hn(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Pn.create(e,...t)}function A(e,t,...n){if(!e)throw Hn(t,...n)}function Un(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw Ln(t),Error(t)}function Wn(e,t){e||Un(t)}function Gn(){return typeof self<`u`&&self.location?.href||``}function Kn(){return qn()===`http:`||qn()===`https:`}function qn(){return typeof self<`u`&&self.location?.protocol||null}function Jn(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(Kn()||be()||`connection`in navigator)?navigator.onLine:!0}function Yn(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Xn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wn(t>e,`Short delay should be less than long delay!`),this.isMobile=_e()||xe()}get(){return Jn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Zn(e,t){Wn(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var Qn=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;Un(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;Un(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;Un(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},$n={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},er=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],tr=new Xn(3e4,6e4);function nr(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function rr(e,t,n,r,i={}){return ir(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=Fe({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return ye()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&fe(e.emulatorConfig.host)&&(c.credentials=`include`),Qn.fetch()(await or(e,e.config.apiHost,n,o),c)})}async function ir(e,t,n){e._canInitEmulator=!1;let r={...$n,...t};try{let t=new cr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw lr(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw lr(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw lr(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw lr(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw Bn(e,o,n);Rn(e,o)}}catch(t){if(t instanceof Oe)throw t;Rn(e,`network-request-failed`,{message:String(t)})}}async function ar(e,t,n,r,i={}){let a=await rr(e,t,n,r,i);return`mfaPendingCredential`in a&&Rn(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function or(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?Zn(e.config,i):`${e.config.apiScheme}://${i}`;return er.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function sr(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var cr=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(zn(this.auth,`network-request-failed`)),tr.get())})}};function lr(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=zn(e,t,r);return i.customData._tokenResponse=n,i}function ur(e){return e!==void 0&&e.enterprise!==void 0}var dr=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sr(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function fr(e,t){return rr(e,`GET`,`/v2/recaptchaConfig`,nr(e,t))}async function pr(e,t){return rr(e,`POST`,`/v1/accounts:delete`,t)}async function mr(e,t){return rr(e,`POST`,`/v1/accounts:lookup`,t)}function hr(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function gr(e,t=!1){let n=E(e),r=await n.getIdToken(t),i=vr(r);A(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:hr(_r(i.auth_time)),issuedAtTime:hr(_r(i.iat)),expirationTime:hr(_r(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function _r(e){return Number(e)*1e3}function vr(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return Ln(`JWT malformed, contained fewer than 3 sections`),null;try{let e=ne(n);return e?JSON.parse(e):(Ln(`Failed to decode base64 JWT payload`),null)}catch(e){return Ln(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function yr(e){let t=vr(e);return A(t,`internal-error`),A(t.exp!==void 0,`internal-error`),A(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function br(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Oe&&xr(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function xr({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var Sr=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},Cr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hr(this.lastLoginAt),this.creationTime=hr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function wr(e){let t=e.auth,n=await br(e,mr(t,{idToken:await e.getIdToken()}));A(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?Dr(r.providerUserInfo):[],a=Er(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Cr(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function Tr(e){let t=E(e);await wr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Er(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function Dr(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Or(e,t){let n=await ir(e,{},async()=>{let n=Fe({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await or(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&fe(e.emulatorConfig.host)&&(s.credentials=`include`),Qn.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kr(e,t){return rr(e,`POST`,`/v2/accounts:revokeToken`,nr(e,t))}var Ar=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){A(e.idToken,`internal-error`),A(e.idToken!==void 0,`internal-error`),A(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):yr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){A(e.length!==0,`internal-error`);let t=yr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(A(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await Or(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(A(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(A(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(A(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Un(`not implemented`)}};function jr(e,t){A(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var Mr=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new Sr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Cr(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await br(this,this.stsTokenManager.getToken(this.auth,e));return A(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return gr(this,e)}reload(){return Tr(this)}_assign(e){this!==e&&(A(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){A(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await wr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(Vn(this.auth));let e=await this.getIdToken();return await br(this,pr(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;A(d&&h,t,`internal-error`);let g=Ar.fromJSON(this.name,h);A(typeof d==`string`,t,`internal-error`),jr(r,t.name),jr(i,t.name),A(typeof f==`boolean`,t,`internal-error`),A(typeof p==`boolean`,t,`internal-error`),jr(a,t.name),jr(o,t.name),jr(s,t.name),jr(c,t.name),jr(l,t.name),jr(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new Ar;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await wr(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];A(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:Dr(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new Ar;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Cr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},Nr=new Map;function Pr(e){Wn(e instanceof Function,`Expected a class definition`);let t=Nr.get(e);return t?(Wn(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,Nr.set(e,t),t)}var Fr=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};Fr.type=`NONE`;var Ir=Fr;function Lr(e,t,n){return`firebase:${e}:${t}:${n}`}var Rr=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=Lr(this.userKey,r.apiKey,i),this.fullPersistenceKey=Lr(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await mr(this.auth,{idToken:e}).catch(()=>void 0);return t?Mr._fromGetAccountInfoResponse(this.auth,t,e):null}return Mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(Pr(Ir),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||Pr(Ir),o=Lr(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await mr(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await Mr._fromGetAccountInfoResponse(t,e,n)}else r=Mr._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function zr(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(Ur(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(Br(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(Gr(t))return`Blackberry`;if(Kr(t))return`Webos`;if(Vr(t))return`Safari`;if((t.includes(`chrome/`)||Hr(t))&&!t.includes(`edge/`))return`Chrome`;if(Wr(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function Br(e=T()){return/firefox\//i.test(e)}function Vr(e=T()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function Hr(e=T()){return/crios\//i.test(e)}function Ur(e=T()){return/iemobile/i.test(e)}function Wr(e=T()){return/android/i.test(e)}function Gr(e=T()){return/blackberry/i.test(e)}function Kr(e=T()){return/webos/i.test(e)}function qr(e=T()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Jr(e=T()){return qr(e)&&!!window.navigator?.standalone}function Yr(){return Se()&&document.documentMode===10}function Xr(e=T()){return qr(e)||Wr(e)||Kr(e)||Gr(e)||/windows phone/i.test(e)||Ur(e)}function Zr(e,t=[]){let n;switch(e){case`Browser`:n=zr(T());break;case`Worker`:n=`${zr(T())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${fn}/${r}`}var Qr=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function $r(e,t={}){return rr(e,`GET`,`/v2/passwordPolicy`,nr(e,t))}var ei=6,ti=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ei,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},ni=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ii(this),this.idTokenSubscription=new ii(this),this.beforeStateQueue=new Qr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Rr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await mr(this,{idToken:e}),n=await Mr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ln(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return A(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wr(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Yn()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(Vn(this));let t=e?E(e):null;return t&&A(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&A(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(Vn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(Vn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new ti(await $r(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ke(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await kr(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Pr(e)||this._popupRedirectResolver;A(t,this,`argument-error`),this.redirectPersistenceManager=await Rr.create(this,[Pr(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(A(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return A(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&In(`Error while retrieving App Check token: ${e.error}`),e?.token}};function ri(e){return E(e)}var ii=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Re(e=>this.observer=e)}get next(){return A(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},ai={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function oi(e){ai=e}function si(e){return ai.loadJS(e)}function ci(){return ai.recaptchaEnterpriseScript}function li(){return ai.gapiScript}function ui(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var di=class{constructor(){this.enterprise=new fi}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},fi=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},pi=`recaptcha-enterprise`,mi=`NO_RECAPTCHA`,hi=class{constructor(e){this.type=pi,this.auth=ri(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{fr(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new dr(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;ur(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(mi)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new di().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&ur(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=ci();t.length!==0&&(t+=n),si(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function gi(e,t,n,r=!1,i=!1){let a=new hi(e),o;if(i)o=mi;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function _i(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await gi(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await gi(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await gi(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await gi(e,t,n,!1,!0))):Promise.reject(i)):r(e,await gi(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function vi(e){let t=ri(e),n=new dr(await fr(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new hi(t).verify()}function yi(e,t){let n=cn(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(Ne(n.getOptions(),t??{}))return e;Rn(e,`already-initialized`)}return n.initialize({options:t})}function bi(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Pr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function xi(e,t,n){let r=ri(e);A(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=Si(t),{host:o,port:s}=Ci(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){A(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),A(Ne(l,r.config.emulator)&&Ne(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,fe(o)?(C(`${a}//${o}${c}`),ge(`Auth`,!0)):i||Ti()}function Si(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function Ci(e){let t=Si(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:wi(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:wi(t)}}}function wi(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function Ti(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var Ei=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Un(`not implemented`)}_getIdTokenResponse(e){return Un(`not implemented`)}_linkToIdToken(e,t){return Un(`not implemented`)}_getReauthenticationResolver(e){return Un(`not implemented`)}};async function Di(e,t){return rr(e,`POST`,`/v1/accounts:signUp`,t)}async function Oi(e,t){return ar(e,`POST`,`/v1/accounts:signInWithPassword`,nr(e,t))}async function ki(e,t){return ar(e,`POST`,`/v1/accounts:signInWithEmailLink`,nr(e,t))}async function Ai(e,t){return ar(e,`POST`,`/v1/accounts:signInWithEmailLink`,nr(e,t))}var ji=class e extends Ei{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return _i(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,Oi,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return ki(e,{email:this._email,oobCode:this._password});default:Rn(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return _i(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,Di,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return Ai(e,{idToken:t,email:this._email,oobCode:this._password});default:Rn(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Mi(e,t){return ar(e,`POST`,`/v1/accounts:signInWithIdp`,nr(e,t))}var Ni=`http://localhost`,Pi=class e extends Ei{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Rn(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return Mi(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,Mi(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Mi(e,t)}buildRequest(){let e={requestUri:Ni,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fe(t)}return e}};async function Fi(e,t){return rr(e,`POST`,`/v1/accounts:sendVerificationCode`,nr(e,t))}async function Ii(e,t){return ar(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,nr(e,t))}async function Li(e,t){let n=await ar(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,nr(e,t));if(n.temporaryProof)throw lr(e,`account-exists-with-different-credential`,n);return n}var Ri={USER_NOT_FOUND:`user-not-found`};async function zi(e,t){return ar(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,nr(e,{...t,operation:`REAUTH`}),Ri)}var Bi=class e extends Ei{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return Ii(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Li(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return zi(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function Vi(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function Hi(e){let t=Ie(Le(e)).link,n=t?Ie(Le(t)).deep_link_id:null,r=Ie(Le(e)).deep_link_id;return(r?Ie(Le(r)).link:null)||r||n||t||e}var j=class e{constructor(e){let t=Ie(Le(e)),n=t.apiKey??null,r=t.oobCode??null,i=Vi(t.mode??null);A(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=Hi(t);try{return new e(n)}catch{return null}}},Ui=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return ji._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=j.parseLink(t);return A(n,`argument-error`),ji._fromEmailAndCode(e,n.code,n.tenantId)}};Ui.PROVIDER_ID=`password`,Ui.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,Ui.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var Wi=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},Gi=class extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},Ki=class e extends Gi{constructor(){super(`facebook.com`)}static credential(t){return Pi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Ki.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,Ki.PROVIDER_ID=`facebook.com`;var qi=class e extends Gi{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return Pi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};qi.GOOGLE_SIGN_IN_METHOD=`google.com`,qi.PROVIDER_ID=`google.com`;var Ji=class e extends Gi{constructor(){super(`github.com`)}static credential(t){return Pi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Ji.GITHUB_SIGN_IN_METHOD=`github.com`,Ji.PROVIDER_ID=`github.com`;var Yi=class e extends Gi{constructor(){super(`twitter.com`)}static credential(t,n){return Pi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};Yi.TWITTER_SIGN_IN_METHOD=`twitter.com`,Yi.PROVIDER_ID=`twitter.com`;async function Xi(e,t){return ar(e,`POST`,`/v1/accounts:signUp`,nr(e,t))}var Zi=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await Mr._fromIdTokenResponse(t,r,i),providerId:Qi(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:Qi(r),_tokenResponse:r,operationType:n})}};function Qi(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}async function $i(e){if(ln(e.app))return Promise.reject(Vn(e));let t=ri(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Zi({user:t.currentUser,providerId:null,operationType:`signIn`});let n=await Xi(t,{returnSecureToken:!0}),r=await Zi._fromIdTokenResponse(t,`signIn`,n,!0);return await t._updateCurrentUser(r.user),r}var ea=class e extends Oe{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function ta(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?ea._fromErrorAndOperation(e,n,t,r):n})}async function na(e,t,n=!1){let r=await br(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Zi._forOperation(e,`link`,r)}async function ra(e,t,n=!1){let{auth:r}=e;if(ln(r.app))return Promise.reject(Vn(r));let i=`reauthenticate`;try{let a=await br(e,ta(r,i,t,e),n);A(a.idToken,r,`internal-error`);let o=vr(a.idToken);A(o,r,`internal-error`);let{sub:s}=o;return A(e.uid===s,r,`user-mismatch`),Zi._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&Rn(r,`user-mismatch`),e}}async function ia(e,t,n=!1){if(ln(e.app))return Promise.reject(Vn(e));let r=`signIn`,i=await ta(e,r,t),a=await Zi._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function aa(e,t){return ia(ri(e),t)}async function oa(e){let t=ri(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function sa(e,t,n){return ln(e.app)?Promise.reject(Vn(e)):aa(E(e),Ui.credential(t,n)).catch(async t=>{throw t.code===`auth/password-does-not-meet-requirements`&&oa(e),t})}function ca(e,t,n,r){return E(e).onIdTokenChanged(t,n,r)}function la(e,t,n){return E(e).beforeAuthStateChanged(t,n)}function ua(e,t,n,r){return E(e).onAuthStateChanged(t,n,r)}function da(e){return E(e).signOut()}function fa(e,t){return rr(e,`POST`,`/v2/accounts/mfaEnrollment:start`,nr(e,t))}function pa(e,t){return rr(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,nr(e,t))}function ma(e,t){return rr(e,`POST`,`/v2/accounts/mfaEnrollment:start`,nr(e,t))}function ha(e,t){return rr(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,nr(e,t))}var ga=`__sak`,_a=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ga,`1`),this.storage.removeItem(ga),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},va=1e3,ya=10,ba=class extends _a{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);Yr()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,ya):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},va)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};ba.type=`LOCAL`;var xa=ba,Sa=1e3;function Ca(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function wa(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var Ta=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=wa(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:Ca(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=wa(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=wa(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=Ca(n),i=setInterval(()=>{let e=Ca(n);e!==r&&(t(e),r=e)},Sa);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};Ta.type=`COOKIE`;var Ea=class extends _a{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};Ea.type=`SESSION`;var Da=Ea;function Oa(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var ka=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await Oa(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};ka.receivers=[];function Aa(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var ja=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=Aa(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function Ma(){return window}function Na(e){Ma().location.href=e}function Pa(){return Ma().WorkerGlobalScope!==void 0&&typeof Ma().importScripts==`function`}async function Fa(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ia(){return navigator?.serviceWorker?.controller||null}function La(){return Pa()?self:null}var Ra=`firebaseLocalStorageDb`,za=1,Ba=`firebaseLocalStorage`,Va=`fbase_key`,Ha=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function Ua(e,t){return e.transaction([Ba],t?`readwrite`:`readonly`).objectStore(Ba)}function Wa(){return new Ha(indexedDB.deleteDatabase(Ra)).toPromise()}function Ga(){let e=indexedDB.open(Ra,za);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(Ba,{keyPath:Va})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(Ba)?t(n):(n.close(),await Wa(),t(await Ga()))})})}async function Ka(e,t,n){return new Ha(Ua(e,!0).put({[Va]:t,value:n})).toPromise()}async function qa(e,t){let n=await new Ha(Ua(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function Ja(e,t){return new Ha(Ua(e,!0).delete(t)).toPromise()}var Ya=800,Xa=3,Za=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await Ga(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>Xa)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return Pa()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ka._getInstance(La()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await Fa(),!this.activeServiceWorker)return;this.sender=new ja(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ia()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Ga();return await Ka(e,ga,`1`),await Ja(e,ga),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ka(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>qa(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ja(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new Ha(Ua(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ya)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Za.type=`LOCAL`;var Qa=Za;function $a(e,t){return rr(e,`POST`,`/v2/accounts/mfaSignIn:start`,nr(e,t))}function eo(e,t){return rr(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,nr(e,t))}function to(e,t){return rr(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,nr(e,t))}ui(`rcb`),new Xn(3e4,6e4);var no=`recaptcha`;async function ro(e,t,n){if(!e._getRecaptchaConfig())try{await vi(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return A(t.type===`enroll`,e,`internal-error`),(await _i(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===mi?(A(n?.type===no,e,`argument-error`),fa(e,await io(e,t,n))):fa(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{A(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return A(i,e,`missing-multi-factor-info`),(await _i(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===mi?(A(n?.type===no,e,`argument-error`),$a(e,await io(e,t,n))):$a(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await _i(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===mi?(A(n?.type===no,e,`argument-error`),Fi(e,await io(e,t,n))):Fi(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function io(e,t,n){A(n.type===no,e,`argument-error`);let r=await n.verify();A(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var ao=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=ri(t)}verifyPhoneNumber(e,t){return ro(this.auth,e,E(t))}static credential(e,t){return Bi._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?Bi._fromTokenResponse(t,n):null}};ao.PROVIDER_ID=`phone`,ao.PHONE_SIGN_IN_METHOD=`phone`;function oo(e,t){return t?Pr(t):(A(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var so=class extends Ei{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return Mi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mi(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function co(e){return ia(e.auth,new so(e),e.bypassAuthState)}function lo(e){let{auth:t,user:n}=e;return A(n,t,`internal-error`),ra(n,new so(e),e.bypassAuthState)}async function uo(e){let{auth:t,user:n}=e;return A(n,t,`internal-error`),na(n,new so(e),e.bypassAuthState)}var fo=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return co;case`linkViaPopup`:case`linkViaRedirect`:return uo;case`reauthViaPopup`:case`reauthViaRedirect`:return lo;default:Rn(this.auth,`internal-error`)}}resolve(e){Wn(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},po=new Xn(2e3,1e4),mo=class e extends fo{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return A(e,this.auth,`internal-error`),e}async onExecution(){Wn(this.filter.length===1,`Popup operations only handle one event`);let e=Aa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(zn(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(zn(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,po.get())};e()}};mo.currentPopupAction=null;var ho=`pendingRedirect`,go=new Map,_o=class extends fo{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=go.get(this.auth._key());if(!e){try{let t=await vo(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}go.set(this.auth._key(),e)}return this.bypassAuthState||go.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function vo(e,t){let n=xo(t),r=bo(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function yo(e,t){go.set(e._key(),t)}function bo(e){return Pr(e._redirectPersistence)}function xo(e){return Lr(ho,e.config.apiKey,e.name)}async function M(e,t,n=!1){if(ln(e.app))return Promise.reject(Vn(e));let r=ri(e),i=await new _o(r,oo(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var So=600*1e3,Co=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Eo(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!To(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(zn(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=So&&this.cachedEventUids.clear(),this.cachedEventUids.has(wo(e))}saveEventToCache(e){this.cachedEventUids.add(wo(e)),this.lastProcessedEventTime=Date.now()}};function wo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function To({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function Eo(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return To(e);default:return!1}}async function Do(e,t={}){return rr(e,`GET`,`/v1/projects`,t)}var Oo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ko=/^https?/;async function Ao(e){if(e.config.emulator)return;let{authorizedDomains:t}=await Do(e);for(let e of t)try{if(jo(e))return}catch{}Rn(e,`unauthorized-domain`)}function jo(e){let t=Gn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!ko.test(n))return!1;if(Oo.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var Mo=new Xn(3e4,6e4);function No(){let e=Ma().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function Po(e){return new Promise((t,n)=>{function r(){No(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{No(),n(zn(e,`network-request-failed`))},timeout:Mo.get()})}if(Ma().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Ma().gapi?.load)r();else{let t=ui(`iframefcb`);return Ma()[t]=()=>{gapi.load?r():n(zn(e,`network-request-failed`))},si(`${li()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw Fo=null,e})}var Fo=null;function Io(e){return Fo||=Po(e),Fo}var Lo=new Xn(5e3,15e3),Ro=`__/auth/iframe`,zo=`emulator/auth/iframe`,Bo={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},Vo=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function Ho(e){let t=e.config;A(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?Zn(t,zo):`https://${e.config.authDomain}/${Ro}`,r={apiKey:t.apiKey,appName:e.name,v:fn},i=Vo.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${Fe(r).slice(1)}`}async function Uo(e){let t=await Io(e),n=Ma().gapi;return A(n,e,`internal-error`),t.open({where:document.body,url:Ho(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bo,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=zn(e,`network-request-failed`),a=Ma().setTimeout(()=>{r(i)},Lo.get());function o(){Ma().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var Wo={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},Go=500,Ko=600,qo=`_blank`,Jo=`http://localhost`,Yo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Xo(e,t,n,r=Go,i=Ko){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...Wo,width:r.toString(),height:i.toString(),top:a,left:o},l=T().toLowerCase();n&&(s=Hr(l)?qo:n),Br(l)&&(t||=Jo,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(Jr(l)&&s!==`_self`)return Zo(t||``,s),new Yo(null);let d=window.open(t||``,s,u);A(d,e,`popup-blocked`);try{d.focus()}catch{}return new Yo(d)}function Zo(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Qo=`__/auth/handler`,$o=`emulator/auth/handler`,es=`fac`;async function ts(e,t,n,r,i,a){A(e.config.authDomain,e,`auth-domain-config-required`),A(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:fn,eventId:i};if(t instanceof Wi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,Me(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof Gi){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${es}=${encodeURIComponent(c)}`:``;return`${ns(e)}?${Fe(s).slice(1)}${l}`}function ns({config:e}){return e.emulator?Zn(e,$o):`https://${e.authDomain}/${Qo}`}var rs=`webStorageSupport`,is=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Da,this._completeRedirectFn=M,this._overrideRedirectResult=yo}async _openPopup(e,t,n,r){return Wn(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),Xo(e,await ts(e,t,n,Gn(),r),Aa())}async _openRedirect(e,t,n,r){return await this._originValidation(e),Na(await ts(e,t,n,Gn(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Wn(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await Uo(e),n=new Co(e);return t.register(`authEvent`,t=>(A(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rs,{type:rs},n=>{let r=n?.[0]?.[rs];r!==void 0&&t(!!r),Rn(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ao(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Xr()||Vr()||qr()}},as=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return Un(`unexpected MultiFactorSessionType`)}}},os=class e extends as{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return pa(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return eo(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},ss=class{constructor(){}static assertion(e){return os._fromCredential(e)}};ss.FACTOR_ID=`phone`;var cs=class{static assertionForEnrollment(e,t){return ls._fromSecret(e,t)}static assertionForSignIn(e,t){return ls._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;A(t.user?.auth!==void 0,`internal-error`);let n=await ma(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return us._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};cs.FACTOR_ID=`totp`;var ls=class e extends as{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return A(this.secret!==void 0,e,`argument-error`),ha(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){A(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return to(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},us=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(ds(e)||ds(t))&&(n=!0),n&&(ds(e)&&(e=this.auth.currentUser?.email||`unknownuser`),ds(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function ds(e){return e===void 0||e?.length===0}var fs=`@firebase/auth`,ps=`1.12.0`,ms=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){A(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function hs(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function gs(e){sn(new He(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;A(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new ni(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:Zr(e)});return bi(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),sn(new He(`auth-internal`,e=>(e=>new ms(e))(ri(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),hn(fs,ps,hs(e)),hn(fs,ps,`esm2020`)}var _s=ue(`authIdTokenMaxAge`)||300,vs=null,ys=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_s)return;let i=n?.token;vs!==i&&(vs=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bs(e=mn()){let t=cn(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=yi(e,{popupRedirectResolver:is,persistence:[Qa,xa,Da]}),r=ue(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=ys(e.toString());la(n,t,()=>t(n.currentUser)),ca(n,e=>t(e))}}let i=ce(`auth`);return i&&xi(n,`http://${i}`),n}function xs(){return document.getElementsByTagName(`head`)?.[0]??document}oi({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=zn(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,xs().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),gs(`Browser`);var Ss=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Cs={},ws,Ts;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=ee(n,1),a=ee(r,1);for(r=ee(r,2),n=ee(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=ee(r,1),n=ee(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function ee(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ts=Cs.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,ws=Cs.Integer=o}).apply(Ss===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Ss);var Es=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Ds={},Os,ks,As,js,Ms,Ns,Ps,Fs;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof Es==`object`&&Es];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=te;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,ee=!1,te=new v,S=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(ne)}};function ne(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}ee=!1}function re(){this.u=this.u,this.C=this.C}re.prototype.u=!1,re.prototype.dispose=function(){this.u||(this.u=!0,this.N())},re.prototype[Symbol.dispose]=function(){this.dispose()},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function oe(e){return/^[\s\xa0]*$/.test(e)}function se(e,t){ie.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(se,ie),se.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ce=`closure_listenable_`+(Math.random()*1e6|0),le=0;function ue(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++le,this.da=this.fa=!1}function de(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function fe(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function C(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function w(e){let t={};for(let n in e)t[n]=e[n];return t}let pe=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function me(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<pe.length;t++)n=pe[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function he(e){this.src=e,this.g={},this.h=0}he.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=T(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new ue(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function ge(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(de(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function T(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var _e=`closure_lm_`+(Math.random()*1e6|0),ve={};function ye(e,t,n,r,i){if(r&&r.once)return Se(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)ye(e,t[a],n,r,i);return null}return n=ke(n),e&&e[ce]?e.J(t,n,s(r)?!!r.capture:!!r,i):be(e,t,n,!1,r,i)}function be(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=De(e);if(c||(e[_e]=c=new he(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=xe(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ae||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Te(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function xe(){function e(n){return t.call(e.src,e.listener,n)}let t=Ee;return e}function Se(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)Se(e,t[a],n,r,i);return null}return n=ke(n),e&&e[ce]?e.K(t,n,s(r)?!!r.capture:!!r,i):be(e,t,n,!0,r,i)}function Ce(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ce(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=ke(n),e&&e[ce]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=T(t,n,r,i),n>-1&&(de(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=De(e))&&(t=e.g[t.toString()],e=-1,t&&(e=T(t,n,r,i)),(n=e>-1?t[e]:null)&&we(n))}function we(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[ce])ge(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Te(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=De(t))?(ge(n,e),n.h==0&&(n.src=null,t[_e]=null)):de(e)}}}function Te(e){return e in ve?ve[e]:ve[e]=`on`+e}function Ee(e,t){if(e.da)e=!0;else{t=new se(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&we(e),e=n.call(r,t)}return e}function De(e){return e=e[_e],e instanceof he?e:null}var Oe=`__closure_events_fn_`+(Math.random()*1e9>>>0);function ke(e){return typeof e==`function`?e:(e[Oe]||(e[Oe]=function(t){return e.handleEvent(t)}),e[Oe])}function Ae(){re.call(this),this.i=new he(this),this.M=this,this.G=null}d(Ae,re),Ae.prototype[ce]=!0,Ae.prototype.removeEventListener=function(e,t,n,r){Ce(this,e,t,n,r)};function je(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new ie(t,e);else if(t instanceof ie)t.target=t.target||e;else{var i=t;t=new ie(r,e),me(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=Me(a,r,!0,t)&&i;if(a=t.g=e,i=Me(a,r,!0,t)&&i,i=Me(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Me(a,r,!1,t)&&i}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)de(n[e]);delete e.g[t],e.h--}}this.G=null},Ae.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ae.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Me(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&ge(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Ne(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Pe(e){e.g=Ne(()=>{e.g=null,e.i&&(e.i=!1,Pe(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Fe extends re{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Pe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ie(e){re.call(this),this.h=e,this.g={}}d(Ie,re);var Le=[];function Re(e){fe(e.g,function(e,t){this.g.hasOwnProperty(t)&&we(e)},e),e.g={}}Ie.prototype.N=function(){Ie.Z.N.call(this),Re(this)},Ie.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var ze=o.JSON.stringify,Be=o.JSON.parse,Ve=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function E(){}function He(){}var Ue={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function We(){ie.call(this,`d`)}d(We,ie);function Ge(){ie.call(this,`c`)}d(Ge,ie);var Ke={},qe=null;function Je(){return qe||=new Ae}Ke.Ia=`serverreachability`;function D(e){ie.call(this,Ke.Ia,e)}d(D,ie);function Ye(e){let t=Je();je(t,new D(t))}Ke.STAT_EVENT=`statevent`;function Xe(e,t){ie.call(this,Ke.STAT_EVENT,e),this.stat=t}d(Xe,ie);function Ze(e){let t=Je();je(t,new Xe(t,e))}Ke.Ja=`timingevent`;function Qe(e,t){ie.call(this,Ke.Ja,e),this.size=t}d(Qe,ie);function $e(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function et(){this.g=!0}et.prototype.ua=function(){this.g=!1};function tt(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function nt(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function rt(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+at(e,n)+(r?` `+r:``)})}function it(e,t){e.info(function(){return`TIMEOUT: `+t})}et.prototype.info=function(){};function at(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return ze(a)}catch{return t}}var ot={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},st={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},ct;function lt(){}d(lt,E),lt.prototype.g=function(){return new XMLHttpRequest},ct=new lt;function ut(e){return encodeURIComponent(String(e))}function dt(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function ft(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pt}function pt(){this.i=null,this.g=``,this.h=!1}var mt={},ht={};function gt(e,t,n){e.M=1,e.A=Ht(Rt(t)),e.u=n,e.R=!0,_t(e,null)}function _t(e,t){e.F=Date.now(),xt(e),e.B=Rt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),nn(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new pt,e.g=Kn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Fe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Le[0]=i.toString()),i=Le);for(let e=0;e<i.length;e++){let a=ye(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?w(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Ye(),tt(e.i,e.v,e.B,e.l,e.S,e.u)}ft.prototype.ba=function(e){e=e.target;let t=this.O;t&&wn(e)==3?t.j():this.Y(e)},ft.prototype.Y=function(e){try{if(e==this.g)a:{let s=wn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||s!=4||c==7||Ye(c==8||l<=0?3:2),Ct(this);var t=this.g.ca();this.X=t;var n=vt(this);if(this.o=t==200,nt(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!oe(r)){var a=r;break b}}a=null}if(e=a)rt(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,Et(this,e);else{this.o=!1,this.m=3,Ze(12),Tt(this),wt(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=bt(this,n),t==ht){s==4&&(this.m=4,Ze(14),e=!1),rt(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==mt){this.m=4,Ze(15),rt(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else rt(this.i,this.l,t,null),Et(this,t);if(yt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Ze(16),e=!1),this.o=this.o&&e,!e)rt(this.i,this.l,n,`[Invalid Chunked Response]`),Tt(this),wt(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),zn(o),o.P=!0,Ze(11))}}else rt(this.i,this.l,n,null),Et(this,n);s==4&&Tt(this),this.o&&!this.K&&(s==4?Hn(this.j,this):(this.o=!1,xt(this)))}else En(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Ze(12)):(this.m=0,Ze(13)),Tt(this),wt(this)}}}catch{}};function vt(e){if(!yt(e))return e.g.la();let t=Tn(e.g);if(t===``)return``;let n=``,r=t.length,i=wn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return Tt(e),wt(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function yt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function bt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?ht:(n=Number(t.substring(n,r)),isNaN(n)?mt:(r+=1,r+n>t.length?ht:(t=t.slice(r,r+n),e.C=r+n,t)))}ft.prototype.cancel=function(){this.K=!0,Tt(this)};function xt(e){e.T=Date.now()+e.H,St(e,e.H)}function St(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=$e(l(e.aa,e),t)}function Ct(e){e.D&&=(o.clearTimeout(e.D),null)}ft.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(it(this.i,this.B),this.M!=2&&(Ye(),Ze(17)),Tt(this),this.m=2,wt(this)):St(this,this.T-e)};function wt(e){e.j.I==0||e.K||Hn(e.j,e)}function Tt(e){Ct(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Re(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Et(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||jt(n.h,e))){if(!e.L&&jt(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Vn(n),An(n);else break a;Rn(n),Ze(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=$e(l(n.Va,n),6e3));At(n.h)<=1&&n.ta&&(n.ta=void 0)}else Un(n,11)}else if((e.L||n.g==e)&&Vn(n),!oe(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(Mt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,O(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=Gn(r,r.L?r.ba:null,r.W),o.L){Nt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(Ct(s),xt(s)),r.g=o}else Ln(r);n.i.length>0&&Mn(n)}else l[0]!=`stop`&&l[0]!=`close`||Un(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Un(n,7):kn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Ye(4)}catch{}}var Dt=class{constructor(e,t){this.g=e,this.map=t}};function Ot(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function At(e){return e.h?1:e.g?e.g.size:0}function jt(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Mt(e,t){e.g?e.g.add(t):e.h=t}function Nt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Ot.prototype.cancel=function(){if(this.i=Pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Pt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var Ft=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function It(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Lt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Lt?(this.l=e.l,zt(this,e.j),this.o=e.o,this.g=e.g,Bt(this,e.u),this.h=e.h,Vt(this,rn(e.i)),this.m=e.m):e&&(t=String(e).match(Ft))?(this.l=!1,zt(this,t[1]||``,!0),this.o=Ut(t[2]||``),this.g=Ut(t[3]||``,!0),Bt(this,t[4]),this.h=Ut(t[5]||``,!0),Vt(this,t[6]||``,!0),this.m=Ut(t[7]||``)):(this.l=!1,this.i=new Zt(null,this.l))}Lt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Wt(t,Kt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Wt(t,Kt,!0),`@`),e.push(ut(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Wt(n,n.charAt(0)==`/`?Jt:qt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Wt(n,Xt)),e.join(``)},Lt.prototype.resolve=function(e){let t=Rt(this),n=!!e.j;n?zt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Bt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Vt(t,rn(e.i)):n=!!e.m,n&&(t.m=e.m),t};function Rt(e){return new Lt(e)}function zt(e,t,n){e.j=n?Ut(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Bt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Vt(e,t,n){t instanceof Zt?(e.i=t,on(e.i,e.l)):(n||(t=Wt(t,Yt)),e.i=new Zt(t,e.l))}function O(e,t,n){e.i.set(t,n)}function Ht(e){return O(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Ut(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Wt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Gt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Kt=/[#\/\?@]/g,qt=/[#\?:]/g,Jt=/[#\?]/g,Yt=/[#\?@]/g,Xt=/#/g;function Zt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qt(e){e.g||(e.g=new Map,e.h=0,e.i&&It(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Zt.prototype,e.add=function(e,t){Qt(this),this.i=null,e=an(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function $t(e,t){Qt(e),t=an(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function en(e,t){return Qt(e),t=an(e,t),e.g.has(t)}e.forEach=function(e,t){Qt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function tn(e,t){Qt(e);let n=[];if(typeof t==`string`)en(e,t)&&(n=n.concat(e.g.get(an(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Qt(this),this.i=null,e=an(this,e),en(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=tn(this,e),e.length>0?String(e[0]):t):t};function nn(e,t,n){$t(e,t),n.length>0&&(e.i=null,e.g.set(an(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=ut(n);n=tn(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+ut(n[t])),e.push(r)}}return this.i=e.join(`&`)};function rn(e){let t=new Zt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function an(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function on(e,t){t&&!e.j&&(Qt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&($t(this,t),nn(this,n,e))},e)),e.j=t}function sn(e,t){let n=new et;if(o.Image){let r=new Image;r.onload=u(ln,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(ln,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(ln,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(ln,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function cn(e,t){let n=new et,r=new AbortController,i=setTimeout(()=>{r.abort(),ln(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?ln(n,`TestPingServer: ok`,!0,t):ln(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),ln(n,`TestPingServer: error`,!1,t)})}function ln(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function un(){this.g=new Ve}function dn(e){this.i=e.Sb||null,this.h=e.ab||!1}d(dn,E),dn.prototype.g=function(){return new fn(this.i,this.h)};function fn(e,t){Ae.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(fn,Ae),e=fn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,hn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,hn(this)),this.g&&(this.readyState=3,hn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;pn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function pn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?mn(this):hn(this),this.readyState==3&&pn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,mn(this))},e.Na=function(e){this.g&&(this.response=e,mn(this))},e.ga=function(){this.g&&mn(this)};function mn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,hn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function hn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(fn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function gn(e){let t=``;return fe(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function _n(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=gn(n),typeof e==`string`||O(e,t,n))}function k(e){Ae.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(k,Ae);var vn=/^https?$/i,yn=[`POST`,`PUT`];e=k.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ct.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){bn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(yn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){bn(this,e)}};function bn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,xn(e),Cn(e)}function xn(e){e.A||(e.A=!0,je(e,`complete`),je(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,je(this,`complete`),je(this,`abort`),Cn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cn(this,!0)),k.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Sn(this):this.Xa())},e.Xa=function(){Sn(this)};function Sn(e){if(e.h&&a!==void 0){if(e.v&&wn(e)==4)setTimeout(e.Ca.bind(e),0);else if(je(e,`readystatechange`),wn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(Ft)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!vn.test(t?t.toLowerCase():``)}n=r}if(n)je(e,`complete`),je(e,`success`);else{e.o=6;try{var i=wn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,xn(e)}}finally{Cn(e)}}}}function Cn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||je(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function wn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return wn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Be(t)}};function Tn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function En(e){let t={};e=(e.g&&wn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(oe(e[r]))continue;var n=dt(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}C(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function Dn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function On(e){this.za=0,this.i=[],this.j=new et,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dn(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dn(`baseRetryDelayMs`,5e3,e),this.Za=Dn(`retryDelaySeedMs`,1e4,e),this.Ta=Dn(`forwardChannelMaxRetries`,2,e),this.va=Dn(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new Ot(e&&e.concurrentRequestLimit),this.Ba=new un,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=On.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Ze(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=Gn(this,null,this.W),Mn(this)};function kn(e){if(jn(e),e.I==3){var t=e.V++,n=Rt(e.J);if(O(n,`SID`,e.M),O(n,`RID`,t),O(n,`TYPE`,`terminate`),Fn(e,n),t=new ft(e,e.j,t),t.M=2,t.A=Ht(Rt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Kn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),xt(t)}Wn(e)}function An(e){e.g&&=(zn(e),e.g.cancel(),null)}function jn(e){An(e),e.v&&=(o.clearTimeout(e.v),null),Vn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Mn(e){if(!kt(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||S(),ee||=(x(),!0),te.add(t,e),e.D=0}}function Nn(e,t){return At(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=$e(l(e.Ea,e,t),A(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new ft(this,this.j,e),a=this.o;if(this.U&&(a?(a=w(a),me(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=In(this,i,t),n=Rt(this.J),O(n,`RID`,e),O(n,`CVER`,22),this.G&&O(n,`X-HTTP-Session-Id`,this.G),Fn(this,n),a&&(this.R?t=`headers=`+ut(gn(a))+`&`+t:this.u&&_n(n,this.u,a)),Mt(this.h,i),this.Ra&&O(n,`TYPE`,`init`),this.S?(O(n,`$req`,t),O(n,`SID`,`null`),i.U=!0,gt(i,n,null)):gt(i,n,t),this.I=2}}else this.I==3&&(e?Pn(this,e):this.i.length==0||kt(this.h)||Pn(this))};function Pn(e,t){var n=t?t.l:e.V++;let r=Rt(e.J);O(r,`SID`,e.M),O(r,`RID`,n),O(r,`AID`,e.K),Fn(e,r),e.u&&e.o&&_n(r,e.u,e.o),n=new ft(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=In(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),Mt(e.h,n),gt(n,r,t)}function Fn(e,t){e.H&&fe(e.H,function(e,n){O(t,n,e)}),e.l&&fe({},function(e,n){O(t,n,e)})}function In(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=ze(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Ln(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||S(),ee||=(x(),!0),te.add(t,e),e.A=0}}function Rn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=$e(l(e.Da,e),A(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,Bn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=$e(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Ze(10),An(this),Bn(this))};function zn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function Bn(e){e.g=new ft(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=Rt(e.na);O(t,`RID`,`rpc`),O(t,`SID`,e.M),O(t,`AID`,e.K),O(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&O(t,`TO`,e.ia),O(t,`TYPE`,`xmlhttp`),Fn(e,t),e.u&&e.o&&_n(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Ht(Rt(t)),n.u=null,n.R=!0,_t(n,e)}e.Va=function(){this.C!=null&&(this.C=null,An(this),Rn(this),Ze(19))};function Vn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Hn(e,t){var n=null;if(e.g==t){Vn(e),zn(e),e.g=null;var r=2}else if(jt(e.h,t))n=t.G,Nt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Je(),je(r,new Qe(r,n)),Mn(e)}else Ln(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Nn(e,t)||r==2&&Rn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Un(e,5);break;case 4:Un(e,10);break;case 3:Un(e,6);break;default:Un(e,2)}}}function A(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Un(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Lt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||zt(r,`https`),Ht(r),t?sn(r.toString(),n):cn(r.toString(),n)}else Ze(2);e.I=0,e.l&&e.l.pa(t),Wn(e),jn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Ze(2)):(this.j.info(`Failed to ping google.com`),Ze(1))};function Wn(e){if(e.I=0,e.ja=[],e.l){let t=Pt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function Gn(e,t,n){var r=n instanceof Lt?Rt(n):new Lt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Bt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Lt(null);r&&zt(e,r),t&&(e.g=t),i&&Bt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&O(r,n,t),O(r,`VER`,e.ka),Fn(e,r),r}function Kn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new k(new dn({ab:n})):new k(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function qn(){}e=qn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Jn(){}Jn.prototype.g=function(e,t){return new Yn(e,t)};function Yn(e,t){Ae.call(this),this.g=new On(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!oe(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!oe(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Qn(this)}d(Yn,Ae),Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){kn(this.g)},Yn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=ze(e),e=n);t.i.push(new Dt(t.Ya++,e)),t.I==3&&Mn(t)},Yn.prototype.N=function(){this.g.l=null,delete this.j,kn(this.g),delete this.g,Yn.Z.N.call(this)};function Xn(e){We.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Xn,We);function Zn(){Ge.call(this),this.status=1}d(Zn,Ge);function Qn(e){this.g=e}d(Qn,qn),Qn.prototype.ra=function(){je(this.g,`a`)},Qn.prototype.qa=function(e){je(this.g,new Xn(e))},Qn.prototype.pa=function(e){je(this.g,new Zn)},Qn.prototype.oa=function(){je(this.g,`b`)},Jn.prototype.createWebChannel=Jn.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,Fs=Ds.createWebChannelTransport=function(){return new Jn},Ps=Ds.getStatEventTarget=function(){return Je()},Ns=Ds.Event=Ke,Ms=Ds.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,js=Ds.ErrorCode=ot,st.COMPLETE=`complete`,As=Ds.EventType=st,He.EventType=Ue,Ue.OPEN=`a`,Ue.CLOSE=`b`,Ue.ERROR=`c`,Ue.MESSAGE=`d`,Ae.prototype.listen=Ae.prototype.J,ks=Ds.WebChannel=He,Ds.FetchXmlHttpFactory=dn,k.prototype.listenOnce=k.prototype.K,k.prototype.getLastError=k.prototype.Ha,k.prototype.getLastErrorCode=k.prototype.ya,k.prototype.getStatus=k.prototype.ca,k.prototype.getResponseJson=k.prototype.La,k.prototype.getResponseText=k.prototype.la,k.prototype.send=k.prototype.ea,k.prototype.setWithCredentials=k.prototype.Fa,Os=Ds.XhrIo=k}).apply(Es===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Es);var Is=`@firebase/firestore`,Ls=`4.9.3`,Rs=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Rs.UNAUTHENTICATED=new Rs(null),Rs.GOOGLE_CREDENTIALS=new Rs(`google-credentials-uid`),Rs.FIRST_PARTY=new Rs(`first-party-uid`),Rs.MOCK_USER=new Rs(`mock-user`);var zs=`12.7.0`,Bs=new $e(`@firebase/firestore`);function Vs(){return Bs.logLevel}function N(e,...t){if(Bs.logLevel<=D.DEBUG){let n=t.map(Ws);Bs.debug(`Firestore (${zs}): ${e}`,...n)}}function Hs(e,...t){if(Bs.logLevel<=D.ERROR){let n=t.map(Ws);Bs.error(`Firestore (${zs}): ${e}`,...n)}}function Us(e,...t){if(Bs.logLevel<=D.WARN){let n=t.map(Ws);Bs.warn(`Firestore (${zs}): ${e}`,...n)}}function Ws(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function P(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Gs(e,r,n)}function Gs(e,t,n){let r=`FIRESTORE (${zs}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Hs(r),Error(r)}function F(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Gs(t,i,r)}function I(e,t){return e}var L={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},R=class extends Oe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Ks=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},qs=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},Js=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rs.UNAUTHENTICATED)))}shutdown(){}},Ys=class{constructor(e){this.t=e,this.currentUser=Rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){F(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ks,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{N(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(N(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Ks)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(F(typeof t.accessToken==`string`,31837,{l:t}),new qs(t.accessToken,this.currentUser)):null:(N(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return F(e===null||typeof e==`string`,2055,{h:e}),new Rs(e)}},Xs=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Rs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},Zs=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Xs(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Rs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Qs=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},$s=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){F(this.o===void 0,3512);let n=e=>{e.error!=null&&N(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,N(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{N(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):N(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new Qs(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(F(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new Qs(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ec(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var tc=class{static newId(){let e=``;for(;e.length<20;){let t=ec(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function z(e,t){return e<t?-1:e>t?1:0}function nc(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return ac(n)===ac(i)?z(n,i):ac(n)?1:-1}return z(e.length,t.length)}var rc=55296,ic=57343;function ac(e){let t=e.charCodeAt(0);return t>=rc&&t<=ic}function oc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function sc(e){return e+`\0`}var cc=`__name__`,lc=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&P(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&P(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return z(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):nc(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return ws.fromString(e.substring(4,e.length-2))}},uc=class e extends lc{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new R(L.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},dc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fc=class e extends lc{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return dc.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cc}static keyField(){return new e([cc])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new R(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new R(L.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new R(L.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new R(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},B=class e{constructor(e){this.path=e}static fromPath(t){return new e(uc.fromString(t))}static fromName(t){return new e(uc.fromString(t).popFirst(5))}static empty(){return new e(uc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&uc.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return uc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new uc(t.slice()))}};function pc(e,t,n){if(!n)throw new R(L.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function mc(e,t,n,r){if(!0===t&&!0===r)throw new R(L.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function hc(e){if(!B.isDocumentKey(e))throw new R(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function gc(e){if(B.isDocumentKey(e))throw new R(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function _c(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function vc(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:P(12329,{type:typeof e})}function yc(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new R(L.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=vc(e);throw new R(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function bc(e,t){if(t<=0)throw new R(L.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function xc(e,t){let n={typeString:e};return t&&(n.value=t),n}function Sc(e,t){if(!_c(e))throw new R(L.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new R(L.INVALID_ARGUMENT,n);return!0}var Cc=-62135596800,wc=1e6,Tc=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*wc))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new R(L.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<Cc||e>=253402300800)throw new R(L.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wc}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Sc(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-Cc;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Tc._jsonSchemaVersion=`firestore/timestamp/1.0`,Tc._jsonSchema={type:xc(`string`,Tc._jsonSchemaVersion),seconds:xc(`number`),nanoseconds:xc(`number`)};var V=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Tc(0,0))}static max(){return new e(new Tc(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},Ec=-1,Dc=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};function Oc(e){return e.fields.find((e=>e.kind===2))}function kc(e){return e.fields.filter((e=>e.kind!==2))}Dc.UNKNOWN_ID=-1;var Ac=class{constructor(e,t){this.fieldPath=e,this.kind=t}},jc=class e{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new e(0,Pc.min())}};function Mc(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new Pc(V.fromTimestamp(r===1e9?new Tc(n+1,0):new Tc(n,r)),B.empty(),t)}function Nc(e){return new Pc(e.readTime,e.key,Ec)}var Pc=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(V.min(),B.empty(),Ec)}static max(){return new e(V.max(),B.empty(),Ec)}};function Fc(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=B.comparator(e.documentKey,t.documentKey),n===0?z(e.largestBatchId,t.largestBatchId):n):n}var Ic=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Lc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function Rc(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==Ic)throw e;N(`LocalStore`,`Unexpectedly lost primary lease`)}var H=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&P(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}},U=`SimpleDb`,zc=class e{static open(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(e){throw new Uc(n,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ks,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Uc(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{let n=Jc(t.target.error);this.S.reject(new Uc(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(N(U,`Aborting transaction:`,e?e.message:`Client-initiated abort`),this.aborted=!0,this.transaction.abort())}C(){let e=this.transaction;this.aborted||typeof e.commit!=`function`||e.commit()}store(e){return new Gc(this.transaction.objectStore(e))}},Bc=class e{static delete(e){return N(U,`Removing database:`,e),Kc(re().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Te())return!1;if(e.F())return!0;let t=T(),n=e.M(t),r=0<n&&n<10,i=Vc(t),a=0<i&&i<4.5;return!(t.indexOf(`MSIE `)>0||t.indexOf(`Trident/`)>0||t.indexOf(`Edge/`)>0||r||a)}static F(){return typeof process<`u`&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE===`YES`}static O(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split(`_`).slice(0,2).join(`.`):`-1`;return Number(n)}constructor(t,n,r){this.name=t,this.version=n,this.N=r,this.B=null,e.M(T())===12.2&&Hs(`Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`)}async L(e){return this.db||=(N(U,`Opening database:`,this.name),await new Promise(((t,n)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{let n=e.target.result;t(n)},r.onblocked=()=>{n(new Uc(e,`Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.`))},r.onerror=t=>{let r=t.target.error;r.name===`VersionError`?n(new R(L.FAILED_PRECONDITION,`A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.`)):r.name===`InvalidStateError`?n(new R(L.FAILED_PRECONDITION,`Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: `+r)):n(new Uc(e,r))},r.onupgradeneeded=e=>{N(U,`Database "`+this.name+`" requires upgrade from version:`,e.oldVersion);let t=e.target.result;this.N.k(t,r.transaction,e.oldVersion,this.version).next((()=>{N(U,`Database upgrade to version `+this.version+` complete`)}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){let i=t===`readonly`,a=0;for(;;){++a;try{this.db=await this.L(e);let t=zc.open(this.db,e,i?`readonly`:`readwrite`,n),a=r(t).next((e=>(t.C(),e))).catch((e=>(t.abort(e),H.reject(e)))).toPromise();return a.catch((()=>{})),await t.D,a}catch(e){let t=e,n=t.name!==`FirebaseError`&&a<3;if(N(U,`Transaction failed with error:`,t.message,`Retrying:`,n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}};function Vc(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}var Hc=class{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Kc(this.U.delete())}},Uc=class extends R{constructor(e,t){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name=`IndexedDbTransactionError`}};function Wc(e){return e.name===`IndexedDbTransactionError`}var Gc=class{constructor(e){this.store=e}put(e,t){let n;return t===void 0?(N(U,`PUT`,this.store.name,`<auto-key>`,e),n=this.store.put(e)):(N(U,`PUT`,this.store.name,e,t),n=this.store.put(t,e)),Kc(n)}add(e){return N(U,`ADD`,this.store.name,e,e),Kc(this.store.add(e))}get(e){return Kc(this.store.get(e)).next((t=>(t===void 0&&(t=null),N(U,`GET`,this.store.name,e,t),t)))}delete(e){return N(U,`DELETE`,this.store.name,e),Kc(this.store.delete(e))}count(){return N(U,`COUNT`,this.store.name),Kc(this.store.count())}J(e,t){let n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if(typeof r.getAll==`function`){let e=r.getAll(n.range);return new H(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{let e=this.cursor(n),t=[];return this.H(e,((e,n)=>{t.push(n)})).next((()=>t))}}Y(e,t){let n=this.store.getAll(e,t===null?void 0:t);return new H(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}Z(e,t){N(U,`DELETE ALL`,this.store.name);let n=this.options(e,t);n.X=!1;let r=this.cursor(n);return this.H(r,((e,t,n)=>n.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);let r=this.cursor(n);return this.H(r,t)}te(e){let t=this.cursor({});return new H(((n,r)=>{t.onerror=e=>{r(Jc(e.target.error))},t.onsuccess=t=>{let r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}H(e,t){let n=[];return new H(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i)return void r();let a=new Hc(i),o=t(i.primaryKey,i.value,a);if(o instanceof H){let e=o.catch((e=>(a.done(),H.reject(e))));n.push(e)}a.isDone?r():a.G===null?i.continue():i.continue(a.G)}})).next((()=>H.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e==`string`?n=e:t=e),{index:n,range:t}}cursor(e){let t=`next`;if(e.reverse&&(t=`prev`),e.index){let n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Kc(e){return new H(((t,n)=>{e.onsuccess=e=>{let n=e.target.result;t(n)},e.onerror=e=>{n(Jc(e.target.error))}}))}var qc=!1;function Jc(e){let t=Bc.M(T());if(t>=12.2&&t<13){let t=`An internal error was encountered in the Indexed Database server`;if(e.message.indexOf(t)>=0){let e=new R(`internal`,`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qc||(qc=!0,setTimeout((()=>{throw e}),0)),e}}return e}var Yc=`IndexBackfiller`,Xc=class{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&=(this.task.cancel(),null)}get started(){return this.task!==null}re(e){N(Yc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay(`index_backfill`,e,(async()=>{this.task=null;try{N(Yc,`Documents written: ${await this.ne.ie()}`)}catch(e){Wc(e)?N(Yc,`Ignoring IndexedDB error during index backfill: `,e):await Rc(e)}await this.re(6e4)}))}},Zc=class{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction(`Backfill Indexes`,`readwrite-primary`,(t=>this.se(t,e)))}se(e,t){let n=new Set,r=t,i=!0;return H.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(t!==null&&!n.has(t))return N(Yc,`Processing collection: ${t}`),this.oe(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{let i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this._e(r,n))).next((n=>(N(Yc,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((e,t)=>{let r=Nc(t);Fc(r,n)>0&&(n=r)})),new Pc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}},Qc=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Qc.ce=-1;var $c=-1;function el(e){return e==null}function tl(e){return e===0&&1/e==-1/0}function nl(e){return typeof e==`number`&&Number.isInteger(e)&&!tl(e)&&e<=2**53-1&&e>=-(2**53-1)}var rl=``;function il(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=ol(t)),t=al(e.get(n),t);return ol(t)}function al(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case rl:n+=``;break;default:n+=r}}return n}function ol(e){return e+rl+``}function sl(e){let t=e.length;if(F(t>=2,64408,{path:e}),t===2)return F(e.charAt(0)===rl&&e.charAt(1)===``,56145,{path:e}),uc.emptyPath();let n=t-2,r=[],i=``;for(let a=0;a<t;){let t=e.indexOf(rl,a);switch((t<0||t>n)&&P(50515,{path:e}),e.charAt(t+1)){case``:let n=e.substring(a,t),o;i.length===0?o=n:(i+=n,o=i,i=``),r.push(o);break;case``:i+=e.substring(a,t),i+=`\0`;break;case``:i+=e.substring(a,t+1);break;default:P(61167,{path:e})}a=t+2}return new uc(r)}var cl=`remoteDocuments`,ll=`owner`,ul=`owner`,dl=`mutationQueues`,fl=`userId`,pl=`mutations`,ml=`batchId`,hl=`userMutationsIndex`,gl=[`userId`,`batchId`];function _l(e,t){return[e,il(t)]}function vl(e,t,n){return[e,il(t),n]}var yl={},bl=`documentMutations`,xl=`remoteDocumentsV14`,Sl=[`prefixPath`,`collectionGroup`,`readTime`,`documentId`],Cl=`documentKeyIndex`,wl=[`prefixPath`,`collectionGroup`,`documentId`],Tl=`collectionGroupIndex`,El=[`collectionGroup`,`readTime`,`prefixPath`,`documentId`],Dl=`remoteDocumentGlobal`,Ol=`remoteDocumentGlobalKey`,kl=`targets`,Al=`queryTargetsIndex`,jl=[`canonicalId`,`targetId`],Ml=`targetDocuments`,Nl=[`targetId`,`path`],Pl=`documentTargetsIndex`,Fl=[`path`,`targetId`],Il=`targetGlobalKey`,Ll=`targetGlobal`,Rl=`collectionParents`,zl=[`collectionId`,`parent`],Bl=`clientMetadata`,W=`clientId`,Vl=`bundles`,G=`bundleId`,K=`namedQueries`,Hl=`name`,Ul=`indexConfiguration`,Wl=`indexId`,Gl=`collectionGroupIndex`,Kl=`collectionGroup`,ql=`indexState`,Jl=[`indexId`,`uid`],Yl=`sequenceNumberIndex`,Xl=[`uid`,`sequenceNumber`],Zl=`indexEntries`,Ql=[`indexId`,`uid`,`arrayValue`,`directionalValue`,`orderedDocumentKey`,`documentKey`],$l=`documentKeyIndex`,eu=[`indexId`,`uid`,`orderedDocumentKey`],tu=`documentOverlays`,nu=[`userId`,`collectionPath`,`documentId`],ru=`collectionPathOverlayIndex`,iu=[`userId`,`collectionPath`,`largestBatchId`],au=`collectionGroupOverlayIndex`,ou=[`userId`,`collectionGroup`,`largestBatchId`],su=`globals`,cu=`name`,lu=[...[...[...[...[dl,pl,bl,cl,kl,ll,Ll,Ml],Bl],Dl],Rl],Vl,K],uu=[...lu,tu],du=[dl,pl,bl,xl,kl,ll,Ll,Ml,Bl,Dl,Rl,Vl,K,tu],fu=du,pu=[...fu,Ul,ql,Zl],mu=pu,hu=[...pu,su],gu=hu,_u=class extends Lc{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}};function vu(e,t){let n=I(e);return Bc.O(n.le,t)}function yu(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bu(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xu(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Su=class e{constructor(e,t){this.comparator=e,this.root=t||wu.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,wu.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cu(this.root,e,this.comparator,!0)}},Cu=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},wu=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P(43730,{key:this.key,value:this.value});if(this.right.isRed())throw P(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw P(27949);return e+(this.isRed()?0:1)}};wu.EMPTY=null,wu.RED=!0,wu.BLACK=!1,wu.EMPTY=new class{constructor(){this.size=0}get key(){throw P(57766)}get value(){throw P(16141)}get color(){throw P(16727)}get left(){throw P(29726)}get right(){throw P(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new wu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Tu=class e{constructor(e){this.comparator=e,this.data=new Su(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Eu(this.data.getIterator())}getIteratorFrom(e){return new Eu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},Eu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Du(e){return e.hasNext()?e.getNext():void 0}var Ou=class e{constructor(e){this.fields=e,e.sort(fc.comparator)}static empty(){return new e([])}unionWith(t){let n=new Tu(fc.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},ku=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},Au=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new ku(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Au.EMPTY_BYTE_STRING=new Au(``);var ju=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mu(e){if(F(!!e,39018),typeof e==`string`){let t=0,n=ju.exec(e);if(F(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Nu(e.seconds),nanos:Nu(e.nanos)}}function Nu(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function Pu(e){return typeof e==`string`?Au.fromBase64String(e):Au.fromUint8Array(e)}var Fu=`server_timestamp`,Iu=`__type__`,Lu=`__previous_value__`,Ru=`__local_write_time__`;function zu(e){return(e?.mapValue?.fields||{})[Iu]?.stringValue===Fu}function Bu(e){let t=e.mapValue.fields[Lu];return zu(t)?Bu(t):t}function Vu(e){let t=Mu(e.mapValue.fields[Ru].timestampValue);return new Tc(t.seconds,t.nanos)}var Hu=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},Uu=`(default)`,Wu=class e{constructor(e,t){this.projectId=e,this.database=t||Uu}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===Uu}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},Gu=`__type__`,Ku=`__max__`,qu={mapValue:{fields:{__type__:{stringValue:Ku}}}},Ju=`__vector__`,q=`value`,Yu={nullValue:`NULL_VALUE`};function Xu(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?zu(e)?4:pd(e)?9007199254740991:dd(e)?10:11:P(28295,{value:e})}function Zu(e,t){if(e===t)return!0;let n=Xu(e);if(n!==Xu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vu(e).isEqual(Vu(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=Mu(e.timestampValue),r=Mu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Pu(e.bytesValue).isEqual(Pu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Nu(e.geoPointValue.latitude)===Nu(t.geoPointValue.latitude)&&Nu(e.geoPointValue.longitude)===Nu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return Nu(e.integerValue)===Nu(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=Nu(e.doubleValue),r=Nu(t.doubleValue);return n===r?tl(n)===tl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return oc(e.arrayValue.values||[],t.arrayValue.values||[],Zu);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yu(n)!==yu(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!Zu(n[e],r[e])))return!1;return!0}(e,t);default:return P(52216,{left:e})}}function Qu(e,t){return(e.values||[]).find((e=>Zu(e,t)))!==void 0}function $u(e,t){if(e===t)return 0;let n=Xu(e),r=Xu(t);if(n!==r)return z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return z(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=Nu(e.integerValue||e.doubleValue),r=Nu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ed(e.timestampValue,t.timestampValue);case 4:return ed(Vu(e),Vu(t));case 5:return nc(e.stringValue,t.stringValue);case 6:return function(e,t){let n=Pu(e),r=Pu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=z(n[e],r[e]);if(t!==0)return t}return z(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=z(Nu(e.latitude),Nu(t.latitude));return n===0?z(Nu(e.longitude),Nu(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return td(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[q]?.arrayValue,a=r[q]?.arrayValue,o=z(i?.values?.length||0,a?.values?.length||0);return o===0?td(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===qu.mapValue&&t===qu.mapValue)return 0;if(e===qu.mapValue)return 1;if(t===qu.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=nc(r[e],a[e]);if(t!==0)return t;let o=$u(n[r[e]],i[a[e]]);if(o!==0)return o}return z(r.length,a.length)}(e.mapValue,t.mapValue);default:throw P(23264,{he:n})}}function ed(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return z(e,t);let n=Mu(e),r=Mu(t),i=z(n.seconds,r.seconds);return i===0?z(n.nanos,r.nanos):i}function td(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=$u(n[e],r[e]);if(t)return t}return z(n.length,r.length)}function nd(e){return rd(e)}function rd(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=Mu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return Pu(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return B.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=rd(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${rd(e.fields[i])}`;return n+`}`}(e.mapValue):P(61005,{value:e})}function id(e){switch(Xu(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Bu(e);return t?16+id(t):16;case 5:return 2*e.stringValue.length;case 6:return Pu(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+id(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return bu(e.fields,((e,n)=>{t+=e.length+id(n)})),t}(e.mapValue);default:throw P(13486,{value:e})}}function ad(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function od(e){return!!e&&`integerValue`in e}function sd(e){return!!e&&`arrayValue`in e}function cd(e){return!!e&&`nullValue`in e}function ld(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function ud(e){return!!e&&`mapValue`in e}function dd(e){return(e?.mapValue?.fields||{})[Gu]?.stringValue===Ju}function fd(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return bu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=fd(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=fd(e.arrayValue.values[n]);return t}return{...e}}function pd(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ku}var md={mapValue:{fields:{[Gu]:{stringValue:Ju},[q]:{arrayValue:{}}}}};function hd(e){return`nullValue`in e?Yu:`booleanValue`in e?{booleanValue:!1}:`integerValue`in e||`doubleValue`in e?{doubleValue:NaN}:`timestampValue`in e?{timestampValue:{seconds:-(2**53-1)}}:`stringValue`in e?{stringValue:``}:`bytesValue`in e?{bytesValue:``}:`referenceValue`in e?ad(Wu.empty(),B.empty()):`geoPointValue`in e?{geoPointValue:{latitude:-90,longitude:-180}}:`arrayValue`in e?{arrayValue:{}}:`mapValue`in e?dd(e)?md:{mapValue:{}}:P(35942,{value:e})}function gd(e){return`nullValue`in e?{booleanValue:!1}:`booleanValue`in e?{doubleValue:NaN}:`integerValue`in e||`doubleValue`in e?{timestampValue:{seconds:-(2**53-1)}}:`timestampValue`in e?{stringValue:``}:`stringValue`in e?{bytesValue:``}:`bytesValue`in e?ad(Wu.empty(),B.empty()):`referenceValue`in e?{geoPointValue:{latitude:-90,longitude:-180}}:`geoPointValue`in e?{arrayValue:{}}:`arrayValue`in e?md:`mapValue`in e?dd(e)?{mapValue:{}}:qu:P(61959,{value:e})}function _d(e,t){let n=$u(e.value,t.value);return n===0?e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0:n}function vd(e,t){let n=$u(e.value,t.value);return n===0?e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0:n}var yd=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ud(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(t)}setAll(e){let t=fc.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=fd(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());ud(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ud(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){bu(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(fd(this.value))}};function bd(e){let t=[];return bu(e.fields,((e,n)=>{let r=new fc([e]);if(ud(n)){let e=bd(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new Ou(t)}var xd=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,V.min(),V.min(),V.min(),yd.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,V.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,V.min(),V.min(),yd.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,V.min(),V.min(),yd.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},Sd=class{constructor(e,t){this.position=e,this.inclusive=t}};function Cd(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?B.comparator(B.fromName(o.referenceValue),n.key):$u(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function J(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Zu(e.position[n],t.position[n]))return!1;return!0}var wd=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Td(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ed=class{},Y=class e extends Ed{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new Id(t,n,r):n===`array-contains`?new Bd(t,r):n===`in`?new Vd(t,r):n===`not-in`?new Hd(t,r):n===`array-contains-any`?new Ud(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new Ld(e,n):new Rd(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison($u(t,this.value)):t!==null&&Xu(this.value)===Xu(t)&&this.matchesComparison($u(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return P(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Dd=class e extends Ed{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return Od(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Od(e){return e.op===`and`}function kd(e){return e.op===`or`}function Ad(e){return jd(e)&&Od(e)}function jd(e){for(let t of e.filters)if(t instanceof Dd)return!1;return!0}function Md(e){if(e instanceof Y)return e.field.canonicalString()+e.op.toString()+nd(e.value);if(Ad(e))return e.filters.map((e=>Md(e))).join(`,`);{let t=e.filters.map((e=>Md(e))).join(`,`);return`${e.op}(${t})`}}function Nd(e,t){return e instanceof Y?function(e,t){return t instanceof Y&&e.op===t.op&&e.field.isEqual(t.field)&&Zu(e.value,t.value)}(e,t):e instanceof Dd?function(e,t){return t instanceof Dd&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&Nd(n,t.filters[r])),!0):!1}(e,t):void P(19439)}function Pd(e,t){let n=e.filters.concat(t);return Dd.create(n,e.op)}function Fd(e){return e instanceof Y?function(e){return`${e.field.canonicalString()} ${e.op} ${nd(e.value)}`}(e):e instanceof Dd?function(e){return e.op.toString()+` {`+e.getFilters().map(Fd).join(` ,`)+`}`}(e):`Filter`}var Id=class extends Y{constructor(e,t,n){super(e,t,n),this.key=B.fromName(n.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},Ld=class extends Y{constructor(e,t){super(e,`in`,t),this.keys=zd(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},Rd=class extends Y{constructor(e,t){super(e,`not-in`,t),this.keys=zd(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function zd(e,t){return(t.arrayValue?.values||[]).map((e=>B.fromName(e.referenceValue)))}var Bd=class extends Y{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return sd(t)&&Qu(t.arrayValue,this.value)}},Vd=class extends Y{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Qu(this.value.arrayValue,t)}},Hd=class extends Y{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Qu(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Qu(this.value.arrayValue,t)}},Ud=class extends Y{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!sd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Qu(this.value.arrayValue,e)))}},Wd=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function Gd(e,t=null,n=[],r=[],i=null,a=null,o=null){return new Wd(e,t,n,r,i,a,o)}function Kd(e){let t=I(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>Md(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),el(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>nd(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>nd(e))).join(`,`)),t.Te=e}return t.Te}function qd(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Td(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Nd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!J(e.startAt,t.startAt)&&J(e.endAt,t.endAt)}function Jd(e){return B.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Yd(e,t){return e.filters.filter((e=>e instanceof Y&&e.field.isEqual(t)))}function Xd(e,t,n){let r=Yu,i=!0;for(let n of Yd(e,t)){let e=Yu,t=!0;switch(n.op){case`<`:case`<=`:e=hd(n.value);break;case`==`:case`in`:case`>=`:e=n.value;break;case`>`:e=n.value,t=!1;break;case`!=`:case`not-in`:e=Yu}_d({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(n!==null){for(let a=0;a<e.orderBy.length;++a)if(e.orderBy[a].field.isEqual(t)){let e=n.position[a];_d({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}}return{value:r,inclusive:i}}function Zd(e,t,n){let r=qu,i=!0;for(let n of Yd(e,t)){let e=qu,t=!0;switch(n.op){case`>=`:case`>`:e=gd(n.value),t=!1;break;case`==`:case`in`:case`<=`:e=n.value;break;case`<`:e=n.value,t=!1;break;case`!=`:case`not-in`:e=qu}vd({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(n!==null){for(let a=0;a<e.orderBy.length;++a)if(e.orderBy[a].field.isEqual(t)){let e=n.position[a];vd({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}}return{value:r,inclusive:i}}var Qd=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function $d(e,t,n,r,i,a,o,s){return new Qd(e,t,n,r,i,a,o,s)}function ef(e){return new Qd(e)}function tf(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function nf(e){return e.collectionGroup!==null}function rf(e){let t=I(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new Tu(fc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new wd(r,n))})),e.has(fc.keyField().canonicalString())||t.Ie.push(new wd(fc.keyField(),n))}return t.Ie}function af(e){let t=I(e);return t.Ee||=of(t,rf(e)),t.Ee}function of(e,t){if(e.limitType===`F`)return Gd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new wd(e.field,t)}));let n=e.endAt?new Sd(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Sd(e.startAt.position,e.startAt.inclusive):null;return Gd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function sf(e,t){let n=e.filters.concat([t]);return new Qd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function cf(e,t,n){return new Qd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function lf(e,t){return qd(af(e),af(t))&&e.limitType===t.limitType}function uf(e){return`${Kd(af(e))}|lt:${e.limitType}`}function df(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Fd(e))).join(`, `)}]`),el(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>nd(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>nd(e))).join(`,`)),`Target(${t})`}(af(e))}; limitType=${e.limitType})`}function ff(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?B.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of rf(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Cd(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,rf(e),t)||e.endAt&&!function(e,t,n){let r=Cd(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,rf(e),t))}(e,t)}function pf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function mf(e){return(t,n)=>{let r=!1;for(let i of rf(e)){let e=hf(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function hf(e,t,n){let r=e.field.isKeyField()?B.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?$u(r,i):P(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return P(19790,{direction:e.dir})}}var gf=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bu(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return xu(this.inner)}size(){return this.innerSize}},_f=new Su(B.comparator);function vf(){return _f}var yf=new Su(B.comparator);function bf(...e){let t=yf;for(let n of e)t=t.insert(n.key,n);return t}function xf(e){let t=yf;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Sf(){return wf()}function Cf(){return wf()}function wf(){return new gf((e=>e.toString()),((e,t)=>e.isEqual(t)))}var Tf=new Su(B.comparator),Ef=new Tu(B.comparator);function X(...e){let t=Ef;for(let n of e)t=t.add(n);return t}var Df=new Tu(z);function Of(){return Df}function kf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:tl(t)?`-0`:t}}function Af(e){return{integerValue:``+e}}function jf(e,t){return nl(t)?Af(t):kf(e,t)}var Mf=class{constructor(){this._=void 0}};function Nf(e,t,n){return e instanceof If?function(e,t){let n={fields:{[Iu]:{stringValue:Fu},[Ru]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zu(t)&&(t=Bu(t)),t&&(n.fields[Lu]=t),{mapValue:n}}(n,t):e instanceof Lf?Rf(e,t):e instanceof zf?Bf(e,t):function(e,t){let n=Ff(e,t),r=Hf(n)+Hf(e.Ae);return od(n)&&od(e.Ae)?Af(r):kf(e.serializer,r)}(e,t)}function Pf(e,t,n){return e instanceof Lf?Rf(e,t):e instanceof zf?Bf(e,t):n}function Ff(e,t){return e instanceof Vf?function(e){return od(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var If=class extends Mf{},Lf=class extends Mf{constructor(e){super(),this.elements=e}};function Rf(e,t){let n=Uf(t);for(let t of e.elements)n.some((e=>Zu(e,t)))||n.push(t);return{arrayValue:{values:n}}}var zf=class extends Mf{constructor(e){super(),this.elements=e}};function Bf(e,t){let n=Uf(t);for(let t of e.elements)n=n.filter((e=>!Zu(e,t)));return{arrayValue:{values:n}}}var Vf=class extends Mf{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function Hf(e){return Nu(e.integerValue||e.doubleValue)}function Uf(e){return sd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Wf=class{constructor(e,t){this.field=e,this.transform=t}};function Gf(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Lf&&t instanceof Lf||e instanceof zf&&t instanceof zf?oc(e.elements,t.elements,Zu):e instanceof Vf&&t instanceof Vf?Zu(e.Ae,t.Ae):e instanceof If&&t instanceof If}(e.transform,t.transform)}var Kf=class{constructor(e,t){this.version=e,this.transformResults=t}},qf=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Jf(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var Yf=class{};function Xf(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new op(e.key,qf.none()):new tp(e.key,e.data,qf.none());{let n=e.data,r=yd.empty(),i=new Tu(fc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new np(e.key,r,new Ou(i.toArray()),qf.none())}}function Zf(e,t,n){e instanceof tp?function(e,t,n){let r=e.value.clone(),i=ip(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof np?function(e,t,n){if(!Jf(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=ip(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(rp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qf(e,t,n,r){return e instanceof tp?function(e,t,n,r){if(!Jf(e.precondition,t))return n;let i=e.value.clone(),a=ap(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof np?function(e,t,n,r){if(!Jf(e.precondition,t))return n;let i=ap(e.fieldTransforms,r,t),a=t.data;return a.setAll(rp(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Jf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function $f(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=Ff(r.transform,e||null);i!=null&&(n===null&&(n=yd.empty()),n.set(r.field,i))}return n||null}function ep(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&oc(e,t,((e,t)=>Gf(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var tp=class extends Yf{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},np=class extends Yf{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function rp(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function ip(e,t,n){let r=new Map;F(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Pf(o,s,n[i]))}return r}function ap(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,Nf(e,a,t))}return r}var op=class extends Yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},sp=class extends Yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},cp=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&Zf(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=Qf(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=Qf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Cf();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=Xf(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(V.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),X())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,((e,t)=>ep(e,t)))&&oc(this.baseMutations,e.baseMutations,((e,t)=>ep(e,t)))}},lp=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){F(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return Tf}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},up=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},dp=class{constructor(e,t){this.count=e,this.unchangedNames=t}},fp,Z;function pp(e){switch(e){case L.OK:return P(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return P(15467,{code:e})}}function mp(e){if(e===void 0)return Hs(`GRPC error has no .code`),L.UNKNOWN;switch(e){case fp.OK:return L.OK;case fp.CANCELLED:return L.CANCELLED;case fp.UNKNOWN:return L.UNKNOWN;case fp.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case fp.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case fp.INTERNAL:return L.INTERNAL;case fp.UNAVAILABLE:return L.UNAVAILABLE;case fp.UNAUTHENTICATED:return L.UNAUTHENTICATED;case fp.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case fp.NOT_FOUND:return L.NOT_FOUND;case fp.ALREADY_EXISTS:return L.ALREADY_EXISTS;case fp.PERMISSION_DENIED:return L.PERMISSION_DENIED;case fp.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case fp.ABORTED:return L.ABORTED;case fp.OUT_OF_RANGE:return L.OUT_OF_RANGE;case fp.UNIMPLEMENTED:return L.UNIMPLEMENTED;case fp.DATA_LOSS:return L.DATA_LOSS;default:return P(39323,{code:e})}}(Z=fp||={})[Z.OK=0]=`OK`,Z[Z.CANCELLED=1]=`CANCELLED`,Z[Z.UNKNOWN=2]=`UNKNOWN`,Z[Z.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,Z[Z.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,Z[Z.NOT_FOUND=5]=`NOT_FOUND`,Z[Z.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,Z[Z.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,Z[Z.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,Z[Z.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,Z[Z.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,Z[Z.ABORTED=10]=`ABORTED`,Z[Z.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,Z[Z.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,Z[Z.INTERNAL=13]=`INTERNAL`,Z[Z.UNAVAILABLE=14]=`UNAVAILABLE`,Z[Z.DATA_LOSS=15]=`DATA_LOSS`;var hp=null;function gp(){return new TextEncoder}var _p=new ws([4294967295,4294967295],0);function vp(e){let t=gp().encode(e),n=new Ts;return n.update(t),new Uint8Array(n.digest())}function yp(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new ws([n,r],0),new ws([i,a],0)]}var bp=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new xp(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new xp(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new xp(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ws.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(ws.fromNumber(n)));return r.compare(_p)===1&&(r=new ws([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=yp(vp(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=yp(vp(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.Se(r)}}Se(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},xp=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},Sp=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,Cp.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(V.min(),i,new Su(z),vf(),X())}},Cp=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,X(),X(),X())}},wp=class{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}},Tp=class{constructor(e,t){this.targetId=e,this.Ce=t}},Ep=class{constructor(e,t,n=Au.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},Dp=class{constructor(){this.ve=0,this.Fe=Ap(),this.Me=Au.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=X(),t=X(),n=X();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P(38017,{changeType:i})}})),new Cp(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Ap()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){--this.ve,F(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Op=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=vf(),this.Je=kp(),this.He=kp(),this.Ye=new Su(z)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:P(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(Jd(i))if(n===0){let e=new B(i.path);this.et(t,e,xd.newNoDocument(e,V.min()))}else F(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ye=this.Ye.insert(t,e)}hp?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=Pu(n).toUint8Array()}catch(e){if(e instanceof ku)return Us(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new bp(a,r,i)}catch(e){return Us(e instanceof xp?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&Jd(i.target)){let t=new B(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,xd.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}}));let n=X();this.He.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new Sp(e,t,this.Ye,this.je,n);return this.je=vf(),this.Je=kp(),this.He=kp(),this.Ye=new Su(z),r}Xe(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Dp,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tu(z),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tu(z),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||N(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dp),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function kp(){return new Su(B.comparator)}function Ap(){return new Su(B.comparator)}var jp=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),Mp=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),Np=(()=>({and:`AND`,or:`OR`}))(),Pp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Fp(e,t){return e.useProto3Json||el(t)?t:{value:t}}function Ip(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function Lp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Rp(e,t){return Ip(e,t.toTimestamp())}function zp(e){return F(!!e,49232),V.fromTimestamp(function(e){let t=Mu(e);return new Tc(t.seconds,t.nanos)}(e))}function Bp(e,t){return Vp(e,t).canonicalString()}function Vp(e,t){let n=function(e){return new uc([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function Hp(e){let t=uc.fromString(e);return F(pm(t),10190,{key:t.toString()}),t}function Up(e,t){return Bp(e.databaseId,t.path)}function Wp(e,t){let n=Hp(t);if(n.get(1)!==e.databaseId.projectId)throw new R(L.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new R(L.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new B(Jp(n))}function Gp(e,t){return Bp(e.databaseId,t)}function Kp(e){let t=Hp(e);return t.length===4?uc.emptyPath():Jp(t)}function qp(e){return new uc([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function Jp(e){return F(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function Yp(e,t,n){return{name:Up(e,t),fields:n.value.mapValue.fields}}function Xp(e,t,n){let r=Wp(e,t.name),i=zp(t.updateTime),a=t.createTime?zp(t.createTime):V.min(),o=new yd({mapValue:{fields:t.fields}}),s=xd.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Zp(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:P(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(F(t===void 0||typeof t==`string`,58123),Au.fromBase64String(t||``)):(F(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),Au.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new Ep(r,i,a,o&&function(e){return new R(e.code===void 0?L.UNKNOWN:mp(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=Wp(e,r.document.name),a=zp(r.document.updateTime),o=r.document.createTime?zp(r.document.createTime):V.min(),s=new yd({mapValue:{fields:r.document.fields}}),c=xd.newFoundDocument(i,a,o,s);n=new wp(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=Wp(e,r.document),a=r.readTime?zp(r.readTime):V.min(),o=xd.newNoDocument(i,a);n=new wp([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=Wp(e,r.document);n=new wp([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return P(11601,{Rt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new dp(r,i),o=e.targetId;n=new Tp(o,a)}}return n}function Qp(e,t){let n;if(t instanceof tp)n={update:Yp(e,t.key,t.value)};else if(t instanceof op)n={delete:Up(e,t.key)};else if(t instanceof np)n={update:Yp(e,t.key,t.data),updateMask:fm(t.fieldMask)};else{if(!(t instanceof sp))return P(16599,{Vt:t.type});n={verify:Up(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof If)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof Lf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof zf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vf)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw P(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?P(27497):{exists:t.exists}:{updateTime:Rp(e,t.updateTime)}}(e,t.precondition)),n}function $p(e,t){let n=t.currentDocument?function(e){return e.updateTime===void 0?e.exists===void 0?qf.none():qf.exists(e.exists):qf.updateTime(zp(e.updateTime))}(t.currentDocument):qf.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;return`setToServerValue`in t?(F(t.setToServerValue===`REQUEST_TIME`,16630,{proto:t}),n=new If):`appendMissingElements`in t?n=new Lf(t.appendMissingElements.values||[]):`removeAllFromArray`in t?n=new zf(t.removeAllFromArray.values||[]):`increment`in t?n=new Vf(e,t.increment):P(16584,{proto:t}),new Wf(fc.fromServerFormat(t.fieldPath),n)}(e,t))):[];if(t.update){t.update.name;let i=Wp(e,t.update.name),a=new yd({mapValue:{fields:t.update.fields}});return t.updateMask?new np(i,a,function(e){return new Ou((e.fieldPaths||[]).map((e=>fc.fromServerFormat(e))))}(t.updateMask),n,r):new tp(i,a,n,r)}return t.delete?new op(Wp(e,t.delete),n):t.verify?new sp(Wp(e,t.verify),n):P(1463,{proto:t})}function em(e,t){return e&&e.length>0?(F(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?zp(e.updateTime):zp(t);return n.isEqual(V.min())&&(n=zp(t)),new Kf(n,e.transformResults||[])}(e,t)))):[]}function tm(e,t){return{documents:[Gp(e,t.path)]}}function nm(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=Gp(e,i);let a=function(e){if(e.length!==0)return dm(Dd.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:lm(e.field),direction:om(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=Fp(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function rm(e){let t=Kp(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){F(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=am(e);return t instanceof Dd&&Ad(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new wd(um(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,el(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new Sd(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new Sd(e.values||[],t)}(n.endAt)),$d(t,i,o,a,s,`F`,c,l)}function im(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return P(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function am(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?P(30097,{filter:e}):function(e){return Dd.create(e.compositeFilter.filters.map((e=>am(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return P(1026)}}(e.compositeFilter.op))}(e):function(e){return Y.create(um(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return P(58110);default:return P(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=um(e.unaryFilter.field);return Y.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=um(e.unaryFilter.field);return Y.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=um(e.unaryFilter.field);return Y.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=um(e.unaryFilter.field);return Y.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return P(61313);default:return P(60726)}}(e)}function om(e){return jp[e]}function sm(e){return Mp[e]}function cm(e){return Np[e]}function lm(e){return{fieldPath:e.canonicalString()}}function um(e){return fc.fromServerFormat(e.fieldPath)}function dm(e){return e instanceof Y?function(e){if(e.op===`==`){if(ld(e.value))return{unaryFilter:{field:lm(e.field),op:`IS_NAN`}};if(cd(e.value))return{unaryFilter:{field:lm(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(ld(e.value))return{unaryFilter:{field:lm(e.field),op:`IS_NOT_NAN`}};if(cd(e.value))return{unaryFilter:{field:lm(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:lm(e.field),op:sm(e.op),value:e.value}}}(e):e instanceof Dd?function(e){let t=e.getFilters().map((e=>dm(e)));return t.length===1?t[0]:{compositeFilter:{op:cm(e.op),filters:t}}}(e):P(54877,{filter:e})}function fm(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function pm(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}var mm=class e{constructor(e,t,n,r,i=V.min(),a=V.min(),o=Au.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},hm=class{constructor(e){this.yt=e}};function gm(e,t){let n;if(t.document)n=Xp(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=B.fromSegments(t.noDocument.path),r=bm(t.noDocument.readTime);n=xd.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return P(56709);{let e=B.fromSegments(t.unknownDocument.path),r=bm(t.unknownDocument.version);n=xd.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){let t=new Tc(e[0],e[1]);return V.fromTimestamp(t)}(t.readTime)),n}function _m(e,t){let n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:vm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Up(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ip(e,t.version.toTimestamp()),createTime:Ip(e,t.createTime.toTimestamp())}}(e.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ym(t.version)};else{if(!t.isUnknownDocument())return P(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:ym(t.version)}}return r}function vm(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ym(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function bm(e){let t=new Tc(e.seconds,e.nanoseconds);return V.fromTimestamp(t)}function xm(e,t){let n=(t.baseMutations||[]).map((t=>$p(e.yt,t)));for(let e=0;e<t.mutations.length-1;++e){let n=t.mutations[e];e+1<t.mutations.length&&t.mutations[e+1].transform!==void 0&&(n.updateTransforms=t.mutations[e+1].transform.fieldTransforms,t.mutations.splice(e+1,1),++e)}let r=t.mutations.map((t=>$p(e.yt,t))),i=Tc.fromMillis(t.localWriteTimeMs);return new cp(t.batchId,i,n,r)}function Sm(e){let t=bm(e.readTime),n=e.lastLimboFreeSnapshotVersion===void 0?V.min():bm(e.lastLimboFreeSnapshotVersion),r;return r=function(e){return e.documents!==void 0}(e.query)?function(e){let t=e.documents.length;return F(t===1,1966,{count:t}),af(ef(Kp(e.documents[0])))}(e.query):function(e){return af(rm(e))}(e.query),new mm(r,e.targetId,`TargetPurposeListen`,e.lastListenSequenceNumber,t,n,Au.fromBase64String(e.resumeToken))}function Cm(e,t){let n=ym(t.snapshotVersion),r=ym(t.lastLimboFreeSnapshotVersion),i;i=Jd(t.target)?tm(e.yt,t.target):nm(e.yt,t.target).ft;let a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Kd(t.target),readTime:n,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function wm(e){let t=rm({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?cf(t,t.limit,`L`):t}function Tm(e,t){return new up(t.largestBatchId,$p(e.yt,t.overlayMutation))}function Em(e,t){let n=t.path.lastSegment();return[e,il(t.path.popLast()),n]}function Dm(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:ym(r.readTime),documentKey:il(r.documentKey.path),largestBatchId:r.largestBatchId}}var Om=class{getBundleMetadata(e,t){return km(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:bm(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return km(e).put(function(e){return{bundleId:e.id,createTime:ym(zp(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Am(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:wm(e.bundledQuery),readTime:bm(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Am(e).put(function(e){return{name:e.name,readTime:ym(zp(e.readTime)),bundledQuery:e.bundledQuery}}(t))}};function km(e){return vu(e,Vl)}function Am(e){return vu(e,K)}var jm=class e{constructor(e,t){this.serializer=e,this.userId=t}static wt(t,n){return new e(t,n.uid||``)}getOverlay(e,t){return Mm(e).get(Em(this.userId,t)).next((e=>e?Tm(this.serializer,e):null))}getOverlays(e,t){let n=Sf();return H.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){let r=[];return n.forEach(((n,i)=>{let a=new up(t,i);r.push(this.St(e,a))})),H.waitFor(r)}removeOverlaysForBatchId(e,t,n){let r=new Set;t.forEach((e=>r.add(il(e.getCollectionPath()))));let i=[];return r.forEach((t=>{let r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Mm(e).Z(ru,r))})),H.waitFor(i)}getOverlaysForCollection(e,t,n){let r=Sf(),i=il(t),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,1/0],!0);return Mm(e).J(ru,a).next((e=>{for(let t of e){let e=Tm(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){let i=Sf(),a,o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,1/0],!0);return Mm(e).ee({index:au,range:o},((e,t,n)=>{let o=Tm(this.serializer,t);i.size()<r||o.largestBatchId===a?(i.set(o.getKey(),o),a=o.largestBatchId):n.done()})).next((()=>i))}St(e,t){return Mm(e).put(function(e,t,n){let[r,i,a]=Em(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:a,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Qp(e.yt,n.mutation)}}(this.serializer,this.userId,t))}};function Mm(e){return vu(e,tu)}var Nm=class{bt(e){return vu(e,su)}getSessionToken(e){return this.bt(e).get(`sessionToken`).next((e=>{let t=e?.value;return t?Au.fromUint8Array(t):Au.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:`sessionToken`,value:t.toUint8Array()})}},Pm=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(Nu(e.integerValue));else if(`doubleValue`in e){let n=Nu(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),tl(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=Mu(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(Pu(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?pd(e)?this.Ft(t,2**53-1):dd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.Qt(e.arrayValue,t),this.Nt(t)):P(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=q,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Nu(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),B.fromName(e).path.forEach((e=>{this.Ft(t,60),this.Ut(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Pm.Kt=new Pm;var Fm=255;function Im(e){if(e===0)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function Lm(e){let t=64-function(e){let t=0;for(let n=0;n<8;++n){let r=Im(255&e[n]);if(t+=r,r!==8)break}return t}(e);return Math.ceil(t/8)}var Rm=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){let t=e[Symbol.iterator](),n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){let t=e[Symbol.iterator](),n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<`\ud800`||`\udbff`<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{let e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Zt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<`\ud800`||`\udbff`<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{let e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Ht()}Xt(e){let t=this.en(e),n=Lm(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}nn(e){let t=this.en(e),n=Lm(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}rn(){this.sn(Fm),this.sn(255)}_n(){this.an(Fm),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){let t=function(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Gt(e){let t=255&e;t===0?(this.sn(0),this.sn(255)):t===Fm?(this.sn(Fm),this.sn(0)):this.sn(t)}Jt(e){let t=255&e;t===0?(this.an(0),this.an(255)):t===Fm?(this.an(Fm),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){let t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);let r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}},zm=class{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}},Bm=class{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}},Vm=class{constructor(){this.cn=new Rm,this.ln=new zm(this.cn),this.hn=new Bm(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}},Hm=class e{constructor(e,t,n,r){this.Tn=e,this.In=t,this.En=n,this.dn=r}An(){let t=this.dn.length,n=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(n);return r.set(this.dn,0),n===t?++r[r.length-1]:r.set([0],this.dn.length),new e(this.Tn,this.In,this.En,r)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Gm(this.En),directionalValue:Gm(this.dn),orderedDocumentKey:Gm(t),documentKey:n.path.toArray()}}Vn(e,t,n){let r=this.Rn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}};function Um(e,t){let n=e.Tn-t.Tn;return n===0?(n=Wm(e.En,t.En),n===0?(n=Wm(e.dn,t.dn),n===0?B.comparator(e.In,t.In):n):n):n}function Wm(e,t){for(let n=0;n<e.length&&n<t.length;++n){let r=e[n]-t[n];if(r!==0)return r}return e.length-t.length}function Gm(e){return we()?function(e){let t=``;for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function Km(e){return typeof e==`string`?function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e):e}var qm=class{constructor(e){this.mn=new Tu(((e,t)=>fc.comparator(e.field,t.field))),this.collectionId=e.collectionGroup==null?e.path.lastSegment():e.collectionGroup,this.fn=e.orderBy,this.gn=[];for(let t of e.filters){let e=t;e.isInequality()?this.mn=this.mn.add(e):this.gn.push(e)}}get pn(){return this.mn.size>1}yn(e){if(F(e.collectionGroup===this.collectionId,49279),this.pn)return!1;let t=Oc(e);if(t!==void 0&&!this.wn(t))return!1;let n=kc(e),r=new Set,i=0,a=0;for(;i<n.length&&this.wn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.mn.size>0){let e=this.mn.getIterator().getNext();if(!r.has(e.field.canonicalString())){let t=n[i];if(!this.Sn(e,t)||!this.bn(this.fn[a++],t))return!1}++i}for(;i<n.length;++i){let e=n[i];if(a>=this.fn.length||!this.bn(this.fn[a++],e))return!1}return!0}Dn(){if(this.pn)return null;let e=new Tu(fc.comparator),t=[];for(let n of this.gn)if(!n.field.isKeyField())if(n.op===`array-contains`||n.op===`array-contains-any`)t.push(new Ac(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Ac(n.field,0))}for(let n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Ac(n.field,n.dir===`asc`?0:1)));return new Dc(Dc.UNKNOWN_ID,this.collectionId,t,jc.empty())}wn(e){for(let t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let n=e.op===`array-contains`||e.op===`array-contains-any`;return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir===`asc`||t.kind===1&&e.dir===`desc`)}};function Jm(e){if(F(e instanceof Y||e instanceof Dd,20012),e instanceof Y){if(e instanceof Vd){let t=e.value.arrayValue?.values?.map((t=>Y.create(e.field,`==`,t)))||[];return Dd.create(t,`or`)}return e}let t=e.filters.map((e=>Jm(e)));return Dd.create(t,e.op)}function Ym(e){if(e.getFilters().length===0)return[];let t=$m(Jm(e));return F(Qm(t),7391),Xm(t)||Zm(t)?[t]:t.getFilters()}function Xm(e){return e instanceof Y}function Zm(e){return e instanceof Dd&&Ad(e)}function Qm(e){return Xm(e)||Zm(e)||function(e){if(e instanceof Dd&&kd(e)){for(let t of e.getFilters())if(!Xm(t)&&!Zm(t))return!1;return!0}return!1}(e)}function $m(e){if(F(e instanceof Y||e instanceof Dd,34018),e instanceof Y)return e;if(e.filters.length===1)return $m(e.filters[0]);let t=e.filters.map((e=>$m(e))),n=Dd.create(t,e.op);return n=nh(n),Qm(n)?n:(F(n instanceof Dd,64498),F(Od(n),40251),F(n.filters.length>1,57927),n.filters.reduce(((e,t)=>eh(e,t))))}function eh(e,t){let n;return F(e instanceof Y||e instanceof Dd,38388),F(t instanceof Y||t instanceof Dd,25473),n=e instanceof Y?t instanceof Y?function(e,t){return Dd.create([e,t],`and`)}(e,t):th(e,t):t instanceof Y?th(t,e):function(e,t){if(F(e.filters.length>0&&t.filters.length>0,48005),Od(e)&&Od(t))return Pd(e,t.getFilters());let n=kd(e)?e:t,r=kd(e)?t:e,i=n.filters.map((e=>eh(e,r)));return Dd.create(i,`or`)}(e,t),nh(n)}function th(e,t){if(Od(t))return Pd(t,e.getFilters());{let n=t.filters.map((t=>eh(e,t)));return Dd.create(n,`or`)}}function nh(e){if(F(e instanceof Y||e instanceof Dd,11850),e instanceof Y)return e;let t=e.getFilters();if(t.length===1)return nh(t[0]);if(jd(e))return e;let n=t.map((e=>nh(e))),r=[];return n.forEach((t=>{t instanceof Y?r.push(t):t instanceof Dd&&(t.op===e.op?r.push(...t.filters):r.push(t))})),r.length===1?r[0]:Dd.create(r,e.op)}var rh=class{constructor(){this.Cn=new ih}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Pc.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Pc.min())}updateCollectionGroup(e,t,n){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}},ih=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Tu(uc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Tu(uc.comparator)).toArray()}},ah=`IndexedDbIndexManager`,oh=new Uint8Array,sh=class{constructor(e,t){this.databaseId=t,this.vn=new ih,this.Fn=new gf((e=>Kd(e)),((e,t)=>qd(e,t))),this.uid=e.uid||``}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));let i={collectionId:n,parent:il(r)};return ch(e).put(i)}return H.resolve()}getCollectionParents(e,t){let n=[],r=IDBKeyRange.bound([t,``],[sc(t),``],!1,!0);return ch(e).J(r).next((e=>{for(let r of e){if(r.collectionId!==t)break;n.push(sl(r.parent))}return n}))}addFieldIndex(e,t){let n=uh(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;let i=n.add(r);if(t.indexState){let n=dh(e);return i.next((e=>{n.put(Dm(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){let n=uh(e),r=dh(e),i=lh(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){let t=uh(e),n=lh(e),r=dh(e);return t.Z().next((()=>n.Z())).next((()=>r.Z()))}createTargetIndexes(e,t){return H.forEach(this.Mn(t),(t=>this.getIndexType(e,t).next((n=>{if(n===0||n===1){let n=new qm(t).Dn();if(n!=null)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){let n=lh(e),r=!0,i=new Map;return H.forEach(this.Mn(t),(t=>this.xn(e,t).next((e=>{r&&=!!e,i.set(t,e)})))).next((()=>{if(r){let e=X(),r=[];return H.forEach(i,((i,a)=>{N(ah,`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(`,`)}`}(i)} to execute ${Kd(t)}`);let o=function(e,t){let n=Oc(t);if(n===void 0)return null;for(let t of Yd(e,n.fieldPath))switch(t.op){case`array-contains-any`:return t.value.arrayValue.values||[];case`array-contains`:return[t.value]}return null}(a,i),s=function(e,t){let n=new Map;for(let r of kc(t))for(let t of Yd(e,r.fieldPath))switch(t.op){case`==`:case`in`:n.set(r.fieldPath.canonicalString(),t.value);break;case`not-in`:case`!=`:return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(a,i),c=function(e,t){let n=[],r=!0;for(let i of kc(t)){let t=i.kind===0?Xd(e,i.fieldPath,e.startAt):Zd(e,i.fieldPath,e.startAt);n.push(t.value),r&&=t.inclusive}return new Sd(n,r)}(a,i),l=function(e,t){let n=[],r=!0;for(let i of kc(t)){let t=i.kind===0?Zd(e,i.fieldPath,e.endAt):Xd(e,i.fieldPath,e.endAt);n.push(t.value),r&&=t.inclusive}return new Sd(n,r)}(a,i),u=this.On(i,a,c),d=this.On(i,a,l),f=this.Nn(i,a,s),p=this.Bn(i.indexId,o,u,c.inclusive,d,l.inclusive,f);return H.forEach(p,(i=>n.Y(i,t.limit).next((t=>{t.forEach((t=>{let n=B.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return H.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(t=e.filters.length===0?[e]:Ym(Dd.create(e.filters,`and`)).map((t=>Gd(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,r,i,a,o){let s=(t==null?1:t.length)*Math.max(n.length,i.length),c=s/(t==null?1:t.length),l=[];for(let u=0;u<s;++u){let s=t?this.Ln(t[u/c]):oh,d=this.kn(e,s,n[u%c],r),f=this.qn(e,s,i[u%c],a),p=o.map((t=>this.kn(e,s,t,!0)));l.push(...this.createRange(d,f,p))}return l}kn(e,t,n,r){let i=new Hm(e,B.empty(),t,n);return r?i:i.An()}qn(e,t,n,r){let i=new Hm(e,B.empty(),t,n);return r?i.An():i}xn(e,t){let n=new qm(t),r=t.collectionGroup==null?t.path.lastSegment():t.collectionGroup;return this.getFieldIndexes(e,r).next((e=>{let t=null;for(let r of e)n.yn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2,r=this.Mn(t);return H.forEach(r,(t=>this.xn(e,t).next((e=>{e?n!==0&&e.fields.length<function(e){let t=new Tu(fc.comparator),n=!1;for(let r of e.filters)for(let e of r.getFlattenedFilters())e.field.isKeyField()||(e.op===`array-contains`||e.op===`array-contains-any`?n=!0:t=t.add(e.field));for(let n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return e.limit!==null}(t)&&r.length>1&&n===2?1:n))}Qn(e,t){let n=new Vm;for(let r of kc(e)){let e=t.data.field(r.fieldPath);if(e==null)return null;let i=n.Pn(r.kind);Pm.Kt.Dt(e,i)}return n.un()}Ln(e){let t=new Vm;return Pm.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){let n=new Vm;return Pm.Kt.Dt(ad(this.databaseId,t),n.Pn(function(e){let t=kc(e);return t.length===0?0:t[t.length-1].kind}(e))),n.un()}Nn(e,t,n){if(n===null)return[];let r=[];r.push(new Vm);let i=0;for(let a of kc(e)){let e=n[i++];for(let n of r)if(this.Un(t,a.fieldPath)&&sd(e))r=this.Kn(r,a,e);else{let t=n.Pn(a.kind);Pm.Kt.Dt(e,t)}}return this.Wn(r)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){let t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){let r=[...e],i=[];for(let e of n.arrayValue.values||[])for(let n of r){let r=new Vm;r.seed(n.un()),Pm.Kt.Dt(e,r.Pn(t.kind)),i.push(r)}return i}Un(e,t){return!!e.filters.find((e=>e instanceof Y&&e.field.isEqual(t)&&(e.op===`in`||e.op===`not-in`)))}getFieldIndexes(e,t){let n=uh(e),r=dh(e);return(t?n.J(Gl,IDBKeyRange.bound(t,t)):n.J()).next((e=>{let t=[];return H.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){let n=t?new jc(t.sequenceNumber,new Pc(bm(t.readTime),new B(sl(t.documentKey)),t.largestBatchId)):jc.empty(),r=e.fields.map((([e,t])=>new Ac(fc.fromServerFormat(e),t)));return new Dc(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>e.length===0?null:(e.sort(((e,t)=>{let n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return n===0?z(e.collectionGroup,t.collectionGroup):n})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){let r=uh(e),i=dh(e);return this.Gn(e).next((e=>r.J(Gl,IDBKeyRange.bound(t,t)).next((t=>H.forEach(t,(t=>i.put(Dm(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){let n=new Map;return H.forEach(t,((t,r)=>{let i=n.get(t.collectionGroup);return(i?H.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),H.forEach(i,(n=>this.zn(e,t,n).next((t=>{let i=this.jn(r,n);return t.isEqual(i)?H.resolve():this.Jn(e,r,n,t,i)})))))))}))}Hn(e,t,n,r){return lh(e).put(r.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,r){return lh(e).delete(r.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){let r=lh(e),i=new Tu(Um);return r.ee({index:$l,range:IDBKeyRange.only([n.indexId,this.uid,Gm(this.$n(n,t))])},((e,r)=>{i=i.add(new Hm(n.indexId,t,Km(r.arrayValue),Km(r.directionalValue)))})).next((()=>i))}jn(e,t){let n=new Tu(Um),r=this.Qn(t,e);if(r==null)return n;let i=Oc(t);if(i!=null){let a=e.data.field(i.fieldPath);if(sd(a))for(let i of a.arrayValue.values||[])n=n.add(new Hm(t.indexId,e.key,this.Ln(i),r))}else n=n.add(new Hm(t.indexId,e.key,oh,r));return n}Jn(e,t,n,r,i){N(ah,`Updating index entries for document '%s'`,t.key);let a=[];return function(e,t,n,r,i){let a=e.getIterator(),o=t.getIterator(),s=Du(a),c=Du(o);for(;s||c;){let e=!1,t=!1;if(s&&c){let r=n(s,c);r<0?t=!0:r>0&&(e=!0)}else s==null?e=!0:t=!0;e?(r(c),c=Du(o)):t?(i(s),s=Du(a)):(s=Du(a),c=Du(o))}}(r,i,Um,(r=>{a.push(this.Hn(e,t,n,r))}),(r=>{a.push(this.Yn(e,t,n,r))})),H.waitFor(a)}Gn(e){let t=1;return dh(e).ee({index:Yl,reverse:!0,range:IDBKeyRange.upperBound([this.uid,2**53-1])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Um(e,t))).filter(((e,t,n)=>!t||Um(e,n[t-1])!==0));let r=[];r.push(e);for(let i of n){let n=Um(i,e),a=Um(i,t);if(n===0)r[0]=e.An();else if(n>0&&a<0)r.push(i),r.push(i.An());else if(a>0)break}r.push(t);let i=[];for(let e=0;e<r.length;e+=2){if(this.Zn(r[e],r[e+1]))return[];let t=r[e].Vn(this.uid,oh,B.empty()),n=r[e+1].Vn(this.uid,oh,B.empty());i.push(IDBKeyRange.bound(t,n))}return i}Zn(e,t){return Um(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fh)}getMinOffset(e,t){return H.mapArray(this.Mn(t),(t=>this.xn(e,t).next((e=>e||P(44426))))).next(fh)}};function ch(e){return vu(e,Rl)}function lh(e){return vu(e,Zl)}function uh(e){return vu(e,Ul)}function dh(e){return vu(e,ql)}function fh(e){F(e.length!==0,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){let i=e[r].indexState.offset;Fc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Pc(t.readTime,t.documentKey,n)}var ph={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mh=41943040,hh=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};function gh(e,t,n){let r=e.store(pl),i=e.store(bl),a=[],o=IDBKeyRange.only(n.batchId),s=0,c=r.ee({range:o},((e,t,n)=>(s++,n.delete())));a.push(c.next((()=>{F(s===1,47070,{batchId:n.batchId})})));let l=[];for(let e of n.mutations){let r=vl(t,e.key.path,n.batchId);a.push(i.delete(r)),l.push(e.key)}return H.waitFor(a).next((()=>l))}function _h(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw P(14731);t=e.noDocument}return JSON.stringify(t).length}hh.DEFAULT_COLLECTION_PERCENTILE=10,hh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hh.DEFAULT=new hh(mh,hh.DEFAULT_COLLECTION_PERCENTILE,hh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hh.DISABLED=new hh(-1,0,0);var vh=class e{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(t,n,r,i){return F(t.uid!==``,64387),new e(t.isAuthenticated()?t.uid:``,n,r,i)}checkEmpty(e){let t=!0,n=IDBKeyRange.bound([this.userId,-1/0],[this.userId,1/0]);return bh(e).ee({index:hl,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){let i=xh(e),a=bh(e);return a.add({}).next((o=>{F(typeof o==`number`,49019);let s=new cp(o,t,n,r),c=function(e,t,n){let r=n.baseMutations.map((t=>Qp(e.yt,t))),i=n.mutations.map((t=>Qp(e.yt,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,s),l=[],u=new Tu(((e,t)=>z(e.canonicalString(),t.canonicalString())));for(let e of r){let t=vl(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(a.put(c)),l.push(i.put(t,yl))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Xn[o]=s.keys()})),H.waitFor(l).next((()=>s))}))}lookupMutationBatch(e,t){return bh(e).get(t).next((e=>e?(F(e.userId===this.userId,48,`Unexpected user for mutation batch`,{userId:e.userId,batchId:t}),xm(this.serializer,e)):null))}er(e,t){return this.Xn[t]?H.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){let n=e.keys();return this.Xn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]),i=null;return bh(e).ee({index:hl,range:r},((e,t,r)=>{t.userId===this.userId&&(F(t.batchId>=n,47524,{tr:n}),i=xm(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,1/0]),n=$c;return bh(e).ee({index:hl,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,$c],[this.userId,1/0]);return bh(e).J(hl,t).next((e=>e.map((e=>xm(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){let n=_l(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return xh(e).ee({range:r},((n,r,a)=>{let[o,s,c]=n,l=sl(s);if(o===this.userId&&t.path.isEqual(l))return bh(e).get(c).next((e=>{if(!e)throw P(61480,{nr:n,batchId:c});F(e.userId===this.userId,10503,`Unexpected user for mutation batch`,{userId:e.userId,batchId:c}),i.push(xm(this.serializer,e))}));a.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Tu(z),r=[];return t.forEach((t=>{let i=_l(this.userId,t.path),a=IDBKeyRange.lowerBound(i),o=xh(e).ee({range:a},((e,r,i)=>{let[a,o,s]=e,c=sl(o);a===this.userId&&t.path.isEqual(c)?n=n.add(s):i.done()}));r.push(o)})),H.waitFor(r).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=_l(this.userId,n),a=IDBKeyRange.lowerBound(i),o=new Tu(z);return xh(e).ee({range:a},((e,t,i)=>{let[a,s,c]=e,l=sl(s);a===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.rr(e,o)))}rr(e,t){let n=[],r=[];return t.forEach((t=>{r.push(bh(e).get(t).next((e=>{if(e===null)throw P(35274,{batchId:t});F(e.userId===this.userId,9748,`Unexpected user for mutation batch`,{userId:e.userId,batchId:t}),n.push(xm(this.serializer,e))})))})),H.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return gh(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),H.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();let n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return xh(e).ee({range:n},((e,t,n)=>{if(e[0]===this.userId){let t=sl(e[1]);r.push(t)}else n.done()})).next((()=>{F(r.length===0,56720,{sr:r.map((e=>e.canonicalString()))})}))}))}containsKey(e,t){return yh(e,this.userId,t)}_r(e){return Sh(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:$c,lastStreamToken:``}))}};function yh(e,t,n){let r=_l(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return xh(e).ee({range:a,X:!0},((e,n,r)=>{let[a,s,c]=e;a===t&&s===i&&(o=!0),r.done()})).next((()=>o))}function bh(e){return vu(e,pl)}function xh(e){return vu(e,bl)}function Sh(e){return vu(e,dl)}var Ch=class e{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new e(0)}static cr(){return new e(-1)}},wh=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>(t.highestTargetId=new Ch(t.highestTargetId).next(),this.hr(e,t).next((()=>t.highestTargetId)))))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((e=>V.fromTimestamp(new Tc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Th(e).delete(t.targetId))).next((()=>this.lr(e))).next((t=>(F(t.targetCount>0,8065),--t.targetCount,this.hr(e,t))))}removeTargets(e,t,n){let r=0,i=[];return Th(e).ee(((a,o)=>{let s=Sm(o);s.sequenceNumber<=t&&n.get(s.targetId)===null&&(r++,i.push(this.removeTargetData(e,s)))})).next((()=>H.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Th(e).ee(((e,n)=>{t(Sm(n))}))}lr(e){return Eh(e).get(Il).next((e=>(F(e!==null,2888),e)))}hr(e,t){return Eh(e).put(Il,t)}Pr(e,t){return Th(e).put(Cm(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((e=>e.targetCount))}getTargetData(e,t){let n=Kd(t),r=IDBKeyRange.bound([n,-1/0],[n,1/0]),i=null;return Th(e).ee({range:r,index:Al},((e,n,r)=>{let a=Sm(n);qd(t,a.target)&&(i=a,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){let r=[],i=Dh(e);return t.forEach((t=>{let a=il(t.path);r.push(i.put({targetId:n,path:a})),r.push(this.referenceDelegate.addReference(e,n,t))})),H.waitFor(r)}removeMatchingKeys(e,t,n){let r=Dh(e);return H.forEach(t,(t=>{let i=il(t.path);return H.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){let n=Dh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){let n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Dh(e),i=X();return r.ee({range:n,X:!0},((e,t,n)=>{let r=new B(sl(e[1]));i=i.add(r)})).next((()=>i))}containsKey(e,t){let n=il(t.path),r=IDBKeyRange.bound([n],[sc(n)],!1,!0),i=0;return Dh(e).ee({index:Pl,X:!0,range:r},(([e,t],n,r)=>{e!==0&&(i++,r.done())})).next((()=>i>0))}At(e,t){return Th(e).get(t).next((e=>e?Sm(e):null))}};function Th(e){return vu(e,kl)}function Eh(e){return vu(e,Ll)}function Dh(e){return vu(e,Ml)}var Oh=`LruGarbageCollector`,kh=1048576;function Ah([e,t],[n,r]){let i=z(e,n);return i===0?z(t,r):i}var jh=class{constructor(e){this.Ir=e,this.buffer=new Tu(Ah),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();Ah(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},Mh=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Vr(e){N(Oh,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Wc(e)?N(Oh,`Ignoring IndexedDB error during garbage collection: `,e):await Rc(e)}await this.Vr(3e5)}))}},Nh=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Qc.ce);let n=new jh(t);return this.mr.forEachTarget(e,(e=>n.Ar(e.sequenceNumber))).next((()=>this.mr.pr(e,(e=>n.Ar(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(N(`LruGarbageCollector`,`Garbage collection skipped; disabled`),H.resolve(ph)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(N(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ph):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(N(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Vs()<=D.DEBUG&&N(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function Ph(e,t){return new Nh(e,t)}var Fh=class{constructor(e,t){this.db=e,this.garbageCollector=Ph(this,t)}gr(e){let t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((e,n)=>t(n)))}addReference(e,t,n){return Ih(e,n)}removeReference(e,t,n){return Ih(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ih(e,t)}br(e,t){return function(e,t){let n=!1;return Sh(e).te((r=>yh(e,r,t).next((e=>(e&&(n=!0),H.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){let n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],i=0;return this.Sr(e,((a,o)=>{if(o<=t){let t=this.br(e,a).next((t=>{if(!t)return i++,n.getEntry(e,a).next((()=>(n.removeEntry(a,V.min()),Dh(e).delete(function(e){return[0,il(e.path)]}(a)))))}));r.push(t)}})).next((()=>H.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ih(e,t)}Sr(e,t){let n=Dh(e),r,i=Qc.ce;return n.ee({index:Pl},(([e,n],{path:a,sequenceNumber:o})=>{e===0?(i!==Qc.ce&&t(new B(sl(r)),i),i=o,r=a):i=Qc.ce})).next((()=>{i!==Qc.ce&&t(new B(sl(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Ih(e,t){return Dh(e).put(function(e,t){return{targetId:0,path:il(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Lh=class{constructor(){this.changes=new gf((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xd.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):H.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},Rh=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Hh(e).put(n)}removeEntry(e,t,n){return Hh(e).delete(function(e,t){let n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],vm(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=xd.newInvalidDocument(t);return Hh(e).ee({index:Cl,range:IDBKeyRange.only(Uh(t))},((e,r)=>{n=this.Cr(t,r)})).next((()=>n))}vr(e,t){let n={size:0,document:xd.newInvalidDocument(t)};return Hh(e).ee({index:Cl,range:IDBKeyRange.only(Uh(t))},((e,r)=>{n={document:this.Cr(t,r),size:_h(r)}})).next((()=>n))}getEntries(e,t){let n=vf();return this.Fr(e,t,((e,t)=>{let r=this.Cr(e,t);n=n.insert(e,r)})).next((()=>n))}Mr(e,t){let n=vf(),r=new Su(B.comparator);return this.Fr(e,t,((e,t)=>{let i=this.Cr(e,t);n=n.insert(e,i),r=r.insert(e,_h(t))})).next((()=>({documents:n,Or:r})))}Fr(e,t,n){if(t.isEmpty())return H.resolve();let r=new Tu(Gh);t.forEach((e=>r=r.add(e)));let i=IDBKeyRange.bound(Uh(r.first()),Uh(r.last())),a=r.getIterator(),o=a.getNext();return Hh(e).ee({index:Cl,range:i},((e,t,r)=>{let i=B.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Gh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Uh(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){let a=t.path,o=[a.popLast().toArray(),a.lastSegment(),vm(n.readTime),n.documentKey.path.isEmpty()?``:n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[2**53-1,2**53-1],``];return Hh(e).J(IDBKeyRange.bound(o,s,!0)).next((e=>{i?.incrementDocumentReadCount(e.length);let n=vf();for(let i of e){let e=this.Cr(B.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(ff(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=vf(),a=Wh(t,n),o=Wh(t,Pc.max());return Hh(e).ee({index:Tl,range:IDBKeyRange.bound(a,o,!0)},((e,t,n)=>{let a=this.Cr(B.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(a.key,a),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Bh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Vh(e).get(Ol).next((e=>(F(!!e,20021),e)))}Dr(e,t){return Vh(e).put(Ol,t)}Cr(e,t){if(t){let e=gm(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(V.min())))return e}return xd.newInvalidDocument(e)}};function zh(e){return new Rh(e)}var Bh=class extends Lh{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new gf((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){let t=[],n=0,r=new Tu(((e,t)=>z(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,a)=>{let o=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,o.readTime)),a.isValidDocument()){let s=_m(this.Nr.serializer,a);r=r.add(i.path.popLast());let c=_h(s);n+=c-o.size,t.push(this.Nr.addEntry(e,i,s))}else if(n-=o.size,this.trackRemovals){let n=_m(this.Nr.serializer,a.convertToNoDocument(V.min()));t.push(this.Nr.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Nr.updateMetadata(e,n)),H.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((e=>(this.Br.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:e,Or:t})=>(t.forEach(((t,n)=>{this.Br.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}};function Vh(e){return vu(e,Dl)}function Hh(e){return vu(e,xl)}function Uh(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Wh(e,t){let n=t.documentKey.path.toArray();return[e,vm(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:``]}function Gh(e,t){let n=e.path.toArray(),r=t.path.toArray(),i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=z(n[e],r[e]),i)return i;return i=z(n.length,r.length),i||(i=z(n[n.length-2],r[r.length-2]),i||z(n[n.length-1],r[r.length-1]))}var Kh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},qh=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&Qf(n.mutation,e,Ou.empty(),Tc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,X()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=X()){let r=Sf();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=bf();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Sf();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,X())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=vf(),a=wf(),o=function(){return wf()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof np)?i=i.insert(t.key,t):o===void 0?a.set(t.key,Ou.empty()):(a.set(t.key,o.mutation.getFieldMask()),Qf(o.mutation,t,o.mutation.getFieldMask(),Tc.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new Kh(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=wf(),r=new Su(((e,t)=>e-t)),i=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||Ou.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||X()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Cf();c.forEach((e=>{if(!i.has(e)){let r=Xf(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return H.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return B.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):H.resolve(Sf()),o=Ec,s=i;return a.next((t=>H.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?H.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,X()))).next((e=>({batchId:o,changes:xf(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next((e=>{let t=bf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=bf();return this.indexManager.getCollectionParents(e,i).next((o=>H.forEach(o,(o=>{let s=function(e,t){return new Qd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,xd.newInvalidDocument(r)))}));let n=bf();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&Qf(a.mutation,r,Ou.empty(),Tc.now()),ff(t,r)&&(n=n.insert(e,r))})),n}))}},Jh=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:zp(e.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:wm(e.bundledQuery),readTime:zp(e.readTime)}}(t)),H.resolve()}},Yh=class{constructor(){this.overlays=new Su(B.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Sf();return H.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),H.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.qr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.qr.delete(n)),H.resolve()}getOverlaysForCollection(e,t,n){let r=Sf(),i=t.length+1,a=new B(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return H.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Su(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Sf(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Sf(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return H.resolve(o)}St(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new up(t,n));let i=this.qr.get(t);i===void 0&&(i=X(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}},Xh=class{constructor(){this.sessionToken=Au.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}},Zh=class{constructor(){this.Qr=new Tu(Qh.$r),this.Ur=new Tu(Qh.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let n=new Qh(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Gr(new Qh(e,t))}zr(e,t){e.forEach((e=>this.removeReference(e,t)))}jr(e){let t=new B(new uc([])),n=new Qh(t,e),r=new Qh(t,e+1),i=[];return this.Ur.forEachInRange([n,r],(e=>{this.Gr(e),i.push(e.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new B(new uc([])),n=new Qh(t,e),r=new Qh(t,e+1),i=X();return this.Ur.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new Qh(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},Qh=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return B.comparator(e.key,t.key)||z(e.Yr,t.Yr)}static Kr(e,t){return z(e.Yr,t.Yr)||B.comparator(e.key,t.key)}},$h=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tu(Qh.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new cp(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Zr=this.Zr.add(new Qh(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return H.resolve(a)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.ei(n),i=r<0?0:r;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?$c:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new Qh(t,0),r=new Qh(t,1/0),i=[];return this.Zr.forEachInRange([n,r],(e=>{let t=this.Xr(e.Yr);i.push(t)})),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Tu(z);return t.forEach((e=>{let t=new Qh(e,0),r=new Qh(e,1/0);this.Zr.forEachInRange([t,r],(e=>{n=n.add(e.Yr)}))})),H.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;B.isDocumentKey(i)||(i=i.child(``));let a=new Qh(new B(i),0),o=new Tu(z);return this.Zr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)}),a),H.resolve(this.ti(o))}ti(e){let t=[];return e.forEach((e=>{let n=this.Xr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){F(this.ni(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Zr;return H.forEach(t.mutations,(r=>{let i=new Qh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){let n=new Qh(t,0),r=this.Zr.firstAfterOrEqual(n);return H.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},eg=class{constructor(e){this.ri=e,this.docs=function(){return new Su(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return H.resolve(n?n.document.mutableCopy():xd.newInvalidDocument(t))}getEntries(e,t){let n=vf();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():xd.newInvalidDocument(e))})),H.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=vf(),a=t.path,o=new B(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Fc(Nc(o),n)<=0||(r.has(o.key)||ff(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,t,n,r){P(9500)}ii(e,t){return H.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new tg(this)}getSize(e){return H.resolve(this.size)}},tg=class extends Lh{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}},ng=class{constructor(e){this.persistence=e,this.si=new gf((e=>Kd(e)),qd),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.oi=0,this._i=new Zh,this.targetCount=0,this.ai=Ch.ur()}forEachTarget(e,t){return this.si.forEach(((e,n)=>t(n))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Ch(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),--this.targetCount,H.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),H.waitFor(i).next((()=>r))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){let n=this.si.get(t)||null;return H.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),H.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),H.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){let n=this._i.Hr(t);return H.resolve(n)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}},rg=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Qc(0),this.li=!1,this.li=!0,this.hi=new Xh,this.referenceDelegate=e(this),this.Pi=new ng(this),this.indexManager=new rh,this.remoteDocumentCache=function(e){return new eg(e)}((e=>this.referenceDelegate.Ti(e))),this.serializer=new hm(t),this.Ii=new Jh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new $h(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){N(`MemoryPersistence`,`Starting transaction:`,e);let r=new ig(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ai(e,t){return H.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}},ig=class extends Lc{constructor(e){super(),this.currentSequenceNumber=e}},ag=class e{constructor(e){this.persistence=e,this.Ri=new Zh,this.Vi=null}static mi(t){return new e(t)}get fi(){if(this.Vi)return this.Vi;throw P(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),H.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((e=>this.fi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.fi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(n=>{let r=B.fromPath(n);return this.gi(e,r).next((e=>{e||t.removeEntry(r,V.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},og=class e{constructor(e,t){this.persistence=e,this.pi=new gf((e=>il(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Ph(this,t)}static mi(t,n){return new e(t,n)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((n,r)=>this.br(e,n,r).next((e=>e?H.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(r=>this.br(e,r,t).next((e=>{e||(n++,i.removeEntry(r,V.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=id(e.data.value)),t}br(e,t,n){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return H.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},sg=class{constructor(e){this.serializer=e}k(e,t,n,r){let i=new zc(`createOrUpgrade`,t);n<1&&r>=1&&(function(e){e.createObjectStore(ll)}(e),function(e){e.createObjectStore(dl,{keyPath:fl}),e.createObjectStore(pl,{keyPath:ml,autoIncrement:!0}).createIndex(hl,gl,{unique:!0}),e.createObjectStore(bl)}(e),cg(e),function(e){e.createObjectStore(cl)}(e));let a=H.resolve();return n<3&&r>=3&&(n!==0&&(function(e){e.deleteObjectStore(Ml),e.deleteObjectStore(kl),e.deleteObjectStore(Ll)}(e),cg(e)),a=a.next((()=>function(e){let t=e.store(Ll),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:V.min().toTimestamp(),targetCount:0};return t.put(Il,n)}(i)))),n<4&&r>=4&&(n!==0&&(a=a.next((()=>function(e,t){return t.store(pl).J().next((n=>{e.deleteObjectStore(pl),e.createObjectStore(pl,{keyPath:ml,autoIncrement:!0}).createIndex(hl,gl,{unique:!0});let r=t.store(pl),i=n.map((e=>r.put(e)));return H.waitFor(i)}))}(e,i)))),a=a.next((()=>{(function(e){e.createObjectStore(Bl,{keyPath:W})})(e)}))),n<5&&r>=5&&(a=a.next((()=>this.yi(i)))),n<6&&r>=6&&(a=a.next((()=>(function(e){e.createObjectStore(Dl)}(e),this.wi(i))))),n<7&&r>=7&&(a=a.next((()=>this.Si(i)))),n<8&&r>=8&&(a=a.next((()=>this.bi(e,i)))),n<9&&r>=9&&(a=a.next((()=>{(function(e){e.objectStoreNames.contains(`remoteDocumentChanges`)&&e.deleteObjectStore(`remoteDocumentChanges`)})(e)}))),n<10&&r>=10&&(a=a.next((()=>this.Di(i)))),n<11&&r>=11&&(a=a.next((()=>{(function(e){e.createObjectStore(Vl,{keyPath:G})})(e),function(e){e.createObjectStore(K,{keyPath:Hl})}(e)}))),n<12&&r>=12&&(a=a.next((()=>{(function(e){let t=e.createObjectStore(tu,{keyPath:nu});t.createIndex(ru,iu,{unique:!1}),t.createIndex(au,ou,{unique:!1})})(e)}))),n<13&&r>=13&&(a=a.next((()=>function(e){let t=e.createObjectStore(xl,{keyPath:Sl});t.createIndex(Cl,wl),t.createIndex(Tl,El)}(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(cl)))),n<14&&r>=14&&(a=a.next((()=>this.Fi(e,i)))),n<15&&r>=15&&(a=a.next((()=>function(e){e.createObjectStore(Ul,{keyPath:Wl,autoIncrement:!0}).createIndex(Gl,Kl,{unique:!1}),e.createObjectStore(ql,{keyPath:Jl}).createIndex(Yl,Xl,{unique:!1}),e.createObjectStore(Zl,{keyPath:Ql}).createIndex($l,eu,{unique:!1})}(e)))),n<16&&r>=16&&(a=a.next((()=>{t.objectStore(ql).clear()})).next((()=>{t.objectStore(Zl).clear()}))),n<17&&r>=17&&(a=a.next((()=>{(function(e){e.createObjectStore(su,{keyPath:cu})})(e)}))),n<18&&r>=18&&we()&&(a=a.next((()=>{t.objectStore(ql).clear()})).next((()=>{t.objectStore(Zl).clear()}))),a}wi(e){let t=0;return e.store(cl).ee(((e,n)=>{t+=_h(n)})).next((()=>{let n={byteSize:t};return e.store(Dl).put(Ol,n)}))}yi(e){let t=e.store(dl),n=e.store(pl);return t.J().next((t=>H.forEach(t,(t=>{let r=IDBKeyRange.bound([t.userId,$c],[t.userId,t.lastAcknowledgedBatchId]);return n.J(hl,r).next((n=>H.forEach(n,(n=>{F(n.userId===t.userId,18650,`Cannot process batch from unexpected user`,{batchId:n.batchId});let r=xm(this.serializer,n);return gh(e,t.userId,r).next((()=>{}))}))))}))))}Si(e){let t=e.store(Ml),n=e.store(cl);return e.store(Ll).get(Il).next((e=>{let r=[];return n.ee(((n,i)=>{let a=new uc(n),o=function(e){return[0,il(e)]}(a);r.push(t.get(o).next((n=>n?H.resolve():(n=>t.put({targetId:0,path:il(n),sequenceNumber:e.highestListenSequenceNumber}))(a))))})).next((()=>H.waitFor(r)))}))}bi(e,t){e.createObjectStore(Rl,{keyPath:zl});let n=t.store(Rl),r=new ih,i=e=>{if(r.add(e)){let t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:il(r)})}};return t.store(cl).ee({X:!0},((e,t)=>i(new uc(e).popLast()))).next((()=>t.store(bl).ee({X:!0},(([e,t,n],r)=>i(sl(t).popLast())))))}Di(e){let t=e.store(kl);return t.ee(((e,n)=>{let r=Sm(n),i=Cm(this.serializer,r);return t.put(i)}))}Ci(e,t){let n=t.store(cl),r=[];return n.ee(((e,n)=>{let i=t.store(xl),a=function(e){return e.document?new B(uc.fromString(e.document.name).popFirst(5)):e.noDocument?B.fromSegments(e.noDocument.path):e.unknownDocument?B.fromSegments(e.unknownDocument.path):P(36783)}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>H.waitFor(r)))}Fi(e,t){let n=t.store(pl),r=zh(this.serializer),i=new rg(ag.mi,this.serializer.yt);return n.J().next((e=>{let n=new Map;return e.forEach((e=>{let t=n.get(e.userId)??X();xm(this.serializer,e).keys().forEach((e=>t=t.add(e))),n.set(e.userId,t)})),H.forEach(n,((e,n)=>{let a=new Rs(n),o=jm.wt(this.serializer,a),s=i.getIndexManager(a);return new qh(r,vh.wt(a,this.serializer,s,i.referenceDelegate),o,s).recalculateAndSaveOverlaysForDocumentKeys(new _u(t,Qc.ce),e).next()}))}))}};function cg(e){e.createObjectStore(Ml,{keyPath:Nl}).createIndex(Pl,Fl,{unique:!0}),e.createObjectStore(kl,{keyPath:`targetId`}).createIndex(Al,jl,{unique:!0}),e.createObjectStore(Ll)}var lg=`IndexedDbPersistence`,ug=18e5,dg=5e3,fg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pg=`main`,mg=class e{constructor(t,n,r,i,a,o,s,c,l,u,d=18){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=o,this.document=s,this.xi=l,this.Oi=u,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=-1/0,this.Qi=e=>Promise.resolve(),!e.v())throw new R(L.UNIMPLEMENTED,`This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.`);this.referenceDelegate=new Fh(this,i),this.$i=n+pg,this.serializer=new hm(c),this.Ui=new Bc(this.$i,this.Ni,new sg(this.serializer)),this.hi=new Nm,this.Pi=new wh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zh(this.serializer),this.Ii=new Om,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,!1===u&&Hs(lg,`LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page.`))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new R(L.FAILED_PRECONDITION,fg);return this.Gi(),this.zi(),this.ji(),this.runTransaction(`getHighestListenSequenceNumber`,`readonly`,(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Qc(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction(`updateClientMetadataAndTryBecomePrimary`,`readwrite`,(e=>gg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Wc(e))return N(lg,`Failed to extend owner lease: `,e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return N(lg,`Releasing owner lease after error during lease refresh`,e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return hg(e).get(ul).next((e=>H.resolve(this.es(e))))}ts(e){return gg(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ug)){this.qi=Date.now();let e=await this.runTransaction(`maybeGarbageCollectMultiClientState`,`readwrite-primary`,(e=>{let t=vu(e,Bl);return t.J().next((e=>{let n=this.ss(e,ug),r=e.filter((e=>n.indexOf(e)===-1));return H.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ki)for(let t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay(`client_metadata_refresh`,4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?H.resolve(!0):hg(e).get(ul).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,dg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new R(L.FAILED_PRECONDITION,fg);return!1}}return!(!this.networkEnabled||!this.inForeground)||gg(e).J().next((e=>this.ss(e,dg).find((e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&N(lg,`Client ${e?`is`:`is not`} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&=(this.ki.cancel(),null),this.ls(),this.hs(),await this.Ui.runTransaction(`shutdown`,`readwrite`,[ll,Bl],(e=>{let t=new _u(e,Qc.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((e=>this.rs(e.updateTimeMs,t)&&!this.us(e.clientId)))}Ts(){return this.runTransaction(`getActiveClients`,`readonly`,(e=>gg(e).J().next((e=>this.ss(e,ug).map((e=>e.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return vh.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sh(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return jm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){N(lg,`Starting transaction:`,e);let r=t===`readonly`?`readonly`:`readwrite`,i=function(e){return e===18?gu:e===17?hu:e===16?mu:e===15?pu:e===14?fu:e===13?du:e===12?uu:e===11?lu:void P(60245)}(this.Ni),a;return this.Ui.runTransaction(e,r,i,(r=>(a=new _u(r,this.ci?this.ci.next():Qc.ce),t===`readwrite-primary`?this.Hi(a).next((e=>!!e||this.Yi(a))).next((t=>{if(!t)throw Hs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new R(L.FAILED_PRECONDITION,Ic);return n(a)})).next((e=>this.Xi(a).next((()=>e)))):this.Is(a).next((()=>n(a)))))).then((e=>(a.raiseOnCommittedEvent(),e)))}Is(e){return hg(e).get(ul).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,dg)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new R(L.FAILED_PRECONDITION,fg)}))}Xi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hg(e).put(ul,t)}static v(){return Bc.v()}Zi(e){let t=hg(e);return t.get(ul).next((e=>this.es(e)?(N(lg,`Releasing primary lease.`),t.delete(ul)):H.resolve()))}rs(e,t){let n=Date.now();return!(e<n-t)&&(!(e>n)||(Hs(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener==`function`&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState===`visible`,this.Wi())))},this.document.addEventListener(`visibilitychange`,this.Li),this.inForeground=this.document.visibilityState===`visible`)}ls(){this.Li&&=(this.document.removeEventListener(`visibilitychange`,this.Li),null)}zi(){typeof this.window?.addEventListener==`function`&&(this.Bi=()=>{this.cs();let e=/(?:Version|Mobile)\/1[456]/;Ce()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener(`pagehide`,this.Bi))}hs(){this.Bi&&=(this.window.removeEventListener(`pagehide`,this.Bi),null)}us(e){try{let t=this.Ki?.getItem(this._s(e))!==null;return N(lg,`Client '${e}' ${t?`is`:`is not`} zombied in LocalStorage`),t}catch(e){return Hs(lg,`Failed to get zombied client id.`,e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Hs(`Failed to set zombie client id.`,e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function hg(e){return vu(e,ll)}function gg(e){return vu(e,Bl)}function _g(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+=`.`+e.database),`firestore/`+t+`/`+n+`/`}var vg=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(t,n){let r=X(),i=X();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},yg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},bg=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Ce()?8:Vc(T())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ys(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ws(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new yg;return this.Ss(e,t,n).next((r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)}))})).next((()=>i.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(Vs()<=D.DEBUG&&N(`QueryEngine`,`SDK will not create cache indexes for query:`,df(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.fs,`documents`),H.resolve()):(Vs()<=D.DEBUG&&N(`QueryEngine`,`Query:`,df(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.gs*r?(Vs()<=D.DEBUG&&N(`QueryEngine`,`The SDK decides to create cache indexes for query:`,df(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,af(t))):H.resolve())}ys(e,t){if(tf(t))return H.resolve(null);let n=af(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=cf(t,null,`F`),n=af(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=X(...r);return this.ps.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,cf(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ws(e,t,n,r){return tf(t)||r.isEqual(V.min())?H.resolve(null):this.ps.getDocuments(e,n).next((i=>{let a=this.Ds(t,i);return this.Cs(t,a,n,r)?H.resolve(null):(Vs()<=D.DEBUG&&N(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),df(t)),this.vs(e,a,t,Mc(r,Ec)).next((e=>e)))}))}Ds(e,t){let n=new Tu(mf(e));return t.forEach(((t,r)=>{ff(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Vs()<=D.DEBUG&&N(`QueryEngine`,`Using full collection scan to execute query:`,df(t)),this.ps.getDocumentsMatchingQuery(e,t,Pc.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},xg=`LocalStore`,Sg=3e8,Cg=class{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Su(z),this.xs=new gf((e=>Kd(e)),qd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qh(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Ms)))}};function wg(e,t,n,r){return new Cg(e,t,n,r)}async function Tg(e,t){let n=I(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=X();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ls:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function Eg(e,t){let n=I(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=H.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);F(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=X();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function Dg(e){let t=I(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function Og(e,t){let n=I(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.Pi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(Au.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Sg?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.Pi.updateTargetData(e,l))}));let s=vf(),c=X();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(kg(e,a,t.documentUpdates).next((e=>{s=e.ks,c=e.qs}))),!r.isEqual(V.min())){let t=n.Pi.getLastRemoteSnapshotVersion(e).next((t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return H.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Ms=i,e)))}function kg(e,t,n){let r=X(),i=X();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=vf();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(V.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):N(xg,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{ks:r,qs:i}}))}function Ag(e,t){let n=I(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=$c),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function jg(e,t){let n=I(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.Pi.getTargetData(e,t).next((i=>i?(r=i,H.resolve(r)):n.Pi.allocateTargetId(e).next((i=>(r=new mm(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.Pi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Ms.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e}))}async function Mg(e,t,n){let r=I(e),i=r.Ms.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Wc(e))throw e;N(xg,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Ng(e,t,n){let r=I(e),i=V.min(),a=X();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=I(e),i=r.xs.get(n);return i===void 0?r.Pi.getTargetData(t,n):H.resolve(r.Ms.get(i))}(r,e,af(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:V.min(),n?a:X()))).next((e=>(Ig(r,pf(t),e),{documents:e,Qs:a})))))}function Pg(e,t){let n=I(e),r=I(n.Pi),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction(`Get target data`,`readonly`,(e=>r.At(e,t).next((e=>e?e.target:null))))}function Fg(e,t){let n=I(e),r=n.Os.get(t)||V.min();return n.persistence.runTransaction(`Get new document changes`,`readonly`,(e=>n.Ns.getAllFromCollectionGroup(e,t,Mc(r,Ec),2**53-1))).then((e=>(Ig(n,t,e),e)))}function Ig(e,t,n){let r=e.Os.get(t)||V.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Os.set(t,r)}var Lg=`firestore_clients`;function Rg(e,t){return`${Lg}_${e}_${t}`}var zg=`firestore_mutations`;function Bg(e,t,n){let r=`${zg}_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}var Vg=`firestore_targets`;function Hg(e,t){return`${Vg}_${e}_${t}`}var Ug=`SharedClientState`,Wg=class e{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ws(t,n,r){let i=JSON.parse(r),a,o=typeof i==`object`&&[`pending`,`acknowledged`,`rejected`].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error==`object`);return o&&i.error&&(o=typeof i.error.message==`string`&&typeof i.error.code==`string`,o&&(a=new R(i.error.code,i.error.message))),o?new e(t,n,i.state,a):(Hs(Ug,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Gg=class e{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(t,n){let r=JSON.parse(n),i,a=typeof r==`object`&&[`not-current`,`current`,`rejected`].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error==`object`);return a&&r.error&&(a=typeof r.error.message==`string`&&typeof r.error.code==`string`,a&&(i=new R(r.error.code,r.error.message))),a?new e(t,r.state,i):(Hs(Ug,`Failed to parse target state for ID '${t}': ${n}`),null)}Gs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Kg=class e{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(t,n){let r=JSON.parse(n),i=typeof r==`object`&&r.activeTargetIds instanceof Array,a=Of();for(let e=0;i&&e<r.activeTargetIds.length;++e)i=nl(r.activeTargetIds[e]),a=a.add(r.activeTargetIds[e]);return i?new e(t,a):(Hs(Ug,`Failed to parse client data for instance '${t}': ${n}`),null)}},qg=class e{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(t){let n=JSON.parse(t);return typeof n==`object`&&[`Unknown`,`Online`,`Offline`].indexOf(n.onlineState)!==-1&&typeof n.clientId==`string`?new e(n.clientId,n.onlineState):(Hs(Ug,`Failed to parse online state: ${t}`),null)}},Jg=class{constructor(){this.activeTargetIds=Of()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Yg=class{constructor(e,t,n,r,i){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Su(z),this.started=!1,this.Xs=[];let a=n.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`);this.storage=this.window.localStorage,this.currentUser=i,this.eo=Rg(this.persistenceKey,this.Js),this.no=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Jg),this.ro=RegExp(`^${Lg}_${a}_([^_]*)$`),this.io=RegExp(`^${zg}_${a}_(\\d+)(?:_(.*))?$`),this.so=RegExp(`^${Vg}_${a}_(\\d+)$`),this.oo=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this._o=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener(`storage`,this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){let e=await this.syncEngine.Ts();for(let t of e){if(t===this.Js)continue;let e=this.getItem(Rg(this.persistenceKey,t));if(e){let n=Kg.Ws(t,e);n&&(this.Zs=this.Zs.insert(n.clientId,n))}}this.ao();let t=this.storage.getItem(this.oo);if(t){let e=this.uo(t);e&&this.co(e)}for(let e of this.Xs)this.Ys(e);this.Xs=[],this.window.addEventListener(`pagehide`,(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,`pending`)}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e,t=!0){let n=`not-current`;if(this.isActiveQueryTarget(e)){let t=this.storage.getItem(Hg(this.persistenceKey,e));if(t){let r=Gg.Ws(e,t);r&&(n=r.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hg(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Po(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&=(this.window.removeEventListener(`storage`,this.Hs),this.removeItem(this.eo),!1)}getItem(e){let t=this.storage.getItem(e);return N(Ug,`READ`,e,t),t}setItem(e,t){N(Ug,`SET`,e,t),this.storage.setItem(e,t)}removeItem(e){N(Ug,`REMOVE`,e),this.storage.removeItem(e)}Ys(e){let t=e;if(t.storageArea===this.storage){if(N(Ug,`EVENT`,t.key,t.newValue),t.key===this.eo)return void Hs(`Received WebStorage notification for local change. Another client might have garbage-collected our state`);this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){let e=this.Ro(t.key);return this.Vo(e,null)}{let e=this.mo(t.key,t.newValue);if(e)return this.Vo(e.clientId,e)}}else if(this.io.test(t.key)){if(t.newValue!==null){let e=this.fo(t.key,t.newValue);if(e)return this.po(e)}}else if(this.so.test(t.key)){if(t.newValue!==null){let e=this.yo(t.key,t.newValue);if(e)return this.wo(e)}}else if(t.key===this.oo){if(t.newValue!==null){let e=this.uo(t.newValue);if(e)return this.co(e)}}else if(t.key===this.no){let e=function(e){let t=Qc.ce;if(e!=null)try{let n=JSON.parse(e);F(typeof n==`number`,30636,{So:e}),t=n}catch(e){Hs(Ug,`Failed to read sequence number from WebStorage`,e)}return t}(t.newValue);e!==Qc.ce&&this.sequenceNumberHandler(e)}else if(t.key===this._o){let e=this.bo(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Do(e))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){let r=new Wg(this.currentUser,e,t,n),i=Bg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Gs())}Po(e){let t=Bg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){let t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){let r=Hg(this.persistenceKey,e),i=new Gg(e,t,n);this.setItem(r,i.Gs())}Ao(e){let t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){let t=this.ro.exec(e);return t?t[1]:null}mo(e,t){let n=this.Ro(e);return Kg.Ws(n,t)}fo(e,t){let n=this.io.exec(e),r=Number(n[1]),i=n[2]===void 0?null:n[2];return Wg.Ws(new Rs(i),r,t)}yo(e,t){let n=this.so.exec(e),r=Number(n[1]);return Gg.Ws(r,t)}uo(e){return qg.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);N(Ug,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){let n=t?this.Zs.insert(e,t):this.Zs.remove(e),r=this.lo(this.Zs),i=this.lo(n),a=[],o=[];return i.forEach((e=>{r.has(e)||a.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Fo(a,o).then((()=>{this.Zs=n}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Of();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}},Xg=class{constructor(){this.Mo=new Jg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||`not-current`}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},Zg=class{Oo(e){}shutdown(){}},Qg=`ConnectivityMonitor`,$g=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener(`online`,this.No),window.removeEventListener(`offline`,this.Lo)}Qo(){window.addEventListener(`online`,this.No),window.addEventListener(`offline`,this.Lo)}Bo(){N(Qg,`Network connectivity changed: AVAILABLE`);for(let e of this.qo)e(0)}ko(){N(Qg,`Network connectivity changed: UNAVAILABLE`);for(let e of this.qo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},e_=null;function t_(){return e_===null?e_=function(){return 268435456+Math.round(2147483648*Math.random())}():e_++,`0x`+e_.toString(16)}var n_=`RestConnection`,r_={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},i_=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+`://`+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Uu?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){let a=t_(),o=this.zo(e,t.toUriEncodedString());N(n_,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);let{host:c}=new URL(o),l=fe(c);return this.Jo(e,o,s,n,l).then((t=>(N(n_,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Us(n_,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+zs}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}zo(e,t){let n=r_[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}},a_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}},o_=`WebChannelConnection`,s_=class extends i_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){let a=t_();return new Promise(((i,o)=>{let s=new Os;s.setWithCredentials(!0),s.listenOnce(As.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case js.NO_ERROR:let t=s.getResponseJson();N(o_,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case js.TIMEOUT:N(o_,`RPC '${e}' ${a} timed out`),o(new R(L.DEADLINE_EXCEEDED,`Request time out`));break;case js.HTTP_ERROR:let n=s.getStatus();if(N(o_,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new R(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(L).indexOf(t)>=0?t:L.UNKNOWN}(t.status),t.message)):o(new R(L.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new R(L.UNAVAILABLE,`Connection failed.`));break;default:P(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{N(o_,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);N(o_,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(e,t,n){let r=t_(),i=[this.Uo,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=Fs(),o=Ps(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);N(o_,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new a_({Yo:t=>{f?N(o_,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(N(o_,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),N(o_,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,ks.EventType.OPEN,(()=>{f||(N(o_,`RPC '${e}' stream ${r} transport opened.`),p.o_())})),m(u,ks.EventType.CLOSE,(()=>{f||(f=!0,N(o_,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))})),m(u,ks.EventType.ERROR,(t=>{f||(f=!0,Us(o_,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.a_(new R(L.UNAVAILABLE,`The operation could not be completed`)))})),m(u,ks.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];F(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){N(o_,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=fp[e];if(t!==void 0)return mp(t)}(t),i=a.message;n===void 0&&(n=L.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.a_(new R(n,i)),u.close()}else N(o_,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}})),m(o,Ns.STAT_EVENT,(t=>{t.stat===Ms.PROXY?N(o_,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Ms.NOPROXY&&N(o_,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function c_(){return typeof window<`u`?window:null}function l_(){return typeof document<`u`?document:null}function u_(e){return new Pp(e,!0)}var d_=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&N(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}},f_=`PersistentStream`,p_=class{constructor(e,t,n,r,i,a,o,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new d_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===L.RESOURCE_EXHAUSTED?(Hs(t.toString()),Hs(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new R(L.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.J_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return N(f_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(N(f_,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},m_=class extends p_{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=Zp(this.serializer,e),n=function(e){if(!(`targetChange`in e))return V.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?V.min():t.readTime?zp(t.readTime):V.min()}(e);return this.listener.H_(t,n)}Y_(e){let t={};t.database=qp(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=Jd(r)?{documents:tm(e,r)}:{query:nm(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Lp(e,t.resumeToken);let r=Fp(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(V.min())>0){n.readTime=Ip(e,t.snapshotVersion.toTimestamp());let r=Fp(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=im(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){let t={};t.database=qp(this.serializer),t.removeTarget=e,this.q_(t)}},h_=class extends p_{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}J_(e){return F(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,F(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){F(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=em(e.writeResults,e.commitTime),n=zp(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=qp(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>Qp(this.serializer,e)))};this.q_(t)}},g_=class{},__=class extends g_{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new R(L.FAILED_PRECONDITION,`The client has already been terminated.`)}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,Vp(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new R(L.UNKNOWN,e.toString())}))}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,Vp(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new R(L.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},v_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hs(t),this.aa=!1):N(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},y_=`RemoteStore`,b_=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((e=>{n.enqueueAndForget((async()=>{k_(this)&&(N(y_,`Restarting streams for network reachability change.`),await async function(e){let t=I(e);t.Ea.add(4),await S_(t),t.Ra.set(`Unknown`),t.Ea.delete(4),await x_(t)}(this))}))})),this.Ra=new v_(n,r)}};async function x_(e){if(k_(e))for(let t of e.da)await t(!0)}async function S_(e){for(let t of e.da)await t(!1)}function C_(e,t){let n=I(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),O_(n)?D_(n):J_(n).O_()&&T_(n,t))}function w_(e,t){let n=I(e),r=J_(n);n.Ia.delete(t),r.O_()&&E_(n,t),n.Ia.size===0&&(r.O_()?r.L_():k_(n)&&n.Ra.set(`Unknown`))}function T_(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(V.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}J_(e).Y_(t)}function E_(e,t){e.Va.Ue(t),J_(e).Z_(t)}function D_(e){e.Va=new Op({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),J_(e).start(),e.Ra.ua()}function O_(e){return k_(e)&&!J_(e).x_()&&e.Ia.size>0}function k_(e){return I(e).Ea.size===0}function A_(e){e.Va=void 0}async function j_(e){e.Ra.set(`Online`)}async function M_(e){e.Ia.forEach(((t,n)=>{T_(e,t)}))}async function N_(e,t){A_(e),O_(e)?(e.Ra.ha(t),D_(e)):e.Ra.set(`Unknown`)}async function P_(e,t,n){if(e.Ra.set(`Online`),t instanceof Ep&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){N(y_,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await F_(e,n)}else if(t instanceof wp?e.Va.Ze(t):t instanceof Tp?e.Va.st(t):e.Va.tt(t),!n.isEqual(V.min()))try{let t=await Dg(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Va.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(Au.EMPTY_BYTE_STRING,r.snapshotVersion)),E_(e,t),T_(e,new mm(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){N(y_,`Failed to raise snapshot:`,t),await F_(e,t)}}async function F_(e,t,n){if(!Wc(t))throw t;e.Ea.add(1),await S_(e),e.Ra.set(`Offline`),n||=()=>Dg(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{N(y_,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await x_(e)}))}function I_(e,t){return t().catch((n=>F_(e,n,t)))}async function L_(e){let t=I(e),n=Y_(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:$c;for(;R_(t);)try{let e=await Ag(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,z_(t,e)}catch(e){await F_(t,e)}B_(t)&&V_(t)}function R_(e){return k_(e)&&e.Ta.length<10}function z_(e,t){e.Ta.push(t);let n=Y_(e);n.O_()&&n.X_&&n.ea(t.mutations)}function B_(e){return k_(e)&&!Y_(e).x_()&&e.Ta.length>0}function V_(e){Y_(e).start()}async function H_(e){Y_(e).ra()}async function U_(e){let t=Y_(e);for(let n of e.Ta)t.ea(n.mutations)}async function W_(e,t,n){let r=e.Ta.shift(),i=lp.from(r,t,n);await I_(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await L_(e)}async function G_(e,t){t&&Y_(e).X_&&await async function(e,t){if(function(e){return pp(e)&&e!==L.ABORTED}(t.code)){let n=e.Ta.shift();Y_(e).B_(),await I_(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await L_(e)}}(e,t),B_(e)&&V_(e)}async function K_(e,t){let n=I(e);n.asyncQueue.verifyOperationInProgress(),N(y_,`RemoteStore received new credentials`);let r=k_(n);n.Ea.add(3),await S_(n),r&&n.Ra.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await x_(n)}async function q_(e,t){let n=I(e);t?(n.Ea.delete(2),await x_(n)):t||(n.Ea.add(2),await S_(n),n.Ra.set(`Unknown`))}function J_(e){return e.ma||(e.ma=function(e,t,n){let r=I(e);return r.sa(),new m_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:j_.bind(null,e),t_:M_.bind(null,e),r_:N_.bind(null,e),H_:P_.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),O_(e)?D_(e):e.Ra.set(`Unknown`)):(await e.ma.stop(),A_(e))}))),e.ma}function Y_(e){return e.fa||(e.fa=function(e,t,n){let r=I(e);return r.sa(),new h_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:H_.bind(null,e),r_:G_.bind(null,e),ta:U_.bind(null,e),na:W_.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await L_(e)):(await e.fa.stop(),e.Ta.length>0&&(N(y_,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}var X_=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(L.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Z_(e,t){if(Hs(`AsyncQueue`,`${t}: ${e}`),Wc(e))return new R(L.UNAVAILABLE,`${t}: ${e}`);throw e}var Q_=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||B.comparator(t.key,n.key):(e,t)=>B.comparator(e.key,t.key),this.keyedMap=bf(),this.sortedSet=new Su(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},$_=class{constructor(){this.ga=new Su(B.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):P(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},ev=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,Q_.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},tv=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}},nv=class{constructor(){this.queries=rv(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=I(e),r=n.queries;n.queries=rv(),r.forEach(((e,n)=>{for(let e of n.Sa)e.onError(t)}))})(this,new R(L.ABORTED,`Firestore shutting down`))}};function rv(){return new gf((e=>uf(e)),lf)}async function iv(e,t){let n=I(e),r=3,i=t.query,a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new tv,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=Z_(e,`Initialization of query '${df(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&cv(n)}async function av(e,t){let n=I(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ov(e,t){let n=I(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.Sa)t.Fa(e)&&(r=!0);i.wa=e}}r&&cv(n)}function sv(e,t,n){let r=I(e),i=r.queries.get(t);if(i)for(let e of i.Sa)e.onError(n);r.queries.delete(t)}function cv(e){e.Ca.forEach((e=>{e.next()}))}var lv,uv;(uv=lv||={}).Ma=`default`,uv.Cache=`cache`;var dv=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new ev(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=ev.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lv.Cache}},fv=class{constructor(e){this.key=e}},pv=class{constructor(e){this.key=e}},mv=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=X(),this.mutatedKeys=X(),this.eu=mf(e),this.tu=new Q_(this.eu)}get nu(){return this.Ya}ru(e,t){let n=t?t.iu:new $_,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=ff(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,a.length!==0||c?{snapshot:new ev(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=X(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))}));let t=[];return e.forEach((e=>{this.Xa.has(e)||t.push(new pv(e))})),this.Xa.forEach((n=>{e.has(n)||t.push(new fv(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=X();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ev.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},hv=`SyncEngine`,gv=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},_v=class{constructor(e){this.key=e,this.hu=!1}},vv=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new gf((e=>uf(e)),lf),this.Iu=new Map,this.Eu=new Set,this.du=new Su(B.comparator),this.Au=new Map,this.Ru=new Zh,this.Vu={},this.mu=new Map,this.fu=Ch.cr(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function yv(e,t,n=!0){let r=Xv(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await xv(r,t,n,!0),i}async function bv(e,t){await xv(Xv(e),t,!0,!1)}async function xv(e,t,n,r){let i=await jg(e.localStore,af(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await Sv(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&C_(e.remoteStore,i),s}async function Sv(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Ng(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return Fv(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await Ng(e.localStore,t,!0),o=new mv(t,a.Qs),s=o.ru(a.documents),c=Cp.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);Fv(e,n,l.au);let u=new gv(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function Cv(e,t,n){let r=I(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!lf(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Mg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&w_(r.remoteStore,i.targetId),Nv(r,i.targetId)})).catch(Rc)):(Nv(r,i.targetId),await Mg(r.localStore,i.targetId,!0))}async function wv(e,t){let n=I(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),w_(n.remoteStore,r.targetId))}async function Tv(e,t,n){let r=Zv(e);try{let e=await function(e,t){let n=I(e),r=Tc.now(),i=t.reduce(((e,t)=>e.add(t.key)),X()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=vf(),c=X();return n.Ns.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=$f(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new np(e.key,t,bd(t.value.mapValue),qf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:xf(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||=new Su(z),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Rv(r,e.changes),await L_(r.remoteStore)}catch(e){let t=Z_(e,`Failed to persist write`);n.reject(t)}}async function Ev(e,t){let n=I(e);try{let e=await Og(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(F(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?F(r.hu,14607):e.removedDocuments.size>0&&(F(r.hu,42227),r.hu=!1))})),await Rv(n,e,t)}catch(e){await Rc(e)}}function Dv(e,t,n){let r=I(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=I(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.Sa)e.va(t)&&(r=!0)})),r&&cv(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ov(e,t,n){let r=I(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new Su(B.comparator);e=e.insert(a,xd.newNoDocument(a,V.min()));let n=X().add(a);await Ev(r,new Sp(V.min(),new Map,new Su(z),e,n)),r.du=r.du.remove(a),r.Au.delete(t),Lv(r)}else await Mg(r.localStore,t,!1).then((()=>Nv(r,t,n))).catch(Rc)}async function kv(e,t){let n=I(e),r=t.batch.batchId;try{let e=await Eg(n.localStore,t);Mv(n,r,null),jv(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await Rv(n,e)}catch(e){await Rc(e)}}async function Av(e,t,n){let r=I(e);try{let e=await function(e,t){let n=I(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(F(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Mv(r,t,n),jv(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await Rv(r,e)}catch(e){await Rc(e)}}function jv(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function Mv(e,t,n){let r=I(e),i=r.Vu[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Nv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((t=>{e.Ru.containsKey(t)||Pv(e,t)}))}function Pv(e,t){e.Eu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(w_(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Lv(e))}function Fv(e,t,n){for(let r of n)r instanceof fv?(e.Ru.addReference(r.key,t),Iv(e,r)):r instanceof pv?(N(hv,`Document no longer in limbo: `+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Pv(e,r.key)):P(19791,{wu:r})}function Iv(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(N(hv,`New document in limbo: `+n),e.Eu.add(r),Lv(e))}function Lv(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new B(uc.fromString(t)),r=e.fu.next();e.Au.set(r,new _v(n)),e.du=e.du.insert(n,r),C_(e.remoteStore,new mm(af(ef(n.path)),r,`TargetPurposeLimboResolution`,Qc.ce))}}async function Rv(e,t,n){let r=I(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=vg.As(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.H_(i),await async function(e,t){let n=I(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>H.forEach(t,(t=>H.forEach(t.Es,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>H.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Wc(e))throw e;N(xg,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,a))}async function zv(e,t){let n=I(e);if(!n.currentUser.isEqual(t)){N(hv,`User change. New user:`,t.toKey());let e=await Tg(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new R(L.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Rv(n,e.Ls)}}function Bv(e,t){let n=I(e),r=n.Au.get(t);if(r&&r.hu)return X().add(r.key);{let e=X(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}async function Vv(e,t){let n=I(e),r=await Ng(n.localStore,t.query,!0),i=t.view.cu(r);return n.isPrimaryClient&&Fv(n,t.targetId,i.au),i}async function Hv(e,t){let n=I(e);return Fg(n.localStore,t).then((e=>Rv(n,e)))}async function Uv(e,t,n,r){let i=I(e),a=await function(e,t){let n=I(e),r=I(n.mutationQueue);return n.persistence.runTransaction(`Lookup mutation documents`,`readonly`,(e=>r.er(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):H.resolve(null)))))}(i.localStore,t);a===null?N(hv,`Cannot apply mutation batch with id: `+t):(n===`pending`?await L_(i.remoteStore):n===`acknowledged`||n===`rejected`?(Mv(i,t,r||null),jv(i,t),function(e,t){I(I(e).mutationQueue).ir(t)}(i.localStore,t)):P(6720,`Unknown batchState`,{Su:n}),await Rv(i,a))}async function Wv(e,t){let n=I(e);if(Xv(n),Zv(n),!0===t&&!0!==n.gu){let e=await Gv(n,n.sharedClientState.getAllActiveQueryTargets().toArray());n.gu=!0,await q_(n.remoteStore,!0);for(let t of e)C_(n.remoteStore,t)}else if(!1===t&&!1!==n.gu){let e=[],t=Promise.resolve();n.Iu.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Nv(n,i),Mg(n.localStore,i,!0)))),w_(n.remoteStore,i)})),await t,await Gv(n,e),function(e){let t=I(e);t.Au.forEach(((e,n)=>{w_(t.remoteStore,n)})),t.Ru.Jr(),t.Au=new Map,t.du=new Su(B.comparator)}(n),n.gu=!1,await q_(n.remoteStore,!1)}}async function Gv(e,t,n){let r=I(e),i=[],a=[];for(let e of t){let t,n=r.Iu.get(e);if(n&&n.length!==0){t=await jg(r.localStore,af(n[0]));for(let e of n){let t=await Vv(r,r.Tu.get(e));t.snapshot&&a.push(t.snapshot)}}else{let n=await Pg(r.localStore,e);t=await jg(r.localStore,n),await Sv(r,Kv(n),e,!1,t.resumeToken)}i.push(t)}return r.Pu.H_(a),i}function Kv(e){return $d(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,`F`,e.startAt,e.endAt)}function qv(e){return function(e){return I(I(e).persistence).Ts()}(I(e).localStore)}async function Jv(e,t,n,r){let i=I(e);if(i.gu)return void N(hv,`Ignoring unexpected query state notification.`);let a=i.Iu.get(t);if(a&&a.length>0)switch(n){case`current`:case`not-current`:await Rv(i,await Fg(i.localStore,pf(a[0])),Sp.createSynthesizedRemoteEventForCurrentChange(t,n===`current`,Au.EMPTY_BYTE_STRING));break;case`rejected`:await Mg(i.localStore,t,!0),Nv(i,t,r);break;default:P(64155,n)}}async function Yv(e,t,n){let r=Xv(e);if(r.gu){for(let e of t){if(r.Iu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){N(hv,`Adding an already active target `+e);continue}let t=await Pg(r.localStore,e),n=await jg(r.localStore,t);await Sv(r,Kv(t),n.targetId,!1,n.resumeToken),C_(r.remoteStore,n)}for(let e of n)r.Iu.has(e)&&await Mg(r.localStore,e,!1).then((()=>{w_(r.remoteStore,e),Nv(r,e)})).catch(Rc)}}function Xv(e){let t=I(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ev.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ov.bind(null,t),t.Pu.H_=ov.bind(null,t.eventManager),t.Pu.yu=sv.bind(null,t.eventManager),t}function Zv(e){let t=I(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Av.bind(null,t),t}var Qv=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=u_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return wg(this.persistence,new bg,e.initialUser,this.serializer)}Cu(e){return new rg(ag.mi,this.serializer)}Du(e){return new Xg}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Qv.provider={build:()=>new Qv};var $v=class extends Qv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){F(this.persistence.referenceDelegate instanceof og,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new Mh(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?hh.DEFAULT:hh.withCacheSize(this.cacheSizeBytes);return new rg((e=>og.mi(e,t)),this.serializer)}},ey=class extends Qv{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind=`persistent`,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Zv(this.xu.syncEngine),await L_(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return wg(this.persistence,new bg,e.initialUser,this.serializer)}Fu(e,t){let n=this.persistence.referenceDelegate.garbageCollector;return new Mh(n,e.asyncQueue,t)}Mu(e,t){let n=new Zc(t,this.persistence);return new Xc(e.asyncQueue,n)}Cu(e){let t=_g(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes===void 0?hh.DEFAULT:hh.withCacheSize(this.cacheSizeBytes);return new mg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,c_(),l_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Xg}},ty=class extends ey{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);let t=this.xu.syncEngine;this.sharedClientState instanceof Yg&&(this.sharedClientState.syncEngine={Co:Uv.bind(null,t),vo:Jv.bind(null,t),Fo:Yv.bind(null,t),Ts:qv.bind(null,t),Do:Hv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async e=>{await Wv(this.xu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}Du(e){let t=c_();if(!Yg.v(t))throw new R(L.UNIMPLEMENTED,`IndexedDB persistence is only available on platforms that support LocalStorage.`);let n=_g(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yg(t,e.asyncQueue,n,e.clientId,e.initialUser)}},ny=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Dv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=zv.bind(null,this.syncEngine),await q_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nv}()}createDatastore(e){let t=u_(e.databaseInfo.databaseId),n=function(e){return new s_(e)}(e.databaseInfo);return function(e,t,n,r){return new __(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new b_(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Dv(this.syncEngine,e,0)),function(){return $g.v()?new $g:new Zg}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new vv(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=I(e);N(y_,`RemoteStore shutting down.`),t.Ea.add(5),await S_(t),t.Aa.shutdown(),t.Ra.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};ny.provider={build:()=>new ny};var ry=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hs(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},iy=`FirestoreClient`,ay=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Rs.UNAUTHENTICATED,this.clientId=tc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{N(iy,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(N(iy,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=Z_(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function oy(e,t){e.asyncQueue.verifyOperationInProgress(),N(iy,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Tg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function sy(e,t){e.asyncQueue.verifyOperationInProgress();let n=await cy(e);N(iy,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>K_(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>K_(t.remoteStore,n))),e._onlineComponents=t}async function cy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){N(iy,`Using user provided OfflineComponentProvider`);try{await oy(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===L.FAILED_PRECONDITION||e.code===L.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;Us(`Error using user provided cache. Falling back to memory cache: `+n),await oy(e,new Qv)}}else N(iy,`Using default OfflineComponentProvider`),await oy(e,new $v(void 0));return e._offlineComponents}async function ly(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(N(iy,`Using user provided OnlineComponentProvider`),await sy(e,e._uninitializedComponentsProvider._online)):(N(iy,`Using default OnlineComponentProvider`),await sy(e,new ny))),e._onlineComponents}function uy(e){return ly(e).then((e=>e.syncEngine))}async function dy(e){let t=await ly(e),n=t.eventManager;return n.onListen=yv.bind(null,t.syncEngine),n.onUnlisten=Cv.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=bv.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=wv.bind(null,t.syncEngine),n}function fy(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var py=new Map,my=`firestore.googleapis.com`,hy=!0,gy=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new R(L.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=my,this.ssl=hy}else this.host=e.host,this.ssl=e.ssl??hy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mh;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kh)throw new R(L.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}mc(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fy(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new R(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new R(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new R(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_y=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new gy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new R(L.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new R(L.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new gy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new Js;switch(e.type){case`firstParty`:return new Zs(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new R(L.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=py.get(e);t&&(N(`ComponentProvider`,`Removing Datastore`),py.delete(e),t.terminate())}(this),Promise.resolve()}},vy=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},yy=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new by(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Sc(n,e._jsonSchema))return new e(t,r||null,new B(uc.fromString(n.referencePath)))}};yy._jsonSchemaVersion=`firestore/documentReference/1.0`,yy._jsonSchema={type:xc(`string`,yy._jsonSchemaVersion),referencePath:xc(`string`)};var by=class e extends vy{constructor(e,t,n){super(e,t,ef(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yy(this.firestore,null,new B(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function xy(e,t,...n){if(e=E(e),pc(`collection`,`path`,t),e instanceof _y){let r=uc.fromString(t,...n);return gc(r),new by(e,null,r)}{if(!(e instanceof yy||e instanceof by))throw new R(L.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(uc.fromString(t,...n));return gc(r),new by(e.firestore,null,r)}}function Sy(e,t,...n){if(e=E(e),arguments.length===1&&(t=tc.newId()),pc(`doc`,`path`,t),e instanceof _y){let r=uc.fromString(t,...n);return hc(r),new yy(e,null,new B(r))}{if(!(e instanceof yy||e instanceof by))throw new R(L.INVALID_ARGUMENT,`Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(uc.fromString(t,...n));return hc(r),new yy(e.firestore,e instanceof by?e.converter:null,new B(r))}}var Cy=`AsyncQueue`,wy=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new d_(this,`async_queue_retry`),this._c=()=>{let e=l_();e&&N(Cy,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=l_();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=l_();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wc(e))throw e;N(Cy,`Operation failed with retryable error: `+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Hs(`INTERNAL UNHANDLED ERROR: `,Ty(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=X_.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&P(47125,{Pc:Ty(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function Ty(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}function Ey(e){return function(e,t){if(typeof e!=`object`||!e)return!1;let n=e;for(let e of t)if(e in n&&typeof n[e]==`function`)return!0;return!1}(e,[`next`,`error`,`complete`])}var Dy=class extends _y{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new wy,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new wy(e),this._firestoreClient=void 0,await e}}};function Oy(e,t,n){n||=Uu;let r=cn(e,`firestore`);if(r.isInitialized(n)){let e=r.getImmediate({identifier:n});if(Ne(r.getOptions(n),t))return e;throw new R(L.FAILED_PRECONDITION,`initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.`)}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new R(L.INVALID_ARGUMENT,`cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object`);if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<kh)throw new R(L.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);return t.host&&fe(t.host)&&C(t.host),r.initialize({options:t,instanceIdentifier:n})}function ky(e){if(e._terminated)throw new R(L.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||Ay(e),e._firestoreClient}function Ay(e){let t=e._freezeSettings(),n=function(e,t,n,r){return new Hu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,fy(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new ay(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var jy=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(Au.fromBase64String(t))}catch(e){throw new R(L.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(Au.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Sc(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};jy._jsonSchemaVersion=`firestore/bytes/1.0`,jy._jsonSchema={type:xc(`string`,jy._jsonSchemaVersion),bytes:xc(`string`)};var My=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new R(L.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new fc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},Ny=class{constructor(e){this._methodName=e}},Py=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new R(L.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new R(L.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Sc(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};Py._jsonSchemaVersion=`firestore/geoPoint/1.0`,Py._jsonSchema={type:xc(`string`,Py._jsonSchemaVersion),latitude:xc(`number`),longitude:xc(`number`)};var Fy=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Sc(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new R(L.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};Fy._jsonSchemaVersion=`firestore/vectorValue/1.0`,Fy._jsonSchema={type:xc(`string`,Fy._jsonSchemaVersion),vectorValues:xc(`object`)};var Iy=/^__.*__$/,Ly=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new tp(e,this.data,t,this.fieldTransforms):new np(e,this.data,this.fieldMask,t,this.fieldTransforms)}},Ry=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new np(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function zy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P(40011,{Ac:e})}}var By=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nb(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc(`Document fields must not be empty`);if(zy(this.Ac)&&Iy.test(e))throw this.Sc(`Document fields cannot begin and end with "__"`)}},Vy=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||u_(e)}Cc(e,t,n,r=!1){return new By({Ac:e,methodName:t,Dc:n,path:fc.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Hy(e){let t=e._freezeSettings(),n=u_(e._databaseId);return new Vy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Uy(e,t,n,r,i,a={}){let o=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);Qy(`Data must be an object, but it was:`,o,r);let s=Xy(r,o),c,l;if(a.merge)c=new Ou(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=$y(t,r,n);if(!o.contains(i))throw new R(L.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);rb(e,i)||e.push(i)}c=new Ou(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Ly(new yd(s),c,l)}var Wy=class e extends Ny{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}},Gy=class e extends Ny{_toFieldTransform(e){return new Wf(e.path,new If)}isEqual(t){return t instanceof e}};function Ky(e,t,n,r){let i=e.Cc(1,t,n);Qy(`Data must be an object, but it was:`,i,r);let a=[],o=yd.empty();return bu(r,((e,r)=>{let s=tb(t,e,n);r=E(r);let c=i.yc(s);if(r instanceof Wy)a.push(s);else{let e=Yy(r,c);e!=null&&(a.push(s),o.set(s,e))}})),new Ry(o,new Ou(a),i.fieldTransforms)}function qy(e,t,n,r,i,a){let o=e.Cc(1,t,n),s=[$y(t,r,n)],c=[i];if(a.length%2!=0)throw new R(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push($y(t,a[e])),c.push(a[e+1]);let l=[],u=yd.empty();for(let e=s.length-1;e>=0;--e)if(!rb(l,s[e])){let t=s[e],n=c[e];n=E(n);let r=o.yc(t);if(n instanceof Wy)l.push(t);else{let e=Yy(n,r);e!=null&&(l.push(t),u.set(t,e))}}return new Ry(u,new Ou(l),o.fieldTransforms)}function Jy(e,t,n,r=!1){return Yy(n,e.Cc(r?4:3,t))}function Yy(e,t){if(Zy(e=E(e)))return Qy(`Unsupported field value:`,t,e),Xy(e,t);if(e instanceof Ny)return function(e,t){if(!zy(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=Yy(i,t.wc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=E(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return jf(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=Tc.fromDate(e);return{timestampValue:Ip(t.serializer,n)}}if(e instanceof Tc){let n=new Tc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ip(t.serializer,n)}}if(e instanceof Py)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof jy)return{bytesValue:Lp(t.serializer,e._byteString)};if(e instanceof yy){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Bp(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Fy)return function(e,t){return{mapValue:{fields:{[Gu]:{stringValue:Ju},[q]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.Sc(`VectorValues must only contain numeric values.`);return kf(t.serializer,e)}))}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${vc(e)}`)}(e,t)}function Xy(e,t){let n={};return xu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bu(e,((e,r)=>{let i=Yy(r,t.mc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function Zy(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof Tc||e instanceof Py||e instanceof jy||e instanceof yy||e instanceof Ny||e instanceof Fy)}function Qy(e,t,n){if(!Zy(n)||!_c(n)){let r=vc(n);throw r===`an object`?t.Sc(e+` a custom object`):t.Sc(e+` `+r)}}function $y(e,t,n){if((t=E(t))instanceof My)return t._internalPath;if(typeof t==`string`)return tb(e,t);throw nb(`Field path arguments must be of type string or `,e,!1,void 0,n)}var eb=RegExp(`[~\\*/\\[\\]]`);function tb(e,t,n){if(t.search(eb)>=0)throw nb(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new My(...t.split(`.`))._internalPath}catch{throw nb(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function nb(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new R(L.INVALID_ARGUMENT,s+e+c)}function rb(e,t){return e.some((e=>e.isEqual(t)))}var ib=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new yy(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ab(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ob(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ab=class extends ib{data(){return super.data()}};function ob(e,t){return typeof t==`string`?tb(e,t):t instanceof My?t._internalPath:t._delegate._internalPath}function sb(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new R(L.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var cb=class{},lb=class extends cb{};function ub(e,t,...n){let r=[];t instanceof cb&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof fb)).length,n=e.filter((e=>e instanceof db)).length;if(t>1||t>0&&n>0)throw new R(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var db=class e extends lb{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return yb(e._query,t),new vy(e.firestore,e.converter,sf(e._query,t))}_parse(e){let t=Hy(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new R(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){vb(o,a);let t=[];for(let n of o)t.push(_b(r,e,n));s={arrayValue:{values:t}}}else s=_b(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||vb(o,a),s=Jy(n,t,o,a===`in`||a===`not-in`);return Y.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}},fb=class e extends cb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:Dd.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)yb(n,e),n=sf(n,e)}(e._query,t),new vy(e.firestore,e.converter,sf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},pb=class e extends lb{constructor(e,t){super(),this._field=e,this._direction=t,this.type=`orderBy`}static _create(t,n){return new e(t,n)}_apply(e){let t=function(e,t,n){if(e.startAt!==null)throw new R(L.INVALID_ARGUMENT,`Invalid query. You must not call startAt() or startAfter() before calling orderBy().`);if(e.endAt!==null)throw new R(L.INVALID_ARGUMENT,`Invalid query. You must not call endAt() or endBefore() before calling orderBy().`);return new wd(t,n)}(e._query,this._field,this._direction);return new vy(e.firestore,e.converter,function(e,t){let n=e.explicitOrderBy.concat([t]);return new Qd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}};function mb(e,t=`asc`){let n=t,r=ob(`orderBy`,e);return pb._create(r,n)}var hb=class e extends lb{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(t,n,r){return new e(t,n,r)}_apply(e){return new vy(e.firestore,e.converter,cf(e._query,this._limit,this._limitType))}};function gb(e){return bc(`limit`,e),hb._create(`limit`,e,`F`)}function _b(e,t,n){if(typeof(n=E(n))==`string`){if(n===``)throw new R(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!nf(t)&&n.indexOf(`/`)!==-1)throw new R(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(uc.fromString(n));if(!B.isDocumentKey(r))throw new R(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ad(e,new B(r))}if(n instanceof yy)return ad(e,n._key);throw new R(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vc(n)}.`)}function vb(e,t){if(!Array.isArray(e)||e.length===0)throw new R(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yb(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new R(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new R(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var bb=class{convertValue(e,t=`none`){switch(Xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw P(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return bu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[q].arrayValue?.values?.map((e=>Nu(e.doubleValue)));return new Fy(t)}convertGeoPoint(e){return new Py(Nu(e.latitude),Nu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=Bu(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){let t=Mu(e);return new Tc(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=uc.fromString(e);F(pm(n),9688,{name:e});let r=new Wu(n.get(1),n.get(3)),i=new B(n.popFirst(5));return r.isEqual(t)||Hs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};function xb(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var Sb=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Cb=class e extends ib{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new wb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(ob(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new R(L.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};Cb._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,Cb._jsonSchema={type:xc(`string`,Cb._jsonSchemaVersion),bundleSource:xc(`string`,`DocumentSnapshot`),bundleName:xc(`string`),bundle:xc(`string`)};var wb=class extends Cb{data(e={}){return super.data(e)}},Tb=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Sb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new wb(this._firestore,this._userDataWriter,n.key,n,new Sb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new R(L.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new wb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Sb(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new wb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Eb(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new R(L.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=tc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function Eb(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return P(61501,{type:e})}}Tb._jsonSchemaVersion=`firestore/querySnapshot/1.0`,Tb._jsonSchema={type:xc(`string`,Tb._jsonSchemaVersion),bundleSource:xc(`string`,`QuerySnapshot`),bundleName:xc(`string`),bundle:xc(`string`)};var Db=class extends bb{constructor(e){super(),this.firestore=e}convertBytes(e){return new jy(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new yy(this.firestore,null,t)}};function Ob(e,t,n){e=yc(e,yy);let r=yc(e.firestore,Dy),i=xb(e.converter,t,n);return Nb(r,[Uy(Hy(r),`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,qf.none())])}function kb(e,t,n,...r){e=yc(e,yy);let i=yc(e.firestore,Dy),a=Hy(i),o;return o=typeof(t=E(t))==`string`||t instanceof My?qy(a,`updateDoc`,e._key,t,n,r):Ky(a,`updateDoc`,e._key,t),Nb(i,[o.toMutation(e._key,qf.exists(!0))])}function Ab(e){return Nb(yc(e.firestore,Dy),[new op(e._key,qf.none())])}function jb(e,t){let n=yc(e.firestore,Dy),r=Sy(e),i=xb(e.converter,t);return Nb(n,[Uy(Hy(e.firestore),`addDoc`,r._key,i,e.converter!==null,{}).toMutation(r._key,qf.exists(!1))]).then((()=>r))}function Mb(e,...t){e=E(e);let n={includeMetadataChanges:!1,source:`default`},r=0;typeof t[r]!=`object`||Ey(t[r])||(n=t[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ey(t[r])){let e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let a,o,s;if(e instanceof yy)o=yc(e.firestore,Dy),s=ef(e._key.path),a={next:n=>{t[r]&&t[r](Pb(o,e,n))},error:t[r+1],complete:t[r+2]};else{let n=yc(e,vy);o=yc(n.firestore,Dy),s=n._query;let i=new Db(o);a={next:e=>{t[r]&&t[r](new Tb(o,i,n,e))},error:t[r+1],complete:t[r+2]},sb(e._query)}return function(e,t,n,r){let i=new ry(r),a=new dv(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>iv(await dy(e),a))),()=>{i.Nu(),e.asyncQueue.enqueueAndForget((async()=>av(await dy(e),a)))}}(ky(o),s,i,a)}function Nb(e,t){return function(e,t){let n=new Ks;return e.asyncQueue.enqueueAndForget((async()=>Tv(await uy(e),t,n))),n.promise}(ky(e),t)}function Pb(e,t,n){let r=n.docs.get(t._key);return new Cb(e,new Db(e),t._key,r,new Sb(n.hasPendingWrites,n.fromCache),t.converter)}var Fb=class{constructor(e){let t;this.kind=`persistent`,e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=zb(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function Ib(e){return new Fb(e)}var Lb=class{constructor(e){this.forceOwnership=e,this.kind=`persistentSingleTab`}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ny.provider,this._offlineComponentProvider={build:t=>new ey(t,e?.cacheSizeBytes,this.forceOwnership)}}},Rb=class{constructor(){this.kind=`PersistentMultipleTab`}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ny.provider,this._offlineComponentProvider={build:t=>new ty(t,e?.cacheSizeBytes)}}};function zb(e){return new Lb(e?.forceOwnership)}function Bb(){return new Rb}var Vb=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hy(e)}set(e,t,n){this._verifyNotCommitted();let r=Hb(e,this._firestore),i=xb(r.converter,t,n),a=Uy(this._dataReader,`WriteBatch.set`,r._key,i,r.converter!==null,n);return this._mutations.push(a.toMutation(r._key,qf.none())),this}update(e,t,n,...r){this._verifyNotCommitted();let i=Hb(e,this._firestore),a;return a=typeof(t=E(t))==`string`||t instanceof My?qy(this._dataReader,`WriteBatch.update`,i._key,t,n,r):Ky(this._dataReader,`WriteBatch.update`,i._key,t),this._mutations.push(a.toMutation(i._key,qf.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Hb(e,this._firestore);return this._mutations=this._mutations.concat(new op(t._key,qf.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new R(L.FAILED_PRECONDITION,`A write batch can no longer be used after commit() has been called.`)}};function Hb(e,t){if((e=E(e)).firestore!==t)throw new R(L.INVALID_ARGUMENT,`Provided document reference is from a different Firestore instance.`);return e}function Ub(){return new Gy(`serverTimestamp`)}function Wb(e){return ky(e=yc(e,Dy)),new Vb(e,(t=>Nb(e,t)))}(function(e,t=!0){(function(e){zs=e})(fn),sn(new He(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new Dy(new Ys(e.getProvider(`auth-internal`)),new $s(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new R(L.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new Wu(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),hn(Is,Ls,e),hn(Is,Ls,`esm2020`)})();var Gb=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.forward_ref`);Symbol.iterator;var r={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i=Object.assign,a={};function o(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||r}o.prototype.isReactComponent={},o.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function s(){}s.prototype=o.prototype;function c(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||r}var l=c.prototype=new s;l.constructor=c,i(l,o.prototype),l.isPureReactComponent=!0,Array.isArray;var u=Object.prototype.hasOwnProperty;function d(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)u.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return d(e,a,i)},e.forwardRef=function(e){return{$$typeof:n,render:e}}})),Kb=o(((e,t)=>{t.exports=Gb()})),qb=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),Jb=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Yb=e=>{let t=Jb(e);return t.charAt(0).toUpperCase()+t.slice(1)},Xb=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),Zb=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0},Qb={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},$b=Kb(),ex=(0,$b.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,$b.createElement)(`svg`,{ref:c,...Qb,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Xb(`lucide`,i),...!a&&!Zb(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,$b.createElement)(e,t)),...Array.isArray(a)?a:[a]])),Q=(e,t)=>{let n=(0,$b.forwardRef)(({className:n,...r},i)=>(0,$b.createElement)(ex,{ref:i,iconNode:t,className:Xb(`lucide-${qb(Yb(e))}`,`lucide-${e}`,n),...r}));return n.displayName=Yb(e),n},tx=Q(`activity`,[[`path`,{d:`M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2`,key:`169zse`}]]),nx=Q(`arrow-down-a-z`,[[`path`,{d:`m3 16 4 4 4-4`,key:`1co6wj`}],[`path`,{d:`M7 20V4`,key:`1yoxec`}],[`path`,{d:`M20 8h-5`,key:`1vsyxs`}],[`path`,{d:`M15 10V6.5a2.5 2.5 0 0 1 5 0V10`,key:`ag13bf`}],[`path`,{d:`M15 14h5l-5 6h5`,key:`ur5jdg`}]]),rx=Q(`arrow-right`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`m12 5 7 7-7 7`,key:`xquz4c`}]]),ix=Q(`box`,[[`path`,{d:`M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z`,key:`hh9hay`}],[`path`,{d:`m3.3 7 8.7 5 8.7-5`,key:`g66t2b`}],[`path`,{d:`M12 22V12`,key:`d0xqtd`}]]),ax=Q(`building`,[[`path`,{d:`M12 10h.01`,key:`1nrarc`}],[`path`,{d:`M12 14h.01`,key:`1etili`}],[`path`,{d:`M12 6h.01`,key:`1vi96p`}],[`path`,{d:`M16 10h.01`,key:`1m94wz`}],[`path`,{d:`M16 14h.01`,key:`1gbofw`}],[`path`,{d:`M16 6h.01`,key:`1x0f13`}],[`path`,{d:`M8 10h.01`,key:`19clt8`}],[`path`,{d:`M8 14h.01`,key:`6423bh`}],[`path`,{d:`M8 6h.01`,key:`1dz90k`}],[`path`,{d:`M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3`,key:`cabbwy`}],[`rect`,{x:`4`,y:`2`,width:`16`,height:`20`,rx:`2`,key:`1uxh74`}]]),ox=Q(`calendar`,[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}]]),sx=Q(`check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),cx=Q(`chevron-down`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),lx=Q(`chevron-right`,[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]]),ux=Q(`chevron-up`,[[`path`,{d:`m18 15-6-6-6 6`,key:`153udz`}]]),dx=Q(`circle-alert`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]]),fx=Q(`circle-check-big`,[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),px=Q(`circle-play`,[[`path`,{d:`M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z`,key:`kmsa83`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),mx=Q(`circle-x`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m15 9-6 6`,key:`1uzhvr`}],[`path`,{d:`m9 9 6 6`,key:`z0biqf`}]]),hx=Q(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),gx=Q(`download`,[[`path`,{d:`M12 15V3`,key:`m9g1x1`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`path`,{d:`m7 10 5 5 5-5`,key:`brsn70`}]]),_x=Q(`file-braces`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1`,key:`1oajmo`}],[`path`,{d:`M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1`,key:`mpwhp6`}]]),vx=Q(`file-spreadsheet`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M8 13h2`,key:`yr2amv`}],[`path`,{d:`M14 13h2`,key:`un5t4a`}],[`path`,{d:`M8 17h2`,key:`2yhykz`}],[`path`,{d:`M14 17h2`,key:`10kma7`}]]),yx=Q(`file-text`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10 9H8`,key:`b1mrlr`}],[`path`,{d:`M16 13H8`,key:`t4e002`}],[`path`,{d:`M16 17H8`,key:`z1uh3a`}]]),bx=Q(`flame`,[[`path`,{d:`M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4`,key:`1slcih`}]]),xx=Q(`folder-cog`,[[`path`,{d:`M10.3 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.98a2 2 0 0 1 1.69.9l.66 1.2A2 2 0 0 0 12 6h8a2 2 0 0 1 2 2v3.3`,key:`128dxu`}],[`path`,{d:`m14.305 19.53.923-.382`,key:`3m78fa`}],[`path`,{d:`m15.228 16.852-.923-.383`,key:`npixar`}],[`path`,{d:`m16.852 15.228-.383-.923`,key:`5xggr7`}],[`path`,{d:`m16.852 20.772-.383.924`,key:`dpfhf9`}],[`path`,{d:`m19.148 15.228.383-.923`,key:`1reyyz`}],[`path`,{d:`m19.53 21.696-.382-.924`,key:`1goivc`}],[`path`,{d:`m20.772 16.852.924-.383`,key:`htqkph`}],[`path`,{d:`m20.772 19.148.924.383`,key:`9w9pjp`}],[`circle`,{cx:`18`,cy:`18`,r:`3`,key:`1xkwt0`}]]),Sx=Q(`funnel`,[[`path`,{d:`M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z`,key:`sc7q7i`}]]),Cx=Q(`landmark`,[[`path`,{d:`M10 18v-7`,key:`wt116b`}],[`path`,{d:`M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z`,key:`1m329m`}],[`path`,{d:`M14 18v-7`,key:`vav6t3`}],[`path`,{d:`M18 18v-7`,key:`aexdmj`}],[`path`,{d:`M3 22h18`,key:`8prr45`}],[`path`,{d:`M6 18v-7`,key:`1ivflk`}]]),wx=Q(`loader-circle`,[[`path`,{d:`M21 12a9 9 0 1 1-6.219-8.56`,key:`13zald`}]]),Tx=Q(`lock`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`,key:`fwvmzm`}]]),Ex=Q(`log-out`,[[`path`,{d:`m16 17 5-5-5-5`,key:`1bji2h`}],[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`,key:`1uf3rs`}]]),Dx=Q(`pen`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}]]),Ox=Q(`pencil`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}],[`path`,{d:`m15 5 4 4`,key:`1mk7zo`}]]),kx=Q(`plus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`M12 5v14`,key:`s699le`}]]),Ax=Q(`rotate-ccw`,[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}]]),jx=Q(`search`,[[`path`,{d:`m21 21-4.34-4.34`,key:`14j7rj`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]]),Mx=Q(`settings`,[[`path`,{d:`M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915`,key:`1i5ecw`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),Nx=Q(`shopping-cart`,[[`circle`,{cx:`8`,cy:`21`,r:`1`,key:`jimo8o`}],[`circle`,{cx:`19`,cy:`21`,r:`1`,key:`13723u`}],[`path`,{d:`M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12`,key:`9zh506`}]]),Px=Q(`store`,[[`path`,{d:`M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5`,key:`slp6dd`}],[`path`,{d:`M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244`,key:`o0xfot`}],[`path`,{d:`M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05`,key:`wn3emo`}]]),Fx=Q(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),Ix=Q(`triangle-alert`,[[`path`,{d:`m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3`,key:`wmoenq`}],[`path`,{d:`M12 9v4`,key:`juzpu7`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),Lx=Q(`upload`,[[`path`,{d:`M12 3v12`,key:`1x0j5s`}],[`path`,{d:`m17 8-5-5-5 5`,key:`7q97r8`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}]]),Rx=Q(`user`,[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]]),zx=Q(`wrench`,[[`path`,{d:`M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z`,key:`1ngwbx`}]]),Bx=Q(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]);hn(`firebase`,`12.7.0`,`app`);var Vx=pn({apiKey:`AIzaSyDQ23aUdEpDYGyGFahYOUR4pgSIA2VvGFM`,authDomain:`school-tracker-98dd9.firebaseapp.com`,projectId:`school-tracker-98dd9`,storageBucket:`school-tracker-98dd9.firebasestorage.app`,messagingSenderId:`117526132618`,appId:`1:117526132618:web:4d27295dd136461700fa73`,measurementId:`G-X2FBLKBS9G`}),Hx=bs(Vx),Ux=Oy(Vx,{localCache:Ib({tabManager:Bb()})}),Wx=`school-admin-v1`;const Gx=`@school.admin`,Kx={P1_RECEIVED:{label:``,color:`bg-blue-100 text-blue-800`,nextAction:``,phase:1},P1_ACCOUNTING:{label:``,color:`bg-yellow-100 text-yellow-800`,nextAction:``,phase:1,requirePickupName:!0},P1_RETURNED:{label:` ()`,color:`bg-purple-100 text-purple-800`,nextAction:``,phase:1},P2_RECEIVED:{label:`/`,color:`bg-blue-100 text-blue-800`,nextAction:``,phase:2},P2_ACCOUNTING:{label:``,color:`bg-yellow-100 text-yellow-800`,nextAction:``,phase:2},COMPLETED:{label:``,color:`bg-gray-800 text-white`,nextAction:null,phase:3}};Object.entries(Kx).reduce((e,[t,n])=>(e[n.label]=t,e),{});const qx={P1_ACCOUNTING:`P1_RECEIVED`,P1_RETURNED:`P1_ACCOUNTING`,P2_RECEIVED:`P1_RETURNED`,P2_ACCOUNTING:`P2_RECEIVED`,COMPLETED:`P2_ACCOUNTING`},Jx=[],Yx=[],Xx=[],Zx=e=>{if(!e)return``;let t=e.split(`-`);return t.length===3?`${parseInt(t[0])-1911}-${t[1]}/${t[2]}`:e},Qx=e=>{if(!e)return`-`;try{let t=new Date(e);return isNaN(t.getTime())?`-`:`${t.getFullYear()-1911}/${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)} ${String(t.getHours()).padStart(2,`0`)}:${String(t.getMinutes()).padStart(2,`0`)}`}catch{return`-`}},$x=e=>!e||isNaN(e.getTime())?`-`:`${e.getFullYear()-1911}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`,eS=()=>{let e=[],t=new Date;for(let n=-12;n<=1;n++){let r=new Date(t.getFullYear(),t.getMonth()+n,1),i=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,`0`)}`,a=`${r.getFullYear()-1911}${r.getMonth()+1}`;r.getFullYear()-1911,`${String(r.getMonth()+1).padStart(2,`0`)}`,e.push({value:i,label:a})}return e.reverse()},tS=e=>e?e.isAnonymous?``:e.email?e.email.split(`@`)[0]:``:``,nS=e=>{let t=[``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``],n=[],r=e=>e==null?`""`:`"${String(e).replace(/"/g,`""`)}"`;return e.forEach(e=>{let t=e.createdAt?.toDate?$x(e.createdAt.toDate()):`-`,i=Zx(e.applicationDate),a=Kx[e.status]?.label||e.status,o=e.updatedAt?.toDate?Qx(e.updatedAt.toDate().toISOString()):`-`;if(e.items&&e.items.length>0)e.items.forEach(s=>{let c=[e.serialId,i,e.isUrgent?``:``,t,e.unit,e.applicant,e.subsidy,e.vendor||``,s.subject,s.quantity,s.measureUnit,s.unitPrice,s.subtotal,e.receiverName||``,a,o,e.globalRemark||``].map(r).join(`,`);n.push(c)});else{let s=[e.serialId,i,e.isUrgent?``:``,t,e.unit,e.applicant,e.subsidy,e.vendor||``,e.subject,`1`,``,e.totalPrice,e.totalPrice,e.receiverName||``,a,o,e.globalRemark||``].map(r).join(`,`);n.push(s)}}),``+[t.map(r).join(`,`),...n].join(`
`)},rS=(e,t)=>{let n=new Blob([e],{type:`text/csv;charset=utf-8;`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=t,i.click()},iS=e=>JSON.stringify(e,null,2),aS=(e,t)=>{let n=new Blob([e],{type:`application/json`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=t,i.click()},oS=(e,t)=>{let n=new Map(e.map(e=>[e.id,e])),r=[],i=new Date().toISOString();return t.forEach(e=>{let t={status:e.status,timestamp:i,note:` ()`,operator:``};if(n.has(e.id)){let i=[...e.logs||[],t];r.push({...e,logs:i}),n.delete(e.id)}else{let n=[...e.logs||[],t];r.push({...e,logs:n})}}),n.forEach(e=>{r.push(e)}),r},sS={LOGIN:``,LOGOUT:``,CREATE:``,UPDATE:``,DELETE:``,STATUS_CHANGE:``,EXPORT:``,IMPORT:``,BATCH_DELETE:``},cS=async(e,t,n,r,i)=>{if(!(!n&&r!==sS.LOGIN))try{let a=tS(n);await jb(xy(e,`artifacts`,t,`public`,`data`,`system_logs`),{timestamp:Ub(),operator:a,uid:n?.uid||`guest`,type:r,details:i,userAgent:navigator.userAgent}),console.log(`[System Log] ${a} | ${r} | ${i}`)}catch(e){console.error(`:`,e)}};var lS=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=o(((e,t)=>{t.exports=lS()}))(),uS=({onLogin:e,loading:t,error:n,isPreview:r,onAnonymousLogin:i})=>{let[a,o]=(0,_.useState)(``),[s,c]=(0,_.useState)(``);return(0,$.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-slate-100 p-4`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-xl w-full max-w-md p-8 border border-slate-200`,children:[(0,$.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,$.jsx)(`div`,{className:`w-16 h-16 bg-blue-600 text-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-200`,children:(0,$.jsx)(yx,{size:32})}),(0,$.jsx)(`h1`,{className:`text-2xl font-black text-slate-800`,children:``}),(0,$.jsx)(`p`,{className:`text-slate-500 text-sm mt-2`,children:``})]}),(0,$.jsxs)(`form`,{onSubmit:t=>{t.preventDefault(),e(a,s)},className:`space-y-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-1`,children:``}),(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(`input`,{type:`text`,required:!0,className:`w-full pl-4 pr-32 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all`,placeholder:``,value:a,onChange:e=>o(e.target.value)}),(0,$.jsx)(`div`,{className:`absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none text-slate-400 bg-slate-50 rounded-r-xl border-l border-slate-300 px-3`,children:Gx})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-1`,children:``}),(0,$.jsx)(`input`,{type:`password`,required:!0,className:`w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all`,placeholder:``,value:s,onChange:e=>c(e.target.value)})]}),n&&(0,$.jsxs)(`div`,{className:`bg-red-50 text-red-600 text-sm p-3 rounded-lg flex items-center gap-2`,children:[(0,$.jsx)(dx,{size:16}),(0,$.jsx)(`span`,{children:String(n)})]}),(0,$.jsxs)(`button`,{type:`submit`,disabled:t,className:`w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-200 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed`,children:[t?(0,$.jsx)(wx,{className:`animate-spin`}):(0,$.jsx)(Tx,{size:18}),t?`...`:``]}),r&&(0,$.jsxs)(`div`,{className:`mt-6 border-t border-slate-100 pt-4 text-center`,children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400 mb-3`,children:``}),(0,$.jsx)(`button`,{type:`button`,onClick:i,disabled:t,className:`w-full bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold py-3 rounded-xl transition-all border border-slate-200`,children:``})]})]}),(0,$.jsxs)(`p`,{className:`text-center text-xs text-slate-400 mt-6`,children:[` `,new Date().getFullYear()-1911,` . All rights reserved.`]})]})})},dS=({value:e,onChange:t,className:n=``})=>{let r=e?Zx(e):``;return(0,$.jsxs)(`div`,{className:`relative w-full ${n}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between w-full px-3 border border-slate-300 rounded-lg bg-white h-12 cursor-pointer hover:border-blue-400 transition-colors group`,children:[(0,$.jsx)(`span`,{className:`text-base font-mono ${r?`text-slate-800`:`text-slate-400`}`,children:r||``}),(0,$.jsx)(ox,{size:20,className:`text-slate-400 group-hover:text-blue-500 transition-colors`})]}),(0,$.jsx)(`input`,{type:`date`,value:e||``,onChange:e=>t(e.target.value),className:`absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10 date-full-trigger`,style:{opacity:0}}),(0,$.jsx)(`style`,{children:`
                .date-full-trigger::-webkit-calendar-picker-indicator {
                    position: absolute; top: 0; left: 0; width: 100%; height: 100%; margin: 0; padding: 0; opacity: 0; cursor: pointer;
                }
              `})]})},fS=({options:e,value:t,onChange:n,placeholder:r,onCustomClick:i})=>{let[a,o]=(0,_.useState)(!1),[s,c]=(0,_.useState)(``),l=(0,_.useRef)(null);(0,_.useEffect)(()=>{let e=e=>{l.current&&!l.current.contains(e.target)&&o(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]);let u=e.filter(e=>e.toLowerCase().includes(s.toLowerCase()));return(0,$.jsxs)(`div`,{className:`relative`,ref:l,children:[(0,$.jsxs)(`div`,{onClick:()=>o(!a),className:`w-full px-3 border border-slate-300 rounded-lg bg-white flex justify-between items-center cursor-pointer hover:border-blue-400 transition-colors h-12`,children:[(0,$.jsx)(`span`,{className:`truncate text-base ${t?`text-slate-800`:`text-gray-400`}`,children:t||r}),(0,$.jsx)(cx,{size:20,className:`text-gray-500 ml-2`})]}),a&&(0,$.jsxs)(`div`,{className:`absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-80 overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-100`,children:[(0,$.jsx)(`div`,{className:`p-2 border-b border-slate-100 bg-slate-50 sticky top-0`,children:(0,$.jsxs)(`div`,{className:`flex items-center bg-white border border-slate-200 rounded-md px-2 focus-within:ring-2 focus-within:ring-blue-100`,children:[(0,$.jsx)(jx,{size:16,className:`text-gray-400 mr-2`}),(0,$.jsx)(`input`,{type:`text`,className:`w-full p-2 bg-transparent outline-none text-base placeholder-slate-400`,placeholder:` Enter ...`,value:s,onChange:e=>c(e.target.value),onKeyDown:e=>{e.key===`Enter`&&(e.preventDefault(),s.trim()&&(i(s),o(!1),c(``)))},autoFocus:!0})]})}),(0,$.jsx)(`div`,{className:`overflow-y-auto flex-1`,children:u.length>0?u.map((e,r)=>(0,$.jsx)(`div`,{className:`p-3 px-4 hover:bg-blue-50 cursor-pointer text-base transition-colors border-b border-slate-50 last:border-0 ${t===e?`bg-blue-50 text-blue-600 font-medium`:`text-slate-700`}`,onClick:()=>{n(e),o(!1),c(``)},children:e},r)):(0,$.jsx)(`div`,{className:`p-4 text-gray-400 text-sm text-center italic`,children:` Enter `})}),(0,$.jsxs)(`div`,{className:`p-3 border-t border-slate-100 bg-slate-50 text-blue-600 font-bold cursor-pointer hover:bg-blue-100 text-base flex items-center justify-center gap-2 transition-colors`,onClick:()=>{i(s),o(!1),c(``)},children:[(0,$.jsx)(kx,{size:16}),` ...`]})]})]})},pS=({title:e,icon:t,data:n,fieldName:r,colSpan:i,db:a,appId:o,onUpdate:s,openAlert:c,openConfirm:l})=>{let[u,d]=(0,_.useState)(``),[f,p]=(0,_.useState)({index:null,value:``}),m=async e=>{try{await Ob(Sy(a,`artifacts`,o,`public`,`data`,`school_settings`,`config1`),{[r]:e},{merge:!0}),s&&s(r,e)}catch(e){c(``,`: ${e.message}`,`danger`)}},h=async()=>{let e=u.trim();if(e){if(n.includes(e)){c(``,``);return}await m([e,...n]),d(``)}},g=async e=>{l(``,`${n[e]}`,async()=>{let t=[...n];t.splice(e,1),await m(t)})},v=async()=>{let e=f.value.trim();if(!e)return;let t=[...n];t[f.index]=e,await m(t),p({index:null,value:``})},y=async(e,t)=>{let r=[...n];if(t===`up`&&e>0)[r[e],r[e-1]]=[r[e-1],r[e]];else if(t===`down`&&e<r.length-1)[r[e],r[e+1]]=[r[e+1],r[e]];else return;await m(r)};return(0,$.jsxs)(`div`,{className:`space-y-4 ${i}`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-end`,children:[(0,$.jsxs)(`h4`,{className:`font-bold text-slate-700 flex items-center gap-2 text-lg`,children:[t,` `,e]}),(0,$.jsxs)(`button`,{onClick:()=>{l(``,` -> `,async()=>{await m([...n].sort((e,t)=>t.localeCompare(e,`zh-Hant`,{numeric:!0})))})},className:`text-sm text-slate-400 hover:text-blue-600 flex items-center gap-1 transition-colors px-2 py-1 rounded hover:bg-slate-100`,title:` (->)`,children:[(0,$.jsx)(nx,{size:16}),` `]})]}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`div`,{className:`flex-1 min-w-0`,children:(0,$.jsx)(`input`,{type:`text`,value:u,onChange:e=>d(e.target.value),onKeyDown:e=>e.key===`Enter`&&h(),placeholder:`${e}...`,className:`w-full px-4 py-3 border rounded-lg text-base h-12`})}),(0,$.jsx)(`button`,{onClick:h,className:`bg-blue-600 text-white px-4 py-2 rounded-lg shrink-0 h-12 flex items-center`,children:(0,$.jsx)(kx,{className:`w-5 h-5`})})]}),(0,$.jsxs)(`div`,{className:`bg-slate-50 border rounded-lg p-2 max-h-60 overflow-y-auto space-y-1`,children:[n.map((e,t)=>(0,$.jsx)(`div`,{className:`flex justify-between items-center bg-white px-4 py-3 rounded shadow-sm border border-slate-100 group min-h-[48px]`,children:f.index===t?(0,$.jsxs)(`div`,{className:`flex items-center gap-2 w-full`,children:[(0,$.jsx)(`input`,{type:`text`,value:f.value,onChange:e=>p({...f,value:e.target.value}),onKeyDown:e=>e.key===`Enter`&&v(),className:`flex-1 border rounded px-2 py-1 text-base bg-blue-50 focus:ring-2 focus:ring-blue-500 outline-none min-w-0 h-10`,autoFocus:!0}),(0,$.jsx)(`button`,{onClick:v,className:`text-green-600 hover:bg-green-100 p-2 rounded shrink-0`,children:(0,$.jsx)(sx,{className:`w-5 h-5`})}),(0,$.jsx)(`button`,{onClick:()=>p({index:null,value:``}),className:`text-red-500 hover:bg-red-100 p-2 rounded shrink-0`,children:(0,$.jsx)(Bx,{className:`w-5 h-5`})})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`span`,{className:`text-base text-slate-700 flex-1 min-w-0 break-all`,children:e}),(0,$.jsxs)(`div`,{className:`flex gap-1 shrink-0 opacity-100`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col gap-0.5 mr-2`,children:[(0,$.jsx)(`button`,{onClick:()=>y(t,`up`),disabled:t===0,className:`text-slate-300 hover:text-blue-500 ${t===0?`invisible`:``}`,children:(0,$.jsx)(ux,{size:14})}),(0,$.jsx)(`button`,{onClick:()=>y(t,`down`),disabled:t===n.length-1,className:`text-slate-300 hover:text-blue-500 ${t===n.length-1?`invisible`:``}`,children:(0,$.jsx)(lx,{size:14,className:`rotate-90`})})]}),(0,$.jsx)(`button`,{onClick:()=>p({index:t,value:e}),className:`text-slate-400 hover:text-blue-600 p-2`,title:``,children:(0,$.jsx)(Ox,{className:`w-5 h-5`})}),(0,$.jsx)(`button`,{onClick:()=>g(t),className:`text-slate-400 hover:text-red-500 p-2`,title:``,children:(0,$.jsx)(Fx,{className:`w-5 h-5`})})]})]})},t)),n.length===0&&(0,$.jsx)(`div`,{className:`text-sm text-gray-400 text-center py-6`,children:``})]})]})},mS=({isOpen:e,onClose:t,initialData:n,db:r,appId:i,openAlert:a,openConfirm:o})=>{if(!e)return null;let{units:s,projects:c,vendors:l}=n;return(0,$.jsx)(`div`,{className:`fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-7xl max-h-[85vh] flex flex-col`,children:[(0,$.jsxs)(`div`,{className:`p-6 border-b flex justify-between items-center bg-slate-50 rounded-t-xl`,children:[(0,$.jsxs)(`h3`,{className:`text-2xl font-bold text-slate-800 flex items-center gap-2`,children:[(0,$.jsx)(Mx,{className:`w-7 h-7 text-blue-600`}),``]}),(0,$.jsx)(`button`,{onClick:t,children:(0,$.jsx)(Bx,{className:`w-8 h-8 text-slate-400 hover:text-slate-600 transition-colors`})})]}),(0,$.jsxs)(`div`,{className:`p-8 overflow-y-auto grid md:grid-cols-12 gap-8 text-left flex-1`,children:[(0,$.jsx)(pS,{title:``,icon:(0,$.jsx)(ax,{className:`w-6 h-6 text-blue-500`}),data:s,fieldName:`units`,colSpan:`col-span-12 md:col-span-3`,db:r,appId:i,openAlert:a,openConfirm:o}),(0,$.jsx)(pS,{title:``,icon:(0,$.jsx)(Cx,{className:`w-6 h-6 text-orange-500`}),data:c,fieldName:`projects`,colSpan:`col-span-12 md:col-span-5`,db:r,appId:i,openAlert:a,openConfirm:o}),(0,$.jsx)(pS,{title:``,icon:(0,$.jsx)(Px,{className:`w-6 h-6 text-green-500`}),data:l,fieldName:`vendors`,colSpan:`col-span-12 md:col-span-4`,db:r,appId:i,openAlert:a,openConfirm:o})]}),(0,$.jsx)(`div`,{className:`p-6 border-t bg-slate-50 rounded-b-xl flex justify-end gap-3`,children:(0,$.jsxs)(`div`,{className:`flex gap-3 items-center w-full justify-end`,children:[(0,$.jsx)(`span`,{className:`text-sm text-slate-500 mr-2 font-medium`,children:`* `}),(0,$.jsx)(`button`,{onClick:t,className:`px-8 py-3 bg-blue-600 text-white rounded-xl flex items-center gap-2 shadow-lg font-bold hover:bg-blue-700 transition-colors text-lg`,children:``})]})})]})})},hS=({isOpen:e,onClose:t,forms:n,onDeleteMonth:r,onExport:i,statusSteps:a})=>{if(!e)return null;let o=n.filter(e=>a?.[e.status]?.phase===3),s={};o.forEach(e=>{if(e.serialId){let t=e.createdAt?.toDate?e.createdAt.toDate():new Date,n=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,`0`)}`;s[n]||(s[n]=[]),s[n].push(e)}});let c=Object.keys(s).sort((e,t)=>t.localeCompare(e));return(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-2xl flex flex-col max-h-[85vh]`,children:[(0,$.jsxs)(`div`,{className:`p-4 md:p-6 border-b flex justify-between items-center bg-slate-50 rounded-t-xl`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`h3`,{className:`text-lg md:text-xl font-bold text-slate-800 flex items-center gap-2`,children:[(0,$.jsx)(xx,{className:`text-indigo-600`}),` `]}),(0,$.jsx)(`p`,{className:`text-xs md:text-sm text-slate-500 mt-1`,children:``})]}),(0,$.jsx)(`button`,{onClick:t,className:`p-2 hover:bg-slate-200 rounded-full transition-colors`,children:(0,$.jsx)(Bx,{size:24,className:`text-slate-500`})})]}),(0,$.jsxs)(`div`,{className:`flex-1 overflow-y-auto p-4 md:p-6 space-y-4`,children:[(0,$.jsxs)(`div`,{className:`bg-blue-50 p-4 rounded-lg border border-blue-100 flex items-start gap-3`,children:[(0,$.jsx)(Ix,{className:`text-blue-600 shrink-0 mt-0.5`,size:20}),(0,$.jsxs)(`div`,{className:`text-sm text-blue-800`,children:[(0,$.jsx)(`strong`,{children:``}),` `]})]}),c.length===0?(0,$.jsx)(`div`,{className:`text-center py-12 text-slate-400`,children:``}):c.map(e=>(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-300 transition-colors shadow-sm gap-3 sm:gap-0`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,$.jsx)(`div`,{className:`bg-slate-100 p-3 rounded-lg font-mono font-bold text-slate-600`,children:e}),(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`font-bold text-slate-800`,children:[s[e].length,` `]}),(0,$.jsx)(`div`,{className:`text-xs text-slate-400`,children:``})]})]}),(0,$.jsxs)(`button`,{onClick:()=>r(e,s[e]),className:`flex items-center justify-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg border border-slate-200 sm:border-transparent hover:border-red-100 transition-all text-sm font-bold w-full sm:w-auto`,title:``,children:[(0,$.jsx)(Fx,{size:18}),` `]})]},e))]}),(0,$.jsxs)(`div`,{className:`p-4 border-t bg-slate-50 rounded-b-xl flex flex-col-reverse sm:flex-row justify-between items-center gap-3 sm:gap-0`,children:[(0,$.jsxs)(`button`,{onClick:i,className:`w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-white border border-slate-300 text-slate-700 font-bold rounded-lg hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-200 transition-all shadow-sm order-2 sm:order-1`,children:[(0,$.jsx)(gx,{size:18}),` `]}),(0,$.jsx)(`button`,{onClick:t,className:`w-full sm:w-auto px-6 py-2 bg-slate-800 text-white font-bold rounded-lg hover:bg-slate-900 transition-colors shadow-md order-1 sm:order-2`,children:``})]})]})})},gS=({isOpen:e,onClose:t,forms:n,onDeleteMonth:r})=>{if(!e)return null;let i=(0,_.useMemo)(()=>{if(!n)return[];let e=n.filter(e=>{if(!Kx)return!1;let t=Kx[e.status];return t?t.phase!==3:e.status!==`COMPLETED`}),t={};return e.forEach(e=>{let n=e.createdAt?.toDate?e.createdAt.toDate():new Date,r=`${n.getFullYear()-1911}${String(n.getMonth()+1).padStart(2,`0`)}`;t[r]||(t[r]={key:r,count:0,items:[]}),t[r].count++,t[r].items.push(e)}),Object.values(t).sort((e,t)=>t.key.localeCompare(e.key))},[n]);return(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1200] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col border-4 border-red-500 overflow-hidden`,children:[(0,$.jsxs)(`div`,{className:`p-6 border-b flex justify-between items-center bg-red-50 shrink-0 z-10 relative`,children:[(0,$.jsxs)(`h3`,{className:`text-xl font-black text-red-700 flex items-center gap-2`,children:[(0,$.jsx)(Ix,{className:`w-6 h-6`}),` ()`]}),(0,$.jsx)(`button`,{onClick:t,children:(0,$.jsx)(Bx,{className:`w-6 h-6 text-slate-400 hover:text-slate-600`})})]}),(0,$.jsx)(`div`,{className:`p-6 pb-0 shrink-0 bg-white z-10 relative`,children:(0,$.jsxs)(`div`,{className:`bg-red-50 p-4 rounded-lg text-sm text-red-800 border border-red-200 shadow-sm`,children:[(0,$.jsxs)(`p`,{className:`font-bold mb-2 flex items-center gap-2`,children:[(0,$.jsx)(Ix,{size:16}),``]}),(0,$.jsxs)(`ul`,{className:`list-disc list-inside space-y-1 ml-1`,children:[(0,$.jsxs)(`li`,{children:[``,(0,$.jsx)(`b`,{children:``}),``]}),(0,$.jsxs)(`li`,{children:[``,(0,$.jsx)(`b`,{children:``}),``]})]})]})}),(0,$.jsx)(`div`,{className:`p-6 overflow-y-auto flex-1 bg-white`,children:i.length===0?(0,$.jsx)(`div`,{className:`text-center text-slate-400 py-10`,children:``}):(0,$.jsxs)(`table`,{className:`w-full text-left border-collapse`,children:[(0,$.jsx)(`thead`,{className:`sticky top-0 bg-white z-0`,children:(0,$.jsxs)(`tr`,{className:`border-b border-slate-200 text-slate-500 text-sm`,children:[(0,$.jsx)(`th`,{className:`py-3 px-4`,children:``}),(0,$.jsx)(`th`,{className:`py-3 px-4`,children:` ()`}),(0,$.jsx)(`th`,{className:`py-3 px-4 text-right`,children:``})]})}),(0,$.jsx)(`tbody`,{children:i.map(e=>(0,$.jsxs)(`tr`,{className:`border-b border-slate-100 hover:bg-slate-50`,children:[(0,$.jsx)(`td`,{className:`py-3 px-4 font-bold text-slate-700`,children:e.key}),(0,$.jsxs)(`td`,{className:`py-3 px-4 text-slate-600`,children:[e.count,` `]}),(0,$.jsx)(`td`,{className:`py-3 px-4 text-right`,children:(0,$.jsxs)(`button`,{onClick:()=>r(e.key,e.items),className:`inline-flex items-center gap-1.5 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-bold shadow-sm`,children:[(0,$.jsx)(Fx,{size:14}),` `]})})]},e.key))})]})}),(0,$.jsx)(`div`,{className:`p-4 border-t bg-slate-50 flex justify-end shrink-0`,children:(0,$.jsx)(`button`,{onClick:t,className:`px-6 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg`,children:``})})]})})},_S=({isOpen:e,onClose:t,onConfirm:n,mode:r,setMode:i,startDate:a,setStartDate:o,endDate:s,setEndDate:c})=>e?(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-sm p-6`,children:[(0,$.jsxs)(`div`,{className:`text-center mb-4`,children:[(0,$.jsx)(`h3`,{className:`text-xl font-bold text-slate-800`,children:``}),(0,$.jsx)(`p`,{className:`text-slate-500 text-sm mt-1`,children:``})]}),(0,$.jsxs)(`div`,{className:`space-y-4 mb-6`,children:[(0,$.jsxs)(`label`,{className:`flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors`,children:[(0,$.jsx)(`input`,{type:`radio`,name:`exportMode`,value:`all`,checked:r===`all`,onChange:()=>i(`all`),className:`w-5 h-5 text-blue-600`}),(0,$.jsx)(`span`,{className:`font-bold text-slate-700 text-lg`,children:``})]}),(0,$.jsxs)(`label`,{className:`flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors`,children:[(0,$.jsx)(`input`,{type:`radio`,name:`exportMode`,value:`completed`,checked:r===`completed`,onChange:()=>i(`completed`),className:`w-5 h-5 text-blue-600`}),(0,$.jsx)(`span`,{className:`font-bold text-slate-700 text-lg`,children:``})]}),(0,$.jsxs)(`label`,{className:`flex flex-col gap-2 p-3 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`input`,{type:`radio`,name:`exportMode`,value:`date`,checked:r===`date`,onChange:()=>i(`date`),className:`w-5 h-5 text-blue-600`}),(0,$.jsx)(`span`,{className:`font-bold text-slate-700 text-lg`,children:``})]}),r===`date`&&(0,$.jsxs)(`div`,{className:`mt-2 space-y-2`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`text-sm text-slate-500 w-8`,children:``}),(0,$.jsx)(dS,{value:a,onChange:o,className:`flex-1`})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`text-sm text-slate-500 w-8`,children:``}),(0,$.jsx)(dS,{value:s,onChange:c,className:`flex-1`})]})]})]})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 justify-center`,children:[(0,$.jsx)(`button`,{onClick:t,className:`px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium`,children:``}),(0,$.jsxs)(`button`,{onClick:n,className:`px-6 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 flex items-center gap-2`,children:[(0,$.jsx)(gx,{size:20}),``]})]})]})}):null,vS=({modal:e,onClose:t,onConfirm:n})=>{if(!e||!e.isOpen)return null;let[r,i]=(0,_.useState)(``),[a,o]=(0,_.useState)(``),[s,c]=(0,_.useState)(``),[l,u]=(0,_.useState)(!1),d=(0,_.useRef)(null),f=(0,_.useRef)(null);(0,_.useEffect)(()=>{e.isOpen&&(i(``),o(``),c(``),u(!1),setTimeout(()=>{f.current?f.current.focus():d.current&&d.current.focus()},50))},[e.isOpen]);let p=async()=>{if(e.type===`action`){if(e.noteRequired&&!r.trim()){c(``);return}if(e.showPickupInput&&!a.trim()){c(``);return}}if(n){u(!0);try{await n({note:r,pickupName:a})}catch(e){console.error(`[GlobalModal] Error:`,e)}finally{u(!1),t()}}else t()},m=e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),p())},h=e.alertType===`danger`;return(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1300] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,onKeyDown:e=>{e.key===`Escape`&&t()},children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-sm p-6 animate-in zoom-in-95 duration-200 border-t-4 border-blue-600`,style:{borderColor:h?`#ef4444`:`#2563eb`},children:[(0,$.jsxs)(`div`,{className:`text-center mb-4`,children:[(0,$.jsx)(`h3`,{className:`text-xl font-bold ${h?`text-red-600`:`text-slate-800`}`,children:String(e.title)}),(0,$.jsx)(`p`,{className:`text-slate-600 mt-2 text-sm break-all whitespace-pre-wrap`,children:String(e.message)})]}),e.type===`action`&&(0,$.jsxs)(`div`,{className:`space-y-3 mb-4`,children:[e.showPickupInput&&(0,$.jsx)(`input`,{ref:f,type:`text`,className:`w-full border rounded p-2 text-sm`,placeholder:`* `,value:a,onChange:e=>o(e.target.value),onKeyDown:m}),e.showNoteInput&&(0,$.jsx)(`textarea`,{ref:e.showPickupInput?null:f,className:`w-full border rounded p-2 text-sm`,rows:`2`,placeholder:e.noteRequired?`*  ()`:` ()`,value:r,onChange:e=>i(e.target.value),onKeyDown:m}),s&&(0,$.jsx)(`p`,{className:`text-red-500 text-xs font-bold text-center`,children:String(s)})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 justify-center`,children:[(e.type===`confirm`||e.type===`action`)&&(0,$.jsx)(`button`,{onClick:t,className:`px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg`,disabled:l,children:``}),(0,$.jsxs)(`button`,{ref:d,onClick:p,className:`px-6 py-2 text-white rounded-lg font-medium flex items-center gap-2 ${h?`bg-red-600 hover:bg-red-700`:`bg-blue-600 hover:bg-blue-700`} disabled:opacity-70`,disabled:l,children:[l&&(0,$.jsx)(wx,{className:`animate-spin`,size:16}),h&&!e.onConfirm?``:``]})]})]})})},yS=({form:e,expandedId:t,setExpandedId:n,onAction:r})=>{let i=Kx[e.status]?.nextAction,a=qx[e.status],o=t===e.id;return(0,$.jsxs)(_.Fragment,{children:[(0,$.jsxs)(`tr`,{className:`transition-colors cursor-pointer border-b ${e.isUrgent?`bg-red-50 hover:bg-red-100`:`hover:bg-blue-50`} ${o?e.isUrgent?`bg-red-100`:`bg-blue-50`:``}`,onClick:()=>n(o?null:e.id),children:[(0,$.jsx)(`td`,{className:`p-4 text-center`,children:o?(0,$.jsx)(cx,{size:18}):(0,$.jsx)(lx,{size:18})}),(0,$.jsxs)(`td`,{className:`p-4 w-32 md:w-1/6`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-1 mb-1`,children:[e.isUrgent&&(0,$.jsx)(bx,{className:`w-4 h-4 text-red-500 fill-red-500`}),(0,$.jsx)(`div`,{className:`text-xs font-mono px-1.5 py-0.5 rounded border ${e.isUrgent?`text-red-700 bg-red-100`:`text-blue-600 bg-blue-50`}`,children:String(e.serialId||``)})]}),(0,$.jsx)(`div`,{className:`font-bold truncate`,children:String(e.unit||``)}),(0,$.jsx)(`div`,{className:`text-xs text-slate-500 truncate`,children:String(e.applicant||``)})]}),(0,$.jsxs)(`td`,{className:`p-4 w-1/3`,children:[(0,$.jsx)(`div`,{className:`text-sm font-medium line-clamp-2`,children:String(e.subject||``)}),(0,$.jsxs)(`div`,{className:`text-lg text-blue-600 font-bold mt-1`,children:[`$`,(e.totalPrice||0).toLocaleString()]})]}),(0,$.jsxs)(`td`,{className:`p-4 whitespace-nowrap`,children:[(0,$.jsx)(`span`,{className:`px-2 py-1 rounded-full text-xs font-semibold ${Kx[e.status]?.color||`bg-slate-100`}`,children:Kx[e.status]?.label||e.status}),(0,$.jsx)(`div`,{className:`text-sm text-slate-400 mt-2`,children:Qx(e.updatedAt?.toDate?e.updatedAt.toDate().toISOString():``)})]}),(0,$.jsx)(`td`,{className:`p-4 whitespace-nowrap`,onClick:e=>e.stopPropagation(),children:(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[a&&(0,$.jsxs)(`button`,{onClick:()=>r(`revert`,e),className:`bg-red-500 text-white text-xs px-3 py-2 rounded shadow flex items-center justify-center gap-1 hover:bg-red-600`,children:[(0,$.jsx)(Ax,{size:12}),``]}),i&&(0,$.jsxs)(`button`,{onClick:()=>r(`advance`,e),className:`bg-emerald-600 text-white text-xs px-3 py-2 rounded shadow flex items-center justify-center gap-1 hover:bg-emerald-700`,children:[i===``?(0,$.jsx)(fx,{size:12}):(0,$.jsx)(rx,{size:12}),i]})]})}),(0,$.jsx)(`td`,{className:`p-4 text-right w-14`,onClick:e=>e.stopPropagation(),children:(0,$.jsx)(`button`,{onClick:()=>r(`delete`,e),className:`text-slate-300 hover:text-red-500`,children:(0,$.jsx)(Fx,{size:16})})})]}),o&&(0,$.jsx)(`tr`,{className:`bg-slate-50 border-b border-gray-200`,children:(0,$.jsx)(`td`,{colSpan:`6`,className:`p-0`,children:(0,$.jsxs)(`div`,{className:`p-4 grid grid-cols-1 md:grid-cols-2 gap-4 animate-in fade-in duration-300`,children:[(0,$.jsxs)(`div`,{className:`p-4 bg-white rounded-lg border border-gray-200 shadow-sm relative`,children:[(0,$.jsx)(`button`,{onClick:()=>r(`edit`,e),className:`absolute top-4 right-4 text-slate-400 hover:text-blue-600 p-2 rounded-full hover:bg-blue-50 transition-colors`,title:``,children:(0,$.jsx)(Dx,{size:20})}),(0,$.jsxs)(`h4`,{className:`text-sm font-bold text-gray-700 mb-3 flex items-center gap-2`,children:[(0,$.jsx)(yx,{size:16}),` `]}),(0,$.jsxs)(`div`,{className:`space-y-2 text-sm`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between border-b border-dashed py-1 text-xs text-slate-500`,children:[(0,$.jsx)(`span`,{children:`/`}),(0,$.jsx)(`span`,{className:e.isUrgent?`text-red-600 font-bold`:`text-slate-700`,children:e.isUrgent?` `:``})]}),e.applicationDate&&(0,$.jsxs)(`div`,{className:`flex justify-between border-b border-dashed py-1`,children:[(0,$.jsx)(`span`,{children:` ()`}),(0,$.jsx)(`span`,{className:`font-mono text-slate-700`,children:Zx(e.applicationDate)})]}),(0,$.jsxs)(`div`,{className:`flex justify-between border-b border-dashed py-1`,children:[(0,$.jsx)(`span`,{children:``}),(0,$.jsx)(`span`,{className:`font-medium`,children:String(e.unit||``)})]}),(0,$.jsxs)(`div`,{className:`flex justify-between border-b border-dashed py-1`,children:[(0,$.jsx)(`span`,{children:``}),(0,$.jsx)(`span`,{className:`font-medium`,children:String(e.applicant||`-`)})]}),(0,$.jsxs)(`div`,{className:`flex justify-between border-b border-dashed py-1`,children:[(0,$.jsx)(`span`,{children:``}),(0,$.jsx)(`span`,{className:`font-medium text-orange-600`,children:String(e.subsidy||``)})]}),e.vendor&&(0,$.jsxs)(`div`,{className:`flex justify-between border-b border-dashed py-1`,children:[(0,$.jsx)(`span`,{children:``}),(0,$.jsx)(`span`,{className:`font-medium text-green-600`,children:String(e.vendor)})]}),e.receiverName&&(0,$.jsxs)(`div`,{className:`flex justify-between border-b border-dashed py-1`,children:[(0,$.jsx)(`span`,{children:``}),(0,$.jsx)(`span`,{className:`font-medium text-purple-600`,children:String(e.receiverName)})]}),e.globalRemark&&(0,$.jsxs)(`div`,{className:`bg-yellow-50 p-2 rounded text-xs mt-2 border border-yellow-100`,children:[(0,$.jsx)(`span`,{className:`font-bold text-yellow-800`,children:``}),String(e.globalRemark)]}),(0,$.jsxs)(`div`,{className:`mt-4`,children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400 mb-2`,children:``}),(0,$.jsx)(`div`,{className:`bg-slate-50 rounded p-2 space-y-1`,children:e.items?.map((e,t)=>(0,$.jsxs)(`div`,{className:`flex justify-between text-xs border-b border-slate-200 last:border-0 pb-1`,children:[(0,$.jsxs)(`span`,{className:`break-all whitespace-normal pr-2`,children:[t+1,`. `,String(e.subject)]}),(0,$.jsxs)(`span`,{className:`shrink-0`,children:[e.quantity,e.measureUnit,` x $`,e.unitPrice]})]},t))})]}),(0,$.jsxs)(`div`,{className:`flex justify-between py-1 mt-2 pt-2 border-t`,children:[(0,$.jsx)(`span`,{className:`font-bold`,children:``}),(0,$.jsxs)(`span`,{className:`font-bold text-blue-600 text-lg`,children:[`$`,(e.totalPrice||0).toLocaleString()]})]})]})]}),(0,$.jsxs)(`div`,{className:`p-4 bg-white rounded-lg border border-gray-200 shadow-sm`,children:[(0,$.jsxs)(`h4`,{className:`text-sm font-bold text-gray-700 mb-3 flex items-center gap-2`,children:[(0,$.jsx)(hx,{size:16}),` `]}),(0,$.jsx)(`div`,{className:`space-y-4 relative before:absolute before:inset-0 before:ml-2.5 before:-translate-x-px before:h-full before:w-0.5 before:bg-gray-200`,children:e.logs?.map((e,t)=>(0,$.jsxs)(`div`,{className:`relative flex items-center group`,children:[(0,$.jsx)(`div`,{className:`absolute left-0 w-5 h-5 rounded-full border-2 border-white shadow-sm flex items-center justify-center ${e.note?.includes(``)?`bg-orange-500`:`bg-blue-500`}`}),(0,$.jsxs)(`div`,{className:`ml-8 text-sm`,children:[(0,$.jsx)(`div`,{className:`font-medium ${e.note?.includes(``)?`text-orange-600`:`text-gray-900`}`,children:String(e.note||Kx[e.status]?.label||``)}),(0,$.jsxs)(`div`,{className:`text-gray-400 text-sm`,children:[Qx(e.timestamp),e.operator&&(0,$.jsxs)(`span`,{className:`ml-2 text-slate-500`,children:[`(`,e.operator,`)`]})]})]})]},t))})]})]})})})]})},bS=({form:e,expandedId:t,setExpandedId:n,onAction:r})=>{let i=t===e.id,a=Kx[e.status]||{};return(0,$.jsxs)(`div`,{className:`bg-white rounded-xl border shadow-sm transition-all duration-200 ${i?`border-blue-400 ring-1 ring-blue-100`:`border-slate-200`}`,children:[(0,$.jsx)(`div`,{className:`p-4 cursor-pointer`,onClick:()=>n(i?null:e.id),children:(0,$.jsxs)(`div`,{className:`flex justify-between items-start gap-3`,children:[(0,$.jsxs)(`div`,{className:`flex-1 space-y-2`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2 flex-wrap`,children:[(0,$.jsx)(`span`,{className:`font-mono text-xs text-slate-500 bg-slate-100 px-2 py-0.5 rounded border border-slate-200`,children:e.serialId}),e.isUrgent&&(0,$.jsx)(`span`,{className:`text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded font-bold border border-red-200 animate-pulse`,children:``}),(0,$.jsxs)(`span`,{className:`text-xs px-2 py-0.5 rounded border font-bold flex items-center gap-1 ${(e=>e===1?`bg-blue-100 text-blue-700 border-blue-200`:e===2?`bg-orange-100 text-orange-700 border-orange-200`:e===3?`bg-emerald-100 text-emerald-700 border-emerald-200`:`bg-slate-100 text-slate-700 border-slate-200`)(a.phase)}`,children:[(e=>e===1?(0,$.jsx)(px,{size:16}):e===2?(0,$.jsx)(hx,{size:16}):e===3?(0,$.jsx)(fx,{size:16}):(0,$.jsx)(dx,{size:16}))(a.phase),a.label]})]}),(0,$.jsx)(`h3`,{className:`font-bold text-slate-800 text-base leading-tight`,children:e.subject||``}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-slate-500`,children:[(0,$.jsx)(ax,{size:14}),(0,$.jsx)(`span`,{children:e.unit}),(0,$.jsx)(`span`,{className:`text-slate-300`,children:`|`}),(0,$.jsx)(Rx,{size:14}),(0,$.jsx)(`span`,{children:e.applicant})]})]}),(0,$.jsxs)(`div`,{className:`flex flex-col items-end gap-3`,children:[(0,$.jsxs)(`div`,{className:`text-right`,children:[(0,$.jsx)(`div`,{className:`text-xs text-slate-400`,children:``}),(0,$.jsxs)(`div`,{className:`font-bold text-blue-600 text-lg`,children:[`$`,(e.totalPrice||0).toLocaleString()]})]}),i?(0,$.jsx)(ux,{size:20,className:`text-slate-400`}):(0,$.jsx)(cx,{size:20,className:`text-slate-400`})]})]})}),i&&(0,$.jsxs)(`div`,{className:`px-4 pb-4 pt-0 border-t border-slate-100 animate-in slide-in-from-top-2 duration-200`,children:[(0,$.jsxs)(`div`,{className:`py-3 space-y-3 text-sm`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-3 bg-slate-50 p-3 rounded-lg`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400 block mb-1`,children:``}),(0,$.jsx)(`span`,{className:`font-medium text-slate-700`,children:e.applicationDate?e.applicationDate.replace(/-/g,`/`):`-`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400 block mb-1`,children:``}),(0,$.jsx)(`span`,{className:`font-medium text-slate-700`,children:e.vendor||`-`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400 block mb-1`,children:``}),(0,$.jsx)(`span`,{className:`font-medium text-slate-700`,children:e.subsidy||``})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400 block mb-1`,children:``}),(0,$.jsx)(`span`,{className:`font-medium text-slate-700`,children:e.receiverName||`-`})]})]}),e.globalRemark&&(0,$.jsxs)(`div`,{className:`bg-yellow-50 p-3 rounded-lg border border-yellow-100 text-yellow-800 text-xs`,children:[(0,$.jsx)(`strong`,{children:``}),` `,e.globalRemark]}),(0,$.jsxs)(`div`,{className:`mt-4`,children:[(0,$.jsx)(`h4`,{className:`text-xs font-bold text-slate-500 mb-2 uppercase tracking-wider`,children:``}),(0,$.jsx)(`div`,{className:`space-y-2 relative pl-2 border-l-2 border-slate-200 ml-1`,children:(e.logs||[]).slice().reverse().slice(0,3).map((e,t)=>(0,$.jsxs)(`div`,{className:`pl-3 relative`,children:[(0,$.jsx)(`div`,{className:`absolute -left-[13px] top-1.5 w-2.5 h-2.5 rounded-full bg-white border-2 border-blue-400`}),(0,$.jsx)(`div`,{className:`text-xs text-slate-400`,children:e.timestamp?e.timestamp.slice(0,16).replace(`T`,` `):`-`}),(0,$.jsx)(`div`,{className:`text-sm font-medium text-slate-700`,children:e.note||e.status}),(0,$.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`: `,e.operator]})]},t))})]})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 mt-2 pt-3 border-t border-slate-100 overflow-x-auto pb-1`,children:[(0,$.jsx)(`button`,{onClick:()=>r(`edit`,e),className:`flex-1 min-w-[80px] py-2 bg-white border border-slate-300 text-slate-700 rounded-lg text-sm font-bold active:bg-slate-100`,children:``}),a.phase<3&&(0,$.jsxs)(`button`,{onClick:()=>r(`advance`,e),className:`flex-[2] min-w-[120px] py-2 bg-blue-600 text-white rounded-lg text-sm font-bold shadow-sm active:bg-blue-700 flex items-center justify-center gap-1`,children:[a.nextAction,` `,(0,$.jsx)(rx,{size:14})]}),Kx[e.status]?.phase>1&&(0,$.jsx)(`button`,{onClick:()=>r(`revert`,e),className:`flex-1 min-w-[80px] py-2 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg text-sm font-bold active:bg-orange-100`,children:``}),(0,$.jsx)(`button`,{onClick:()=>r(`delete`,e),className:`flex-none px-3 py-2 bg-white border border-red-200 text-red-500 rounded-lg active:bg-red-50`,children:(0,$.jsx)(mx,{size:20})})]})]})]})};function xS({isOpen:e,onClose:t,db:n,appId:r}){let[i,a]=(0,_.useState)([]),[o,s]=(0,_.useState)(!0);return(0,_.useEffect)(()=>{if(!e)return;let t=Mb(ub(xy(n,`artifacts`,r,`public`,`data`,`system_logs`),mb(`timestamp`,`desc`),gb(50)),e=>{a(e.docs.map(e=>({id:e.id,...e.data()}))),s(!1)});return()=>t()},[e,n,r]),e?(0,$.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[85vh] flex flex-col border border-slate-300`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-center p-4 border-b bg-slate-50 rounded-t-xl`,children:[(0,$.jsxs)(`h3`,{className:`font-bold text-lg flex items-center gap-2 text-slate-800`,children:[(0,$.jsx)(tx,{className:`text-blue-600`,size:20}),` ( 50 )`]}),(0,$.jsx)(`button`,{onClick:t,className:`text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-200 rounded-full transition-colors`,children:(0,$.jsx)(Bx,{size:24})})]}),(0,$.jsx)(`div`,{className:`flex-1 overflow-y-auto p-0`,children:o?(0,$.jsx)(`div`,{className:`p-8 text-center text-slate-400`,children:`...`}):i.length===0?(0,$.jsx)(`div`,{className:`p-8 text-center text-slate-400`,children:``}):(0,$.jsxs)(`table`,{className:`w-full text-left text-sm border-collapse`,children:[(0,$.jsx)(`thead`,{className:`bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10`,children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{className:`p-3 w-40 border-b`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,$.jsx)(hx,{size:14}),` `]})}),(0,$.jsx)(`th`,{className:`p-3 w-32 border-b`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,$.jsx)(Rx,{size:14}),` `]})}),(0,$.jsx)(`th`,{className:`p-3 w-24 border-b`,children:``}),(0,$.jsx)(`th`,{className:`p-3 border-b`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,$.jsx)(yx,{size:14}),` `]})})]})}),(0,$.jsx)(`tbody`,{className:`divide-y divide-slate-100`,children:i.map(e=>(0,$.jsxs)(`tr`,{className:`hover:bg-slate-50 transition-colors`,children:[(0,$.jsx)(`td`,{className:`p-3 text-slate-500 font-mono text-xs`,children:e.timestamp?.toDate?Qx(e.timestamp.toDate().toISOString()):`-`}),(0,$.jsx)(`td`,{className:`p-3 font-medium text-slate-700`,children:e.operator||``}),(0,$.jsx)(`td`,{className:`p-3`,children:(0,$.jsx)(`span`,{className:`px-2 py-1 rounded text-xs font-bold ${e.type===``||e.type===``?`bg-red-100 text-red-700`:e.type===``?`bg-green-100 text-green-700`:e.type===``?`bg-blue-100 text-blue-700`:e.type===``?`bg-slate-100 text-slate-600`:`bg-orange-50 text-orange-700`}`,children:e.type})}),(0,$.jsx)(`td`,{className:`p-3 text-slate-600 break-all`,children:e.details})]},e.id))})]})}),(0,$.jsx)(`div`,{className:`p-4 border-t bg-slate-50 rounded-b-xl text-right`,children:(0,$.jsx)(`button`,{onClick:t,className:`px-4 py-2 bg-white border border-slate-300 rounded-lg hover:bg-slate-100 font-medium text-sm`,children:``})})]})}):null}var SS=[`268${Gx}`];function CS(){let[e,t]=(0,_.useState)(null),[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(!0),[o,s]=(0,_.useState)(Jx),[c,l]=(0,_.useState)(Yx),[u,d]=(0,_.useState)(Xx),[f,p]=(0,_.useState)(!1),[m]=(0,_.useState)(eS()),[h,g]=(0,_.useState)(``),[v,y]=(0,_.useState)(`all`),[b,x]=(0,_.useState)(()=>{let e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}`}),[ee,te]=(0,_.useState)(`all`),[S,ne]=(0,_.useState)(``),[re,ie]=(0,_.useState)(``),[ae,oe]=(0,_.useState)(!1),[se,ce]=(0,_.useState)(null),[le,ue]=(0,_.useState)({isOpen:!1,type:`alert`,title:``,message:``}),[de,fe]=(0,_.useState)(!1),[C,w]=(0,_.useState)(!1),[pe,me]=(0,_.useState)(!1),[he,ge]=(0,_.useState)(!1),[T,_e]=(0,_.useState)(!1),[ve,ye]=(0,_.useState)(``),[be,xe]=(0,_.useState)(``),[Se,Ce]=(0,_.useState)(`all`),[we,Te]=(0,_.useState)(``),[Ee,De]=(0,_.useState)(``),[Oe,ke]=(0,_.useState)(``),[Ae,je]=(0,_.useState)(``),[Me,Ne]=(0,_.useState)(``),[Pe,Fe]=(0,_.useState)(``),[Ie,Le]=(0,_.useState)(!1),[Re,ze]=(0,_.useState)(``),[Be,Ve]=(0,_.useState)([{id:Date.now(),subject:``,quantity:1,measureUnit:``,unitPrice:``}]),[E,He]=(0,_.useState)(!1),[Ue,We]=(0,_.useState)(!1),[Ge,Ke]=(0,_.useState)(null),[qe,Je]=(0,_.useState)(!1),[D,Ye]=(0,_.useState)(!1),[Xe,Ze]=(0,_.useState)(!1),[Qe,$e]=(0,_.useState)(!1),[et,tt]=(0,_.useState)(``),nt=Be.reduce((e,t)=>e+(parseFloat(t.quantity)||0)*(parseFloat(t.unitPrice)||0),0);(0,_.useEffect)(()=>{let e=ua(Hx,e=>{t(e),a(!1)});return()=>e()},[]),(0,_.useEffect)(()=>{if(!e)return;let t=Mb(ub(xy(Ux,`artifacts`,Wx,`public`,`data`,`school_forms`),mb(`createdAt`,`desc`),gb(300)),e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));t.sort((e,t)=>{let n=e.createdAt?.seconds||0,r=t.createdAt?.seconds||0;if(r!==n)return r-n;let i=e.serialId||``;return(t.serialId||``).localeCompare(i)}),r(t)});return()=>t()},[e]),(0,_.useEffect)(()=>{if(!e)return;let t=Sy(Ux,`artifacts`,Wx,`public`,`data`,`school_settings`,`config1`),n=Mb(t,e=>{if(e.exists()){let t=e.data();t.units&&s(t.units),t.projects&&l(t.projects),t.vendors&&d(t.vendors)}else Ob(t,{units:Jx,projects:Yx,vendors:Xx}).catch(e=>{})});return()=>n()},[e]),(0,_.useEffect)(()=>(f||E||de||le.isOpen||pe||he||T||C?document.body.style.overflow=`hidden`:document.body.style.overflow=``,()=>{document.body.style.overflow=``}),[f,E,de,le.isOpen,pe,he,T,C]);let rt=async(e,t)=>{$e(!0),tt(``);try{await sa(Hx,`${e}${Gx}`,t),cS(Ux,Wx,Hx.currentUser,sS.LOGIN,` ${e} `)}catch(e){console.error(`Login failed:`,e),tt(``)}finally{$e(!1)}},it=async()=>{$e(!0),tt(``);try{await $i(Hx),cS(Ux,Wx,Hx.currentUser,sS.LOGIN,``)}catch(e){console.error(`Anon login failed:`,e),tt(``)}finally{$e(!1)}},at=async()=>{if(confirm(``)){let t=e;try{await da(Hx),cS(Ux,Wx,t,sS.LOGOUT,``)}catch(e){console.error(e),alert(``)}}},ot=(0,_.useMemo)(()=>n.filter(e=>{if(b!==`all`){let t=e.createdAt?.toDate?e.createdAt.toDate():new Date;if(`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,`0`)}`!==b)return!1}if(ee!==`all`&&e.vendor!==ee)return!1;if(S&&re){let t=e.applicationDate||(e.createdAt?.toDate?e.createdAt.toDate().toISOString().split(`T`)[0]:``);if(t<S||t>re)return!1}if(ae&&!e.isUrgent)return!1;let t=h.toLowerCase();return!t||e.serialId&&e.serialId.toLowerCase().includes(t)||e.subject&&e.subject.toLowerCase().includes(t)||e.unit&&e.unit.toLowerCase().includes(t)||e.applicant&&e.applicant.toLowerCase().includes(t)||e.vendor&&e.vendor.toLowerCase().includes(t)||e.globalRemark&&e.globalRemark.toLowerCase().includes(t)?v===`phase1`?Kx[e.status]?.phase===1&&e.status!==`P1_RETURNED`:v===`phase2`?(Kx[e.status]?.phase===2||e.status===`P1_RETURNED`)&&e.status!==`COMPLETED`:v===`phase3`?Kx[e.status]?.phase===3:!0:!1}),[n,h,v,b,ae,ee,S,re]),st=()=>{let e=new Date,t=`${(e.getMonth()+1).toString().padStart(2,`0`)}-${e.getDate().toString().padStart(2,`0`)}`,r=n.filter(e=>e.serialId&&e.serialId.startsWith(`(${t}`)),i=0;return r.forEach(e=>{let t=e.serialId.replace(/[()]/g,``).split(`-`);if(t.length===3){let e=parseInt(t[2],10);!isNaN(e)&&e>i&&(i=e)}}),`(${t}-${(i+1).toString().padStart(2,`0`)})`};(0,_.useEffect)(()=>{E&&!Ue&&ze(st())},[E,n,Ue]);let ct=()=>Ve([...Be,{id:Date.now(),subject:``,quantity:1,measureUnit:``,unitPrice:``}]),lt=e=>{if(Be.length>1){let t=[...Be];t.splice(e,1),Ve(t)}},ut=(e,t,n)=>{let r=[...Be];r[e][t]=n,Ve(r)},dt=()=>{Te(``),De(``),ke(``),Je(!1),je(``),Ye(!1),Ne(``),Le(!1),Fe(``),Ve([{id:Date.now(),subject:``,quantity:1,measureUnit:``,unitPrice:``}]),We(!1),Ke(null),ze(``)},ft=()=>{dt(),We(!1),He(!0)},pt=e=>{Te(e.unit||``),De(e.applicant||``),ke(e.subsidy||``),je(e.vendor||``),Ne(e.globalRemark||``),Fe(e.applicationDate||``),Le(e.isUrgent||!1);let t=(e.items||[]).map((e,t)=>({...e,id:e.id||Date.now()+t}));Ve(t.length>0?t:[{id:Date.now(),subject:``,quantity:1,measureUnit:``,unitPrice:``}]),ze(e.serialId),Ke(e.id),We(!0),e.subsidy&&!c.includes(e.subsidy)&&e.subsidy!==` ()`?Je(!0):Je(!1),e.vendor&&!u.includes(e.vendor)?Ye(!0):Ye(!1),He(!0)},mt=async t=>{if(t.preventDefault(),!Xe){if(!we||Be.some(e=>!e.subject.trim()||!e.quantity||e.quantity<=0||e.unitPrice===``||e.unitPrice===void 0)){ue({isOpen:!0,type:`alert`,alertType:`danger`,title:``,message:``});return}if(!e){ue({isOpen:!0,type:`alert`,alertType:`danger`,title:``,message:``});return}Ze(!0);try{let t=[...c],n=!1,r=Oe.trim();r&&!c.includes(r)&&r!==` ()`&&window.confirm(`${r}`)&&(t.push(r),n=!0);let i=[...u],a=!1,o=Ae.trim();if(o&&!u.includes(o)&&window.confirm(`${o}`)&&(i.push(o),a=!0),n||a){let e=Sy(Ux,`artifacts`,Wx,`public`,`data`,`school_settings`,`config1`),r={};n&&(r.projects=t),a&&(r.vendors=i);let o=Ob(e,r,{merge:!0});await Promise.race([o,new Promise(e=>setTimeout(e,500))])}let s=new Date().toISOString(),l=Be.map(e=>e.subject).join(``),d={unit:we,applicant:Ee,isUrgent:Ie,globalRemark:Me,vendor:Ae,applicationDate:Pe,items:Be.map(e=>({subject:e.subject,quantity:parseInt(e.quantity)||1,measureUnit:e.measureUnit||``,unitPrice:parseInt(e.unitPrice)||0,subtotal:(parseInt(e.quantity)||0)*(parseInt(e.unitPrice)||0)})),subject:l,totalPrice:nt,subsidy:Oe,updatedAt:Ub()},f,p=``,m=``;if(Ue&&Ge)f=kb(Sy(Ux,`artifacts`,Wx,`public`,`data`,`school_forms`,Ge),d),p=sS.UPDATE,m=`${Re} (: ${nt})`;else{let t=st();d.serialId=t,d.status=`P1_RECEIVED`,d.logs=[{status:`P1_RECEIVED`,timestamp:s,note:``,operator:tS(e)}],d.time_P1_RECEIVED=s,d.createdAt=Ub(),f=jb(xy(Ux,`artifacts`,Wx,`public`,`data`,`school_forms`),d),p=sS.CREATE,m=`${t} (: ${nt})`}await Promise.race([f,new Promise((e,t)=>setTimeout(()=>t(Error(`timeout`)),2500))]),cS(Ux,Wx,e,p,m),Ue?(He(!1),ue({isOpen:!0,title:``,message:` ${Re} `})):(dt(),ue({isOpen:!0,title:``,message:``}))}catch(e){e.message===`timeout`?Ue?(He(!1),ue({isOpen:!0,title:` ()`,message:` ${Re} `})):(dt(),ue({isOpen:!0,title:` ()`,message:``})):(console.error(`Submit error`,e),ue({isOpen:!0,type:`alert`,alertType:`danger`,title:``,message:``}))}finally{Ze(!1)}}},ht=(t,n)=>{ue({isOpen:!0,type:`confirm`,alertType:`danger`,title:` `,message:`${t} ${n.length} \n\n()`,onConfirm:async()=>{try{let r=0;for(let e of n)try{await Ab(Sy(Ux,`artifacts`,Wx,`public`,`data`,`school_forms`,e.id)),r++}catch(t){console.error(`Failed to delete doc:`,e.id,t)}cS(Ux,Wx,e,sS.BATCH_DELETE,` [${t}] ${r} `),setTimeout(()=>wt(``,` ${t} `),500)}catch(e){console.error(`Delete process error`,e),setTimeout(()=>wt(``,``,`danger`),500)}}})},gt=()=>{fe(!0)},_t=()=>{fe(!1),ye(``),xe(``)},vt=()=>{let e=n;if(Se===`date`){if(!ve||!be)return[];e=n.filter(e=>{if(!e.serialId)return!1;let t=e.serialId.replace(/[()]/g,``).split(`-`);if(t.length<2)return!1;let n=t[0],r=t[1],i=`${(e.createdAt?.toDate?e.createdAt.toDate():new Date).getFullYear()}-${n}-${r}`;return i>=ve&&i<=be}),e.sort((e,t)=>{let n=e.applicationDate||(e.createdAt?.toDate?e.createdAt.toDate().toISOString().split(`T`)[0]:``);return(t.applicationDate||(t.createdAt?.toDate?t.createdAt.toDate().toISOString().split(`T`)[0]:``)).localeCompare(n)})}else Se===`completed`&&(e=n.filter(e=>Kx[e.status]?.phase===3));return e},yt=()=>{let e=vt();if(Se===`date`&&(!ve||!be)){wt(``,``,`danger`);return}if(e.length===0){wt(``,``,`danger`);return}w(!0)},bt=t=>{let n=vt(),r=Se===`date`?`${Zx(ve).replace(/-/g,``)}-${Zx(be).replace(/-/g,``)}`:Se===`completed`?``:``;t===`json`?(aS(iS(n),`_${r}.json`),cS(Ux,Wx,e,sS.EXPORT,`(JSON) [${Se}] ${n.length} `)):(rS(nS(n),`_${r}.csv`),cS(Ux,Wx,e,sS.EXPORT,`(CSV) [${Se}] ${n.length} `)),w(!1),_t()},xt=()=>me(!0),St=()=>ge(!0),Ct=t=>{let r=t.target.files[0];if(!r)return;if(!r.name.toLowerCase().endsWith(`.json`)){wt(``,` JSON 

CSV `,`warning`),t.target.value=``;return}let i=new FileReader;i.onload=async r=>{let i=r.target.result;try{let t=JSON.parse(i);if(!Array.isArray(t))throw Error(``);ue({isOpen:!0,type:`confirm`,title:``,message:` JSON  ${t.length} \n\n\n \n \n\n`,onConfirm:async()=>{try{let r=oS(n,t),i=Wb(Ux),a=0;r.forEach(e=>{if(e.id){let t=Sy(Ux,`artifacts`,Wx,`public`,`data`,`school_forms`,e.id);i.set(t,e,{merge:!0}),a++}}),await i.commit(),cS(Ux,Wx,e,sS.IMPORT,`JSON  ${a} `),wt(``,`/ ${a}  ()`)}catch(e){console.error(`JSON Import Error:`,e),wt(``,``,`danger`)}}})}catch{wt(``,` JSON `,`danger`)}t.target.value=``},i.readAsText(r),t.target.value=``},wt=(e,t,n=`info`)=>ue({isOpen:!0,type:`alert`,title:e,message:t,alertType:n}),Tt=(e,t,n)=>ue({isOpen:!0,type:`confirm`,title:e,message:t,onConfirm:n}),Et=(t,n)=>{if(t===`edit`)pt(n);else if(t===`delete`)ue({isOpen:!0,type:`confirm`,title:``,message:``,onConfirm:async()=>{await Ab(Sy(Ux,`artifacts`,Wx,`public`,`data`,`school_forms`,n.id)),cS(Ux,Wx,e,sS.DELETE,`${n.serialId} (${n.applicant})`)}});else if(t===`revert`){let t=qx[n.status];t&&ue({isOpen:!0,type:`action`,title:``,message:``,showNoteInput:!0,noteRequired:!0,onConfirm:async({note:r})=>{let i=new Date().toISOString();await kb(Sy(Ux,`artifacts`,Wx,`public`,`data`,`school_forms`,n.id),{status:t,logs:[...n.logs||[],{status:t,timestamp:i,note:`${Kx[t].label} [: ${r}]`,operator:tS(e)}],updatedAt:Ub()}),cS(Ux,Wx,e,sS.STATUS_CHANGE,` ${n.serialId}  ${Kx[t].label}${r}`)}})}else if(t===`advance`){let t=Kx[n.status];t&&t.nextAction&&ue({isOpen:!0,type:`action`,title:`${t.nextAction}`,message:`${t.nextAction}`,showPickupInput:t.requirePickupName,onConfirm:async({note:t,pickupName:r})=>{let i=null,a=Object.keys(Kx),o=a.indexOf(n.status);if(o!==-1&&o<a.length-1&&(i=a[o+1]),i){let a=new Date().toISOString(),o={status:i,logs:[...n.logs||[],{status:i,timestamp:a,note:t?`${Kx[i].label} [: ${t}]`:Kx[i].label,operator:tS(e)}],updatedAt:Ub(),[`time_${i}`]:a};r&&(o.receiverName=r),await kb(Sy(Ux,`artifacts`,Wx,`public`,`data`,`school_forms`,n.id),o),cS(Ux,Wx,e,sS.STATUS_CHANGE,` ${n.serialId}  ${Kx[i].label}${t?`:`+t:``}`)}}})}};return i?(0,$.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-slate-100`,children:(0,$.jsx)(hx,{className:`text-blue-600 animate-spin`,size:40})}):e?(0,$.jsxs)(`div`,{className:`min-h-screen bg-slate-100 text-slate-800 font-sans`,children:[(0,$.jsx)(vS,{modal:le,onClose:()=>ue({...le,isOpen:!1}),onConfirm:le.onConfirm}),(0,$.jsx)(hS,{isOpen:pe,onClose:()=>me(!1),forms:n,onDeleteMonth:ht,onExport:()=>{Ce(`completed`),w(!0)},statusSteps:Kx}),(0,$.jsx)(gS,{isOpen:he,onClose:()=>ge(!1),forms:n,onDeleteMonth:ht}),(0,$.jsx)(xS,{isOpen:T,onClose:()=>_e(!1),db:Ux,appId:Wx}),(0,$.jsx)(mS,{isOpen:f,onClose:()=>p(!1),initialData:{units:o,projects:c,vendors:u},onSave:()=>{},db:Ux,appId:Wx,openAlert:wt,openConfirm:Tt}),(0,$.jsx)(_S,{isOpen:de,onClose:_t,onConfirm:yt,mode:Se,setMode:Ce,startDate:ve,setStartDate:ye,endDate:be,setEndDate:xe}),C&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 border border-slate-200`,children:[(0,$.jsxs)(`div`,{className:`text-center mb-6`,children:[(0,$.jsx)(`div`,{className:`bg-blue-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-600`,children:(0,$.jsx)(gx,{size:32})}),(0,$.jsx)(`h3`,{className:`text-2xl font-bold text-slate-800`,children:``}),(0,$.jsx)(`p`,{className:`text-slate-500 mt-2`,children:``})]}),(0,$.jsxs)(`div`,{className:`space-y-3 mb-6`,children:[(0,$.jsxs)(`button`,{onClick:()=>bt(`json`),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 border-blue-100 bg-blue-50/50 hover:bg-blue-100 hover:border-blue-300 transition-all group text-left`,children:[(0,$.jsx)(`div`,{className:`bg-white p-3 rounded-lg shadow-sm text-blue-600 group-hover:scale-110 transition-transform`,children:(0,$.jsx)(_x,{size:28})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`font-bold text-slate-800 text-lg`,children:` (JSON)`}),(0,$.jsx)(`div`,{className:`text-sm text-slate-500`,children:``})]})]}),(0,$.jsxs)(`button`,{onClick:()=>bt(`csv`),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 border-slate-100 hover:bg-slate-50 hover:border-slate-300 transition-all group text-left`,children:[(0,$.jsx)(`div`,{className:`bg-white p-3 rounded-lg shadow-sm text-emerald-600 group-hover:scale-110 transition-transform`,children:(0,$.jsx)(vx,{size:28})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`font-bold text-slate-800 text-lg`,children:` (CSV)`}),(0,$.jsx)(`div`,{className:`text-sm text-slate-500`,children:`Excel `})]})]})]}),(0,$.jsx)(`button`,{onClick:()=>w(!1),className:`w-full py-3 text-slate-400 font-bold hover:text-slate-600 hover:bg-slate-50 rounded-xl transition-colors`,children:``})]})}),E&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto p-6 border border-blue-200`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-center mb-6 pb-4 border-b`,children:[(0,$.jsxs)(`h3`,{className:`font-bold text-lg flex items-center gap-2 text-blue-800`,children:[Ue?(0,$.jsx)(Dx,{size:20}):(0,$.jsx)(ix,{size:20}),Ue?``:``]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsxs)(`div`,{className:`bg-blue-50 text-blue-700 px-3 py-1.5 rounded-full text-xs font-mono border border-blue-100`,children:[``,Re]}),(0,$.jsx)(`button`,{onClick:()=>He(!1),className:`text-slate-400 hover:text-slate-600`,children:(0,$.jsx)(Bx,{size:24})})]})]}),(0,$.jsxs)(`form`,{onSubmit:mt,className:`space-y-4`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-12 gap-4`,children:[(0,$.jsxs)(`div`,{className:`col-span-12 md:col-span-3`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` *`}),(0,$.jsxs)(`select`,{value:we,onChange:e=>Te(e.target.value),className:`w-full p-2 border rounded-lg bg-white h-12`,required:!0,children:[(0,$.jsx)(`option`,{value:``,disabled:!0,children:`...`}),o.map((e,t)=>(0,$.jsx)(`option`,{value:e,children:String(e)},t))]})]}),(0,$.jsxs)(`div`,{className:`col-span-12 md:col-span-3`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:``,value:Ee,onChange:e=>De(e.target.value),className:`w-full p-2 border rounded-lg h-12`,required:!0})]}),(0,$.jsxs)(`div`,{className:`col-span-12 md:col-span-6`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` ()`}),qe?(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`input`,{type:`text`,value:Oe,onChange:e=>ke(e.target.value),placeholder:`...`,className:`w-full p-2 border rounded-lg h-12`,autoFocus:!0}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>{Je(!1),ke(``)},className:`p-2 text-gray-500 hover:bg-gray-100 rounded h-12 w-12 flex items-center justify-center`,children:(0,$.jsx)(Bx,{size:20})})]}):(0,$.jsx)(fS,{options:c,value:Oe,onChange:e=>ke(e),placeholder:`...`,onCustomClick:e=>{Je(!0),ke(e||``)}})]})]}),(0,$.jsxs)(`div`,{className:`flex flex-col md:flex-row gap-4`,children:[(0,$.jsxs)(`div`,{className:`w-full md:w-[70%]`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` ()`}),D?(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`input`,{type:`text`,value:Ae,onChange:e=>je(e.target.value),placeholder:`...`,className:`w-full p-2 border rounded-lg h-12`,autoFocus:!0}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>{Ye(!1),je(``)},className:`p-2 text-gray-500 hover:bg-gray-100 rounded h-12 w-12 flex items-center justify-center`,children:(0,$.jsx)(Bx,{size:20})})]}):(0,$.jsx)(fS,{options:u,value:Ae,onChange:e=>je(e),placeholder:`...`,onCustomClick:e=>{Ye(!0),je(e||``)}})]}),(0,$.jsxs)(`div`,{className:`w-full md:w-[30%]`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` ()`}),(0,$.jsx)(dS,{value:Pe,onChange:Fe})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` ()`}),(0,$.jsx)(`input`,{type:`text`,placeholder:``,value:Me,onChange:e=>Ne(e.target.value),className:`w-full p-2 border rounded-lg h-12`})]}),(0,$.jsx)(`div`,{className:`flex items-center`,children:(0,$.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer bg-red-50 px-3 py-2 rounded border border-red-100 h-12`,children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:Ie,onChange:e=>Le(e.target.checked),className:`w-5 h-5 text-red-600 rounded`}),(0,$.jsx)(`span`,{className:`text-sm font-bold ${Ie?`text-red-600`:`text-slate-500`}`,children:Ie?` `:``})]})}),(0,$.jsxs)(`div`,{className:`bg-slate-50 p-4 rounded-xl border border-slate-200`,children:[(0,$.jsxs)(`label`,{className:`block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2`,children:[(0,$.jsx)(Nx,{size:16}),` `]}),(0,$.jsx)(`div`,{className:`space-y-3`,children:Be.map((e,t)=>(0,$.jsxs)(`div`,{className:`group relative flex flex-col md:flex-row gap-3 bg-white p-4 rounded-xl border border-slate-200 shadow-sm transition-all hover:border-blue-300`,children:[(0,$.jsxs)(`div`,{className:`hidden md:flex items-center justify-center w-6 text-slate-400 font-mono text-sm self-center`,children:[t+1,`.`]}),(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`label`,{className:`block md:hidden text-xs font-bold text-slate-500 mb-1`,children:``}),(0,$.jsx)(`input`,{type:`text`,placeholder:` *`,value:e.subject,onChange:e=>ut(t,`subject`,e.target.value),className:`w-full p-3 border border-slate-300 rounded-lg text-base focus:ring-2 focus:ring-blue-500 outline-none transition-all placeholder:text-slate-300`,required:!0})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 w-full md:w-auto`,children:[(0,$.jsxs)(`div`,{className:`w-28 shrink-0`,children:[(0,$.jsx)(`label`,{className:`block md:hidden text-xs font-bold text-slate-500 mb-1`,children:``}),(0,$.jsx)(`input`,{type:`number`,placeholder:` *`,value:e.quantity,onChange:e=>ut(t,`quantity`,e.target.value),className:`w-full p-3 border border-slate-300 rounded-lg text-center text-base focus:ring-2 focus:ring-blue-500 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none`,required:!0})]}),(0,$.jsxs)(`div`,{className:`w-20 shrink-0`,children:[(0,$.jsx)(`label`,{className:`block md:hidden text-xs font-bold text-slate-500 mb-1`,children:``}),(0,$.jsx)(`input`,{type:`text`,placeholder:``,value:e.measureUnit,onChange:e=>ut(t,`measureUnit`,e.target.value),className:`w-full p-3 border border-slate-300 rounded-lg text-center text-base focus:ring-2 focus:ring-blue-500 outline-none`})]}),(0,$.jsxs)(`div`,{className:`flex-1 md:w-40`,children:[(0,$.jsx)(`label`,{className:`block md:hidden text-xs font-bold text-slate-500 mb-1`,children:``}),(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(`span`,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-slate-400`,children:`$`}),(0,$.jsx)(`input`,{type:`number`,placeholder:` *`,value:e.unitPrice,onChange:e=>ut(t,`unitPrice`,e.target.value),className:`w-full pl-6 pr-3 py-3 border border-slate-300 rounded-lg text-right text-base focus:ring-2 focus:ring-blue-500 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none`,required:!0})]})]})]}),(0,$.jsxs)(`div`,{className:`flex items-center justify-between md:justify-end gap-4 mt-2 md:mt-0 pt-2 md:pt-0 border-t md:border-t-0 border-slate-100 w-full md:w-auto`,children:[(0,$.jsx)(`div`,{className:`md:hidden text-sm text-slate-500 font-medium`,children:``}),(0,$.jsxs)(`div`,{className:`text-lg font-bold text-blue-600 w-24 text-right`,children:[`$`,((parseInt(e.quantity)||0)*(parseInt(e.unitPrice)||0)).toLocaleString()]}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>lt(t),className:`p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all ${Be.length===1?`invisible`:``}`,title:``,children:(0,$.jsx)(Bx,{size:20})})]})]},e.id))}),(0,$.jsxs)(`div`,{className:`flex justify-between items-center mt-4 pt-4 border-t border-slate-200`,children:[(0,$.jsxs)(`button`,{type:`button`,onClick:ct,className:`text-sm text-blue-600 flex items-center gap-1 font-bold hover:underline`,children:[(0,$.jsx)(kx,{size:16}),` `]}),(0,$.jsxs)(`div`,{className:`text-xl font-black`,children:[`: `,(0,$.jsxs)(`span`,{className:`text-blue-600`,children:[`$`,nt.toLocaleString()]})]})]})]}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2 pt-2`,children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>He(!1),className:`px-6 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg h-12`,disabled:Xe,children:``}),(0,$.jsx)(`button`,{type:`submit`,className:`px-8 py-2 text-white rounded-lg font-bold shadow-md flex items-center gap-2 ${Xe?`bg-gray-400 cursor-not-allowed`:`bg-blue-600 hover:bg-blue-700`} h-12`,disabled:Xe,children:Xe?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(wx,{className:`animate-spin`,size:20}),`...`]}):Ue?``:` ()`})]})]})]})}),(0,$.jsxs)(`div`,{className:`max-w-7xl mx-auto p-4 md:p-6 text-center`,children:[(0,$.jsxs)(`header`,{className:`mb-6 flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl shadow-sm`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`div`,{className:`p-2 bg-blue-600 text-white rounded-lg`,children:(0,$.jsx)(yx,{size:24})}),(0,$.jsx)(`h1`,{className:`text-xl font-bold`,children:``})]}),(0,$.jsxs)(`div`,{className:`flex flex-wrap gap-2 justify-center md:justify-end`,children:[(0,$.jsxs)(`label`,{className:`flex items-center gap-2 bg-slate-50 border px-2 md:px-3 py-2 rounded-lg cursor-pointer hover:bg-slate-100 text-xs md:text-sm font-medium transition-colors h-auto md:h-10`,children:[(0,$.jsx)(Lx,{size:16}),`  `,(0,$.jsx)(`input`,{type:`file`,accept:`.json`,className:`hidden`,onChange:Ct})]}),(0,$.jsxs)(`button`,{onClick:()=>_e(!0),className:`flex items-center gap-2 bg-slate-600 text-white px-2 md:px-3 py-2 rounded-lg hover:bg-slate-700 text-xs md:text-sm font-bold transition-colors h-auto md:h-10`,title:``,children:[(0,$.jsx)(tx,{size:16}),` `]}),e&&SS.includes(e.email)&&(0,$.jsx)(`button`,{onClick:St,className:`p-2 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 text-red-600 h-10 w-10 flex items-center justify-center`,title:``,children:(0,$.jsx)(zx,{size:20})}),(0,$.jsx)(`button`,{onClick:()=>p(!0),className:`p-2 bg-white border rounded-lg hover:bg-slate-50 h-10 w-10 flex items-center justify-center`,children:(0,$.jsx)(Mx,{size:20})}),(0,$.jsx)(`button`,{onClick:at,className:`p-2 bg-white border rounded-lg hover:bg-red-50 text-red-500 h-10 w-10 flex items-center justify-center`,title:``,children:(0,$.jsx)(Ex,{size:20})}),(0,$.jsxs)(`button`,{onClick:ft,className:`flex items-center gap-2 bg-blue-600 text-white px-3 md:px-4 py-2 rounded-lg hover:bg-blue-700 shadow-md font-bold transition-all h-auto md:h-10 text-xs md:text-base`,children:[(0,$.jsx)(kx,{size:18}),` `]})]})]}),(0,$.jsxs)(`div`,{className:`mb-6 bg-white p-4 rounded-xl shadow-sm space-y-4`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col md:flex-row gap-4 items-stretch`,children:[(0,$.jsxs)(`div`,{className:`relative flex-1`,children:[(0,$.jsx)(jx,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-slate-400`,size:18}),(0,$.jsx)(`input`,{type:`text`,placeholder:`...`,value:h,onChange:e=>g(e.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 bg-white shadow-sm focus:ring-2 focus:ring-blue-500 outline-none h-12`})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 items-center flex-wrap md:flex-nowrap`,children:[(0,$.jsxs)(`select`,{value:b,onChange:e=>x(e.target.value),className:`w-full md:w-auto p-2.5 border border-slate-200 rounded-xl font-bold text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none h-12 bg-slate-50`,children:[(0,$.jsx)(`option`,{value:`all`,children:` `}),m.map(e=>(0,$.jsx)(`option`,{value:e.value,children:e.label},e.value))]}),(0,$.jsxs)(`button`,{onClick:()=>oe(!ae),className:`flex items-center gap-2 px-3 md:px-4 py-2 rounded-xl border font-medium transition-all h-12 whitespace-nowrap ${ae?`bg-red-50 border-red-200 text-red-600 shadow-sm`:`bg-white text-slate-600 border-slate-200 shadow-sm`}`,children:[(0,$.jsx)(bx,{size:18,className:ae?`fill-red-600`:``}),ae?``:``]})]})]}),(0,$.jsxs)(`div`,{className:`flex flex-col md:flex-row gap-4 items-center border-t border-slate-100 pt-4`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2 w-full md:w-auto text-sm text-slate-500 font-bold whitespace-nowrap`,children:[(0,$.jsx)(Sx,{size:16}),` :`]}),(0,$.jsxs)(`div`,{className:`flex flex-wrap gap-2 w-full items-center`,children:[(0,$.jsxs)(`select`,{value:ee,onChange:e=>te(e.target.value),className:`p-2 border border-slate-200 rounded-lg text-sm h-10 bg-white min-w-[120px]`,children:[(0,$.jsx)(`option`,{value:`all`,children:``}),u.map((e,t)=>(0,$.jsx)(`option`,{value:e,children:e},t))]}),(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsxs)(`select`,{value:v,onChange:e=>y(e.target.value),className:`appearance-none bg-white border border-slate-200 text-slate-700 py-2 pl-3 pr-8 rounded-lg text-sm h-10 font-medium`,children:[(0,$.jsx)(`option`,{value:`all`,children:``}),(0,$.jsx)(`option`,{value:`phase1`,children:` ()`}),(0,$.jsx)(`option`,{value:`phase2`,children:` ()`}),(0,$.jsx)(`option`,{value:`phase3`,children:` ()`})]}),(0,$.jsx)(`div`,{className:`pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-slate-500`,children:(0,$.jsx)(Sx,{size:12})})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 bg-slate-50 px-2 py-1 rounded-lg border border-slate-200 ml-auto md:ml-0`,children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400`,children:`:`}),(0,$.jsx)(`input`,{type:`date`,value:S,onChange:e=>ne(e.target.value),className:`bg-transparent text-sm outline-none w-28 text-slate-600`}),(0,$.jsx)(`span`,{className:`text-slate-300`,children:`-`}),(0,$.jsx)(`input`,{type:`date`,value:re,onChange:e=>ie(e.target.value),className:`bg-transparent text-sm outline-none w-28 text-slate-600`}),(S||re)&&(0,$.jsx)(`button`,{onClick:()=>{ne(``),ie(``)},className:`text-slate-400 hover:text-red-500`,children:(0,$.jsx)(Bx,{size:14})})]})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 ml-auto`,children:[v===`phase3`&&(0,$.jsxs)(`button`,{onClick:xt,className:`flex items-center gap-1 px-3 bg-indigo-50 text-indigo-600 border border-indigo-100 rounded-lg hover:bg-indigo-100 font-bold transition-all h-10 whitespace-nowrap text-sm`,children:[(0,$.jsx)(xx,{size:16}),` `]}),(0,$.jsxs)(`button`,{onClick:gt,className:`flex items-center gap-1 px-3 bg-emerald-50 text-emerald-600 border border-emerald-100 rounded-lg hover:bg-emerald-100 font-bold transition-all h-10 whitespace-nowrap text-sm`,children:[(0,$.jsx)(gx,{size:16}),` `]})]})]})]}),(0,$.jsx)(`div`,{className:`space-y-4`,children:i?(0,$.jsxs)(`div`,{className:`bg-white p-12 rounded-2xl text-center shadow-sm`,children:[(0,$.jsx)(hx,{className:`mx-auto mb-4 text-blue-200 animate-spin`,size:40}),(0,$.jsx)(`p`,{className:`text-slate-400 font-medium`,children:`...`})]}):ot.length===0?(0,$.jsxs)(`div`,{className:`bg-white p-20 rounded-2xl text-center shadow-sm border border-dashed border-slate-300`,children:[(0,$.jsx)(yx,{className:`mx-auto mb-4 text-slate-200`,size:48}),(0,$.jsx)(`p`,{className:`text-slate-400`,children:``})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`hidden md:block bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden`,children:(0,$.jsxs)(`table`,{className:`w-full text-left table-fixed`,children:[(0,$.jsx)(`thead`,{className:`bg-slate-50 text-sm text-slate-600 font-bold border-b`,children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{className:`p-4 w-12 text-center`,children:`#`}),(0,$.jsx)(`th`,{className:`p-4 w-32 lg:w-1/6`,children:`/`}),(0,$.jsx)(`th`,{className:`p-4 w-1/3`,children:`/`}),(0,$.jsx)(`th`,{className:`p-4 whitespace-nowrap`,children:`/`}),(0,$.jsx)(`th`,{className:`p-4 whitespace-nowrap`,children:``}),(0,$.jsx)(`th`,{className:`p-4 w-14`})]})}),(0,$.jsx)(`tbody`,{className:`divide-y divide-slate-100`,children:ot.map(e=>(0,$.jsx)(yS,{form:e,expandedId:se,setExpandedId:ce,onAction:Et},e.id))})]})}),(0,$.jsx)(`div`,{className:`block md:hidden space-y-3`,children:ot.map(e=>(0,$.jsx)(bS,{form:e,expandedId:se,setExpandedId:ce,onAction:Et},e.id))})]})})]})]}):(0,$.jsx)(uS,{onLogin:rt,loading:Qe,error:et,isPreview:!1,onAnonymousLogin:it})}g.createRoot(document.getElementById(`root`)).render((0,$.jsx)(_.StrictMode,{children:(0,$.jsx)(CS,{})}));