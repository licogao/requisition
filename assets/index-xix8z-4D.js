var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var l=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var ee=Array.isArray;function te(){}var S={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function re(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function ie(e,t){return re(e.type,t,e.props)}function ae(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function oe(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var se=/\/+/g;function ce(e,t){return typeof e==`object`&&e&&e.key!=null?oe(``+e.key):t.toString(36)}function le(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(te,te):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function ue(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,ue(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+ce(e,0):a,ee(o)?(i=``,c!=null&&(i=c.replace(se,`$&/`)+`/`),ue(o,r,i,``,function(e){return e})):o!=null&&(ae(o)&&(o=ie(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(se,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(ee(e))for(var u=0;u<e.length;u++)a=e[u],s=l+ce(a,u),c+=ue(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+ce(a,u++),c+=ue(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return ue(le(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function C(e,t,n){if(e==null)return e;var r=[],i=0;return ue(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function de(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var w=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},T={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!ae(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=T,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!ne.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return re(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)ne.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return re(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=ae,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:de}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(te,w)}catch(e){w(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),S.T=t}},e.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},e.use=function(e){return S.H.use(e)},e.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},e.useCallback=function(e,t){return S.H.useCallback(e,t)},e.useContext=function(e){return S.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return S.H.useEffect(e,t)},e.useEffectEvent=function(e){return S.H.useEffectEvent(e)},e.useId=function(){return S.H.useId()},e.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return S.H.useMemo(e,t)},e.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},e.useRef=function(e){return S.H.useRef(e)},e.useState=function(e){return S.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return S.H.useTransition()},e.version=`19.2.3`})),u=o(((e,t)=>{t.exports=l()})),d=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,ee||(ee=!0,ae());else{var t=n(l);t!==null&&ce(x,t.startTime-e)}}var ee=!1,te=-1,S=5,ne=-1;function re(){return g?!0:!(e.unstable_now()-ne<S)}function ie(){if(g=!1,ee){var t=e.unstable_now();ne=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(te),te=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&re());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&ce(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?ae():ee=!1}}}var ae;if(typeof y==`function`)ae=function(){y(ie)};else if(typeof MessageChannel<`u`){var oe=new MessageChannel,se=oe.port2;oe.port1.onmessage=ie,ae=function(){se.postMessage(null)}}else ae=function(){_(ie,0)};function ce(t,n){te=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(te),te=-1):h=!0,ce(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,ee||(ee=!0,ae()))),r},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),f=o(((e,t)=>{t.exports=d()})),p=o((e=>{var t=u();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.3`})),m=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=p()})),h=o((e=>{var t=f(),n=u(),r=m();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function d(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),ee=Symbol.for(`react.consumer`),te=Symbol.for(`react.context`),S=Symbol.for(`react.forward_ref`),ne=Symbol.for(`react.suspense`),re=Symbol.for(`react.suspense_list`),ie=Symbol.for(`react.memo`),ae=Symbol.for(`react.lazy`),oe=Symbol.for(`react.activity`),se=Symbol.for(`react.memo_cache_sentinel`),ce=Symbol.iterator;function le(e){return typeof e!=`object`||!e?null:(e=ce&&e[ce]||e[`@@iterator`],typeof e==`function`?e:null)}var ue=Symbol.for(`react.client.reference`);function C(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===ue?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case ne:return`Suspense`;case re:return`SuspenseList`;case oe:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case te:return e.displayName||`Context`;case ee:return(e._context.displayName||`Context`)+`.Consumer`;case S:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case ie:return t=e.displayName||null,t===null?C(e.type)||`Memo`:t;case ae:t=e._payload,e=e._init;try{return C(e(t))}catch{}}return null}var de=Array.isArray,w=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},pe=[],me=-1;function he(e){return{current:e}}function E(e){0>me||(e.current=pe[me],pe[me]=null,me--)}function D(e,t){me++,pe[me]=e.current,e.current=t}var ge=he(null),_e=he(null),ve=he(null),ye=he(null);function be(e,t){switch(D(ve,t),D(_e,e),D(ge,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Wd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Wd(t),e=Gd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}E(ge),D(ge,e)}function xe(){E(ge),E(_e),E(ve)}function Se(e){e.memoizedState!==null&&D(ye,e);var t=ge.current,n=Gd(t,e.type);t!==n&&(D(_e,e),D(ge,n))}function Ce(e){_e.current===e&&(E(ge),E(_e)),ye.current===e&&(E(ye),tp._currentValue=fe)}var we,Te;function Ee(e){if(we===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);we=t&&t[1]||``,Te=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+we+e+Te}var De=!1;function Oe(e,t){if(!e||De)return``;De=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{De=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?Ee(n):``}function ke(e,t){switch(e.tag){case 26:case 27:case 5:return Ee(e.type);case 16:return Ee(`Lazy`);case 13:return e.child!==t&&t!==null?Ee(`Suspense Fallback`):Ee(`Suspense`);case 19:return Ee(`SuspenseList`);case 0:case 15:return Oe(e.type,!1);case 11:return Oe(e.type.render,!1);case 1:return Oe(e.type,!0);case 31:return Ee(`Activity`);default:return``}}function Ae(e){try{var t=``,n=null;do t+=ke(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var je=Object.prototype.hasOwnProperty,Me=t.unstable_scheduleCallback,Ne=t.unstable_cancelCallback,Pe=t.unstable_shouldYield,Fe=t.unstable_requestPaint,Ie=t.unstable_now,Le=t.unstable_getCurrentPriorityLevel,Re=t.unstable_ImmediatePriority,ze=t.unstable_UserBlockingPriority,O=t.unstable_NormalPriority,Be=t.unstable_LowPriority,Ve=t.unstable_IdlePriority,He=t.log,Ue=t.unstable_setDisableYieldValue,We=null,Ge=null;function Ke(e){if(typeof He==`function`&&Ue(e),Ge&&typeof Ge.setStrictMode==`function`)try{Ge.setStrictMode(We,e)}catch{}}var k=Math.clz32?Math.clz32:Ye,qe=Math.log,Je=Math.LN2;function Ye(e){return e>>>=0,e===0?32:31-(qe(e)/Je|0)|0}var Xe=256,Ze=262144,Qe=4194304;function $e(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function et(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=$e(n))):i=$e(o):i=$e(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=$e(n))):i=$e(o)):i=$e(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function tt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function nt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rt(){var e=Qe;return Qe<<=1,!(Qe&62914560)&&(Qe=4194304),e}function it(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function at(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ot(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-k(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&st(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function st(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-k(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function ct(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-k(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function lt(e,t){var n=t&-t;return n=n&42?1:ut(n),(n&(e.suspendedLanes|t))===0?n:0}function ut(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function dt(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ft(){var e=T.p;return e===0?(e=window.event,e===void 0?32:_p(e.type)):e}function pt(e,t){var n=T.p;try{return T.p=e,t()}finally{T.p=n}}var mt=Math.random().toString(36).slice(2),ht=`__reactFiber$`+mt,gt=`__reactProps$`+mt,_t=`__reactContainer$`+mt,vt=`__reactEvents$`+mt,yt=`__reactListeners$`+mt,bt=`__reactHandles$`+mt,xt=`__reactResources$`+mt,St=`__reactMarker$`+mt;function Ct(e){delete e[ht],delete e[gt],delete e[vt],delete e[yt],delete e[bt]}function wt(e){var t=e[ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_t]||n[ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mf(e);e!==null;){if(n=e[ht])return n;e=mf(e)}return t}e=n,n=e.parentNode}return null}function Tt(e){if(e=e[ht]||e[_t]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Et(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Dt(e){var t=e[xt];return t||=e[xt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function Ot(e){e[St]=!0}var kt=new Set,At={};function jt(e,t){Mt(e,t),Mt(e+`Capture`,t)}function Mt(e,t){for(At[e]=t,e=0;e<t.length;e++)kt.add(t[e])}var Nt=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Pt={},Ft={};function It(e){return je.call(Ft,e)?!0:je.call(Pt,e)?!1:Nt.test(e)?Ft[e]=!0:(Pt[e]=!0,!1)}function Lt(e,t,n){if(It(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Rt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function zt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function A(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Bt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Vt(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ht(e){if(!e._valueTracker){var t=Bt(e)?`checked`:`value`;e._valueTracker=Vt(e,t,``+e[t])}}function Ut(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Bt(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Wt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var Gt=/[\n"\\]/g;function Kt(e){return e.replace(Gt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function qt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+A(t)):e.value!==``+A(t)&&(e.value=``+A(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Yt(e,o,A(n)):Yt(e,o,A(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+A(s):e.removeAttribute(`name`)}function Jt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Ht(e);return}n=n==null?``:``+A(n),t=t==null?n:``+A(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Ht(e)}function Yt(e,t,n){t===`number`&&Wt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+A(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Zt(e,t,n){if(t!=null&&(t=``+A(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+A(n)}function Qt(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(de(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=A(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Ht(e)}function $t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var en=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function tn(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||en.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function nn(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&tn(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&tn(e,o,t[o])}function rn(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var an=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),on=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sn(e){return on.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function cn(){}var ln=null;function un(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dn=null,fn=null;function pn(e){var t=Tt(e);if(t&&(e=t.stateNode)){var n=e[gt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(qt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Kt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[gt]||null;if(!a)throw Error(i(90));qt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Ut(r)}break a;case`textarea`:Zt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Xt(e,!!n.multiple,t,!1)}}}var mn=!1;function hn(e,t,n){if(mn)return e(t,n);mn=!0;try{return e(t)}finally{if(mn=!1,(dn!==null||fn!==null)&&(xu(),dn&&(t=dn,e=fn,fn=dn=null,pn(t),e)))for(t=0;t<e.length;t++)pn(e[t])}}function gn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[gt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var _n=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),vn=!1;if(_n)try{var yn={};Object.defineProperty(yn,`passive`,{get:function(){vn=!0}}),window.addEventListener(`test`,yn,yn),window.removeEventListener(`test`,yn,yn)}catch{vn=!1}var bn=null,xn=null,Sn=null;function Cn(){if(Sn)return Sn;var e,t=xn,n=t.length,r,i=`value`in bn?bn.value:bn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Sn=i.slice(e,1<r?1-r:void 0)}function wn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tn(){return!0}function En(){return!1}function Dn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?Tn:En,this.isPropagationStopped=En,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=Tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=Tn)},persist:function(){},isPersistent:Tn}),t}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kn=Dn(On),An=h({},On,{view:0,detail:0}),jn=Dn(An),Mn,Nn,Pn,Fn=h({},An,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Pn&&(Pn&&e.type===`mousemove`?(Mn=e.screenX-Pn.screenX,Nn=e.screenY-Pn.screenY):Nn=Mn=0,Pn=e),Mn)},movementY:function(e){return`movementY`in e?e.movementY:Nn}}),In=Dn(Fn),Ln=Dn(h({},Fn,{dataTransfer:0})),Rn=Dn(h({},An,{relatedTarget:0})),zn=Dn(h({},On,{animationName:0,elapsedTime:0,pseudoElement:0})),Bn=Dn(h({},On,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Vn=Dn(h({},On,{data:0})),Hn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Un={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Wn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wn[e])?!!t[e]:!1}function Kn(){return Gn}var qn=Dn(h({},An,{key:function(e){if(e.key){var t=Hn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=wn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Un[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kn,charCode:function(e){return e.type===`keypress`?wn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?wn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Jn=Dn(h({},Fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Yn=Dn(h({},An,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kn})),Xn=Dn(h({},On,{propertyName:0,elapsedTime:0,pseudoElement:0})),j=Dn(h({},Fn,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Zn=Dn(h({},On,{newState:0,oldState:0})),Qn=[9,13,27,32],$n=_n&&`CompositionEvent`in window,M=null;_n&&`documentMode`in document&&(M=document.documentMode);var er=_n&&`TextEvent`in window&&!M,N=_n&&(!$n||M&&8<M&&11>=M),P=` `,F=!1;function I(e,t){switch(e){case`keyup`:return Qn.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function tr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var nr=!1;function rr(e,t){switch(e){case`compositionend`:return tr(t);case`keypress`:return t.which===32?(F=!0,P):null;case`textInput`:return e=t.data,e===P&&F?null:e;default:return null}}function ir(e,t){if(nr)return e===`compositionend`||!$n&&I(e,t)?(e=Cn(),Sn=xn=bn=null,nr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return N&&t.locale!==`ko`?null:t.data;default:return null}}var ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!ar[e.type]:t===`textarea`}function sr(e,t,n,r){dn?fn?fn.push(r):fn=[r]:dn=r,t=Od(t,`onChange`),0<t.length&&(n=new kn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var cr=null,lr=null;function ur(e){xd(e,0)}function L(e){if(Ut(Et(e)))return e}function dr(e,t){if(e===`change`)return t}var fr=!1;if(_n){var pr;if(_n){var mr=`oninput`in document;if(!mr){var hr=document.createElement(`div`);hr.setAttribute(`oninput`,`return;`),mr=typeof hr.oninput==`function`}pr=mr}else pr=!1;fr=pr&&(!document.documentMode||9<document.documentMode)}function gr(){cr&&(cr.detachEvent(`onpropertychange`,_r),lr=cr=null)}function _r(e){if(e.propertyName===`value`&&L(lr)){var t=[];sr(t,lr,e,un(e)),hn(ur,t)}}function vr(e,t,n){e===`focusin`?(gr(),cr=t,lr=n,cr.attachEvent(`onpropertychange`,_r)):e===`focusout`&&gr()}function yr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return L(lr)}function br(e,t){if(e===`click`)return L(t)}function xr(e,t){if(e===`input`||e===`change`)return L(t)}function R(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Sr=typeof Object.is==`function`?Object.is:R;function Cr(e,t){if(Sr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!je.call(t,i)||!Sr(e[i],t[i]))return!1}return!0}function wr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tr(e,t){var n=wr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=wr(n)}}function Er(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Er(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wt(e.document)}return t}function Or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var kr=_n&&`documentMode`in document&&11>=document.documentMode,Ar=null,jr=null,Mr=null,Nr=!1;function Pr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nr||Ar==null||Ar!==Wt(r)||(r=Ar,`selectionStart`in r&&Or(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mr&&Cr(Mr,r)||(Mr=r,r=Od(jr,`onSelect`),0<r.length&&(t=new kn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Ar)))}function z(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Fr={animationend:z(`Animation`,`AnimationEnd`),animationiteration:z(`Animation`,`AnimationIteration`),animationstart:z(`Animation`,`AnimationStart`),transitionrun:z(`Transition`,`TransitionRun`),transitionstart:z(`Transition`,`TransitionStart`),transitioncancel:z(`Transition`,`TransitionCancel`),transitionend:z(`Transition`,`TransitionEnd`)},Ir={},Lr={};_n&&(Lr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),`TransitionEvent`in window||delete Fr.transitionend.transition);function Rr(e){if(Ir[e])return Ir[e];if(!Fr[e])return e;var t=Fr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Lr)return Ir[e]=t[n];return e}var zr=Rr(`animationend`),Br=Rr(`animationiteration`),Vr=Rr(`animationstart`),Hr=Rr(`transitionrun`),Ur=Rr(`transitionstart`),Wr=Rr(`transitioncancel`),Gr=Rr(`transitionend`),Kr=new Map,qr=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);qr.push(`scrollEnd`);function B(e,t){Kr.set(e,t),jt(t,[e])}var Jr=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},Yr=[],Xr=0,Zr=0;function Qr(){for(var e=Xr,t=Zr=Xr=0;t<e;){var n=Yr[t];Yr[t++]=null;var r=Yr[t];Yr[t++]=null;var i=Yr[t];Yr[t++]=null;var a=Yr[t];if(Yr[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&ni(n,i,a)}}function $r(e,t,n,r){Yr[Xr++]=e,Yr[Xr++]=t,Yr[Xr++]=n,Yr[Xr++]=r,Zr|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ei(e,t,n,r){return $r(e,t,n,r),ri(e)}function ti(e,t){return $r(e,null,null,t),ri(e)}function ni(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-k(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function ri(e){if(50<fu)throw fu=0,pu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ii={};function ai(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(e,t,n,r){return new ai(e,t,n,r)}function si(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ci(e,t){var n=e.alternate;return n===null?(n=oi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function li(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ui(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)si(e)&&(s=1);else if(typeof e==`string`)s=Kf(e,n,ge.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case oe:return e=oi(31,n,t,a),e.elementType=oe,e.lanes=o,e;case y:return di(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=oi(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case ne:return e=oi(13,n,t,a),e.elementType=ne,e.lanes=o,e;case re:return e=oi(19,n,t,a),e.elementType=re,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case te:s=10;break a;case ee:s=9;break a;case S:s=11;break a;case ie:s=14;break a;case ae:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=oi(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function di(e,t,n,r){return e=oi(7,e,r,t),e.lanes=n,e}function fi(e,t,n){return e=oi(6,e,null,t),e.lanes=n,e}function pi(e){var t=oi(18,null,null,0);return t.stateNode=e,t}function mi(e,t,n){return t=oi(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var hi=new WeakMap;function gi(e,t){if(typeof e==`object`&&e){var n=hi.get(e);return n===void 0?(t={value:e,source:t,stack:Ae(t)},hi.set(e,t),t):n}return{value:e,source:t,stack:Ae(t)}}var _i=[],vi=0,yi=null,bi=0,xi=[],Si=0,Ci=null,wi=1,Ti=``;function Ei(e,t){_i[vi++]=bi,_i[vi++]=yi,yi=e,bi=t}function Di(e,t,n){xi[Si++]=wi,xi[Si++]=Ti,xi[Si++]=Ci,Ci=e;var r=wi;e=Ti;var i=32-k(r)-1;r&=~(1<<i),n+=1;var a=32-k(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wi=1<<32-k(t)+i|n<<i|r,Ti=a+e}else wi=1<<a|n<<i|r,Ti=e}function Oi(e){e.return!==null&&(Ei(e,1),Di(e,1,0))}function ki(e){for(;e===yi;)yi=_i[--vi],_i[vi]=null,bi=_i[--vi],_i[vi]=null;for(;e===Ci;)Ci=xi[--Si],xi[Si]=null,Ti=xi[--Si],xi[Si]=null,wi=xi[--Si],xi[Si]=null}function Ai(e,t){xi[Si++]=wi,xi[Si++]=Ti,xi[Si++]=Ci,wi=t.id,Ti=t.overflow,Ci=e}var ji=null,Mi=null,V=!1,Ni=null,Pi=!1,Fi=Error(i(519));function Ii(e){throw Hi(gi(Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Fi}function Li(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ht]=e,t[gt]=r,n){case`dialog`:X(`cancel`,t),X(`close`,t);break;case`iframe`:case`object`:case`embed`:X(`load`,t);break;case`video`:case`audio`:for(n=0;n<yd.length;n++)X(yd[n],t);break;case`source`:X(`error`,t);break;case`img`:case`image`:case`link`:X(`error`,t),X(`load`,t);break;case`details`:X(`toggle`,t);break;case`input`:X(`invalid`,t),Jt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:X(`invalid`,t);break;case`textarea`:X(`invalid`,t),Qt(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Pd(t.textContent,n)?(r.popover!=null&&(X(`beforetoggle`,t),X(`toggle`,t)),r.onScroll!=null&&X(`scroll`,t),r.onScrollEnd!=null&&X(`scrollend`,t),r.onClick!=null&&(t.onclick=cn),t=!0):t=!1,t||Ii(e,!0)}function Ri(e){for(ji=e.return;ji;)switch(ji.tag){case 5:case 31:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:ji=ji.return}}function zi(e){if(e!==ji)return!1;if(!V)return Ri(e),V=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Kd(e.type,e.memoizedProps)),n=!n),n&&Mi&&Ii(e),Ri(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Mi=pf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Mi=pf(e)}else t===27?(t=Mi,ef(e.type)?(e=ff,ff=null,Mi=e):Mi=t):Mi=ji?df(e.stateNode.nextSibling):null;return!0}function Bi(){Mi=ji=null,V=!1}function Vi(){var e=Ni;return e!==null&&(Ql===null?Ql=e:Ql.push.apply(Ql,e),Ni=null),e}function Hi(e){Ni===null?Ni=[e]:Ni.push(e)}var Ui=he(null),Wi=null,Gi=null;function Ki(e,t,n){D(Ui,t._currentValue),t._currentValue=n}function qi(e){e._currentValue=Ui.current,E(Ui)}function Ji(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function Yi(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ji(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Ji(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function Xi(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Sr(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===ye.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[tp]:e.push(tp))}a=a.return}e!==null&&Yi(t,e,n,r),t.flags|=262144}function Zi(e){for(e=e.firstContext;e!==null;){if(!Sr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qi(e){Wi=e,Gi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $i(e){return ta(Wi,e)}function ea(e,t){return Wi===null&&Qi(e),ta(e,t)}function ta(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Gi===null){if(e===null)throw Error(i(308));Gi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Gi=Gi.next=t;return n}var na=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ra=t.unstable_scheduleCallback,ia=t.unstable_NormalPriority,aa={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function oa(){return{controller:new na,data:new Map,refCount:0}}function sa(e){e.refCount--,e.refCount===0&&ra(ia,function(){e.controller.abort()})}var ca=null,la=0,ua=0,da=null;function fa(e,t){if(ca===null){var n=ca=[];la=0,ua=pd(),da={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return la++,t.then(pa,pa),t}function pa(){if(--la===0&&ca!==null){da!==null&&(da.status=`fulfilled`);var e=ca;ca=null,ua=0,da=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ma(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var ha=w.S;w.S=function(e,t){tu=Ie(),typeof t==`object`&&t&&typeof t.then==`function`&&fa(e,t),ha!==null&&ha(e,t)};var ga=he(null);function _a(){var e=ga.current;return e===null?Rl.pooledCache:e}function va(e,t){t===null?D(ga,ga.current):D(ga,t.pool)}function ya(){var e=_a();return e===null?null:{parent:aa._currentValue,pool:e}}var ba=Error(i(460)),xa=Error(i(474)),Sa=Error(i(542)),Ca={then:function(){}};function wa(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Ta(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(cn,cn),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,ka(e),e;default:if(typeof t.status==`string`)t.then(cn,cn);else{if(e=Rl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,ka(e),e}throw Da=t,ba}}function Ea(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Da=e,ba):e}}var Da=null;function Oa(){if(Da===null)throw Error(i(459));var e=Da;return Da=null,e}function ka(e){if(e===ba||e===Sa)throw Error(i(483))}var Aa=null,ja=0;function Ma(e){var t=ja;return ja+=1,Aa===null&&(Aa=[]),Ta(Aa,e,t)}function Na(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Pa(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Fa(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=ci(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=fi(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===ae&&Ea(i)===t.type)?(t=a(t,n.props),Na(t,n),t.return=e,t):(t=ui(n.type,n.key,n.props,null,e.mode,r),Na(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=mi(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=di(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=fi(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=ui(t.type,t.key,t.props,null,e.mode,n),Na(n,t),n.return=e,n;case v:return t=mi(t,e.mode,n),t.return=e,t;case ae:return t=Ea(t),f(e,t,n)}if(de(t)||le(t))return t=di(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Ma(t),n);if(t.$$typeof===te)return f(e,ea(e,t),n);Pa(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case ae:return n=Ea(n),p(e,t,n,r)}if(de(n)||le(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Ma(n),r);if(n.$$typeof===te)return p(e,t,ea(e,n),r);Pa(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case ae:return r=Ea(r),m(e,t,n,r,i)}if(de(r)||le(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Ma(r),i);if(r.$$typeof===te)return m(e,t,n,ea(t,r),i);Pa(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),V&&Ei(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return V&&Ei(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),V&&Ei(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),V&&Ei(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return V&&Ei(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),V&&Ei(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===ae&&Ea(l)===r.type){n(e,r.sibling),c=a(r,o.props),Na(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=di(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=ui(o.type,o.key,o.props,null,e.mode,c),Na(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=mi(o,e.mode,c),c.return=e,e=c}return s(e);case ae:return o=Ea(o),b(e,r,o,c)}if(de(o))return h(e,r,o,c);if(le(o)){if(l=le(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Ma(o),c);if(o.$$typeof===te)return b(e,r,ea(e,o),c);Pa(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=fi(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{ja=0;var i=b(e,t,n,r);return Aa=null,i}catch(t){if(t===ba||t===Sa)throw t;var a=oi(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ia=Fa(!0),La=Fa(!1),Ra=!1;function za(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ba(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Va(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ha(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=ri(e),ni(e,null,n),t}return $r(e,r,t,n),ri(e)}function Ua(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ct(e,n)}}function Wa(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ga=!1;function Ka(){if(Ga){var e=da;if(e!==null)throw e}}function qa(e,t,n,r){Ga=!1;var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(Y&f)===f:(r&f)===f){f!==0&&f===ua&&(Ga=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:Ra=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Kl|=o,e.lanes=o,e.memoizedState=d}}function Ja(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function Ya(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ja(n[e],t)}var Xa=he(null),Za=he(0);function Qa(e,t){e=Wl,D(Za,e),D(Xa,t),Wl=e|t.baseLanes}function $a(){D(Za,Wl),D(Xa,Xa.current)}function eo(){Wl=Za.current,E(Xa),E(Za)}var to=he(null),no=null;function ro(e){var t=e.alternate;D(co,co.current&1),D(to,e),no===null&&(t===null||Xa.current!==null||t.memoizedState!==null)&&(no=e)}function io(e){D(co,co.current),D(to,e),no===null&&(no=e)}function ao(e){e.tag===22?(D(co,co.current),D(to,e),no===null&&(no=e)):oo(e)}function oo(){D(co,co.current),D(to,to.current)}function so(e){E(to),no===e&&(no=null),E(co)}var co=he(0);function lo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||cf(n)||lf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=0,H=null,U=null,fo=null,po=!1,mo=!1,ho=!1,go=0,_o=0,vo=null,yo=0;function bo(){throw Error(i(321))}function xo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,a){return uo=a,H=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,w.H=e===null||e.memoizedState===null?Rs:G,ho=!1,a=n(r,i),ho=!1,mo&&(a=wo(t,n,r,i)),Co(e),a}function Co(e){w.H=Ls;var t=U!==null&&U.next!==null;if(uo=0,fo=U=H=null,po=!1,_o=0,vo=null,t)throw Error(i(300));e===null||tc||(e=e.dependencies,e!==null&&Zi(e)&&(tc=!0))}function wo(e,t,n,r){H=e;var a=0;do{if(mo&&(vo=null),_o=0,mo=!1,25<=a)throw Error(i(301));if(a+=1,fo=U=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}w.H=zs,o=t(n,r)}while(mo);return o}function To(){var e=w.H,t=e.useState()[0];return t=typeof t.then==`function`?Mo(t):t,e=e.useState()[0],(U===null?null:U.memoizedState)!==e&&(H.flags|=1024),t}function Eo(){var e=go!==0;return go=0,e}function Do(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Oo(e){if(po){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}po=!1}uo=0,fo=U=H=null,mo=!1,_o=go=0,vo=null}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fo===null?H.memoizedState=fo=e:fo=fo.next=e,fo}function Ao(){if(U===null){var e=H.alternate;e=e===null?null:e.memoizedState}else e=U.next;var t=fo===null?H.memoizedState:fo.next;if(t!==null)fo=t,U=e;else{if(e===null)throw H.alternate===null?Error(i(467)):Error(i(310));U=e,e={memoizedState:U.memoizedState,baseState:U.baseState,baseQueue:U.baseQueue,queue:U.queue,next:null},fo===null?H.memoizedState=fo=e:fo=fo.next=e}return fo}function jo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mo(e){var t=_o;return _o+=1,vo===null&&(vo=[]),e=Ta(vo,e,t),t=H,(fo===null?t.memoizedState:fo.next)===null&&(t=t.alternate,w.H=t===null||t.memoizedState===null?Rs:G),e}function No(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Mo(e);if(e.$$typeof===te)return $i(e)}throw Error(i(438,String(e)))}function Po(e){var t=null,n=H.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=H.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=jo(),H.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=se;return t.index++,n}function Fo(e,t){return typeof t==`function`?t(e):t}function Io(e){return Lo(Ao(),U,e)}function Lo(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(uo&f)===f:(Y&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===ua&&(d=!0);else if((uo&p)===p){u=u.next,p===ua&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,H.lanes|=p,Kl|=p;f=u.action,ho&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,H.lanes|=f,Kl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Sr(o,e.memoizedState)&&(tc=!0,d&&(n=da,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ro(e){var t=Ao(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Sr(o,t.memoizedState)||(tc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function zo(e,t,n){var r=H,a=Ao(),o=V;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Sr((U||a).memoizedState,n);if(s&&(a.memoizedState=n,tc=!0),a=a.queue,ls(Vo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||fo!==null&&fo.memoizedState.tag&1){if(r.flags|=2048,is(9,{destroy:void 0},Bo.bind(null,r,a,n,t),null),Rl===null)throw Error(i(349));o||uo&127||W(r,t,n)}return n}function W(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=H.updateQueue,t===null?(t=jo(),H.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Bo(e,t,n,r){t.value=n,t.getSnapshot=r,Ho(t)&&Uo(e)}function Vo(e,t,n){return n(function(){Ho(t)&&Uo(e)})}function Ho(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Sr(e,n)}catch{return!0}}function Uo(e){var t=ti(e,2);t!==null&&gu(t,e,2)}function Wo(e){var t=ko();if(typeof e==`function`){var n=e;if(e=n(),ho){Ke(!0);try{n()}finally{Ke(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:e},t}function Go(e,t,n,r){return e.baseState=n,Lo(e,U,typeof r==`function`?r:Fo)}function Ko(e,t,n,r,a){if(Ps(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};w.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,qo(t,o)):(o.next=n.next,t.pending=n.next=o)}}function qo(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=w.T,o={};w.T=o;try{var s=n(i,r),c=w.S;c!==null&&c(o,s),Jo(e,t,s)}catch(n){Xo(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),w.T=a}}else try{a=n(i,r),Jo(e,t,a)}catch(n){Xo(e,t,n)}}function Jo(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){Yo(e,t,n)},function(n){return Xo(e,t,n)}):Yo(e,t,n)}function Yo(e,t,n){t.status=`fulfilled`,t.value=n,Zo(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,qo(e,n)))}function Xo(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,Zo(t),t=t.next;while(t!==r)}e.action=null}function Zo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qo(e,t){return t}function $o(e,t){if(V){var n=Rl.formState;if(n!==null){a:{var r=H;if(V){if(Mi){b:{for(var i=Mi,a=Pi;i.nodeType!==8;){if(!a){i=null;break b}if(i=df(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Mi=df(i.nextSibling),r=i.data===`F!`;break a}}Ii(r)}r=!1}r&&(t=n[0])}}return n=ko(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:t},n.queue=r,n=js.bind(null,H,r),r.dispatch=n,r=Wo(!1),a=Ns.bind(null,H,!1,r.queue),r=ko(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=Ko.bind(null,H,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function es(e){return ts(Ao(),U,e)}function ts(e,t,n){if(t=Lo(e,t,Qo)[0],e=Io(Fo)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Mo(t)}catch(e){throw e===ba?Sa:e}else r=t;t=Ao();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(H.flags|=2048,is(9,{destroy:void 0},ns.bind(null,i,n),null)),[r,a,e]}function ns(e,t){e.action=t}function rs(e){var t=Ao(),n=U;if(n!==null)return ts(t,n,e);Ao(),t=t.memoizedState,n=Ao();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function is(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=H.updateQueue,t===null&&(t=jo(),H.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function as(){return Ao().memoizedState}function os(e,t,n,r){var i=ko();H.flags|=e,i.memoizedState=is(1|t,{destroy:void 0},n,r===void 0?null:r)}function ss(e,t,n,r){var i=Ao();r=r===void 0?null:r;var a=i.memoizedState.inst;U!==null&&r!==null&&xo(r,U.memoizedState.deps)?i.memoizedState=is(t,a,n,r):(H.flags|=e,i.memoizedState=is(1|t,a,n,r))}function cs(e,t){os(8390656,8,e,t)}function ls(e,t){ss(2048,8,e,t)}function us(e){H.flags|=4;var t=H.updateQueue;if(t===null)t=jo(),H.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function ds(e){var t=Ao().memoizedState;return us({ref:t,nextImpl:e}),function(){if(q&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function fs(e,t){return ss(4,2,e,t)}function ps(e,t){return ss(4,4,e,t)}function ms(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hs(e,t,n){n=n==null?null:n.concat([e]),ss(4,4,ms.bind(null,t,e),n)}function gs(){}function _s(e,t){var n=Ao();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vs(e,t){var n=Ao();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&xo(t,r[1]))return r[0];if(r=e(),ho){Ke(!0);try{e()}finally{Ke(!1)}}return n.memoizedState=[r,t],r}function ys(e,t,n){return n===void 0||uo&1073741824&&!(Y&261930)?e.memoizedState=t:(e.memoizedState=n,e=hu(),H.lanes|=e,Kl|=e,n)}function bs(e,t,n,r){return Sr(n,t)?n:Xa.current===null?!(uo&42)||uo&1073741824&&!(Y&261930)?(tc=!0,e.memoizedState=n):(e=hu(),H.lanes|=e,Kl|=e,t):(e=ys(e,n,r),Sr(e,t)||(tc=!0),e)}function xs(e,t,n,r,i){var a=T.p;T.p=a!==0&&8>a?a:8;var o=w.T,s={};w.T=s,Ns(e,!1,t,n);try{var c=i(),l=w.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?Ms(e,t,ma(c,r),mu(e)):Ms(e,t,r,mu(e))}catch(n){Ms(e,t,{then:function(){},status:`rejected`,reason:n},mu())}finally{T.p=a,o!==null&&s.types!==null&&(o.types=s.types),w.T=o}}function Ss(){}function Cs(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=ws(e).queue;xs(e,a,t,fe,n===null?Ss:function(){return Ts(e),n(r)})}function ws(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:fe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ts(e){var t=ws(e);t.next===null&&(t=e.alternate.memoizedState),Ms(e,t.next.queue,{},mu())}function Es(){return $i(tp)}function Ds(){return Ao().memoizedState}function Os(){return Ao().memoizedState}function ks(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=mu();e=Va(n);var r=Ha(t,e,n);r!==null&&(gu(r,t,n),Ua(r,t,n)),t={cache:oa()},e.payload=t;return}t=t.return}}function As(e,t,n){var r=mu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ps(e)?Fs(t,n):(n=ei(e,t,n,r),n!==null&&(gu(n,e,r),Is(n,t,r)))}function js(e,t,n){Ms(e,t,n,mu())}function Ms(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ps(e))Fs(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Sr(s,o))return $r(e,t,i,0),Rl===null&&Qr(),!1}catch{}if(n=ei(e,t,i,r),n!==null)return gu(n,e,r),Is(n,t,r),!0}return!1}function Ns(e,t,n,r){if(r={lane:2,revertLane:pd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ps(e)){if(t)throw Error(i(479))}else t=ei(e,n,r,2),t!==null&&gu(t,e,2)}function Ps(e){var t=e.alternate;return e===H||t!==null&&t===H}function Fs(e,t){mo=po=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Is(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ct(e,n)}}var Ls={readContext:$i,use:No,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useLayoutEffect:bo,useInsertionEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useSyncExternalStore:bo,useId:bo,useHostTransitionStatus:bo,useFormState:bo,useActionState:bo,useOptimistic:bo,useMemoCache:bo,useCacheRefresh:bo};Ls.useEffectEvent=bo;var Rs={readContext:$i,use:No,useCallback:function(e,t){return ko().memoizedState=[e,t===void 0?null:t],e},useContext:$i,useEffect:cs,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),os(4194308,4,ms.bind(null,t,e),n)},useLayoutEffect:function(e,t){return os(4194308,4,e,t)},useInsertionEffect:function(e,t){os(4,2,e,t)},useMemo:function(e,t){var n=ko();t=t===void 0?null:t;var r=e();if(ho){Ke(!0);try{e()}finally{Ke(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ko();if(n!==void 0){var i=n(t);if(ho){Ke(!0);try{n(t)}finally{Ke(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=As.bind(null,H,e),[r.memoizedState,e]},useRef:function(e){var t=ko();return e={current:e},t.memoizedState=e},useState:function(e){e=Wo(e);var t=e.queue,n=js.bind(null,H,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:gs,useDeferredValue:function(e,t){return ys(ko(),e,t)},useTransition:function(){var e=Wo(!1);return e=xs.bind(null,H,e.queue,!0,!1),ko().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=H,a=ko();if(V){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Rl===null)throw Error(i(349));Y&127||W(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,cs(Vo.bind(null,r,o,e),[e]),r.flags|=2048,is(9,{destroy:void 0},Bo.bind(null,r,o,n,t),null),n},useId:function(){var e=ko(),t=Rl.identifierPrefix;if(V){var n=Ti,r=wi;n=(r&~(1<<32-k(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=go++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=yo++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Es,useFormState:$o,useActionState:$o,useOptimistic:function(e){var t=ko();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ns.bind(null,H,!0,n),n.dispatch=t,[e,t]},useMemoCache:Po,useCacheRefresh:function(){return ko().memoizedState=ks.bind(null,H)},useEffectEvent:function(e){var t=ko(),n={impl:e};return t.memoizedState=n,function(){if(q&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},G={readContext:$i,use:No,useCallback:_s,useContext:$i,useEffect:ls,useImperativeHandle:hs,useInsertionEffect:fs,useLayoutEffect:ps,useMemo:vs,useReducer:Io,useRef:as,useState:function(){return Io(Fo)},useDebugValue:gs,useDeferredValue:function(e,t){return bs(Ao(),U.memoizedState,e,t)},useTransition:function(){var e=Io(Fo)[0],t=Ao().memoizedState;return[typeof e==`boolean`?e:Mo(e),t]},useSyncExternalStore:zo,useId:Ds,useHostTransitionStatus:Es,useFormState:es,useActionState:es,useOptimistic:function(e,t){return Go(Ao(),U,e,t)},useMemoCache:Po,useCacheRefresh:Os};G.useEffectEvent=ds;var zs={readContext:$i,use:No,useCallback:_s,useContext:$i,useEffect:ls,useImperativeHandle:hs,useInsertionEffect:fs,useLayoutEffect:ps,useMemo:vs,useReducer:Ro,useRef:as,useState:function(){return Ro(Fo)},useDebugValue:gs,useDeferredValue:function(e,t){var n=Ao();return U===null?ys(n,e,t):bs(n,U.memoizedState,e,t)},useTransition:function(){var e=Ro(Fo)[0],t=Ao().memoizedState;return[typeof e==`boolean`?e:Mo(e),t]},useSyncExternalStore:zo,useId:Ds,useHostTransitionStatus:Es,useFormState:rs,useActionState:rs,useOptimistic:function(e,t){var n=Ao();return U===null?(n.baseState=e,[e,n.queue.dispatch]):Go(n,U,e,t)},useMemoCache:Po,useCacheRefresh:Os};zs.useEffectEvent=ds;function Bs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mu(),i=Va(r);i.payload=t,n!=null&&(i.callback=n),t=Ha(e,i,r),t!==null&&(gu(t,e,r),Ua(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mu(),i=Va(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ha(e,i,r),t!==null&&(gu(t,e,r),Ua(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mu(),r=Va(n);r.tag=2,t!=null&&(r.callback=t),t=Ha(e,r,n),t!==null&&(gu(t,e,n),Ua(t,e,n))}};function Hs(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Cr(n,r)||!Cr(i,a):!0}function Us(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function Ws(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Gs(e){Jr(e)}function Ks(e){console.error(e)}function qs(e){Jr(e)}function Js(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Ys(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Xs(e,t,n){return n=Va(n),n.tag=3,n.payload={element:null},n.callback=function(){Js(e,t)},n}function Zs(e){return e=Va(e),e.tag=3,e}function Qs(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Ys(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){Ys(t,n,r),typeof i!=`function`&&(iu===null?iu=new Set([this]):iu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function $s(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&Xi(t,n,a,!0),n=to.current,n!==null){switch(n.tag){case 31:case 13:return no===null?Ou():n.alternate===null&&Gl===0&&(Gl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Ca?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),qu(e,r,a)),!1;case 22:return n.flags|=65536,r===Ca?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),qu(e,r,a)),!1}throw Error(i(435,n.tag))}return qu(e,r,a),Ou(),!1}if(V)return t=to.current,t===null?(r!==Fi&&(t=Error(i(423),{cause:r}),Hi(gi(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=gi(r,n),a=Xs(e.stateNode,r,a),Wa(e,a),Gl!==4&&(Gl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Fi&&(e=Error(i(422),{cause:r}),Hi(gi(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=gi(o,n),Zl===null?Zl=[o]:Zl.push(o),Gl!==4&&(Gl=2),t===null)return!0;r=gi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=Xs(n.stateNode,r,e),Wa(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(iu===null||!iu.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=Zs(a),Qs(a,e,n,r),Wa(n,a),!1}n=n.return}while(n!==null);return!1}var ec=Error(i(461)),tc=!1;function nc(e,t,n,r){t.child=e===null?La(t,null,n,r):Ia(t,e.child,n,r)}function rc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return Qi(t),r=So(e,t,n,o,a,i),s=Eo(),e!==null&&!tc?(Do(e,t,i),Ec(e,t,i)):(V&&s&&Oi(t),t.flags|=1,nc(e,t,r,i),t.child)}function ic(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!si(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,ac(e,t,a,r,i)):(e=ui(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Dc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Cr:n,n(o,r)&&e.ref===t.ref)return Ec(e,t,i)}return t.flags|=1,e=ci(a,r),e.ref=t.ref,e.return=t,t.child=e}function ac(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Cr(a,r)&&e.ref===t.ref)if(tc=!1,t.pendingProps=r=a,Dc(e,i))e.flags&131072&&(tc=!0);else return t.lanes=e.lanes,Ec(e,t,i)}return pc(e,t,n,r,i)}function oc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return cc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&va(t,a===null?null:a.cachePool),a===null?$a():Qa(t,a),ao(t);else return r=t.lanes=536870912,cc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&va(t,null),$a(),oo(t)):(va(t,a.cachePool),Qa(t,a),oo(t),t.memoizedState=null);return nc(e,t,i,n),t.child}function sc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function cc(e,t,n,r,i){var a=_a();return a=a===null?null:{parent:aa._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&va(t,null),$a(),ao(t),e!==null&&Xi(e,t,r,!0),t.childLanes=i,null}function lc(e,t){return t=Sc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function uc(e,t,n){return Ia(t,e.child,null,n),e=lc(t,t.pendingProps),e.flags|=2,so(t),t.memoizedState=null,e}function dc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(V){if(r.mode===`hidden`)return e=lc(t,r),t.lanes=536870912,sc(null,e);if(io(t),(e=Mi)?(e=sf(e,Pi),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ci===null?null:{id:wi,overflow:Ti},retryLane:536870912,hydrationErrors:null},n=pi(e),n.return=t,t.child=n,ji=t,Mi=null)):e=null,e===null)throw Ii(t);return t.lanes=536870912,null}return lc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(io(t),a)if(t.flags&256)t.flags&=-257,t=uc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(tc||Xi(e,t,n,!1),a=(n&e.childLanes)!==0,tc||a){if(r=Rl,r!==null&&(s=lt(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,ti(e,s),gu(r,e,s),ec;Ou(),t=uc(e,t,n)}else e=o.treeContext,Mi=df(s.nextSibling),ji=t,V=!0,Ni=null,Pi=!1,e!==null&&Ai(t,e),t=lc(t,r),t.flags|=4096;return t}return e=ci(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function fc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function pc(e,t,n,r,i){return Qi(t),n=So(e,t,n,r,void 0,i),r=Eo(),e!==null&&!tc?(Do(e,t,i),Ec(e,t,i)):(V&&r&&Oi(t),t.flags|=1,nc(e,t,n,i),t.child)}function mc(e,t,n,r,i,a){return Qi(t),t.updateQueue=null,n=wo(t,r,n,i),Co(e),r=Eo(),e!==null&&!tc?(Do(e,t,a),Ec(e,t,a)):(V&&r&&Oi(t),t.flags|=1,nc(e,t,n,a),t.child)}function hc(e,t,n,r,i){if(Qi(t),t.stateNode===null){var a=ii,o=n.contextType;typeof o==`object`&&o&&(a=$i(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Vs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},za(t),o=n.contextType,a.context=typeof o==`object`&&o?$i(o):ii,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Bs(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Vs.enqueueReplaceState(a,a.state,null),qa(t,r,a,i),Ka(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Ws(n,s);a.props=c;var l=a.context,u=n.contextType;o=ii,typeof u==`object`&&u&&(o=$i(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Us(t,a,r,o),Ra=!1;var f=t.memoizedState;a.state=f,qa(t,r,a,i),Ka(),l=t.memoizedState,s||f!==l||Ra?(typeof d==`function`&&(Bs(t,n,d,r),l=t.memoizedState),(c=Ra||Hs(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ba(e,t),o=t.memoizedProps,u=Ws(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=ii,typeof l==`object`&&l&&(c=$i(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Us(t,a,r,c),Ra=!1,f=t.memoizedState,a.state=f,qa(t,r,a,i),Ka();var p=t.memoizedState;o!==d||f!==p||Ra||e!==null&&e.dependencies!==null&&Zi(e.dependencies)?(typeof s==`function`&&(Bs(t,n,s,r),p=t.memoizedState),(u=Ra||Hs(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&Zi(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,fc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ia(t,e.child,null,i),t.child=Ia(t,null,n,i)):nc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Ec(e,t,i),e}function gc(e,t,n,r){return Bi(),t.flags|=256,nc(e,t,n,r),t.child}var _c={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vc(e){return{baseLanes:e,cachePool:ya()}}function yc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Yl),e}function bc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(co.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(V){if(a?ro(t):oo(t),(e=Mi)?(e=sf(e,Pi),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ci===null?null:{id:wi,overflow:Ti},retryLane:536870912,hydrationErrors:null},n=pi(e),n.return=t,t.child=n,ji=t,Mi=null)):e=null,e===null)throw Ii(t);return lf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(oo(t),a=t.mode,c=Sc({mode:`hidden`,children:c},a),r=di(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=vc(n),r.childLanes=yc(e,s,n),t.memoizedState=_c,sc(null,r)):(ro(t),xc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(ro(t),t.flags&=-257,t=Cc(e,t,n)):t.memoizedState===null?(oo(t),c=r.fallback,a=t.mode,r=Sc({mode:`visible`,children:r.children},a),c=di(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ia(t,e.child,null,n),r=t.child,r.memoizedState=vc(n),r.childLanes=yc(e,s,n),t.memoizedState=_c,t=sc(null,r)):(oo(t),t.child=e.child,t.flags|=128,t=null);else if(ro(t),lf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,Hi({value:r,source:null,stack:null}),t=Cc(e,t,n)}else if(tc||Xi(e,t,n,!1),s=(n&e.childLanes)!==0,tc||s){if(s=Rl,s!==null&&(r=lt(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,ti(e,r),gu(s,e,r),ec;cf(c)||Ou(),t=Cc(e,t,n)}else cf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Mi=df(c.nextSibling),ji=t,V=!0,Ni=null,Pi=!1,e!==null&&Ai(t,e),t=xc(t,r.children),t.flags|=4096);return t}return a?(oo(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=ci(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=di(c,a,n,null),c.flags|=2):c=ci(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,sc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=vc(n):(a=c.cachePool,a===null?a=ya():(l=aa._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=yc(e,s,n),t.memoizedState=_c,sc(e.child,r)):(ro(t),n=e.child,e=n.sibling,n=ci(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function xc(e,t){return t=Sc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Sc(e,t){return e=oi(22,e,null,t),e.lanes=0,e}function Cc(e,t,n){return Ia(t,e.child,null,n),e=xc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ji(e.return,t,n)}function K(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Tc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=co.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,D(co,o),nc(e,t,r,n),r=V?bi:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wc(e,n,t);else if(e.tag===19)wc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&lo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),K(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&lo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}K(t,!0,n,null,a,r);break;case`together`:K(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Ec(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Xi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=ci(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ci(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Dc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&Zi(e))):!0}function Oc(e,t,n){switch(t.tag){case 3:be(t,t.stateNode.containerInfo),Ki(t,aa,e.memoizedState.cache),Bi();break;case 27:case 5:Se(t);break;case 4:be(t,t.stateNode.containerInfo);break;case 10:Ki(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,io(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(ro(t),e=Ec(e,t,n),e===null?null:e.sibling):bc(e,t,n):(ro(t),t.flags|=128,null);ro(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(Xi(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Tc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),D(co,co.current),r)break;return null;case 22:return t.lanes=0,oc(e,t,n,t.pendingProps);case 24:Ki(t,aa,e.memoizedState.cache)}return Ec(e,t,n)}function kc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tc=!0;else{if(!Dc(e,n)&&!(t.flags&128))return tc=!1,Oc(e,t,n);tc=!!(e.flags&131072)}else tc=!1,V&&t.flags&1048576&&Di(t,bi,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Ea(t.elementType),t.type=e,typeof e==`function`)si(e)?(r=Ws(e,r),t.tag=1,t=hc(null,t,e,r,n)):(t.tag=0,t=pc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===S){t.tag=11,t=rc(null,t,e,r,n);break a}else if(a===ie){t.tag=14,t=ic(null,t,e,r,n);break a}}throw t=C(e)||e,Error(i(306,t,``))}}return t;case 0:return pc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=Ws(r,t.pendingProps),hc(e,t,r,a,n);case 3:a:{if(be(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Ba(e,t),qa(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Ki(t,aa,r),r!==o.cache&&Yi(t,[aa],n,!0),Ka(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=gc(e,t,r,n);break a}else if(r!==a){a=gi(Error(i(424)),t),Hi(a),t=gc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Mi=df(e.firstChild),ji=t,V=!0,Ni=null,Pi=!0,n=La(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Bi(),r===a){t=Ec(e,t,n);break a}nc(e,t,r,n)}t=t.child}return t;case 26:return fc(e,t),e===null?(n=Mf(t.type,null,t.pendingProps,null))?t.memoizedState=n:V||(n=t.type,e=t.pendingProps,r=Ud(ve.current).createElement(n),r[ht]=t,r[gt]=e,Ld(r,n,e),Ot(r),t.stateNode=r):t.memoizedState=Mf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Se(t),e===null&&V&&(r=t.stateNode=hf(t.type,t.pendingProps,ve.current),ji=t,Pi=!0,a=Mi,ef(t.type)?(ff=a,Mi=df(r.firstChild)):Mi=a),nc(e,t,t.pendingProps.children,n),fc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&V&&((a=r=Mi)&&(r=af(r,t.type,t.pendingProps,Pi),r===null?a=!1:(t.stateNode=r,ji=t,Mi=df(r.firstChild),Pi=!1,a=!0)),a||Ii(t)),Se(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,Kd(a,o)?r=null:s!==null&&Kd(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=So(e,t,To,null,null,n),tp._currentValue=a),fc(e,t),nc(e,t,r,n),t.child;case 6:return e===null&&V&&((e=n=Mi)&&(n=of(n,t.pendingProps,Pi),n===null?e=!1:(t.stateNode=n,ji=t,Mi=null,e=!0)),e||Ii(t)),null;case 13:return bc(e,t,n);case 4:return be(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ia(t,null,r,n):nc(e,t,r,n),t.child;case 11:return rc(e,t,t.type,t.pendingProps,n);case 7:return nc(e,t,t.pendingProps,n),t.child;case 8:return nc(e,t,t.pendingProps.children,n),t.child;case 12:return nc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ki(t,t.type,r.value),nc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Qi(t),a=$i(a),r=r(a),t.flags|=1,nc(e,t,r,n),t.child;case 14:return ic(e,t,t.type,t.pendingProps,n);case 15:return ac(e,t,t.type,t.pendingProps,n);case 19:return Tc(e,t,n);case 31:return dc(e,t,n);case 22:return oc(e,t,n,t.pendingProps);case 24:return Qi(t),r=$i(aa),e===null?(a=_a(),a===null&&(a=Rl,o=oa(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},za(t),Ki(t,aa,a)):((e.lanes&n)!==0&&(Ba(e,t),qa(t,null,null,n),Ka()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,Ki(t,aa,r),r!==a.cache&&Yi(t,[aa],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Ki(t,aa,r))),nc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Ac(e){e.flags|=4}function jc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Tu())e.flags|=8192;else throw Da=Ca,xa}else e.flags&=-16777217}function Mc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!qf(t))if(Tu())e.flags|=8192;else throw Da=Ca,xa}function Nc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:rt(),e.lanes|=t,Xl|=t)}function Pc(e,t){if(!V)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Fc(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ic(e,t,n){var r=t.pendingProps;switch(ki(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fc(t),null;case 1:return Fc(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),qi(aa),xe(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(zi(t)?Ac(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vi())),Fc(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(Ac(t),o===null?(Fc(t),jc(t,a,null,r,n)):(Fc(t),Mc(t,o))):o?o===e.memoizedState?(Fc(t),t.flags&=-16777217):(Ac(t),Fc(t),Mc(t,o)):(e=e.memoizedProps,e!==r&&Ac(t),Fc(t),jc(t,a,e,r,n)),null;case 27:if(Ce(t),n=ve.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ac(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Fc(t),null}e=ge.current,zi(t)?Li(t,e):(e=hf(a,r,n),t.stateNode=e,Ac(t))}return Fc(t),null;case 5:if(Ce(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ac(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Fc(t),null}if(o=ge.current,zi(t))Li(t,o);else{var s=Ud(ve.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[ht]=t,o[gt]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Ld(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Ac(t)}}return Fc(t),jc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Ac(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=ve.current,zi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=ji,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[ht]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Pd(e.nodeValue,n)),e||Ii(t,!0)}else e=Ud(e).createTextNode(r),e[ht]=t,t.stateNode=e}return Fc(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=zi(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[ht]=t}else Bi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fc(t),e=!1}else n=Vi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(so(t),t):(so(t),null);if(t.flags&128)throw Error(i(558))}return Fc(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=zi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[ht]=t}else Bi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fc(t),a=!1}else a=Vi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(so(t),t):(so(t),null)}return so(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Nc(t,t.updateQueue),Fc(t),null);case 4:return xe(),e===null&&wd(t.stateNode.containerInfo),Fc(t),null;case 10:return qi(t.type),Fc(t),null;case 19:if(E(co),r=t.memoizedState,r===null)return Fc(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)Pc(r,!1);else{if(Gl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=lo(e),o!==null){for(t.flags|=128,Pc(r,!1),e=o.updateQueue,t.updateQueue=e,Nc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)li(n,e),n=n.sibling;return D(co,co.current&1|2),V&&Ei(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Ie()>nu&&(t.flags|=128,a=!0,Pc(r,!1),t.lanes=4194304)}else{if(!a)if(e=lo(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Nc(t,e),Pc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!V)return Fc(t),null}else 2*Ie()-r.renderingStartTime>nu&&n!==536870912&&(t.flags|=128,a=!0,Pc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(Fc(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ie(),e.sibling=null,n=co.current,D(co,a?n&1|2:n&1),V&&Ei(t,r.treeForkCount),e);case 22:case 23:return so(t),eo(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Fc(t),t.subtreeFlags&6&&(t.flags|=8192)):Fc(t),n=t.updateQueue,n!==null&&Nc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&E(ga),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),qi(aa),Fc(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Lc(e,t){switch(ki(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qi(aa),xe(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ce(t),null;case 31:if(t.memoizedState!==null){if(so(t),t.alternate===null)throw Error(i(340));Bi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(so(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Bi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return E(co),null;case 4:return xe(),null;case 10:return qi(t.type),null;case 22:case 23:return so(t),eo(),e!==null&&E(ga),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return qi(aa),null;case 25:return null;default:return null}}function Rc(e,t){switch(ki(t),t.tag){case 3:qi(aa),xe();break;case 26:case 27:case 5:Ce(t);break;case 4:xe();break;case 31:t.memoizedState!==null&&so(t);break;case 13:so(t);break;case 19:E(co);break;case 10:qi(t.type);break;case 22:case 23:so(t),eo(),e!==null&&E(ga);break;case 24:qi(aa)}}function zc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Ku(t,t.return,e)}}function Bc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Ku(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Ku(t,t.return,e)}}function Vc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ya(t,n)}catch(t){Ku(e,e.return,t)}}}function Hc(e,t,n){n.props=Ws(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Ku(e,t,n)}}function Uc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Ku(e,t,n)}}function Wc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Ku(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Ku(e,t,n)}else n.current=null}function Gc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Ku(e,e.return,t)}}function Kc(e,t,n){try{var r=e.stateNode;Rd(r,e.type,n,t),r[gt]=t}catch(t){Ku(e,e.return,t)}}function qc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ef(e.type)||e.tag===4}function Jc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||qc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ef(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=cn));else if(r!==4&&(r===27&&ef(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Yc(e,t,n),e=e.sibling;e!==null;)Yc(e,t,n),e=e.sibling}function Xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&ef(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Xc(e,t,n),e=e.sibling;e!==null;)Xc(e,t,n),e=e.sibling}function Zc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ld(t,r,n),t[ht]=e,t[gt]=n}catch(t){Ku(e,e.return,t)}}var Qc=!1,$c=!1,el=!1,tl=typeof WeakSet==`function`?WeakSet:Set,nl=null;function rl(e,t){if(e=e.containerInfo,Vd=up,e=Dr(e),Or(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Hd={focusedElem:e,selectionRange:n},up=!1,nl=t;nl!==null;)if(t=nl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,nl=e;else for(;nl!==null;){switch(t=nl,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=Ws(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Ku(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)rf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:rf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,nl=e;break}nl=t.return}}function il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:yl(e,n),r&4&&zc(5,n);break;case 1:if(yl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Ku(n,n.return,e)}else{var i=Ws(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Ku(n,n.return,e)}}r&64&&Vc(n),r&512&&Uc(n,n.return);break;case 3:if(yl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ya(e,t)}catch(e){Ku(n,n.return,e)}}break;case 27:t===null&&r&4&&Zc(n);case 26:case 5:yl(e,n),t===null&&r&4&&Gc(n),r&512&&Uc(n,n.return);break;case 12:yl(e,n);break;case 31:yl(e,n),r&4&&ul(e,n);break;case 13:yl(e,n),r&4&&dl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Xu.bind(null,n),uf(e,n))));break;case 22:if(r=n.memoizedState!==null||Qc,!r){t=t!==null&&t.memoizedState!==null||$c,i=Qc;var a=$c;Qc=r,($c=t)&&!a?xl(e,n,(n.subtreeFlags&8772)!=0):yl(e,n),Qc=i,$c=a}break;case 30:break;default:yl(e,n)}}function al(e){var t=e.alternate;t!==null&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ct(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ol=null,sl=!1;function cl(e,t,n){for(n=n.child;n!==null;)ll(e,t,n),n=n.sibling}function ll(e,t,n){if(Ge&&typeof Ge.onCommitFiberUnmount==`function`)try{Ge.onCommitFiberUnmount(We,n)}catch{}switch(n.tag){case 26:$c||Wc(n,t),cl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:$c||Wc(n,t);var r=ol,i=sl;ef(n.type)&&(ol=n.stateNode,sl=!1),cl(e,t,n),gf(n.stateNode),ol=r,sl=i;break;case 5:$c||Wc(n,t);case 6:if(r=ol,i=sl,ol=null,cl(e,t,n),ol=r,sl=i,ol!==null)if(sl)try{(ol.nodeType===9?ol.body:ol.nodeName===`HTML`?ol.ownerDocument.body:ol).removeChild(n.stateNode)}catch(e){Ku(n,t,e)}else try{ol.removeChild(n.stateNode)}catch(e){Ku(n,t,e)}break;case 18:ol!==null&&(sl?(e=ol,tf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Ip(e)):tf(ol,n.stateNode));break;case 4:r=ol,i=sl,ol=n.stateNode.containerInfo,sl=!0,cl(e,t,n),ol=r,sl=i;break;case 0:case 11:case 14:case 15:Bc(2,n,t),$c||Bc(4,n,t),cl(e,t,n);break;case 1:$c||(Wc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Hc(n,t,r)),cl(e,t,n);break;case 21:cl(e,t,n);break;case 22:$c=(r=$c)||n.memoizedState!==null,cl(e,t,n),$c=r;break;default:cl(e,t,n)}}function ul(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ip(e)}catch(e){Ku(t,t.return,e)}}}function dl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ip(e)}catch(e){Ku(t,t.return,e)}}function fl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new tl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new tl),t;default:throw Error(i(435,e.tag))}}function pl(e,t){var n=fl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Zu.bind(null,e,t);t.then(r,r)}})}function ml(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(ef(c.type)){ol=c.stateNode,sl=!1;break a}break;case 5:ol=c.stateNode,sl=!1;break a;case 3:case 4:ol=c.stateNode.containerInfo,sl=!0;break a}c=c.return}if(ol===null)throw Error(i(160));ll(o,s,a),ol=null,sl=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)gl(t,e),t=t.sibling}var hl=null;function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ml(t,e),_l(e),r&4&&(Bc(3,e,e.return),zc(3,e),Bc(5,e,e.return));break;case 1:ml(t,e),_l(e),r&512&&($c||n===null||Wc(n,n.return)),r&64&&Qc&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=hl;if(ml(t,e),_l(e),r&512&&($c||n===null||Wc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[St]||o[ht]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Ld(o,r,n),o[ht]=e,Ot(o),r=o;break a;case`link`:var s=Wf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Ld(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Wf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Ld(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[ht]=e,Ot(o),r=o}e.stateNode=r}else Gf(a,e.type,e.stateNode);else e.stateNode=zf(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&Kc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?Gf(a,e.type,e.stateNode):zf(a,r,e.memoizedProps))}break;case 27:ml(t,e),_l(e),r&512&&($c||n===null||Wc(n,n.return)),n!==null&&r&4&&Kc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ml(t,e),_l(e),r&512&&($c||n===null||Wc(n,n.return)),e.flags&32){a=e.stateNode;try{$t(a,``)}catch(t){Ku(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,Kc(e,a,n===null?a:n.memoizedProps)),r&1024&&(el=!0);break;case 6:if(ml(t,e),_l(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Ku(e,e.return,t)}}break;case 3:if(Uf=null,a=hl,hl=yf(t.containerInfo),ml(t,e),hl=a,_l(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ip(t.containerInfo)}catch(t){Ku(e,e.return,t)}el&&(el=!1,vl(e));break;case 4:r=hl,hl=yf(e.stateNode.containerInfo),ml(t,e),_l(e),hl=r;break;case 12:ml(t,e),_l(e);break;case 31:ml(t,e),_l(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,pl(e,r)));break;case 13:ml(t,e),_l(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(eu=Ie()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,pl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=Qc,d=$c;if(Qc=u||a,$c=d||l,ml(t,e),$c=d,Qc=u,_l(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||Qc||$c||bl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Ku(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Ku(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?nf(m,!0):nf(l.stateNode,!1)}catch(e){Ku(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,pl(e,n))));break;case 19:ml(t,e),_l(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,pl(e,r)));break;case 30:break;case 21:break;default:ml(t,e),_l(e)}}function _l(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(qc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;Xc(e,Jc(e),a);break;case 5:var o=n.stateNode;n.flags&32&&($t(o,``),n.flags&=-33),Xc(e,Jc(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;Yc(e,Jc(e),s);break;default:throw Error(i(161))}}catch(t){Ku(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function yl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)il(e,t.alternate,t),t=t.sibling}function bl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Bc(4,t,t.return),bl(t);break;case 1:Wc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Hc(t,t.return,n),bl(t);break;case 27:gf(t.stateNode);case 26:case 5:Wc(t,t.return),bl(t);break;case 22:t.memoizedState===null&&bl(t);break;case 30:bl(t);break;default:bl(t)}e=e.sibling}}function xl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:xl(i,a,n),zc(4,a);break;case 1:if(xl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Ku(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Ja(c[i],s)}catch(e){Ku(r,r.return,e)}}n&&o&64&&Vc(a),Uc(a,a.return);break;case 27:Zc(a);case 26:case 5:xl(i,a,n),n&&r===null&&o&4&&Gc(a),Uc(a,a.return);break;case 12:xl(i,a,n);break;case 31:xl(i,a,n),n&&o&4&&ul(i,a);break;case 13:xl(i,a,n),n&&o&4&&dl(i,a);break;case 22:a.memoizedState===null&&xl(i,a,n),Uc(a,a.return);break;case 30:break;default:xl(i,a,n)}t=t.sibling}}function Sl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&sa(n))}function Cl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sa(e))}function wl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Tl(e,t,n,r),t=t.sibling}function Tl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:wl(e,t,n,r),i&2048&&zc(9,t);break;case 1:wl(e,t,n,r);break;case 3:wl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sa(e)));break;case 12:if(i&2048){wl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Ku(t,t.return,e)}}else wl(e,t,n,r);break;case 31:wl(e,t,n,r);break;case 13:wl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?wl(e,t,n,r):(a._visibility|=2,El(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?wl(e,t,n,r):Dl(e,t),i&2048&&Sl(o,t);break;case 24:wl(e,t,n,r),i&2048&&Cl(t.alternate,t);break;default:wl(e,t,n,r)}}function El(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:El(a,o,s,c,i),zc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,El(a,o,s,c,i)):u._visibility&2?El(a,o,s,c,i):Dl(a,o),i&&l&2048&&Sl(o.alternate,o);break;case 24:El(a,o,s,c,i),i&&l&2048&&Cl(o.alternate,o);break;default:El(a,o,s,c,i)}t=t.sibling}}function Dl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Dl(n,r),i&2048&&Sl(r.alternate,r);break;case 24:Dl(n,r),i&2048&&Cl(r.alternate,r);break;default:Dl(n,r)}t=t.sibling}}var Ol=8192;function kl(e,t,n){if(e.subtreeFlags&Ol)for(e=e.child;e!==null;)Al(e,t,n),e=e.sibling}function Al(e,t,n){switch(e.tag){case 26:kl(e,t,n),e.flags&Ol&&e.memoizedState!==null&&Jf(n,hl,e.memoizedState,e.memoizedProps);break;case 5:kl(e,t,n);break;case 3:case 4:var r=hl;hl=yf(e.stateNode.containerInfo),kl(e,t,n),hl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Ol,Ol=16777216,kl(e,t,n),Ol=r):kl(e,t,n));break;default:kl(e,t,n)}}function jl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ml(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Fl(r,e)}jl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Nl(e),e=e.sibling}function Nl(e){switch(e.tag){case 0:case 11:case 15:Ml(e),e.flags&2048&&Bc(9,e,e.return);break;case 3:Ml(e);break;case 12:Ml(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Pl(e)):Ml(e);break;default:Ml(e)}}function Pl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Fl(r,e)}jl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Bc(8,t,t.return),Pl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Pl(t));break;default:Pl(t)}e=e.sibling}}function Fl(e,t){for(;nl!==null;){var n=nl;switch(n.tag){case 0:case 11:case 15:Bc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:sa(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,nl=r;else a:for(n=e;nl!==null;){r=nl;var i=r.sibling,a=r.return;if(al(r),r===n){nl=null;break a}if(i!==null){i.return=a,nl=i;break a}nl=a}}}var Il={getCacheForType:function(e){var t=$i(aa),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return $i(aa).controller.signal}},Ll=typeof WeakMap==`function`?WeakMap:Map,q=0,Rl=null,J=null,Y=0,zl=0,Bl=null,Vl=!1,Hl=!1,Ul=!1,Wl=0,Gl=0,Kl=0,ql=0,Jl=0,Yl=0,Xl=0,Zl=null,Ql=null,$l=!1,eu=0,tu=0,nu=1/0,ru=null,iu=null,au=0,ou=null,su=null,cu=0,lu=0,uu=null,du=null,fu=0,pu=null;function mu(){return q&2&&Y!==0?Y&-Y:w.T===null?ft():pd()}function hu(){if(Yl===0)if(!(Y&536870912)||V){var e=Ze;Ze<<=1,!(Ze&3932160)&&(Ze=262144),Yl=e}else Yl=536870912;return e=to.current,e!==null&&(e.flags|=32),Yl}function gu(e,t,n){(e===Rl&&(zl===2||zl===9)||e.cancelPendingCommit!==null)&&(Cu(e,0),bu(e,Y,Yl,!1)),at(e,n),(!(q&2)||e!==Rl)&&(e===Rl&&(!(q&2)&&(ql|=n),Gl===4&&bu(e,Y,Yl,!1)),ad(e))}function _u(e,t,n){if(q&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||tt(e,t),a=r?ju(e,t):ku(e,t,!0),o=r;do{if(a===0){Hl&&!r&&bu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!yu(n)){a=ku(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=Zl;var l=c.current.memoizedState.isDehydrated;if(l&&(Cu(c,s).flags|=256),s=ku(c,s,!1),s!==2){if(Ul&&!l){c.errorRecoveryDisabledLanes|=o,ql|=o,a=4;break a}o=Ql,Ql=a,o!==null&&(Ql===null?Ql=o:Ql.push.apply(Ql,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Cu(e,0),bu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:bu(r,t,Yl,!Vl);break a;case 2:Ql=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=eu+300-Ie(),10<a)){if(bu(r,t,Yl,!Vl),et(r,0,!0)!==0)break a;cu=t,r.timeoutHandle=Yd(vu.bind(null,r,n,Ql,ru,$l,t,Yl,ql,Xl,Vl,o,`Throttled`,-0,0),a);break a}vu(r,n,Ql,ru,$l,t,Yl,ql,Xl,Vl,o,null,-0,0)}}break}while(1);ad(e)}function vu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cn},Al(t,a,d);var m=(a&62914560)===a?eu-Ie():(a&4194048)===a?tu-Ie():0;if(m=Xf(d,m),m!==null){cu=a,e.cancelPendingCommit=m(Ru.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),bu(e,a,o,!l);return}}Ru(e,t,a,n,r,i,o,s,c)}function yu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Sr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bu(e,t,n,r){t&=~Jl,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-k(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&st(e,n,t)}function xu(){return q&6?!0:(od(0,!1),!1)}function Su(){if(J!==null){if(zl===0)var e=J.return;else e=J,Gi=Wi=null,Oo(e),Aa=null,ja=0,e=J;for(;e!==null;)Rc(e.alternate,e),e=e.return;J=null}}function Cu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Xd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),cu=0,Su(),Rl=e,J=n=ci(e.current,null),Y=t,zl=0,Bl=null,Vl=!1,Hl=tt(e,t),Ul=!1,Xl=Yl=Jl=ql=Kl=Gl=0,Ql=Zl=null,$l=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-k(r),a=1<<i;t|=e[i],r&=~a}return Wl=t,Qr(),n}function wu(e,t){H=null,w.H=Ls,t===ba||t===Sa?(t=Oa(),zl=3):t===xa?(t=Oa(),zl=4):zl=t===ec?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Bl=t,J===null&&(Gl=1,Js(e,gi(t,e.current)))}function Tu(){var e=to.current;return e===null?!0:(Y&4194048)===Y?no===null:(Y&62914560)===Y||Y&536870912?e===no:!1}function Eu(){var e=w.H;return w.H=Ls,e===null?Ls:e}function Du(){var e=w.A;return w.A=Il,e}function Ou(){Gl=4,Vl||(Y&4194048)!==Y&&to.current!==null||(Hl=!0),!(Kl&134217727)&&!(ql&134217727)||Rl===null||bu(Rl,Y,Yl,!1)}function ku(e,t,n){var r=q;q|=2;var i=Eu(),a=Du();(Rl!==e||Y!==t)&&(ru=null,Cu(e,t)),t=!1;var o=Gl;a:do try{if(zl!==0&&J!==null){var s=J,c=Bl;switch(zl){case 8:Su(),o=6;break a;case 3:case 2:case 9:case 6:to.current===null&&(t=!0);var l=zl;if(zl=0,Bl=null,Fu(e,s,c,l),n&&Hl){o=0;break a}break;default:l=zl,zl=0,Bl=null,Fu(e,s,c,l)}}Au(),o=Gl;break}catch(t){wu(e,t)}while(1);return t&&e.shellSuspendCounter++,Gi=Wi=null,q=r,w.H=i,w.A=a,J===null&&(Rl=null,Y=0,Qr()),o}function Au(){for(;J!==null;)Nu(J)}function ju(e,t){var n=q;q|=2;var r=Eu(),a=Du();Rl!==e||Y!==t?(ru=null,nu=Ie()+500,Cu(e,t)):Hl=tt(e,t);a:do try{if(zl!==0&&J!==null){t=J;var o=Bl;b:switch(zl){case 1:zl=0,Bl=null,Fu(e,t,o,1);break;case 2:case 9:if(wa(o)){zl=0,Bl=null,Pu(t);break}t=function(){zl!==2&&zl!==9||Rl!==e||(zl=7),ad(e)},o.then(t,t);break a;case 3:zl=7;break a;case 4:zl=5;break a;case 7:wa(o)?(zl=0,Bl=null,Pu(t)):(zl=0,Bl=null,Fu(e,t,o,7));break;case 5:var s=null;switch(J.tag){case 26:s=J.memoizedState;case 5:case 27:var c=J;if(s?qf(s):c.stateNode.complete){zl=0,Bl=null;var l=c.sibling;if(l!==null)J=l;else{var u=c.return;u===null?J=null:(J=u,Iu(u))}break b}}zl=0,Bl=null,Fu(e,t,o,5);break;case 6:zl=0,Bl=null,Fu(e,t,o,6);break;case 8:Su(),Gl=6;break a;default:throw Error(i(462))}}Mu();break}catch(t){wu(e,t)}while(1);return Gi=Wi=null,w.H=r,w.A=a,q=n,J===null?(Rl=null,Y=0,Qr(),Gl):0}function Mu(){for(;J!==null&&!Pe();)Nu(J)}function Nu(e){var t=kc(e.alternate,e,Wl);e.memoizedProps=e.pendingProps,t===null?Iu(e):J=t}function Pu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=mc(n,t,t.pendingProps,t.type,void 0,Y);break;case 11:t=mc(n,t,t.pendingProps,t.type.render,t.ref,Y);break;case 5:Oo(t);default:Rc(n,t),t=J=li(t,Wl),t=kc(n,t,Wl)}e.memoizedProps=e.pendingProps,t===null?Iu(e):J=t}function Fu(e,t,n,r){Gi=Wi=null,Oo(t),Aa=null,ja=0;var i=t.return;try{if($s(e,i,t,n,Y)){Gl=1,Js(e,gi(n,e.current)),J=null;return}}catch(t){if(i!==null)throw J=i,t;Gl=1,Js(e,gi(n,e.current)),J=null;return}t.flags&32768?(V||r===1?e=!0:Hl||Y&536870912?e=!1:(Vl=e=!0,(r===2||r===9||r===3||r===6)&&(r=to.current,r!==null&&r.tag===13&&(r.flags|=16384))),Lu(t,e)):Iu(t)}function Iu(e){var t=e;do{if(t.flags&32768){Lu(t,Vl);return}e=t.return;var n=Ic(t.alternate,t,Wl);if(n!==null){J=n;return}if(t=t.sibling,t!==null){J=t;return}J=t=e}while(t!==null);Gl===0&&(Gl=5)}function Lu(e,t){do{var n=Lc(e.alternate,e);if(n!==null){n.flags&=32767,J=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){J=e;return}J=e=n}while(e!==null);Gl=6,J=null}function Ru(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do Uu();while(au!==0);if(q&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=Zr,ot(e,n,o,s,c,l),e===Rl&&(J=Rl=null,Y=0),su=t,ou=e,cu=n,lu=o,uu=a,du=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Qu(O,function(){return Wu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=w.T,w.T=null,a=T.p,T.p=2,s=q,q|=4;try{rl(e,t,n)}finally{q=s,T.p=a,w.T=r}}au=1,zu(),Bu(),Vu()}}function zu(){if(au===1){au=0;var e=ou,t=su,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=w.T,w.T=null;var r=T.p;T.p=2;var i=q;q|=4;try{gl(t,e);var a=Hd,o=Dr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Er(s.ownerDocument.documentElement,s)){if(c!==null&&Or(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Tr(s,h),v=Tr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}up=!!Vd,Hd=Vd=null}finally{q=i,T.p=r,w.T=n}}e.current=t,au=2}}function Bu(){if(au===2){au=0;var e=ou,t=su,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=w.T,w.T=null;var r=T.p;T.p=2;var i=q;q|=4;try{il(e,t.alternate,t)}finally{q=i,T.p=r,w.T=n}}au=3}}function Vu(){if(au===4||au===3){au=0,Fe();var e=ou,t=su,n=cu,r=du;t.subtreeFlags&10256||t.flags&10256?au=5:(au=0,su=ou=null,Hu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(iu=null),dt(n),t=t.stateNode,Ge&&typeof Ge.onCommitFiberRoot==`function`)try{Ge.onCommitFiberRoot(We,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=w.T,i=T.p,T.p=2,w.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{w.T=t,T.p=i}}cu&3&&Uu(),ad(e),i=e.pendingLanes,n&261930&&i&42?e===pu?fu++:(fu=0,pu=e):fu=0,od(0,!1)}}function Hu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,sa(t)))}function Uu(){return zu(),Bu(),Vu(),Wu()}function Wu(){if(au!==5)return!1;var e=ou,t=lu;lu=0;var n=dt(cu),r=w.T,a=T.p;try{T.p=32>n?32:n,w.T=null,n=uu,uu=null;var o=ou,s=cu;if(au=0,su=ou=null,cu=0,q&6)throw Error(i(331));var c=q;if(q|=4,Nl(o.current),Tl(o,o.current,s,n),q=c,od(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot==`function`)try{Ge.onPostCommitFiberRoot(We,o)}catch{}return!0}finally{T.p=a,w.T=r,Hu(e,t)}}function Gu(e,t,n){t=gi(n,t),t=Xs(e.stateNode,t,2),e=Ha(e,t,2),e!==null&&(at(e,2),ad(e))}function Ku(e,t,n){if(e.tag===3)Gu(e,e,n);else for(;t!==null;){if(t.tag===3){Gu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(iu===null||!iu.has(r))){e=gi(n,e),n=Zs(2),r=Ha(t,n,2),r!==null&&(Qs(n,r,t,e),at(r,2),ad(r));break}}t=t.return}}function qu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ll;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Ul=!0,i.add(n),e=Ju.bind(null,e,t,n),t.then(e,e))}function Ju(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Rl===e&&(Y&n)===n&&(Gl===4||Gl===3&&(Y&62914560)===Y&&300>Ie()-eu?!(q&2)&&Cu(e,0):Jl|=n,Xl===Y&&(Xl=0)),ad(e)}function Yu(e,t){t===0&&(t=rt()),e=ti(e,t),e!==null&&(at(e,t),ad(e))}function Xu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yu(e,n)}function Zu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Yu(e,n)}function Qu(e,t){return Me(e,t)}var $u=null,ed=null,td=!1,nd=!1,rd=!1,id=0;function ad(e){e!==ed&&e.next===null&&(ed===null?$u=ed=e:ed=ed.next=e),nd=!0,td||(td=!0,fd())}function od(e,t){if(!rd&&nd){rd=!0;do for(var n=!1,r=$u;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-k(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,dd(r,a))}else a=Y,a=et(r,r===Rl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||tt(r,a)||(n=!0,dd(r,a));r=r.next}while(n);rd=!1}}function sd(){cd()}function cd(){nd=td=!1;var e=0;id!==0&&Jd()&&(e=id);for(var t=Ie(),n=null,r=$u;r!==null;){var i=r.next,a=ld(r,t);a===0?(r.next=null,n===null?$u=i:n.next=i,i===null&&(ed=n)):(n=r,(e!==0||a&3)&&(nd=!0)),r=i}au!==0&&au!==5||od(e,!1),id!==0&&(id=0)}function ld(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-k(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=nt(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Rl,n=Y,n=et(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(zl===2||zl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Ne(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||tt(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Ne(r),dt(n)){case 2:case 8:n=ze;break;case 32:n=O;break;case 268435456:n=Ve;break;default:n=O}return r=ud.bind(null,e),n=Me(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Ne(r),e.callbackPriority=2,e.callbackNode=null,2}function ud(e,t){if(au!==0&&au!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Uu()&&e.callbackNode!==n)return null;var r=Y;return r=et(e,e===Rl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(_u(e,r,t),ld(e,Ie()),e.callbackNode!=null&&e.callbackNode===n?ud.bind(null,e):null)}function dd(e,t){if(Uu())return null;_u(e,t,!0)}function fd(){Qd(function(){q&6?Me(Re,sd):cd()})}function pd(){if(id===0){var e=ua;e===0&&(e=Xe,Xe<<=1,!(Xe&261888)&&(Xe=256)),id=e}return id}function md(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:sn(``+e)}function hd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function gd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=md((i[gt]||null).action),o=r.submitter;o&&(t=(t=o[gt]||null)?md(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new kn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(id!==0){var e=o?hd(i,o):new FormData(i);Cs(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?hd(i,o):new FormData(i),Cs(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var _d=0;_d<qr.length;_d++){var vd=qr[_d];B(vd.toLowerCase(),`on`+(vd[0].toUpperCase()+vd.slice(1)))}B(zr,`onAnimationEnd`),B(Br,`onAnimationIteration`),B(Vr,`onAnimationStart`),B(`dblclick`,`onDoubleClick`),B(`focusin`,`onFocus`),B(`focusout`,`onBlur`),B(Hr,`onTransitionRun`),B(Ur,`onTransitionStart`),B(Wr,`onTransitionCancel`),B(Gr,`onTransitionEnd`),Mt(`onMouseEnter`,[`mouseout`,`mouseover`]),Mt(`onMouseLeave`,[`mouseout`,`mouseover`]),Mt(`onPointerEnter`,[`pointerout`,`pointerover`]),Mt(`onPointerLeave`,[`pointerout`,`pointerover`]),jt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),jt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),jt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),jt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),jt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),jt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var yd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),bd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(yd));function xd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Jr(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Jr(e)}i.currentTarget=null,a=c}}}}function X(e,t){var n=t[vt];n===void 0&&(n=t[vt]=new Set);var r=e+`__bubble`;n.has(r)||(Td(t,e,2,!1),n.add(r))}function Sd(e,t,n){var r=0;t&&(r|=4),Td(n,e,r,t)}var Cd=`_reactListening`+Math.random().toString(36).slice(2);function wd(e){if(!e[Cd]){e[Cd]=!0,kt.forEach(function(t){t!==`selectionchange`&&(bd.has(t)||Sd(t,!1,e),Sd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cd]||(t[Cd]=!0,Sd(`selectionchange`,!1,t))}}function Td(e,t,n,r){switch(_p(t)){case 2:var i=dp;break;case 8:i=fp;break;default:i=pp}n=i.bind(null,t,n,e),i=void 0,!vn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Ed(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=wt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}hn(function(){var r=a,i=un(n),s=[];a:{var c=Kr.get(e);if(c!==void 0){var l=kn,u=e;switch(e){case`keypress`:if(wn(n)===0)break a;case`keydown`:case`keyup`:l=qn;break;case`focusin`:u=`focus`,l=Rn;break;case`focusout`:u=`blur`,l=Rn;break;case`beforeblur`:case`afterblur`:l=Rn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=In;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Ln;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Yn;break;case zr:case Br:case Vr:l=zn;break;case Gr:l=Xn;break;case`scroll`:case`scrollend`:l=jn;break;case`wheel`:l=j;break;case`copy`:case`cut`:case`paste`:l=Bn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Jn;break;case`toggle`:case`beforetoggle`:l=Zn}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=gn(m,p),g!=null&&d.push(Dd(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==ln&&(u=n.relatedTarget||n.fromElement)&&(wt(u)||u[_t]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?wt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=In,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Jn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:Et(l),h=u==null?c:Et(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,wt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=kd,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&Ad(s,c,l,d,!1),u!==null&&f!==null&&Ad(s,f,u,d,!0)}}a:{if(c=r?Et(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=dr;else if(or(c))if(fr)v=xr;else{v=yr;var y=vr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&rn(r.elementType)&&(v=dr):v=br;if(v&&=v(e,r)){sr(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Yt(c,`number`,c.value)}switch(y=r?Et(r):window,e){case`focusin`:(or(y)||y.contentEditable===`true`)&&(Ar=y,jr=r,Mr=null);break;case`focusout`:Mr=jr=Ar=null;break;case`mousedown`:Nr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Nr=!1,Pr(s,n,i);break;case`selectionchange`:if(kr)break;case`keydown`:case`keyup`:Pr(s,n,i)}var b;if($n)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else nr?I(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(N&&n.locale!==`ko`&&(nr||x!==`onCompositionStart`?x===`onCompositionEnd`&&nr&&(b=Cn()):(bn=i,xn=`value`in bn?bn.value:bn.textContent,nr=!0)),y=Od(r,x),0<y.length&&(x=new Vn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=tr(n),b!==null&&(x.data=b)))),(b=er?rr(e,n):ir(e,n))&&(x=Od(r,`onBeforeInput`),0<x.length&&(y=new Vn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),gd(s,e,r,n,i)}xd(s,t)})}function Dd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Od(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=gn(e,n),i!=null&&r.unshift(Dd(e,i,a)),i=gn(e,t),i!=null&&r.push(Dd(e,i,a))),e.tag===3)return r;e=e.return}return[]}function kd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ad(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=gn(n,a),l!=null&&o.unshift(Dd(n,l,c))):i||(l=gn(n,a),l!=null&&o.push(Dd(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var jd=/\r\n?/g,Md=/\u0000|\uFFFD/g;function Nd(e){return(typeof e==`string`?e:``+e).replace(jd,`
`).replace(Md,``)}function Pd(e,t){return t=Nd(t),Nd(e)===t}function Fd(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||$t(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&$t(e,``+r);break;case`className`:Rt(e,`class`,r);break;case`tabIndex`:Rt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Rt(e,n,r);break;case`style`:nn(e,r,o);break;case`data`:if(t!==`object`){Rt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=sn(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Fd(e,t,`name`,a.name,a,null),Fd(e,t,`formEncType`,a.formEncType,a,null),Fd(e,t,`formMethod`,a.formMethod,a,null),Fd(e,t,`formTarget`,a.formTarget,a,null)):(Fd(e,t,`encType`,a.encType,a,null),Fd(e,t,`method`,a.method,a,null),Fd(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=sn(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=cn);break;case`onScroll`:r!=null&&X(`scroll`,e);break;case`onScrollEnd`:r!=null&&X(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=sn(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:X(`beforetoggle`,e),X(`toggle`,e),Lt(e,`popover`,r);break;case`xlinkActuate`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:zt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:zt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:zt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:Lt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=an.get(n)||n,Lt(e,n,r))}}function Id(e,t,n,r,a,o){switch(n){case`style`:nn(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?$t(e,r):(typeof r==`number`||typeof r==`bigint`)&&$t(e,``+r);break;case`onScroll`:r!=null&&X(`scroll`,e);break;case`onScrollEnd`:r!=null&&X(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=cn);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!At.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[gt]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):Lt(e,n,r)}}}function Ld(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:X(`error`,e),X(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Fd(e,t,o,s,n,null)}}a&&Fd(e,t,`srcSet`,n.srcSet,n,null),r&&Fd(e,t,`src`,n.src,n,null);return;case`input`:X(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Fd(e,t,r,d,n,null)}}Jt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in X(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Fd(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Xt(e,!!r,n,!0):Xt(e,!!r,t,!1);return;case`textarea`:for(s in X(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Fd(e,t,s,c,n,null)}Qt(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Fd(e,t,l,r,n,null)}return;case`dialog`:X(`beforetoggle`,e),X(`toggle`,e),X(`cancel`,e),X(`close`,e);break;case`iframe`:case`object`:X(`load`,e);break;case`video`:case`audio`:for(r=0;r<yd.length;r++)X(yd[r],e);break;case`image`:X(`error`,e),X(`load`,e);break;case`details`:X(`toggle`,e);break;case`embed`:case`source`:case`link`:X(`error`,e),X(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Fd(e,t,u,r,n,null)}return;default:if(rn(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Id(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Fd(e,t,c,r,n,null))}function Rd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Fd(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Fd(e,t,p,m,r,f)}}qt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Fd(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Fd(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Xt(e,!!n,n?[]:``,!1):Xt(e,!!n,t,!0)):Xt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Fd(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Fd(e,t,s,a,r,o)}Zt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Fd(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Fd(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Fd(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Fd(e,t,u,p,r,m)}return;default:if(rn(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Id(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Id(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Fd(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Fd(e,t,f,p,r,m)}function zd(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Bd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&zd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&zd(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Vd=null,Hd=null;function Ud(e){return e.nodeType===9?e:e.ownerDocument}function Wd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Gd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Kd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qd=null;function Jd(){var e=window.event;return e&&e.type===`popstate`?e===qd?!1:(qd=e,!0):(qd=null,!1)}var Yd=typeof setTimeout==`function`?setTimeout:void 0,Xd=typeof clearTimeout==`function`?clearTimeout:void 0,Zd=typeof Promise==`function`?Promise:void 0,Qd=typeof queueMicrotask==`function`?queueMicrotask:Zd===void 0?Yd:function(e){return Zd.resolve(null).then(e).catch($d)};function $d(e){setTimeout(function(){throw e})}function ef(e){return e===`head`}function tf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Ip(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)gf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,gf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[St]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&gf(e.ownerDocument.body);n=i}while(n);Ip(t)}function nf(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function rf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:rf(n),Ct(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function af(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[St])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=df(e.nextSibling),e===null)break}return null}function of(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=df(e.nextSibling),e===null))return null;return e}function sf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=df(e.nextSibling),e===null))return null;return e}function cf(e){return e.data===`$?`||e.data===`$~`}function lf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function uf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function df(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var ff=null;function pf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return df(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function mf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function hf(e,t,n){switch(t=Ud(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function gf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ct(e)}var _f=new Map,vf=new Set;function yf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var bf=T.d;T.d={f:xf,r:Sf,D:Tf,C:Ef,L:Df,m:Of,X:Af,S:kf,M:jf};function xf(){var e=bf.f(),t=xu();return e||t}function Sf(e){var t=Tt(e);t!==null&&t.tag===5&&t.type===`form`?Ts(t):bf.r(e)}var Cf=typeof document>`u`?null:document;function wf(e,t,n){var r=Cf;if(r&&typeof t==`string`&&t){var i=Kt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),vf.has(i)||(vf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Ld(t,`link`,e),Ot(t),r.head.appendChild(t)))}}function Tf(e){bf.D(e),wf(`dns-prefetch`,e,null)}function Ef(e,t){bf.C(e,t),wf(`preconnect`,e,t)}function Df(e,t,n){bf.L(e,t,n);var r=Cf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Kt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Kt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Kt(n.imageSizes)+`"]`)):i+=`[href="`+Kt(e)+`"]`;var a=i;switch(t){case`style`:a=Nf(e);break;case`script`:a=Lf(e)}_f.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),_f.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Pf(a))||t===`script`&&r.querySelector(Rf(a))||(t=r.createElement(`link`),Ld(t,`link`,e),Ot(t),r.head.appendChild(t)))}}function Of(e,t){bf.m(e,t);var n=Cf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Kt(r)+`"][href="`+Kt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Lf(e)}if(!_f.has(a)&&(e=h({rel:`modulepreload`,href:e},t),_f.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Rf(a)))return}r=n.createElement(`link`),Ld(r,`link`,e),Ot(r),n.head.appendChild(r)}}}function kf(e,t,n){bf.S(e,t,n);var r=Cf;if(r&&e){var i=Dt(r).hoistableStyles,a=Nf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Pf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=_f.get(a))&&Vf(e,n);var c=o=r.createElement(`link`);Ot(c),Ld(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Bf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Af(e,t){bf.X(e,t);var n=Cf;if(n&&e){var r=Dt(n).hoistableScripts,i=Lf(e),a=r.get(i);a||(a=n.querySelector(Rf(i)),a||(e=h({src:e,async:!0},t),(t=_f.get(i))&&Hf(e,t),a=n.createElement(`script`),Ot(a),Ld(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function jf(e,t){bf.M(e,t);var n=Cf;if(n&&e){var r=Dt(n).hoistableScripts,i=Lf(e),a=r.get(i);a||(a=n.querySelector(Rf(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=_f.get(i))&&Hf(e,t),a=n.createElement(`script`),Ot(a),Ld(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Mf(e,t,n,r){var a=(a=ve.current)?yf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Nf(n.href),n=Dt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Nf(n.href);var o=Dt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(Pf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),_f.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_f.set(e,n),o||If(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Lf(n),n=Dt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Nf(e){return`href="`+Kt(e)+`"`}function Pf(e){return`link[rel="stylesheet"][`+e+`]`}function Ff(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function If(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Ld(t,`link`,n),Ot(t),e.head.appendChild(t))}function Lf(e){return`[src="`+Kt(e)+`"]`}function Rf(e){return`script[async]`+e}function zf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Kt(n.href)+`"]`);if(r)return t.instance=r,Ot(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),Ot(r),Ld(r,`style`,a),Bf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=Nf(n.href);var o=e.querySelector(Pf(a));if(o)return t.state.loading|=4,t.instance=o,Ot(o),o;r=Ff(n),(a=_f.get(a))&&Vf(r,a),o=(e.ownerDocument||e).createElement(`link`),Ot(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Ld(o,`link`,r),t.state.loading|=4,Bf(o,n.precedence,e),t.instance=o;case`script`:return o=Lf(n.src),(a=e.querySelector(Rf(o)))?(t.instance=a,Ot(a),a):(r=n,(a=_f.get(o))&&(r=h({},n),Hf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),Ot(a),Ld(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Bf(r,n.precedence,e));return t.instance}function Bf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Vf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Hf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Uf=null;function Wf(e,t,n){if(Uf===null){var r=new Map,i=Uf=new Map;i.set(n,r)}else i=Uf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[St]||a[ht]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Gf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Kf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function qf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Jf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Nf(r.href),a=t.querySelector(Pf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Zf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,Ot(a);return}a=t.ownerDocument||t,r=Ff(r),(i=_f.get(i))&&Vf(r,i),a=a.createElement(`link`),Ot(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Ld(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Zf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var Yf=0;function Xf(e,t){return e.stylesheets&&e.count===0&&$f(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&$f(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&Yf===0&&(Yf=62500*Bd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&$f(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>Yf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Zf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$f(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Qf=null;function $f(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Qf=new Map,t.forEach(ep,e),Qf=null,Zf.call(e))}function ep(e,t){if(!(t.state.loading&4)){var n=Qf.get(e);if(n)var r=n.get(null);else{n=new Map,Qf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Zf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var tp={$$typeof:te,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function np(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=it(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=it(0),this.hiddenUpdates=it(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function rp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new np(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=oi(3,null,null,t),e.current=a,a.stateNode=e,t=oa(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},za(a),e}function ip(e){return e?(e=ii,e):ii}function ap(e,t,n,r,i,a){i=ip(i),r.context===null?r.context=i:r.pendingContext=i,r=Va(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Ha(e,r,t),n!==null&&(gu(n,e,t),Ua(n,e,t))}function op(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function sp(e,t){op(e,t),(e=e.alternate)&&op(e,t)}function cp(e){if(e.tag===13||e.tag===31){var t=ti(e,67108864);t!==null&&gu(t,e,67108864),sp(e,67108864)}}function lp(e){if(e.tag===13||e.tag===31){var t=mu();t=ut(t);var n=ti(e,t);n!==null&&gu(n,e,t),sp(e,t)}}var up=!0;function dp(e,t,n,r){var i=w.T;w.T=null;var a=T.p;try{T.p=2,pp(e,t,n,r)}finally{T.p=a,w.T=i}}function fp(e,t,n,r){var i=w.T;w.T=null;var a=T.p;try{T.p=8,pp(e,t,n,r)}finally{T.p=a,w.T=i}}function pp(e,t,n,r){if(up){var i=mp(r);if(i===null)Ed(e,t,r,hp,n),Ep(e,r);else if(Op(i,e,t,n,r))r.stopPropagation();else if(Ep(e,r),t&4&&-1<Tp.indexOf(e)){for(;i!==null;){var a=Tt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=$e(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-k(o);s.entanglements[1]|=c,o&=~c}ad(a),!(q&6)&&(nu=Ie()+500,od(0,!1))}}break;case 31:case 13:s=ti(a,2),s!==null&&gu(s,a,2),xu(),sp(a,2)}if(a=mp(r),a===null&&Ed(e,t,r,hp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Ed(e,t,r,null,n)}}function mp(e){return e=un(e),gp(e)}var hp=null;function gp(e){if(hp=null,e=wt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return hp=e,null}function _p(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Le()){case Re:return 2;case ze:return 8;case O:case Be:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var vp=!1,yp=null,bp=null,xp=null,Sp=new Map,Cp=new Map,wp=[],Tp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Ep(e,t){switch(e){case`focusin`:case`focusout`:yp=null;break;case`dragenter`:case`dragleave`:bp=null;break;case`mouseover`:case`mouseout`:xp=null;break;case`pointerover`:case`pointerout`:Sp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Cp.delete(t.pointerId)}}function Dp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Tt(t),t!==null&&cp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Op(e,t,n,r,i){switch(t){case`focusin`:return yp=Dp(yp,e,t,n,r,i),!0;case`dragenter`:return bp=Dp(bp,e,t,n,r,i),!0;case`mouseover`:return xp=Dp(xp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return Sp.set(a,Dp(Sp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Cp.set(a,Dp(Cp.get(a)||null,e,t,n,r,i)),!0}return!1}function kp(e){var t=wt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,pt(e.priority,function(){lp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,pt(e.priority,function(){lp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ap(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ln=r,n.target.dispatchEvent(r),ln=null}else return t=Tt(n),t!==null&&cp(t),e.blockedOn=n,!1;t.shift()}return!0}function jp(e,t,n){Ap(e)&&n.delete(t)}function Mp(){vp=!1,yp!==null&&Ap(yp)&&(yp=null),bp!==null&&Ap(bp)&&(bp=null),xp!==null&&Ap(xp)&&(xp=null),Sp.forEach(jp),Cp.forEach(jp)}function Np(e,n){e.blockedOn===n&&(e.blockedOn=null,vp||(vp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Mp)))}var Pp=null;function Fp(e){Pp!==e&&(Pp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pp===e&&(Pp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(gp(r||n)===null)continue;break}var a=Tt(n);a!==null&&(e.splice(t,3),t-=3,Cs(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Ip(e){function t(t){return Np(t,e)}yp!==null&&Np(yp,e),bp!==null&&Np(bp,e),xp!==null&&Np(xp,e),Sp.forEach(t),Cp.forEach(t);for(var n=0;n<wp.length;n++){var r=wp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<wp.length&&(n=wp[0],n.blockedOn===null);)kp(n),n.blockedOn===null&&wp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[gt]||null;if(typeof a==`function`)o||Fp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[gt]||null)s=o.formAction;else if(gp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Fp(n)}}}function Lp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Rp(e){this._internalRoot=e}zp.prototype.render=Rp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current;ap(n,mu(),e,t,null,null)},zp.prototype.unmount=Rp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ap(e.current,2,null,e,null,null),xu(),t[_t]=null}};function zp(e){this._internalRoot=e}zp.prototype.unstable_scheduleHydration=function(e){if(e){var t=ft();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wp.length&&t!==0&&t<wp[n].priority;n++);wp.splice(n,0,e),n===0&&kp(e)}};var Bp=n.version;if(Bp!==`19.2.3`)throw Error(i(527,Bp,`19.2.3`));T.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=d(t),e=e===null?null:p(e),e=e===null?null:e.stateNode,e};var Vp={bundleType:0,version:`19.2.3`,rendererPackageName:`react-dom`,currentDispatcherRef:w,reconcilerVersion:`19.2.3`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Hp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hp.isDisabled&&Hp.supportsFiber)try{We=Hp.inject(Vp),Ge=Hp}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=Gs,s=Ks,c=qs;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=rp(e,1,!1,null,null,n,r,null,o,s,c,Lp),e[_t]=t.current,wd(e),new Rp(t)}})),g=c(o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=h()}))(),1),_=u(),v=()=>void 0,y=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},b=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(y(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):b(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new ee;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ee=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},te=function(e){let t=y(e);return x.encodeByteArray(t,!0)},S=function(e){return te(e).replace(/\./g,``)},ne=function(e){try{return x.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function re(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var ie=()=>re().__FIREBASE_DEFAULTS__,ae=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},oe=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&ne(e[1]);return t&&JSON.parse(t)},se=()=>{try{return v()||ie()||ae()||oe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ce=e=>se()?.emulatorHosts?.[e],le=()=>se()?.config,ue=e=>se()?.[`_${e}`],C=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function de(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function w(e){return(await fetch(e,{credentials:`include`})).ok}var T={};function fe(){let e={prod:[],emulator:[]};for(let t of Object.keys(T))T[t]?e.emulator.push(t):e.prod.push(t);return e}function pe(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var me=!1;function he(e,t){if(typeof window>`u`||typeof document>`u`||!de(window.location.host)||T[e]===t||T[e]||me)return;T[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=fe().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{me=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=pe(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function E(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function D(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())}function ge(){let e=se()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function _e(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function ve(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function ye(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function be(){let e=E();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function xe(){return!ge()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function Se(){return!ge()&&!!navigator.userAgent&&(navigator.userAgent.includes(`Safari`)||navigator.userAgent.includes(`WebKit`))&&!navigator.userAgent.includes(`Chrome`)}function Ce(){try{return typeof indexedDB==`object`}catch{return!1}}function we(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var Te=`FirebaseError`,Ee=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Te,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,De.prototype.create)}},De=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Oe(i,n):`Error`;return new Ee(r,`${this.serviceName}: ${a} (${r}).`,n)}};function Oe(e,t){return e.replace(ke,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var ke=/\{\$([^}]+)}/g;function Ae(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function je(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(Me(n)&&Me(a)){if(!je(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function Me(e){return typeof e==`object`&&!!e}function Ne(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function Pe(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Fe(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function Ie(e,t){let n=new Le(e,t);return n.subscribe.bind(n)}var Le=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=Re(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=ze),r.error===void 0&&(r.error=ze),r.complete===void 0&&(r.complete=ze);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Re(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function ze(){}function O(e){return e&&e._delegate?e._delegate:e}var Be=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Ve=`[DEFAULT]`,He=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new C;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(We(e))try{this.getOrInitializeService({instanceIdentifier:Ve})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Ve){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ve){return this.instances.has(e)}getOptions(e=Ve){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Ue(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ve){return this.component?this.component.multipleInstances?e:Ve:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Ue(e){return e===Ve?void 0:e}function We(e){return e.instantiationMode===`EAGER`}var Ge=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new He(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},Ke=[],k;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(k||={});var qe={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},Je=k.INFO,Ye={[k.DEBUG]:`log`,[k.VERBOSE]:`log`,[k.INFO]:`info`,[k.WARN]:`warn`,[k.ERROR]:`error`},Xe=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=Ye[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Ze=class{constructor(e){this.name=e,this._logLevel=Je,this._logHandler=Xe,this._userLogHandler=null,Ke.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in k))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?qe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...e),this._logHandler(this,k.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...e),this._logHandler(this,k.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,k.INFO,...e),this._logHandler(this,k.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,k.WARN,...e),this._logHandler(this,k.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...e),this._logHandler(this,k.ERROR,...e)}},Qe=(e,t)=>t.some(t=>e instanceof t),$e,et;function tt(){return $e||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function nt(){return et||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var rt=new WeakMap,it=new WeakMap,at=new WeakMap,ot=new WeakMap,st=new WeakMap;function ct(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(mt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&rt.set(t,e)}).catch(()=>{}),st.set(t,e),t}function lt(e){if(it.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});it.set(e,t)}var ut={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return it.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||at.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mt(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function dt(e){ut=e(ut)}function ft(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(ht(this),t,...n);return at.set(r,t.sort?t.sort():[t]),mt(r)}:nt().includes(e)?function(...t){return e.apply(ht(this),t),mt(rt.get(this))}:function(...t){return mt(e.apply(ht(this),t))}}function pt(e){return typeof e==`function`?ft(e):(e instanceof IDBTransaction&&lt(e),Qe(e,tt())?new Proxy(e,ut):e)}function mt(e){if(e instanceof IDBRequest)return ct(e);if(ot.has(e))return ot.get(e);let t=pt(e);return t!==e&&(ot.set(e,t),st.set(t,e)),t}var ht=e=>st.get(e);function gt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=mt(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(mt(o.result),e.oldVersion,e.newVersion,mt(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var _t=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],vt=[`put`,`add`,`delete`,`clear`],yt=new Map;function bt(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(yt.get(t))return yt.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=vt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_t.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return yt.set(t,a),a}dt(e=>({...e,get:(t,n,r)=>bt(t,n)||e.get(t,n,r),has:(t,n)=>!!bt(t,n)||e.has(t,n)}));var xt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(St(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function St(e){return e.getComponent()?.type===`VERSION`}var Ct=`@firebase/app`,wt=`0.14.6`,Tt=new Ze(`@firebase/app`),Et=`@firebase/app-compat`,Dt=`@firebase/analytics-compat`,Ot=`@firebase/analytics`,kt=`@firebase/app-check-compat`,At=`@firebase/app-check`,jt=`@firebase/auth`,Mt=`@firebase/auth-compat`,Nt=`@firebase/database`,Pt=`@firebase/data-connect`,Ft=`@firebase/database-compat`,It=`@firebase/functions`,Lt=`@firebase/functions-compat`,Rt=`@firebase/installations`,zt=`@firebase/installations-compat`,A=`@firebase/messaging`,Bt=`@firebase/messaging-compat`,Vt=`@firebase/performance`,Ht=`@firebase/performance-compat`,Ut=`@firebase/remote-config`,Wt=`@firebase/remote-config-compat`,Gt=`@firebase/storage`,Kt=`@firebase/storage-compat`,qt=`@firebase/firestore`,Jt=`@firebase/ai`,Yt=`@firebase/firestore-compat`,Xt=`firebase`,Zt=`12.6.0`,Qt=`[DEFAULT]`,$t={[Ct]:`fire-core`,[Et]:`fire-core-compat`,[Ot]:`fire-analytics`,[Dt]:`fire-analytics-compat`,[At]:`fire-app-check`,[kt]:`fire-app-check-compat`,[jt]:`fire-auth`,[Mt]:`fire-auth-compat`,[Nt]:`fire-rtdb`,[Pt]:`fire-data-connect`,[Ft]:`fire-rtdb-compat`,[It]:`fire-fn`,[Lt]:`fire-fn-compat`,[Rt]:`fire-iid`,[zt]:`fire-iid-compat`,[A]:`fire-fcm`,[Bt]:`fire-fcm-compat`,[Vt]:`fire-perf`,[Ht]:`fire-perf-compat`,[Ut]:`fire-rc`,[Wt]:`fire-rc-compat`,[Gt]:`fire-gcs`,[Kt]:`fire-gcs-compat`,[qt]:`fire-fst`,[Yt]:`fire-fst-compat`,[Jt]:`fire-vertex`,"fire-js":`fire-js`,[Xt]:`fire-js-all`},en=new Map,tn=new Map,nn=new Map;function rn(e,t){try{e.container.addComponent(t)}catch(n){Tt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function an(e){let t=e.name;if(nn.has(t))return Tt.debug(`There were multiple attempts to register component ${t}.`),!1;nn.set(t,e);for(let t of en.values())rn(t,e);for(let t of tn.values())rn(t,e);return!0}function on(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function sn(e){return e==null?!1:e.settings!==void 0}var cn=new De(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),ln=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Be(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cn.create(`app-deleted`,{appName:this._name})}},un=Zt;function dn(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:Qt,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw cn.create(`bad-app-name`,{appName:String(i)});if(n||=le(),!n)throw cn.create(`no-options`);let a=en.get(i);if(a){if(je(n,a.options)&&je(r,a.config))return a;throw cn.create(`duplicate-app`,{appName:i})}let o=new Ge(i);for(let e of nn.values())o.addComponent(e);let s=new ln(n,r,o);return en.set(i,s),s}function fn(e=Qt){let t=en.get(e);if(!t&&e===`[DEFAULT]`&&le())return dn();if(!t)throw cn.create(`no-app`,{appName:e});return t}function pn(e,t,n){let r=$t[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Tt.warn(e.join(` `));return}an(new Be(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var mn=`firebase-heartbeat-database`,hn=1,gn=`firebase-heartbeat-store`,_n=null;function vn(){return _n||=gt(mn,hn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(gn)}catch(e){console.warn(e)}}}}).catch(e=>{throw cn.create(`idb-open`,{originalErrorMessage:e.message})}),_n}async function yn(e){try{let t=(await vn()).transaction(gn),n=await t.objectStore(gn).get(xn(e));return await t.done,n}catch(e){if(e instanceof Ee)Tt.warn(e.message);else{let t=cn.create(`idb-get`,{originalErrorMessage:e?.message});Tt.warn(t.message)}}}async function bn(e,t){try{let n=(await vn()).transaction(gn,`readwrite`);await n.objectStore(gn).put(t,xn(e)),await n.done}catch(e){if(e instanceof Ee)Tt.warn(e.message);else{let t=cn.create(`idb-set`,{originalErrorMessage:e?.message});Tt.warn(t.message)}}}function xn(e){return`${e.name}!${e.options.appId}`}var Sn=1024,Cn=30,wn=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new Dn(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=Tn();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>Cn){let e=kn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Tt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=Tn(),{heartbeatsToSend:t,unsentEntries:n}=En(this._heartbeatsCache.heartbeats),r=S(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Tt.warn(e),``}}};function Tn(){return new Date().toISOString().substring(0,10)}function En(e,t=Sn){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),On(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),On(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Dn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ce()?we().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await yn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return bn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return bn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function On(e){return S(JSON.stringify({version:2,heartbeats:e})).length}function kn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function An(e){an(new Be(`platform-logger`,e=>new xt(e),`PRIVATE`)),an(new Be(`heartbeat`,e=>new wn(e),`PRIVATE`)),pn(Ct,wt,e),pn(Ct,wt,`esm2020`),pn(`fire-js`,``)}An(``);var jn=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Mn={},Nn,Pn;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=ee(n,1),a=ee(r,1);for(r=ee(r,2),n=ee(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=ee(r,1),n=ee(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function ee(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Pn=Mn.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Nn=Mn.Integer=o}).apply(jn===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:jn);var Fn=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},In={},Ln,Rn,zn,Bn,Vn,Hn,Un,Wn;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof Fn==`object`&&Fn];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=te;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,ee=!1,te=new v,S=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(ne)}};function ne(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}ee=!1}function re(){this.u=this.u,this.C=this.C}re.prototype.u=!1,re.prototype.dispose=function(){this.u||(this.u=!0,this.N())},re.prototype[Symbol.dispose]=function(){this.dispose()},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function oe(e){return/^[\s\xa0]*$/.test(e)}function se(e,t){ie.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(se,ie),se.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ce=`closure_listenable_`+(Math.random()*1e6|0),le=0;function ue(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++le,this.da=this.fa=!1}function C(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function de(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function w(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function T(e){let t={};for(let n in e)t[n]=e[n];return t}let fe=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function pe(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<fe.length;t++)n=fe[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function me(e){this.src=e,this.g={},this.h=0}me.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=E(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new ue(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function he(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(C(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function E(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var D=`closure_lm_`+(Math.random()*1e6|0),ge={};function _e(e,t,n,r,i){if(r&&r.once)return be(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)_e(e,t[a],n,r,i);return null}return n=De(n),e&&e[ce]?e.J(t,n,s(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=Te(e);if(c||(e[D]=c=new me(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=ye(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ae||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ce(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function ye(){function e(n){return t.call(e.src,e.listener,n)}let t=we;return e}function be(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)be(e,t[a],n,r,i);return null}return n=De(n),e&&e[ce]?e.K(t,n,s(r)?!!r.capture:!!r,i):ve(e,t,n,!0,r,i)}function xe(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)xe(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=De(n),e&&e[ce]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=E(t,n,r,i),n>-1&&(C(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=Te(e))&&(t=e.g[t.toString()],e=-1,t&&(e=E(t,n,r,i)),(n=e>-1?t[e]:null)&&Se(n))}function Se(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[ce])he(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ce(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Te(t))?(he(n,e),n.h==0&&(n.src=null,t[D]=null)):C(e)}}}function Ce(e){return e in ge?ge[e]:ge[e]=`on`+e}function we(e,t){if(e.da)e=!0;else{t=new se(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&Se(e),e=n.call(r,t)}return e}function Te(e){return e=e[D],e instanceof me?e:null}var Ee=`__closure_events_fn_`+(Math.random()*1e9>>>0);function De(e){return typeof e==`function`?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function Oe(){re.call(this),this.i=new me(this),this.M=this,this.G=null}d(Oe,re),Oe.prototype[ce]=!0,Oe.prototype.removeEventListener=function(e,t,n,r){xe(this,e,t,n,r)};function ke(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new ie(t,e);else if(t instanceof ie)t.target=t.target||e;else{var i=t;t=new ie(r,e),pe(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=Ae(a,r,!0,t)&&i;if(a=t.g=e,i=Ae(a,r,!0,t)&&i,i=Ae(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Ae(a,r,!1,t)&&i}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)C(n[e]);delete e.g[t],e.h--}}this.G=null},Oe.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Oe.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Ae(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&he(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function je(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Me(e){e.g=je(()=>{e.g=null,e.i&&(e.i=!1,Me(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Ne extends re{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(e){re.call(this),this.h=e,this.g={}}d(Pe,re);var Fe=[];function Ie(e){de(e.g,function(e,t){this.g.hasOwnProperty(t)&&Se(e)},e),e.g={}}Pe.prototype.N=function(){Pe.Z.N.call(this),Ie(this)},Pe.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Le=o.JSON.stringify,Re=o.JSON.parse,ze=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function O(){}function Be(){}var Ve={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function He(){ie.call(this,`d`)}d(He,ie);function Ue(){ie.call(this,`c`)}d(Ue,ie);var We={},Ge=null;function Ke(){return Ge||=new Oe}We.Ia=`serverreachability`;function k(e){ie.call(this,We.Ia,e)}d(k,ie);function qe(e){let t=Ke();ke(t,new k(t))}We.STAT_EVENT=`statevent`;function Je(e,t){ie.call(this,We.STAT_EVENT,e),this.stat=t}d(Je,ie);function Ye(e){let t=Ke();ke(t,new Je(t,e))}We.Ja=`timingevent`;function Xe(e,t){ie.call(this,We.Ja,e),this.size=t}d(Xe,ie);function Ze(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function Qe(){this.g=!0}Qe.prototype.ua=function(){this.g=!1};function $e(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function et(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function tt(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+rt(e,n)+(r?` `+r:``)})}function nt(e,t){e.info(function(){return`TIMEOUT: `+t})}Qe.prototype.info=function(){};function rt(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return Le(a)}catch{return t}}var it={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},at={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},ot;function st(){}d(st,O),st.prototype.g=function(){return new XMLHttpRequest},ot=new st;function ct(e){return encodeURIComponent(String(e))}function lt(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function ut(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new dt}function dt(){this.i=null,this.g=``,this.h=!1}var ft={},pt={};function mt(e,t,n){e.M=1,e.A=Bt(It(t)),e.u=n,e.R=!0,ht(e,null)}function ht(e,t){e.F=Date.now(),yt(e),e.B=It(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),en(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new dt,e.g=er(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Ne(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Fe[0]=i.toString()),i=Fe);for(let e=0;e<i.length;e++){let a=_e(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?T(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),qe(),$e(e.i,e.v,e.B,e.l,e.S,e.u)}ut.prototype.ba=function(e){e=e.target;let t=this.O;t&&Cn(e)==3?t.j():this.Y(e)},ut.prototype.Y=function(e){try{if(e==this.g)a:{let s=Cn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||wn(this.g)))){this.K||s!=4||c==7||qe(c==8||l<=0?3:2),xt(this);var t=this.g.ca();this.X=t;var n=gt(this);if(this.o=t==200,et(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!oe(r)){var a=r;break b}}a=null}if(e=a)tt(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,wt(this,e);else{this.o=!1,this.m=3,Ye(12),Ct(this),St(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=vt(this,n),t==pt){s==4&&(this.m=4,Ye(14),e=!1),tt(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==ft){this.m=4,Ye(15),tt(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else tt(this.i,this.l,t,null),wt(this,t);if(_t(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Ye(16),e=!1),this.o=this.o&&e,!e)tt(this.i,this.l,n,`[Invalid Chunked Response]`),Ct(this),St(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),Jn(o),o.P=!0,Ye(11))}}else tt(this.i,this.l,n,null),wt(this,n);s==4&&Ct(this),this.o&&!this.K&&(s==4?j(this.j,this):(this.o=!1,yt(this)))}else Tn(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Ye(12)):(this.m=0,Ye(13)),Ct(this),St(this)}}}catch{}};function gt(e){if(!_t(e))return e.g.la();let t=wn(e.g);if(t===``)return``;let n=``,r=t.length,i=Cn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return Ct(e),St(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function _t(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function vt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?pt:(n=Number(t.substring(n,r)),isNaN(n)?ft:(r+=1,r+n>t.length?pt:(t=t.slice(r,r+n),e.C=r+n,t)))}ut.prototype.cancel=function(){this.K=!0,Ct(this)};function yt(e){e.T=Date.now()+e.H,bt(e,e.H)}function bt(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=Ze(l(e.aa,e),t)}function xt(e){e.D&&=(o.clearTimeout(e.D),null)}ut.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(nt(this.i,this.B),this.M!=2&&(qe(),Ye(17)),Ct(this),this.m=2,St(this)):bt(this,this.T-e)};function St(e){e.j.I==0||e.K||j(e.j,e)}function Ct(e){xt(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function wt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||kt(n.h,e))){if(!e.L&&kt(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Xn(n),kn(n);else break a;qn(n),Ye(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=Ze(l(n.Va,n),6e3));Ot(n.h)<=1&&n.ta&&(n.ta=void 0)}else Qn(n,11)}else if((e.L||n.g==e)&&Xn(n),!oe(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(At(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,A(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=M(r,r.L?r.ba:null,r.W),o.L){jt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(xt(s),yt(s)),r.g=o}else Kn(r);n.i.length>0&&jn(n)}else l[0]!=`stop`&&l[0]!=`close`||Qn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Qn(n,7):On(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}qe(4)}catch{}}var Tt=class{constructor(e,t){this.g=e,this.map=t}};function Et(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Ot(e){return e.h?1:e.g?e.g.size:0}function kt(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function At(e,t){e.g?e.g.add(t):e.h=t}function jt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Et.prototype.cancel=function(){if(this.i=Mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Mt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var Nt=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Pt(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Ft(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Ft?(this.l=e.l,Lt(this,e.j),this.o=e.o,this.g=e.g,Rt(this,e.u),this.h=e.h,zt(this,tn(e.i)),this.m=e.m):e&&(t=String(e).match(Nt))?(this.l=!1,Lt(this,t[1]||``,!0),this.o=Vt(t[2]||``),this.g=Vt(t[3]||``,!0),Rt(this,t[4]),this.h=Vt(t[5]||``,!0),zt(this,t[6]||``,!0),this.m=Vt(t[7]||``)):(this.l=!1,this.i=new Yt(null,this.l))}Ft.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Ht(t,Wt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Ht(t,Wt,!0),`@`),e.push(ct(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Ht(n,n.charAt(0)==`/`?Kt:Gt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Ht(n,Jt)),e.join(``)},Ft.prototype.resolve=function(e){let t=It(this),n=!!e.j;n?Lt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Rt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?zt(t,tn(e.i)):n=!!e.m,n&&(t.m=e.m),t};function It(e){return new Ft(e)}function Lt(e,t,n){e.j=n?Vt(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Rt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function zt(e,t,n){t instanceof Yt?(e.i=t,rn(e.i,e.l)):(n||(t=Ht(t,qt)),e.i=new Yt(t,e.l))}function A(e,t,n){e.i.set(t,n)}function Bt(e){return A(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Vt(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Ht(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Ut),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Ut(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Wt=/[#\/\?@]/g,Gt=/[#\?:]/g,Kt=/[#\?]/g,qt=/[#\?@]/g,Jt=/#/g;function Yt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Xt(e){e.g||(e.g=new Map,e.h=0,e.i&&Pt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Yt.prototype,e.add=function(e,t){Xt(this),this.i=null,e=nn(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Zt(e,t){Xt(e),t=nn(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Qt(e,t){return Xt(e),t=nn(e,t),e.g.has(t)}e.forEach=function(e,t){Xt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function $t(e,t){Xt(e);let n=[];if(typeof t==`string`)Qt(e,t)&&(n=n.concat(e.g.get(nn(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Xt(this),this.i=null,e=nn(this,e),Qt(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=$t(this,e),e.length>0?String(e[0]):t):t};function en(e,t,n){Zt(e,t),n.length>0&&(e.i=null,e.g.set(nn(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=ct(n);n=$t(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+ct(n[t])),e.push(r)}}return this.i=e.join(`&`)};function tn(e){let t=new Yt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function nn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function rn(e,t){t&&!e.j&&(Xt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(Zt(this,t),en(this,n,e))},e)),e.j=t}function an(e,t){let n=new Qe;if(o.Image){let r=new Image;r.onload=u(sn,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(sn,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(sn,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(sn,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function on(e,t){let n=new Qe,r=new AbortController,i=setTimeout(()=>{r.abort(),sn(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?sn(n,`TestPingServer: ok`,!0,t):sn(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),sn(n,`TestPingServer: error`,!1,t)})}function sn(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function cn(){this.g=new ze}function ln(e){this.i=e.Sb||null,this.h=e.ab||!1}d(ln,O),ln.prototype.g=function(){return new un(this.i,this.h)};function un(e,t){Oe.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(un,Oe),e=un.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,pn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,pn(this)),this.g&&(this.readyState=3,pn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;dn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function dn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?fn(this):pn(this),this.readyState==3&&dn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,fn(this))},e.Na=function(e){this.g&&(this.response=e,fn(this))},e.ga=function(){this.g&&fn(this)};function fn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,pn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function pn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(un.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function mn(e){let t=``;return de(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function hn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=mn(n),typeof e==`string`||A(e,t,n))}function gn(e){Oe.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(gn,Oe);var _n=/^https?$/i,vn=[`POST`,`PUT`];e=gn.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ot.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){yn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(vn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){yn(this,e)}};function yn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,bn(e),Sn(e)}function bn(e){e.A||(e.A=!0,ke(e,`complete`),ke(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ke(this,`complete`),ke(this,`abort`),Sn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sn(this,!0)),gn.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?xn(this):this.Xa())},e.Xa=function(){xn(this)};function xn(e){if(e.h&&a!==void 0){if(e.v&&Cn(e)==4)setTimeout(e.Ca.bind(e),0);else if(ke(e,`readystatechange`),Cn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(Nt)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!_n.test(t?t.toLowerCase():``)}n=r}if(n)ke(e,`complete`),ke(e,`success`);else{e.o=6;try{var i=Cn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,bn(e)}}finally{Sn(e)}}}}function Sn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||ke(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Cn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return Cn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Re(t)}};function wn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Tn(e){let t={};e=(e.g&&Cn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(oe(e[r]))continue;var n=lt(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}w(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function En(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Dn(e){this.za=0,this.i=[],this.j=new Qe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=En(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=En(`baseRetryDelayMs`,5e3,e),this.Za=En(`retryDelaySeedMs`,1e4,e),this.Ta=En(`forwardChannelMaxRetries`,2,e),this.va=En(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new Et(e&&e.concurrentRequestLimit),this.Ba=new cn,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Dn.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Ye(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=M(this,null,this.W),jn(this)};function On(e){if(An(e),e.I==3){var t=e.V++,n=It(e.J);if(A(n,`SID`,e.M),A(n,`RID`,t),A(n,`TYPE`,`terminate`),Pn(e,n),t=new ut(e,e.j,t),t.M=2,t.A=Bt(It(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=er(t.j,null),t.g.ea(t.A)),t.F=Date.now(),yt(t)}$n(e)}function kn(e){e.g&&=(Jn(e),e.g.cancel(),null)}function An(e){kn(e),e.v&&=(o.clearTimeout(e.v),null),Xn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function jn(e){if(!Dt(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||S(),ee||=(x(),!0),te.add(t,e),e.D=0}}function Mn(e,t){return Ot(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=Ze(l(e.Ea,e,t),Zn(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new ut(this,this.j,e),a=this.o;if(this.U&&(a?(a=T(a),pe(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=Gn(this,i,t),n=It(this.J),A(n,`RID`,e),A(n,`CVER`,22),this.G&&A(n,`X-HTTP-Session-Id`,this.G),Pn(this,n),a&&(this.R?t=`headers=`+ct(mn(a))+`&`+t:this.u&&hn(n,this.u,a)),At(this.h,i),this.Ra&&A(n,`TYPE`,`init`),this.S?(A(n,`$req`,t),A(n,`SID`,`null`),i.U=!0,mt(i,n,null)):mt(i,n,t),this.I=2}}else this.I==3&&(e?Nn(this,e):this.i.length==0||Dt(this.h)||Nn(this))};function Nn(e,t){var n=t?t.l:e.V++;let r=It(e.J);A(r,`SID`,e.M),A(r,`RID`,n),A(r,`AID`,e.K),Pn(e,r),e.u&&e.o&&hn(r,e.u,e.o),n=new ut(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Gn(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),At(e.h,n),mt(n,r,t)}function Pn(e,t){e.H&&de(e.H,function(e,n){A(t,n,e)}),e.l&&de({},function(e,n){A(t,n,e)})}function Gn(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=Le(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Kn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||S(),ee||=(x(),!0),te.add(t,e),e.A=0}}function qn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=Ze(l(e.Da,e),Zn(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,Yn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=Ze(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Ye(10),kn(this),Yn(this))};function Jn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function Yn(e){e.g=new ut(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=It(e.na);A(t,`RID`,`rpc`),A(t,`SID`,e.M),A(t,`AID`,e.K),A(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&A(t,`TO`,e.ia),A(t,`TYPE`,`xmlhttp`),Pn(e,t),e.u&&e.o&&hn(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Bt(It(t)),n.u=null,n.R=!0,ht(n,e)}e.Va=function(){this.C!=null&&(this.C=null,kn(this),qn(this),Ye(19))};function Xn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function j(e,t){var n=null;if(e.g==t){Xn(e),Jn(e),e.g=null;var r=2}else if(kt(e.h,t))n=t.G,jt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Ke(),ke(r,new Xe(r,n)),jn(e)}else Kn(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Mn(e,t)||r==2&&qn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Qn(e,5);break;case 4:Qn(e,10);break;case 3:Qn(e,6);break;default:Qn(e,2)}}}function Zn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Qn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Ft(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||Lt(r,`https`),Bt(r),t?an(r.toString(),n):on(r.toString(),n)}else Ye(2);e.I=0,e.l&&e.l.pa(t),$n(e),An(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Ye(2)):(this.j.info(`Failed to ping google.com`),Ye(1))};function $n(e){if(e.I=0,e.ja=[],e.l){let t=Mt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function M(e,t,n){var r=n instanceof Ft?It(n):new Ft(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Rt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Ft(null);r&&Lt(e,r),t&&(e.g=t),i&&Rt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&A(r,n,t),A(r,`VER`,e.ka),Pn(e,r),r}function er(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new gn(new ln({ab:n})):new gn(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function N(){}e=N.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function P(){}P.prototype.g=function(e,t){return new F(e,t)};function F(e,t){Oe.call(this),this.g=new Dn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!oe(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!oe(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new nr(this)}d(F,Oe),F.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},F.prototype.close=function(){On(this.g)},F.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Le(e),e=n);t.i.push(new Tt(t.Ya++,e)),t.I==3&&jn(t)},F.prototype.N=function(){this.g.l=null,delete this.j,On(this.g),delete this.g,F.Z.N.call(this)};function I(e){He.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(I,He);function tr(){Ue.call(this),this.status=1}d(tr,Ue);function nr(e){this.g=e}d(nr,N),nr.prototype.ra=function(){ke(this.g,`a`)},nr.prototype.qa=function(e){ke(this.g,new I(e))},nr.prototype.pa=function(e){ke(this.g,new tr)},nr.prototype.oa=function(){ke(this.g,`b`)},P.prototype.createWebChannel=P.prototype.g,F.prototype.send=F.prototype.o,F.prototype.open=F.prototype.m,F.prototype.close=F.prototype.close,Wn=In.createWebChannelTransport=function(){return new P},Un=In.getStatEventTarget=function(){return Ke()},Hn=In.Event=We,Vn=In.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,Bn=In.ErrorCode=it,at.COMPLETE=`complete`,zn=In.EventType=at,Be.EventType=Ve,Ve.OPEN=`a`,Ve.CLOSE=`b`,Ve.ERROR=`c`,Ve.MESSAGE=`d`,Oe.prototype.listen=Oe.prototype.J,Rn=In.WebChannel=Be,In.FetchXmlHttpFactory=ln,gn.prototype.listenOnce=gn.prototype.K,gn.prototype.getLastError=gn.prototype.Ha,gn.prototype.getLastErrorCode=gn.prototype.ya,gn.prototype.getStatus=gn.prototype.ca,gn.prototype.getResponseJson=gn.prototype.La,gn.prototype.getResponseText=gn.prototype.la,gn.prototype.send=gn.prototype.ea,gn.prototype.setWithCredentials=gn.prototype.Fa,Ln=In.XhrIo=gn}).apply(Fn===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Fn);var Gn=`@firebase/firestore`,Kn=`4.9.3`,qn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn(`google-credentials-uid`),qn.FIRST_PARTY=new qn(`first-party-uid`),qn.MOCK_USER=new qn(`mock-user`);var Jn=`12.7.0`,Yn=new Ze(`@firebase/firestore`);function Xn(){return Yn.logLevel}function j(e,...t){if(Yn.logLevel<=k.DEBUG){let n=t.map($n);Yn.debug(`Firestore (${Jn}): ${e}`,...n)}}function Zn(e,...t){if(Yn.logLevel<=k.ERROR){let n=t.map($n);Yn.error(`Firestore (${Jn}): ${e}`,...n)}}function Qn(e,...t){if(Yn.logLevel<=k.WARN){let n=t.map($n);Yn.warn(`Firestore (${Jn}): ${e}`,...n)}}function $n(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function M(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,er(e,r,n)}function er(e,t,n){let r=`FIRESTORE (${Jn}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Zn(r),Error(r)}function N(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||er(t,i,r)}function P(e,t){return e}var F={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},I=class extends Ee{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},tr=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},nr=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},rr=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qn.UNAUTHENTICATED)))}shutdown(){}},ir=class{constructor(e){this.t=e,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){N(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tr,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{j(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(j(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new tr)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(N(typeof t.accessToken==`string`,31837,{l:t}),new nr(t.accessToken,this.currentUser)):null:(j(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return N(e===null||typeof e==`string`,2055,{h:e}),new qn(e)}},ar=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},or=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ar(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(qn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},sr=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},cr=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){N(this.o===void 0,3512);let n=e=>{e.error!=null&&j(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,j(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{j(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):j(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new sr(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(N(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new sr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function lr(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var ur=class{static newId(){let e=``;for(;e.length<20;){let t=lr(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function L(e,t){return e<t?-1:e>t?1:0}function dr(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return mr(n)===mr(i)?L(n,i):mr(n)?1:-1}return L(e.length,t.length)}var fr=55296,pr=57343;function mr(e){let t=e.charCodeAt(0);return t>=fr&&t<=pr}function hr(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function gr(e){return e+`\0`}var _r=`__name__`,vr=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&M(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&M(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return L(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):dr(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return Nn.fromString(e.substring(4,e.length-2))}},yr=class e extends vr{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new I(F.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},br=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xr=class e extends vr{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return br.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_r}static keyField(){return new e([_r])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new I(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new I(F.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new I(F.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new I(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},R=class e{constructor(e){this.path=e}static fromPath(t){return new e(yr.fromString(t))}static fromName(t){return new e(yr.fromString(t).popFirst(5))}static empty(){return new e(yr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new yr(t.slice()))}};function Sr(e,t,n){if(!n)throw new I(F.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Cr(e,t,n,r){if(!0===t&&!0===r)throw new I(F.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function wr(e){if(!R.isDocumentKey(e))throw new I(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Tr(e){if(R.isDocumentKey(e))throw new I(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Er(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Dr(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:M(12329,{type:typeof e})}function Or(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new I(F.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=Dr(e);throw new I(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function kr(e,t){if(t<=0)throw new I(F.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function Ar(e,t){let n={typeString:e};return t&&(n.value=t),n}function jr(e,t){if(!Er(e))throw new I(F.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new I(F.INVALID_ARGUMENT,n);return!0}var Mr=-62135596800,Nr=1e6,Pr=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*Nr))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new I(F.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<Mr||e>=253402300800)throw new I(F.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nr}_compareTo(e){return this.seconds===e.seconds?L(this.nanoseconds,e.nanoseconds):L(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(jr(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-Mr;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Pr._jsonSchemaVersion=`firestore/timestamp/1.0`,Pr._jsonSchema={type:Ar(`string`,Pr._jsonSchemaVersion),seconds:Ar(`number`),nanoseconds:Ar(`number`)};var z=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Pr(0,0))}static max(){return new e(new Pr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},Fr=-1,Ir=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};function Lr(e){return e.fields.find((e=>e.kind===2))}function Rr(e){return e.fields.filter((e=>e.kind!==2))}Ir.UNKNOWN_ID=-1;var zr=class{constructor(e,t){this.fieldPath=e,this.kind=t}},Br=class e{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new e(0,Ur.min())}};function Vr(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new Ur(z.fromTimestamp(r===1e9?new Pr(n+1,0):new Pr(n,r)),R.empty(),t)}function Hr(e){return new Ur(e.readTime,e.key,Fr)}var Ur=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(z.min(),R.empty(),Fr)}static max(){return new e(z.max(),R.empty(),Fr)}};function Wr(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=R.comparator(e.documentKey,t.documentKey),n===0?L(e.largestBatchId,t.largestBatchId):n):n}var Gr=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Kr=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function qr(e){if(e.code!==F.FAILED_PRECONDITION||e.message!==Gr)throw e;j(`LocalStore`,`Unexpectedly lost primary lease`)}var B=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&M(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}},Jr=`SimpleDb`,Yr=class e{static open(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(e){throw new $r(n,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new tr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new $r(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{let n=ii(t.target.error);this.S.reject(new $r(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(j(Jr,`Aborting transaction:`,e?e.message:`Client-initiated abort`),this.aborted=!0,this.transaction.abort())}C(){let e=this.transaction;this.aborted||typeof e.commit!=`function`||e.commit()}store(e){return new ti(this.transaction.objectStore(e))}},Xr=class e{static delete(e){return j(Jr,`Removing database:`,e),ni(re().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Ce())return!1;if(e.F())return!0;let t=E(),n=e.M(t),r=0<n&&n<10,i=Zr(t),a=0<i&&i<4.5;return!(t.indexOf(`MSIE `)>0||t.indexOf(`Trident/`)>0||t.indexOf(`Edge/`)>0||r||a)}static F(){return typeof process<`u`&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE===`YES`}static O(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split(`_`).slice(0,2).join(`.`):`-1`;return Number(n)}constructor(t,n,r){this.name=t,this.version=n,this.N=r,this.B=null,e.M(E())===12.2&&Zn(`Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`)}async L(e){return this.db||=(j(Jr,`Opening database:`,this.name),await new Promise(((t,n)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{let n=e.target.result;t(n)},r.onblocked=()=>{n(new $r(e,`Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.`))},r.onerror=t=>{let r=t.target.error;r.name===`VersionError`?n(new I(F.FAILED_PRECONDITION,`A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.`)):r.name===`InvalidStateError`?n(new I(F.FAILED_PRECONDITION,`Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: `+r)):n(new $r(e,r))},r.onupgradeneeded=e=>{j(Jr,`Database "`+this.name+`" requires upgrade from version:`,e.oldVersion);let t=e.target.result;this.N.k(t,r.transaction,e.oldVersion,this.version).next((()=>{j(Jr,`Database upgrade to version `+this.version+` complete`)}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){let i=t===`readonly`,a=0;for(;;){++a;try{this.db=await this.L(e);let t=Yr.open(this.db,e,i?`readonly`:`readwrite`,n),a=r(t).next((e=>(t.C(),e))).catch((e=>(t.abort(e),B.reject(e)))).toPromise();return a.catch((()=>{})),await t.D,a}catch(e){let t=e,n=t.name!==`FirebaseError`&&a<3;if(j(Jr,`Transaction failed with error:`,t.message,`Retrying:`,n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}};function Zr(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}var Qr=class{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ni(this.U.delete())}},$r=class extends I{constructor(e,t){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name=`IndexedDbTransactionError`}};function ei(e){return e.name===`IndexedDbTransactionError`}var ti=class{constructor(e){this.store=e}put(e,t){let n;return t===void 0?(j(Jr,`PUT`,this.store.name,`<auto-key>`,e),n=this.store.put(e)):(j(Jr,`PUT`,this.store.name,e,t),n=this.store.put(t,e)),ni(n)}add(e){return j(Jr,`ADD`,this.store.name,e,e),ni(this.store.add(e))}get(e){return ni(this.store.get(e)).next((t=>(t===void 0&&(t=null),j(Jr,`GET`,this.store.name,e,t),t)))}delete(e){return j(Jr,`DELETE`,this.store.name,e),ni(this.store.delete(e))}count(){return j(Jr,`COUNT`,this.store.name),ni(this.store.count())}J(e,t){let n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if(typeof r.getAll==`function`){let e=r.getAll(n.range);return new B(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{let e=this.cursor(n),t=[];return this.H(e,((e,n)=>{t.push(n)})).next((()=>t))}}Y(e,t){let n=this.store.getAll(e,t===null?void 0:t);return new B(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}Z(e,t){j(Jr,`DELETE ALL`,this.store.name);let n=this.options(e,t);n.X=!1;let r=this.cursor(n);return this.H(r,((e,t,n)=>n.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);let r=this.cursor(n);return this.H(r,t)}te(e){let t=this.cursor({});return new B(((n,r)=>{t.onerror=e=>{r(ii(e.target.error))},t.onsuccess=t=>{let r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}H(e,t){let n=[];return new B(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i)return void r();let a=new Qr(i),o=t(i.primaryKey,i.value,a);if(o instanceof B){let e=o.catch((e=>(a.done(),B.reject(e))));n.push(e)}a.isDone?r():a.G===null?i.continue():i.continue(a.G)}})).next((()=>B.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e==`string`?n=e:t=e),{index:n,range:t}}cursor(e){let t=`next`;if(e.reverse&&(t=`prev`),e.index){let n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ni(e){return new B(((t,n)=>{e.onsuccess=e=>{let n=e.target.result;t(n)},e.onerror=e=>{n(ii(e.target.error))}}))}var ri=!1;function ii(e){let t=Xr.M(E());if(t>=12.2&&t<13){let t=`An internal error was encountered in the Indexed Database server`;if(e.message.indexOf(t)>=0){let e=new I(`internal`,`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ri||(ri=!0,setTimeout((()=>{throw e}),0)),e}}return e}var ai=`IndexBackfiller`,oi=class{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&=(this.task.cancel(),null)}get started(){return this.task!==null}re(e){j(ai,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay(`index_backfill`,e,(async()=>{this.task=null;try{j(ai,`Documents written: ${await this.ne.ie()}`)}catch(e){ei(e)?j(ai,`Ignoring IndexedDB error during index backfill: `,e):await qr(e)}await this.re(6e4)}))}},si=class{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction(`Backfill Indexes`,`readwrite-primary`,(t=>this.se(t,e)))}se(e,t){let n=new Set,r=t,i=!0;return B.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(t!==null&&!n.has(t))return j(ai,`Processing collection: ${t}`),this.oe(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{let i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this._e(r,n))).next((n=>(j(ai,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((e,t)=>{let r=Hr(t);Wr(r,n)>0&&(n=r)})),new Ur(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}},ci=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};ci.ce=-1;var li=-1;function ui(e){return e==null}function di(e){return e===0&&1/e==-1/0}function fi(e){return typeof e==`number`&&Number.isInteger(e)&&!di(e)&&e<=2**53-1&&e>=-(2**53-1)}var pi=``;function mi(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=gi(t)),t=hi(e.get(n),t);return gi(t)}function hi(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case pi:n+=``;break;default:n+=r}}return n}function gi(e){return e+pi+``}function _i(e){let t=e.length;if(N(t>=2,64408,{path:e}),t===2)return N(e.charAt(0)===pi&&e.charAt(1)===``,56145,{path:e}),yr.emptyPath();let n=t-2,r=[],i=``;for(let a=0;a<t;){let t=e.indexOf(pi,a);switch((t<0||t>n)&&M(50515,{path:e}),e.charAt(t+1)){case``:let n=e.substring(a,t),o;i.length===0?o=n:(i+=n,o=i,i=``),r.push(o);break;case``:i+=e.substring(a,t),i+=`\0`;break;case``:i+=e.substring(a,t+1);break;default:M(61167,{path:e})}a=t+2}return new yr(r)}var vi=`remoteDocuments`,yi=`owner`,bi=`owner`,xi=`mutationQueues`,Si=`userId`,Ci=`mutations`,wi=`batchId`,Ti=`userMutationsIndex`,Ei=[`userId`,`batchId`];function Di(e,t){return[e,mi(t)]}function Oi(e,t,n){return[e,mi(t),n]}var ki={},Ai=`documentMutations`,ji=`remoteDocumentsV14`,Mi=[`prefixPath`,`collectionGroup`,`readTime`,`documentId`],V=`documentKeyIndex`,Ni=[`prefixPath`,`collectionGroup`,`documentId`],Pi=`collectionGroupIndex`,Fi=[`collectionGroup`,`readTime`,`prefixPath`,`documentId`],Ii=`remoteDocumentGlobal`,Li=`remoteDocumentGlobalKey`,Ri=`targets`,zi=`queryTargetsIndex`,Bi=[`canonicalId`,`targetId`],Vi=`targetDocuments`,Hi=[`targetId`,`path`],Ui=`documentTargetsIndex`,Wi=[`path`,`targetId`],Gi=`targetGlobalKey`,Ki=`targetGlobal`,qi=`collectionParents`,Ji=[`collectionId`,`parent`],Yi=`clientMetadata`,Xi=`clientId`,Zi=`bundles`,Qi=`bundleId`,$i=`namedQueries`,ea=`name`,ta=`indexConfiguration`,na=`indexId`,ra=`collectionGroupIndex`,ia=`collectionGroup`,aa=`indexState`,oa=[`indexId`,`uid`],sa=`sequenceNumberIndex`,ca=[`uid`,`sequenceNumber`],la=`indexEntries`,ua=[`indexId`,`uid`,`arrayValue`,`directionalValue`,`orderedDocumentKey`,`documentKey`],da=`documentKeyIndex`,fa=[`indexId`,`uid`,`orderedDocumentKey`],pa=`documentOverlays`,ma=[`userId`,`collectionPath`,`documentId`],ha=`collectionPathOverlayIndex`,ga=[`userId`,`collectionPath`,`largestBatchId`],_a=`collectionGroupOverlayIndex`,va=[`userId`,`collectionGroup`,`largestBatchId`],ya=`globals`,ba=`name`,xa=[...[...[...[...[xi,Ci,Ai,vi,Ri,yi,Ki,Vi],Yi],Ii],qi],Zi,$i],Sa=[...xa,pa],Ca=[xi,Ci,Ai,ji,Ri,yi,Ki,Vi,Yi,Ii,qi,Zi,$i,pa],wa=Ca,Ta=[...wa,ta,aa,la],Ea=Ta,Da=[...Ta,ya],Oa=Da,ka=class extends Kr{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}};function Aa(e,t){let n=P(e);return Xr.O(n.le,t)}function ja(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ma(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Na(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Pa=class e{constructor(e,t){this.comparator=e,this.root=t||Ia.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ia.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ia.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fa(this.root,e,this.comparator,!0)}},Fa=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ia=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw M(43730,{key:this.key,value:this.value});if(this.right.isRed())throw M(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw M(27949);return e+(this.isRed()?0:1)}};Ia.EMPTY=null,Ia.RED=!0,Ia.BLACK=!1,Ia.EMPTY=new class{constructor(){this.size=0}get key(){throw M(57766)}get value(){throw M(16141)}get color(){throw M(16727)}get left(){throw M(29726)}get right(){throw M(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ia(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var La=class e{constructor(e){this.comparator=e,this.data=new Pa(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ra(this.data.getIterator())}getIteratorFrom(e){return new Ra(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},Ra=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function za(e){return e.hasNext()?e.getNext():void 0}var Ba=class e{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new e([])}unionWith(t){let n=new La(xr.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},Va=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},Ha=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new Va(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return L(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ha.EMPTY_BYTE_STRING=new Ha(``);var Ua=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wa(e){if(N(!!e,39018),typeof e==`string`){let t=0,n=Ua.exec(e);if(N(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ga(e.seconds),nanos:Ga(e.nanos)}}function Ga(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function Ka(e){return typeof e==`string`?Ha.fromBase64String(e):Ha.fromUint8Array(e)}var qa=`server_timestamp`,Ja=`__type__`,Ya=`__previous_value__`,Xa=`__local_write_time__`;function Za(e){return(e?.mapValue?.fields||{})[Ja]?.stringValue===qa}function Qa(e){let t=e.mapValue.fields[Ya];return Za(t)?Qa(t):t}function $a(e){let t=Wa(e.mapValue.fields[Xa].timestampValue);return new Pr(t.seconds,t.nanos)}var eo=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},to=`(default)`,no=class e{constructor(e,t){this.projectId=e,this.database=t||to}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===to}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},ro=`__type__`,io=`__max__`,ao={mapValue:{fields:{__type__:{stringValue:io}}}},oo=`__vector__`,so=`value`,co={nullValue:`NULL_VALUE`};function lo(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?Za(e)?4:To(e)?9007199254740991:Co(e)?10:11:M(28295,{value:e})}function uo(e,t){if(e===t)return!0;let n=lo(e);if(n!==lo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $a(e).isEqual($a(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=Wa(e.timestampValue),r=Wa(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ka(e.bytesValue).isEqual(Ka(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ga(e.geoPointValue.latitude)===Ga(t.geoPointValue.latitude)&&Ga(e.geoPointValue.longitude)===Ga(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return Ga(e.integerValue)===Ga(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=Ga(e.doubleValue),r=Ga(t.doubleValue);return n===r?di(n)===di(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hr(e.arrayValue.values||[],t.arrayValue.values||[],uo);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ja(n)!==ja(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!uo(n[e],r[e])))return!1;return!0}(e,t);default:return M(52216,{left:e})}}function H(e,t){return(e.values||[]).find((e=>uo(e,t)))!==void 0}function U(e,t){if(e===t)return 0;let n=lo(e),r=lo(t);if(n!==r)return L(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return L(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=Ga(e.integerValue||e.doubleValue),r=Ga(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fo(e.timestampValue,t.timestampValue);case 4:return fo($a(e),$a(t));case 5:return dr(e.stringValue,t.stringValue);case 6:return function(e,t){let n=Ka(e),r=Ka(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=L(n[e],r[e]);if(t!==0)return t}return L(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=L(Ga(e.latitude),Ga(t.latitude));return n===0?L(Ga(e.longitude),Ga(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return po(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[so]?.arrayValue,a=r[so]?.arrayValue,o=L(i?.values?.length||0,a?.values?.length||0);return o===0?po(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ao.mapValue&&t===ao.mapValue)return 0;if(e===ao.mapValue)return 1;if(t===ao.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=dr(r[e],a[e]);if(t!==0)return t;let o=U(n[r[e]],i[a[e]]);if(o!==0)return o}return L(r.length,a.length)}(e.mapValue,t.mapValue);default:throw M(23264,{he:n})}}function fo(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return L(e,t);let n=Wa(e),r=Wa(t),i=L(n.seconds,r.seconds);return i===0?L(n.nanos,r.nanos):i}function po(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=U(n[e],r[e]);if(t)return t}return L(n.length,r.length)}function mo(e){return ho(e)}function ho(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=Wa(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return Ka(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return R.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=ho(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${ho(e.fields[i])}`;return n+`}`}(e.mapValue):M(61005,{value:e})}function go(e){switch(lo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Qa(e);return t?16+go(t):16;case 5:return 2*e.stringValue.length;case 6:return Ka(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+go(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Ma(e.fields,((e,n)=>{t+=e.length+go(n)})),t}(e.mapValue);default:throw M(13486,{value:e})}}function _o(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function vo(e){return!!e&&`integerValue`in e}function yo(e){return!!e&&`arrayValue`in e}function bo(e){return!!e&&`nullValue`in e}function xo(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function So(e){return!!e&&`mapValue`in e}function Co(e){return(e?.mapValue?.fields||{})[ro]?.stringValue===oo}function wo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return Ma(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=wo(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=wo(e.arrayValue.values[n]);return t}return{...e}}function To(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===io}var Eo={mapValue:{fields:{[ro]:{stringValue:oo},[so]:{arrayValue:{}}}}};function Do(e){return`nullValue`in e?co:`booleanValue`in e?{booleanValue:!1}:`integerValue`in e||`doubleValue`in e?{doubleValue:NaN}:`timestampValue`in e?{timestampValue:{seconds:-(2**53-1)}}:`stringValue`in e?{stringValue:``}:`bytesValue`in e?{bytesValue:``}:`referenceValue`in e?_o(no.empty(),R.empty()):`geoPointValue`in e?{geoPointValue:{latitude:-90,longitude:-180}}:`arrayValue`in e?{arrayValue:{}}:`mapValue`in e?Co(e)?Eo:{mapValue:{}}:M(35942,{value:e})}function Oo(e){return`nullValue`in e?{booleanValue:!1}:`booleanValue`in e?{doubleValue:NaN}:`integerValue`in e||`doubleValue`in e?{timestampValue:{seconds:-(2**53-1)}}:`timestampValue`in e?{stringValue:``}:`stringValue`in e?{bytesValue:``}:`bytesValue`in e?_o(no.empty(),R.empty()):`referenceValue`in e?{geoPointValue:{latitude:-90,longitude:-180}}:`geoPointValue`in e?{arrayValue:{}}:`arrayValue`in e?Eo:`mapValue`in e?Co(e)?{mapValue:{}}:ao:M(61959,{value:e})}function ko(e,t){let n=U(e.value,t.value);return n===0?e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0:n}function Ao(e,t){let n=U(e.value,t.value);return n===0?e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0:n}var jo=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!So(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wo(t)}setAll(e){let t=xr.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=wo(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());So(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];So(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ma(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(wo(this.value))}};function Mo(e){let t=[];return Ma(e.fields,((e,n)=>{let r=new xr([e]);if(So(n)){let e=Mo(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new Ba(t)}var No=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,z.min(),z.min(),z.min(),jo.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,z.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,z.min(),z.min(),jo.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,z.min(),z.min(),jo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},Po=class{constructor(e,t){this.position=e,this.inclusive=t}};function Fo(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?R.comparator(R.fromName(o.referenceValue),n.key):U(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function Io(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!uo(e.position[n],t.position[n]))return!1;return!0}var Lo=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Ro(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var zo=class{},W=class e extends zo{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new Yo(t,n,r):n===`array-contains`?new $o(t,r):n===`in`?new es(t,r):n===`not-in`?new ts(t,r):n===`array-contains-any`?new ns(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new Xo(e,n):new Zo(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(U(t,this.value)):t!==null&&lo(this.value)===lo(t)&&this.matchesComparison(U(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return M(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Bo=class e extends zo{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return Vo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Vo(e){return e.op===`and`}function Ho(e){return e.op===`or`}function Uo(e){return Wo(e)&&Vo(e)}function Wo(e){for(let t of e.filters)if(t instanceof Bo)return!1;return!0}function Go(e){if(e instanceof W)return e.field.canonicalString()+e.op.toString()+mo(e.value);if(Uo(e))return e.filters.map((e=>Go(e))).join(`,`);{let t=e.filters.map((e=>Go(e))).join(`,`);return`${e.op}(${t})`}}function Ko(e,t){return e instanceof W?function(e,t){return t instanceof W&&e.op===t.op&&e.field.isEqual(t.field)&&uo(e.value,t.value)}(e,t):e instanceof Bo?function(e,t){return t instanceof Bo&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&Ko(n,t.filters[r])),!0):!1}(e,t):void M(19439)}function qo(e,t){let n=e.filters.concat(t);return Bo.create(n,e.op)}function Jo(e){return e instanceof W?function(e){return`${e.field.canonicalString()} ${e.op} ${mo(e.value)}`}(e):e instanceof Bo?function(e){return e.op.toString()+` {`+e.getFilters().map(Jo).join(` ,`)+`}`}(e):`Filter`}var Yo=class extends W{constructor(e,t,n){super(e,t,n),this.key=R.fromName(n.referenceValue)}matches(e){let t=R.comparator(e.key,this.key);return this.matchesComparison(t)}},Xo=class extends W{constructor(e,t){super(e,`in`,t),this.keys=Qo(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},Zo=class extends W{constructor(e,t){super(e,`not-in`,t),this.keys=Qo(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function Qo(e,t){return(t.arrayValue?.values||[]).map((e=>R.fromName(e.referenceValue)))}var $o=class extends W{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return yo(t)&&H(t.arrayValue,this.value)}},es=class extends W{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&H(this.value.arrayValue,t)}},ts=class extends W{constructor(e,t){super(e,`not-in`,t)}matches(e){if(H(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!H(this.value.arrayValue,t)}},ns=class extends W{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!yo(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>H(this.value.arrayValue,e)))}},rs=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function is(e,t=null,n=[],r=[],i=null,a=null,o=null){return new rs(e,t,n,r,i,a,o)}function as(e){let t=P(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>Go(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),ui(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>mo(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>mo(e))).join(`,`)),t.Te=e}return t.Te}function os(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ro(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ko(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Io(e.startAt,t.startAt)&&Io(e.endAt,t.endAt)}function ss(e){return R.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function cs(e,t){return e.filters.filter((e=>e instanceof W&&e.field.isEqual(t)))}function ls(e,t,n){let r=co,i=!0;for(let n of cs(e,t)){let e=co,t=!0;switch(n.op){case`<`:case`<=`:e=Do(n.value);break;case`==`:case`in`:case`>=`:e=n.value;break;case`>`:e=n.value,t=!1;break;case`!=`:case`not-in`:e=co}ko({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(n!==null){for(let a=0;a<e.orderBy.length;++a)if(e.orderBy[a].field.isEqual(t)){let e=n.position[a];ko({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}}return{value:r,inclusive:i}}function us(e,t,n){let r=ao,i=!0;for(let n of cs(e,t)){let e=ao,t=!0;switch(n.op){case`>=`:case`>`:e=Oo(n.value),t=!1;break;case`==`:case`in`:case`<=`:e=n.value;break;case`<`:e=n.value,t=!1;break;case`!=`:case`not-in`:e=ao}Ao({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(n!==null){for(let a=0;a<e.orderBy.length;++a)if(e.orderBy[a].field.isEqual(t)){let e=n.position[a];Ao({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}}return{value:r,inclusive:i}}var ds=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function fs(e,t,n,r,i,a,o,s){return new ds(e,t,n,r,i,a,o,s)}function ps(e){return new ds(e)}function ms(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function hs(e){return e.collectionGroup!==null}function gs(e){let t=P(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new La(xr.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Lo(r,n))})),e.has(xr.keyField().canonicalString())||t.Ie.push(new Lo(xr.keyField(),n))}return t.Ie}function _s(e){let t=P(e);return t.Ee||=vs(t,gs(e)),t.Ee}function vs(e,t){if(e.limitType===`F`)return is(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new Lo(e.field,t)}));let n=e.endAt?new Po(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Po(e.startAt.position,e.startAt.inclusive):null;return is(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ys(e,t){let n=e.filters.concat([t]);return new ds(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function bs(e,t,n){return new ds(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xs(e,t){return os(_s(e),_s(t))&&e.limitType===t.limitType}function Ss(e){return`${as(_s(e))}|lt:${e.limitType}`}function Cs(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Jo(e))).join(`, `)}]`),ui(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>mo(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>mo(e))).join(`,`)),`Target(${t})`}(_s(e))}; limitType=${e.limitType})`}function ws(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?R.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of gs(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Fo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,gs(e),t)||e.endAt&&!function(e,t,n){let r=Fo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,gs(e),t))}(e,t)}function Ts(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Es(e){return(t,n)=>{let r=!1;for(let i of gs(e)){let e=Ds(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function Ds(e,t,n){let r=e.field.isKeyField()?R.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?U(r,i):M(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return M(19790,{direction:e.dir})}}var Os=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return Na(this.inner)}size(){return this.innerSize}},ks=new Pa(R.comparator);function As(){return ks}var js=new Pa(R.comparator);function Ms(...e){let t=js;for(let n of e)t=t.insert(n.key,n);return t}function Ns(e){let t=js;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ps(){return Is()}function Fs(){return Is()}function Is(){return new Os((e=>e.toString()),((e,t)=>e.isEqual(t)))}var Ls=new Pa(R.comparator),Rs=new La(R.comparator);function G(...e){let t=Rs;for(let n of e)t=t.add(n);return t}var zs=new La(L);function Bs(){return zs}function Vs(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:di(t)?`-0`:t}}function Hs(e){return{integerValue:``+e}}function Us(e,t){return fi(t)?Hs(t):Vs(e,t)}var Ws=class{constructor(){this._=void 0}};function Gs(e,t,n){return e instanceof Js?function(e,t){let n={fields:{[Ja]:{stringValue:qa},[Xa]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Za(t)&&(t=Qa(t)),t&&(n.fields[Ya]=t),{mapValue:n}}(n,t):e instanceof Ys?Xs(e,t):e instanceof Zs?Qs(e,t):function(e,t){let n=qs(e,t),r=ec(n)+ec(e.Ae);return vo(n)&&vo(e.Ae)?Hs(r):Vs(e.serializer,r)}(e,t)}function Ks(e,t,n){return e instanceof Ys?Xs(e,t):e instanceof Zs?Qs(e,t):n}function qs(e,t){return e instanceof $s?function(e){return vo(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var Js=class extends Ws{},Ys=class extends Ws{constructor(e){super(),this.elements=e}};function Xs(e,t){let n=tc(t);for(let t of e.elements)n.some((e=>uo(e,t)))||n.push(t);return{arrayValue:{values:n}}}var Zs=class extends Ws{constructor(e){super(),this.elements=e}};function Qs(e,t){let n=tc(t);for(let t of e.elements)n=n.filter((e=>!uo(e,t)));return{arrayValue:{values:n}}}var $s=class extends Ws{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function ec(e){return Ga(e.integerValue||e.doubleValue)}function tc(e){return yo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var nc=class{constructor(e,t){this.field=e,this.transform=t}};function rc(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ys&&t instanceof Ys||e instanceof Zs&&t instanceof Zs?hr(e.elements,t.elements,uo):e instanceof $s&&t instanceof $s?uo(e.Ae,t.Ae):e instanceof Js&&t instanceof Js}(e.transform,t.transform)}var ic=class{constructor(e,t){this.version=e,this.transformResults=t}},ac=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function oc(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var sc=class{};function cc(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new vc(e.key,ac.none()):new pc(e.key,e.data,ac.none());{let n=e.data,r=jo.empty(),i=new La(xr.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new mc(e.key,r,new Ba(i.toArray()),ac.none())}}function lc(e,t,n){e instanceof pc?function(e,t,n){let r=e.value.clone(),i=gc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof mc?function(e,t,n){if(!oc(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=gc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(hc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function uc(e,t,n,r){return e instanceof pc?function(e,t,n,r){if(!oc(e.precondition,t))return n;let i=e.value.clone(),a=_c(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof mc?function(e,t,n,r){if(!oc(e.precondition,t))return n;let i=_c(e.fieldTransforms,r,t),a=t.data;return a.setAll(hc(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return oc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function dc(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=qs(r.transform,e||null);i!=null&&(n===null&&(n=jo.empty()),n.set(r.field,i))}return n||null}function fc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&hr(e,t,((e,t)=>rc(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var pc=class extends sc{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},mc=class extends sc{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function hc(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function gc(e,t,n){let r=new Map;N(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Ks(o,s,n[i]))}return r}function _c(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,Gs(e,a,t))}return r}var vc=class extends sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},yc=class extends sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},bc=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&lc(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=uc(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=uc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Fs();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=cc(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(z.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),G())}isEqual(e){return this.batchId===e.batchId&&hr(this.mutations,e.mutations,((e,t)=>fc(e,t)))&&hr(this.baseMutations,e.baseMutations,((e,t)=>fc(e,t)))}},xc=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){N(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return Ls}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},Sc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},Cc=class{constructor(e,t){this.count=e,this.unchangedNames=t}},wc,K;function Tc(e){switch(e){case F.OK:return M(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return M(15467,{code:e})}}function Ec(e){if(e===void 0)return Zn(`GRPC error has no .code`),F.UNKNOWN;switch(e){case wc.OK:return F.OK;case wc.CANCELLED:return F.CANCELLED;case wc.UNKNOWN:return F.UNKNOWN;case wc.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case wc.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case wc.INTERNAL:return F.INTERNAL;case wc.UNAVAILABLE:return F.UNAVAILABLE;case wc.UNAUTHENTICATED:return F.UNAUTHENTICATED;case wc.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case wc.NOT_FOUND:return F.NOT_FOUND;case wc.ALREADY_EXISTS:return F.ALREADY_EXISTS;case wc.PERMISSION_DENIED:return F.PERMISSION_DENIED;case wc.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case wc.ABORTED:return F.ABORTED;case wc.OUT_OF_RANGE:return F.OUT_OF_RANGE;case wc.UNIMPLEMENTED:return F.UNIMPLEMENTED;case wc.DATA_LOSS:return F.DATA_LOSS;default:return M(39323,{code:e})}}(K=wc||={})[K.OK=0]=`OK`,K[K.CANCELLED=1]=`CANCELLED`,K[K.UNKNOWN=2]=`UNKNOWN`,K[K.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,K[K.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,K[K.NOT_FOUND=5]=`NOT_FOUND`,K[K.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,K[K.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,K[K.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,K[K.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,K[K.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,K[K.ABORTED=10]=`ABORTED`,K[K.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,K[K.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,K[K.INTERNAL=13]=`INTERNAL`,K[K.UNAVAILABLE=14]=`UNAVAILABLE`,K[K.DATA_LOSS=15]=`DATA_LOSS`;var Dc=null;function Oc(){return new TextEncoder}var kc=new Nn([4294967295,4294967295],0);function Ac(e){let t=Oc().encode(e),n=new Pn;return n.update(t),new Uint8Array(n.digest())}function jc(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Nn([n,r],0),new Nn([i,a],0)]}var Mc=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Nc(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new Nc(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Nc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Nn.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Nn.fromNumber(n)));return r.compare(kc)===1&&(r=new Nn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=jc(Ac(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=jc(Ac(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.Se(r)}}Se(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},Nc=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},Pc=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,Fc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(z.min(),i,new Pa(L),As(),G())}},Fc=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,G(),G(),G())}},Ic=class{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}},Lc=class{constructor(e,t){this.targetId=e,this.Ce=t}},Rc=class{constructor(e,t,n=Ha.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},zc=class{constructor(){this.ve=0,this.Fe=Hc(),this.Me=Ha.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=G(),t=G(),n=G();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:M(38017,{changeType:i})}})),new Fc(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Hc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){--this.ve,N(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Bc=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=As(),this.Je=Vc(),this.He=Vc(),this.Ye=new Pa(L)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:M(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(ss(i))if(n===0){let e=new R(i.path);this.et(t,e,No.newNoDocument(e,z.min()))}else N(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ye=this.Ye.insert(t,e)}Dc?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=Ka(n).toUint8Array()}catch(e){if(e instanceof Va)return Qn(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new Mc(a,r,i)}catch(e){return Qn(e instanceof Nc?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&ss(i.target)){let t=new R(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,No.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}}));let n=G();this.He.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new Pc(e,t,this.Ye,this.je,n);return this.je=As(),this.Je=Vc(),this.He=Vc(),this.Ye=new Pa(L),r}Xe(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new zc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new La(L),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new La(L),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||j(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zc),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Vc(){return new Pa(R.comparator)}function Hc(){return new Pa(R.comparator)}var Uc=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),Wc=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),Gc=(()=>({and:`AND`,or:`OR`}))(),Kc=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function qc(e,t){return e.useProto3Json||ui(t)?t:{value:t}}function Jc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function Yc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Xc(e,t){return Jc(e,t.toTimestamp())}function Zc(e){return N(!!e,49232),z.fromTimestamp(function(e){let t=Wa(e);return new Pr(t.seconds,t.nanos)}(e))}function Qc(e,t){return $c(e,t).canonicalString()}function $c(e,t){let n=function(e){return new yr([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function el(e){let t=yr.fromString(e);return N(Tl(t),10190,{key:t.toString()}),t}function tl(e,t){return Qc(e.databaseId,t.path)}function nl(e,t){let n=el(t);if(n.get(1)!==e.databaseId.projectId)throw new I(F.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new I(F.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new R(ol(n))}function rl(e,t){return Qc(e.databaseId,t)}function il(e){let t=el(e);return t.length===4?yr.emptyPath():ol(t)}function al(e){return new yr([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function ol(e){return N(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function sl(e,t,n){return{name:tl(e,t),fields:n.value.mapValue.fields}}function cl(e,t,n){let r=nl(e,t.name),i=Zc(t.updateTime),a=t.createTime?Zc(t.createTime):z.min(),o=new jo({mapValue:{fields:t.fields}}),s=No.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function ll(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:M(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(N(t===void 0||typeof t==`string`,58123),Ha.fromBase64String(t||``)):(N(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),Ha.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new Rc(r,i,a,o&&function(e){return new I(e.code===void 0?F.UNKNOWN:Ec(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=nl(e,r.document.name),a=Zc(r.document.updateTime),o=r.document.createTime?Zc(r.document.createTime):z.min(),s=new jo({mapValue:{fields:r.document.fields}}),c=No.newFoundDocument(i,a,o,s);n=new Ic(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=nl(e,r.document),a=r.readTime?Zc(r.readTime):z.min(),o=No.newNoDocument(i,a);n=new Ic([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=nl(e,r.document);n=new Ic([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return M(11601,{Rt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new Cc(r,i),o=e.targetId;n=new Lc(o,a)}}return n}function ul(e,t){let n;if(t instanceof pc)n={update:sl(e,t.key,t.value)};else if(t instanceof vc)n={delete:tl(e,t.key)};else if(t instanceof mc)n={update:sl(e,t.key,t.data),updateMask:wl(t.fieldMask)};else{if(!(t instanceof yc))return M(16599,{Vt:t.type});n={verify:tl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof Js)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof Ys)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof $s)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw M(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?M(27497):{exists:t.exists}:{updateTime:Xc(e,t.updateTime)}}(e,t.precondition)),n}function dl(e,t){let n=t.currentDocument?function(e){return e.updateTime===void 0?e.exists===void 0?ac.none():ac.exists(e.exists):ac.updateTime(Zc(e.updateTime))}(t.currentDocument):ac.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;return`setToServerValue`in t?(N(t.setToServerValue===`REQUEST_TIME`,16630,{proto:t}),n=new Js):`appendMissingElements`in t?n=new Ys(t.appendMissingElements.values||[]):`removeAllFromArray`in t?n=new Zs(t.removeAllFromArray.values||[]):`increment`in t?n=new $s(e,t.increment):M(16584,{proto:t}),new nc(xr.fromServerFormat(t.fieldPath),n)}(e,t))):[];if(t.update){t.update.name;let i=nl(e,t.update.name),a=new jo({mapValue:{fields:t.update.fields}});return t.updateMask?new mc(i,a,function(e){return new Ba((e.fieldPaths||[]).map((e=>xr.fromServerFormat(e))))}(t.updateMask),n,r):new pc(i,a,n,r)}return t.delete?new vc(nl(e,t.delete),n):t.verify?new yc(nl(e,t.verify),n):M(1463,{proto:t})}function fl(e,t){return e&&e.length>0?(N(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?Zc(e.updateTime):Zc(t);return n.isEqual(z.min())&&(n=Zc(t)),new ic(n,e.transformResults||[])}(e,t)))):[]}function pl(e,t){return{documents:[rl(e,t.path)]}}function ml(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=rl(e,i);let a=function(e){if(e.length!==0)return Cl(Bo.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:xl(e.field),direction:vl(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=qc(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function hl(e){let t=il(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){N(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=_l(e);return t instanceof Bo&&Uo(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Lo(Sl(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,ui(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new Po(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new Po(e.values||[],t)}(n.endAt)),fs(t,i,o,a,s,`F`,c,l)}function gl(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return M(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function _l(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?M(30097,{filter:e}):function(e){return Bo.create(e.compositeFilter.filters.map((e=>_l(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return M(1026)}}(e.compositeFilter.op))}(e):function(e){return W.create(Sl(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return M(58110);default:return M(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=Sl(e.unaryFilter.field);return W.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=Sl(e.unaryFilter.field);return W.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=Sl(e.unaryFilter.field);return W.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=Sl(e.unaryFilter.field);return W.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return M(61313);default:return M(60726)}}(e)}function vl(e){return Uc[e]}function yl(e){return Wc[e]}function bl(e){return Gc[e]}function xl(e){return{fieldPath:e.canonicalString()}}function Sl(e){return xr.fromServerFormat(e.fieldPath)}function Cl(e){return e instanceof W?function(e){if(e.op===`==`){if(xo(e.value))return{unaryFilter:{field:xl(e.field),op:`IS_NAN`}};if(bo(e.value))return{unaryFilter:{field:xl(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(xo(e.value))return{unaryFilter:{field:xl(e.field),op:`IS_NOT_NAN`}};if(bo(e.value))return{unaryFilter:{field:xl(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:xl(e.field),op:yl(e.op),value:e.value}}}(e):e instanceof Bo?function(e){let t=e.getFilters().map((e=>Cl(e)));return t.length===1?t[0]:{compositeFilter:{op:bl(e.op),filters:t}}}(e):M(54877,{filter:e})}function wl(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Tl(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}var El=class e{constructor(e,t,n,r,i=z.min(),a=z.min(),o=Ha.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},Dl=class{constructor(e){this.yt=e}};function Ol(e,t){let n;if(t.document)n=cl(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=R.fromSegments(t.noDocument.path),r=Ml(t.noDocument.readTime);n=No.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return M(56709);{let e=R.fromSegments(t.unknownDocument.path),r=Ml(t.unknownDocument.version);n=No.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){let t=new Pr(e[0],e[1]);return z.fromTimestamp(t)}(t.readTime)),n}function kl(e,t){let n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Al(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:tl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Jc(e,t.version.toTimestamp()),createTime:Jc(e,t.createTime.toTimestamp())}}(e.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:jl(t.version)};else{if(!t.isUnknownDocument())return M(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:jl(t.version)}}return r}function Al(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function jl(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ml(e){let t=new Pr(e.seconds,e.nanoseconds);return z.fromTimestamp(t)}function Nl(e,t){let n=(t.baseMutations||[]).map((t=>dl(e.yt,t)));for(let e=0;e<t.mutations.length-1;++e){let n=t.mutations[e];e+1<t.mutations.length&&t.mutations[e+1].transform!==void 0&&(n.updateTransforms=t.mutations[e+1].transform.fieldTransforms,t.mutations.splice(e+1,1),++e)}let r=t.mutations.map((t=>dl(e.yt,t))),i=Pr.fromMillis(t.localWriteTimeMs);return new bc(t.batchId,i,n,r)}function Pl(e){let t=Ml(e.readTime),n=e.lastLimboFreeSnapshotVersion===void 0?z.min():Ml(e.lastLimboFreeSnapshotVersion),r;return r=function(e){return e.documents!==void 0}(e.query)?function(e){let t=e.documents.length;return N(t===1,1966,{count:t}),_s(ps(il(e.documents[0])))}(e.query):function(e){return _s(hl(e))}(e.query),new El(r,e.targetId,`TargetPurposeListen`,e.lastListenSequenceNumber,t,n,Ha.fromBase64String(e.resumeToken))}function Fl(e,t){let n=jl(t.snapshotVersion),r=jl(t.lastLimboFreeSnapshotVersion),i;i=ss(t.target)?pl(e.yt,t.target):ml(e.yt,t.target).ft;let a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:as(t.target),readTime:n,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Il(e){let t=hl({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?bs(t,t.limit,`L`):t}function Ll(e,t){return new Sc(t.largestBatchId,dl(e.yt,t.overlayMutation))}function q(e,t){let n=t.path.lastSegment();return[e,mi(t.path.popLast()),n]}function Rl(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:jl(r.readTime),documentKey:mi(r.documentKey.path),largestBatchId:r.largestBatchId}}var J=class{getBundleMetadata(e,t){return Y(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Ml(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Y(e).put(function(e){return{bundleId:e.id,createTime:jl(Zc(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return zl(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Il(e.bundledQuery),readTime:Ml(e.readTime)}}(e)}))}saveNamedQuery(e,t){return zl(e).put(function(e){return{name:e.name,readTime:jl(Zc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}};function Y(e){return Aa(e,Zi)}function zl(e){return Aa(e,$i)}var Bl=class e{constructor(e,t){this.serializer=e,this.userId=t}static wt(t,n){return new e(t,n.uid||``)}getOverlay(e,t){return Vl(e).get(q(this.userId,t)).next((e=>e?Ll(this.serializer,e):null))}getOverlays(e,t){let n=Ps();return B.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){let r=[];return n.forEach(((n,i)=>{let a=new Sc(t,i);r.push(this.St(e,a))})),B.waitFor(r)}removeOverlaysForBatchId(e,t,n){let r=new Set;t.forEach((e=>r.add(mi(e.getCollectionPath()))));let i=[];return r.forEach((t=>{let r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Vl(e).Z(ha,r))})),B.waitFor(i)}getOverlaysForCollection(e,t,n){let r=Ps(),i=mi(t),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,1/0],!0);return Vl(e).J(ha,a).next((e=>{for(let t of e){let e=Ll(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){let i=Ps(),a,o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,1/0],!0);return Vl(e).ee({index:_a,range:o},((e,t,n)=>{let o=Ll(this.serializer,t);i.size()<r||o.largestBatchId===a?(i.set(o.getKey(),o),a=o.largestBatchId):n.done()})).next((()=>i))}St(e,t){return Vl(e).put(function(e,t,n){let[r,i,a]=q(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:a,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ul(e.yt,n.mutation)}}(this.serializer,this.userId,t))}};function Vl(e){return Aa(e,pa)}var Hl=class{bt(e){return Aa(e,ya)}getSessionToken(e){return this.bt(e).get(`sessionToken`).next((e=>{let t=e?.value;return t?Ha.fromUint8Array(t):Ha.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:`sessionToken`,value:t.toUint8Array()})}},Ul=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(Ga(e.integerValue));else if(`doubleValue`in e){let n=Ga(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),di(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=Wa(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(Ka(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?To(e)?this.Ft(t,2**53-1):Co(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.Qt(e.arrayValue,t),this.Nt(t)):M(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=so,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ga(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),R.fromName(e).path.forEach((e=>{this.Ft(t,60),this.Ut(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Ul.Kt=new Ul;var Wl=255;function Gl(e){if(e===0)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function Kl(e){let t=64-function(e){let t=0;for(let n=0;n<8;++n){let r=Gl(255&e[n]);if(t+=r,r!==8)break}return t}(e);return Math.ceil(t/8)}var ql=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){let t=e[Symbol.iterator](),n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){let t=e[Symbol.iterator](),n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<`\ud800`||`\udbff`<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{let e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Zt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<`\ud800`||`\udbff`<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{let e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Ht()}Xt(e){let t=this.en(e),n=Kl(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}nn(e){let t=this.en(e),n=Kl(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}rn(){this.sn(Wl),this.sn(255)}_n(){this.an(Wl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){let t=function(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Gt(e){let t=255&e;t===0?(this.sn(0),this.sn(255)):t===Wl?(this.sn(Wl),this.sn(0)):this.sn(t)}Jt(e){let t=255&e;t===0?(this.an(0),this.an(255)):t===Wl?(this.an(Wl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){let t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);let r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}},Jl=class{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}},Yl=class{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}},Xl=class{constructor(){this.cn=new ql,this.ln=new Jl(this.cn),this.hn=new Yl(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}},Zl=class e{constructor(e,t,n,r){this.Tn=e,this.In=t,this.En=n,this.dn=r}An(){let t=this.dn.length,n=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(n);return r.set(this.dn,0),n===t?++r[r.length-1]:r.set([0],this.dn.length),new e(this.Tn,this.In,this.En,r)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:eu(this.En),directionalValue:eu(this.dn),orderedDocumentKey:eu(t),documentKey:n.path.toArray()}}Vn(e,t,n){let r=this.Rn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}};function Ql(e,t){let n=e.Tn-t.Tn;return n===0?(n=$l(e.En,t.En),n===0?(n=$l(e.dn,t.dn),n===0?R.comparator(e.In,t.In):n):n):n}function $l(e,t){for(let n=0;n<e.length&&n<t.length;++n){let r=e[n]-t[n];if(r!==0)return r}return e.length-t.length}function eu(e){return Se()?function(e){let t=``;for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function tu(e){return typeof e==`string`?function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e):e}var nu=class{constructor(e){this.mn=new La(((e,t)=>xr.comparator(e.field,t.field))),this.collectionId=e.collectionGroup==null?e.path.lastSegment():e.collectionGroup,this.fn=e.orderBy,this.gn=[];for(let t of e.filters){let e=t;e.isInequality()?this.mn=this.mn.add(e):this.gn.push(e)}}get pn(){return this.mn.size>1}yn(e){if(N(e.collectionGroup===this.collectionId,49279),this.pn)return!1;let t=Lr(e);if(t!==void 0&&!this.wn(t))return!1;let n=Rr(e),r=new Set,i=0,a=0;for(;i<n.length&&this.wn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.mn.size>0){let e=this.mn.getIterator().getNext();if(!r.has(e.field.canonicalString())){let t=n[i];if(!this.Sn(e,t)||!this.bn(this.fn[a++],t))return!1}++i}for(;i<n.length;++i){let e=n[i];if(a>=this.fn.length||!this.bn(this.fn[a++],e))return!1}return!0}Dn(){if(this.pn)return null;let e=new La(xr.comparator),t=[];for(let n of this.gn)if(!n.field.isKeyField())if(n.op===`array-contains`||n.op===`array-contains-any`)t.push(new zr(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new zr(n.field,0))}for(let n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new zr(n.field,n.dir===`asc`?0:1)));return new Ir(Ir.UNKNOWN_ID,this.collectionId,t,Br.empty())}wn(e){for(let t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let n=e.op===`array-contains`||e.op===`array-contains-any`;return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir===`asc`||t.kind===1&&e.dir===`desc`)}};function ru(e){if(N(e instanceof W||e instanceof Bo,20012),e instanceof W){if(e instanceof es){let t=e.value.arrayValue?.values?.map((t=>W.create(e.field,`==`,t)))||[];return Bo.create(t,`or`)}return e}let t=e.filters.map((e=>ru(e)));return Bo.create(t,e.op)}function iu(e){if(e.getFilters().length===0)return[];let t=cu(ru(e));return N(su(t),7391),au(t)||ou(t)?[t]:t.getFilters()}function au(e){return e instanceof W}function ou(e){return e instanceof Bo&&Uo(e)}function su(e){return au(e)||ou(e)||function(e){if(e instanceof Bo&&Ho(e)){for(let t of e.getFilters())if(!au(t)&&!ou(t))return!1;return!0}return!1}(e)}function cu(e){if(N(e instanceof W||e instanceof Bo,34018),e instanceof W)return e;if(e.filters.length===1)return cu(e.filters[0]);let t=e.filters.map((e=>cu(e))),n=Bo.create(t,e.op);return n=du(n),su(n)?n:(N(n instanceof Bo,64498),N(Vo(n),40251),N(n.filters.length>1,57927),n.filters.reduce(((e,t)=>lu(e,t))))}function lu(e,t){let n;return N(e instanceof W||e instanceof Bo,38388),N(t instanceof W||t instanceof Bo,25473),n=e instanceof W?t instanceof W?function(e,t){return Bo.create([e,t],`and`)}(e,t):uu(e,t):t instanceof W?uu(t,e):function(e,t){if(N(e.filters.length>0&&t.filters.length>0,48005),Vo(e)&&Vo(t))return qo(e,t.getFilters());let n=Ho(e)?e:t,r=Ho(e)?t:e,i=n.filters.map((e=>lu(e,r)));return Bo.create(i,`or`)}(e,t),du(n)}function uu(e,t){if(Vo(t))return qo(t,e.getFilters());{let n=t.filters.map((t=>lu(e,t)));return Bo.create(n,`or`)}}function du(e){if(N(e instanceof W||e instanceof Bo,11850),e instanceof W)return e;let t=e.getFilters();if(t.length===1)return du(t[0]);if(Wo(e))return e;let n=t.map((e=>du(e))),r=[];return n.forEach((t=>{t instanceof W?r.push(t):t instanceof Bo&&(t.op===e.op?r.push(...t.filters):r.push(t))})),r.length===1?r[0]:Bo.create(r,e.op)}var fu=class{constructor(){this.Cn=new pu}addToCollectionParentIndex(e,t){return this.Cn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Ur.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Ur.min())}updateCollectionGroup(e,t,n){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}},pu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new La(yr.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new La(yr.comparator)).toArray()}},mu=`IndexedDbIndexManager`,hu=new Uint8Array,gu=class{constructor(e,t){this.databaseId=t,this.vn=new pu,this.Fn=new Os((e=>as(e)),((e,t)=>os(e,t))),this.uid=e.uid||``}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));let i={collectionId:n,parent:mi(r)};return _u(e).put(i)}return B.resolve()}getCollectionParents(e,t){let n=[],r=IDBKeyRange.bound([t,``],[gr(t),``],!1,!0);return _u(e).J(r).next((e=>{for(let r of e){if(r.collectionId!==t)break;n.push(_i(r.parent))}return n}))}addFieldIndex(e,t){let n=yu(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;let i=n.add(r);if(t.indexState){let n=bu(e);return i.next((e=>{n.put(Rl(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){let n=yu(e),r=bu(e),i=vu(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){let t=yu(e),n=vu(e),r=bu(e);return t.Z().next((()=>n.Z())).next((()=>r.Z()))}createTargetIndexes(e,t){return B.forEach(this.Mn(t),(t=>this.getIndexType(e,t).next((n=>{if(n===0||n===1){let n=new nu(t).Dn();if(n!=null)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){let n=vu(e),r=!0,i=new Map;return B.forEach(this.Mn(t),(t=>this.xn(e,t).next((e=>{r&&=!!e,i.set(t,e)})))).next((()=>{if(r){let e=G(),r=[];return B.forEach(i,((i,a)=>{j(mu,`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(`,`)}`}(i)} to execute ${as(t)}`);let o=function(e,t){let n=Lr(t);if(n===void 0)return null;for(let t of cs(e,n.fieldPath))switch(t.op){case`array-contains-any`:return t.value.arrayValue.values||[];case`array-contains`:return[t.value]}return null}(a,i),s=function(e,t){let n=new Map;for(let r of Rr(t))for(let t of cs(e,r.fieldPath))switch(t.op){case`==`:case`in`:n.set(r.fieldPath.canonicalString(),t.value);break;case`not-in`:case`!=`:return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(a,i),c=function(e,t){let n=[],r=!0;for(let i of Rr(t)){let t=i.kind===0?ls(e,i.fieldPath,e.startAt):us(e,i.fieldPath,e.startAt);n.push(t.value),r&&=t.inclusive}return new Po(n,r)}(a,i),l=function(e,t){let n=[],r=!0;for(let i of Rr(t)){let t=i.kind===0?us(e,i.fieldPath,e.endAt):ls(e,i.fieldPath,e.endAt);n.push(t.value),r&&=t.inclusive}return new Po(n,r)}(a,i),u=this.On(i,a,c),d=this.On(i,a,l),f=this.Nn(i,a,s),p=this.Bn(i.indexId,o,u,c.inclusive,d,l.inclusive,f);return B.forEach(p,(i=>n.Y(i,t.limit).next((t=>{t.forEach((t=>{let n=R.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return B.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(t=e.filters.length===0?[e]:iu(Bo.create(e.filters,`and`)).map((t=>is(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,r,i,a,o){let s=(t==null?1:t.length)*Math.max(n.length,i.length),c=s/(t==null?1:t.length),l=[];for(let u=0;u<s;++u){let s=t?this.Ln(t[u/c]):hu,d=this.kn(e,s,n[u%c],r),f=this.qn(e,s,i[u%c],a),p=o.map((t=>this.kn(e,s,t,!0)));l.push(...this.createRange(d,f,p))}return l}kn(e,t,n,r){let i=new Zl(e,R.empty(),t,n);return r?i:i.An()}qn(e,t,n,r){let i=new Zl(e,R.empty(),t,n);return r?i.An():i}xn(e,t){let n=new nu(t),r=t.collectionGroup==null?t.path.lastSegment():t.collectionGroup;return this.getFieldIndexes(e,r).next((e=>{let t=null;for(let r of e)n.yn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2,r=this.Mn(t);return B.forEach(r,(t=>this.xn(e,t).next((e=>{e?n!==0&&e.fields.length<function(e){let t=new La(xr.comparator),n=!1;for(let r of e.filters)for(let e of r.getFlattenedFilters())e.field.isKeyField()||(e.op===`array-contains`||e.op===`array-contains-any`?n=!0:t=t.add(e.field));for(let n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return e.limit!==null}(t)&&r.length>1&&n===2?1:n))}Qn(e,t){let n=new Xl;for(let r of Rr(e)){let e=t.data.field(r.fieldPath);if(e==null)return null;let i=n.Pn(r.kind);Ul.Kt.Dt(e,i)}return n.un()}Ln(e){let t=new Xl;return Ul.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){let n=new Xl;return Ul.Kt.Dt(_o(this.databaseId,t),n.Pn(function(e){let t=Rr(e);return t.length===0?0:t[t.length-1].kind}(e))),n.un()}Nn(e,t,n){if(n===null)return[];let r=[];r.push(new Xl);let i=0;for(let a of Rr(e)){let e=n[i++];for(let n of r)if(this.Un(t,a.fieldPath)&&yo(e))r=this.Kn(r,a,e);else{let t=n.Pn(a.kind);Ul.Kt.Dt(e,t)}}return this.Wn(r)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){let t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){let r=[...e],i=[];for(let e of n.arrayValue.values||[])for(let n of r){let r=new Xl;r.seed(n.un()),Ul.Kt.Dt(e,r.Pn(t.kind)),i.push(r)}return i}Un(e,t){return!!e.filters.find((e=>e instanceof W&&e.field.isEqual(t)&&(e.op===`in`||e.op===`not-in`)))}getFieldIndexes(e,t){let n=yu(e),r=bu(e);return(t?n.J(ra,IDBKeyRange.bound(t,t)):n.J()).next((e=>{let t=[];return B.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){let n=t?new Br(t.sequenceNumber,new Ur(Ml(t.readTime),new R(_i(t.documentKey)),t.largestBatchId)):Br.empty(),r=e.fields.map((([e,t])=>new zr(xr.fromServerFormat(e),t)));return new Ir(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>e.length===0?null:(e.sort(((e,t)=>{let n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return n===0?L(e.collectionGroup,t.collectionGroup):n})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){let r=yu(e),i=bu(e);return this.Gn(e).next((e=>r.J(ra,IDBKeyRange.bound(t,t)).next((t=>B.forEach(t,(t=>i.put(Rl(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){let n=new Map;return B.forEach(t,((t,r)=>{let i=n.get(t.collectionGroup);return(i?B.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),B.forEach(i,(n=>this.zn(e,t,n).next((t=>{let i=this.jn(r,n);return t.isEqual(i)?B.resolve():this.Jn(e,r,n,t,i)})))))))}))}Hn(e,t,n,r){return vu(e).put(r.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,r){return vu(e).delete(r.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){let r=vu(e),i=new La(Ql);return r.ee({index:da,range:IDBKeyRange.only([n.indexId,this.uid,eu(this.$n(n,t))])},((e,r)=>{i=i.add(new Zl(n.indexId,t,tu(r.arrayValue),tu(r.directionalValue)))})).next((()=>i))}jn(e,t){let n=new La(Ql),r=this.Qn(t,e);if(r==null)return n;let i=Lr(t);if(i!=null){let a=e.data.field(i.fieldPath);if(yo(a))for(let i of a.arrayValue.values||[])n=n.add(new Zl(t.indexId,e.key,this.Ln(i),r))}else n=n.add(new Zl(t.indexId,e.key,hu,r));return n}Jn(e,t,n,r,i){j(mu,`Updating index entries for document '%s'`,t.key);let a=[];return function(e,t,n,r,i){let a=e.getIterator(),o=t.getIterator(),s=za(a),c=za(o);for(;s||c;){let e=!1,t=!1;if(s&&c){let r=n(s,c);r<0?t=!0:r>0&&(e=!0)}else s==null?e=!0:t=!0;e?(r(c),c=za(o)):t?(i(s),s=za(a)):(s=za(a),c=za(o))}}(r,i,Ql,(r=>{a.push(this.Hn(e,t,n,r))}),(r=>{a.push(this.Yn(e,t,n,r))})),B.waitFor(a)}Gn(e){let t=1;return bu(e).ee({index:sa,reverse:!0,range:IDBKeyRange.upperBound([this.uid,2**53-1])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Ql(e,t))).filter(((e,t,n)=>!t||Ql(e,n[t-1])!==0));let r=[];r.push(e);for(let i of n){let n=Ql(i,e),a=Ql(i,t);if(n===0)r[0]=e.An();else if(n>0&&a<0)r.push(i),r.push(i.An());else if(a>0)break}r.push(t);let i=[];for(let e=0;e<r.length;e+=2){if(this.Zn(r[e],r[e+1]))return[];let t=r[e].Vn(this.uid,hu,R.empty()),n=r[e+1].Vn(this.uid,hu,R.empty());i.push(IDBKeyRange.bound(t,n))}return i}Zn(e,t){return Ql(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xu)}getMinOffset(e,t){return B.mapArray(this.Mn(t),(t=>this.xn(e,t).next((e=>e||M(44426))))).next(xu)}};function _u(e){return Aa(e,qi)}function vu(e){return Aa(e,la)}function yu(e){return Aa(e,ta)}function bu(e){return Aa(e,aa)}function xu(e){N(e.length!==0,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){let i=e[r].indexState.offset;Wr(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ur(t.readTime,t.documentKey,n)}var Su={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cu=41943040,wu=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};function Tu(e,t,n){let r=e.store(Ci),i=e.store(Ai),a=[],o=IDBKeyRange.only(n.batchId),s=0,c=r.ee({range:o},((e,t,n)=>(s++,n.delete())));a.push(c.next((()=>{N(s===1,47070,{batchId:n.batchId})})));let l=[];for(let e of n.mutations){let r=Oi(t,e.key.path,n.batchId);a.push(i.delete(r)),l.push(e.key)}return B.waitFor(a).next((()=>l))}function Eu(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw M(14731);t=e.noDocument}return JSON.stringify(t).length}wu.DEFAULT_COLLECTION_PERCENTILE=10,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wu.DEFAULT=new wu(Cu,wu.DEFAULT_COLLECTION_PERCENTILE,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wu.DISABLED=new wu(-1,0,0);var Du=class e{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(t,n,r,i){return N(t.uid!==``,64387),new e(t.isAuthenticated()?t.uid:``,n,r,i)}checkEmpty(e){let t=!0,n=IDBKeyRange.bound([this.userId,-1/0],[this.userId,1/0]);return ku(e).ee({index:Ti,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){let i=Au(e),a=ku(e);return a.add({}).next((o=>{N(typeof o==`number`,49019);let s=new bc(o,t,n,r),c=function(e,t,n){let r=n.baseMutations.map((t=>ul(e.yt,t))),i=n.mutations.map((t=>ul(e.yt,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,s),l=[],u=new La(((e,t)=>L(e.canonicalString(),t.canonicalString())));for(let e of r){let t=Oi(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(a.put(c)),l.push(i.put(t,ki))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Xn[o]=s.keys()})),B.waitFor(l).next((()=>s))}))}lookupMutationBatch(e,t){return ku(e).get(t).next((e=>e?(N(e.userId===this.userId,48,`Unexpected user for mutation batch`,{userId:e.userId,batchId:t}),Nl(this.serializer,e)):null))}er(e,t){return this.Xn[t]?B.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){let n=e.keys();return this.Xn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]),i=null;return ku(e).ee({index:Ti,range:r},((e,t,r)=>{t.userId===this.userId&&(N(t.batchId>=n,47524,{tr:n}),i=Nl(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,1/0]),n=li;return ku(e).ee({index:Ti,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,li],[this.userId,1/0]);return ku(e).J(Ti,t).next((e=>e.map((e=>Nl(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){let n=Di(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Au(e).ee({range:r},((n,r,a)=>{let[o,s,c]=n,l=_i(s);if(o===this.userId&&t.path.isEqual(l))return ku(e).get(c).next((e=>{if(!e)throw M(61480,{nr:n,batchId:c});N(e.userId===this.userId,10503,`Unexpected user for mutation batch`,{userId:e.userId,batchId:c}),i.push(Nl(this.serializer,e))}));a.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new La(L),r=[];return t.forEach((t=>{let i=Di(this.userId,t.path),a=IDBKeyRange.lowerBound(i),o=Au(e).ee({range:a},((e,r,i)=>{let[a,o,s]=e,c=_i(o);a===this.userId&&t.path.isEqual(c)?n=n.add(s):i.done()}));r.push(o)})),B.waitFor(r).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=Di(this.userId,n),a=IDBKeyRange.lowerBound(i),o=new La(L);return Au(e).ee({range:a},((e,t,i)=>{let[a,s,c]=e,l=_i(s);a===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.rr(e,o)))}rr(e,t){let n=[],r=[];return t.forEach((t=>{r.push(ku(e).get(t).next((e=>{if(e===null)throw M(35274,{batchId:t});N(e.userId===this.userId,9748,`Unexpected user for mutation batch`,{userId:e.userId,batchId:t}),n.push(Nl(this.serializer,e))})))})),B.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Tu(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),B.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();let n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Au(e).ee({range:n},((e,t,n)=>{if(e[0]===this.userId){let t=_i(e[1]);r.push(t)}else n.done()})).next((()=>{N(r.length===0,56720,{sr:r.map((e=>e.canonicalString()))})}))}))}containsKey(e,t){return Ou(e,this.userId,t)}_r(e){return ju(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:li,lastStreamToken:``}))}};function Ou(e,t,n){let r=Di(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Au(e).ee({range:a,X:!0},((e,n,r)=>{let[a,s,c]=e;a===t&&s===i&&(o=!0),r.done()})).next((()=>o))}function ku(e){return Aa(e,Ci)}function Au(e){return Aa(e,Ai)}function ju(e){return Aa(e,xi)}var Mu=class e{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new e(0)}static cr(){return new e(-1)}},Nu=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>(t.highestTargetId=new Mu(t.highestTargetId).next(),this.hr(e,t).next((()=>t.highestTargetId)))))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((e=>z.fromTimestamp(new Pr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Pu(e).delete(t.targetId))).next((()=>this.lr(e))).next((t=>(N(t.targetCount>0,8065),--t.targetCount,this.hr(e,t))))}removeTargets(e,t,n){let r=0,i=[];return Pu(e).ee(((a,o)=>{let s=Pl(o);s.sequenceNumber<=t&&n.get(s.targetId)===null&&(r++,i.push(this.removeTargetData(e,s)))})).next((()=>B.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Pu(e).ee(((e,n)=>{t(Pl(n))}))}lr(e){return Fu(e).get(Gi).next((e=>(N(e!==null,2888),e)))}hr(e,t){return Fu(e).put(Gi,t)}Pr(e,t){return Pu(e).put(Fl(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((e=>e.targetCount))}getTargetData(e,t){let n=as(t),r=IDBKeyRange.bound([n,-1/0],[n,1/0]),i=null;return Pu(e).ee({range:r,index:zi},((e,n,r)=>{let a=Pl(n);os(t,a.target)&&(i=a,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){let r=[],i=Iu(e);return t.forEach((t=>{let a=mi(t.path);r.push(i.put({targetId:n,path:a})),r.push(this.referenceDelegate.addReference(e,n,t))})),B.waitFor(r)}removeMatchingKeys(e,t,n){let r=Iu(e);return B.forEach(t,(t=>{let i=mi(t.path);return B.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){let n=Iu(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){let n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Iu(e),i=G();return r.ee({range:n,X:!0},((e,t,n)=>{let r=new R(_i(e[1]));i=i.add(r)})).next((()=>i))}containsKey(e,t){let n=mi(t.path),r=IDBKeyRange.bound([n],[gr(n)],!1,!0),i=0;return Iu(e).ee({index:Ui,X:!0,range:r},(([e,t],n,r)=>{e!==0&&(i++,r.done())})).next((()=>i>0))}At(e,t){return Pu(e).get(t).next((e=>e?Pl(e):null))}};function Pu(e){return Aa(e,Ri)}function Fu(e){return Aa(e,Ki)}function Iu(e){return Aa(e,Vi)}var Lu=`LruGarbageCollector`,Ru=1048576;function zu([e,t],[n,r]){let i=L(e,n);return i===0?L(t,r):i}var Bu=class{constructor(e){this.Ir=e,this.buffer=new La(zu),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();zu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},Vu=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Vr(e){j(Lu,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ei(e)?j(Lu,`Ignoring IndexedDB error during garbage collection: `,e):await qr(e)}await this.Vr(3e5)}))}},Hu=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(ci.ce);let n=new Bu(t);return this.mr.forEachTarget(e,(e=>n.Ar(e.sequenceNumber))).next((()=>this.mr.pr(e,(e=>n.Ar(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j(`LruGarbageCollector`,`Garbage collection skipped; disabled`),B.resolve(Su)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(j(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Su):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(j(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Xn()<=k.DEBUG&&j(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function Uu(e,t){return new Hu(e,t)}var Wu=class{constructor(e,t){this.db=e,this.garbageCollector=Uu(this,t)}gr(e){let t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((e,n)=>t(n)))}addReference(e,t,n){return Gu(e,n)}removeReference(e,t,n){return Gu(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Gu(e,t)}br(e,t){return function(e,t){let n=!1;return ju(e).te((r=>Ou(e,r,t).next((e=>(e&&(n=!0),B.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){let n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],i=0;return this.Sr(e,((a,o)=>{if(o<=t){let t=this.br(e,a).next((t=>{if(!t)return i++,n.getEntry(e,a).next((()=>(n.removeEntry(a,z.min()),Iu(e).delete(function(e){return[0,mi(e.path)]}(a)))))}));r.push(t)}})).next((()=>B.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Gu(e,t)}Sr(e,t){let n=Iu(e),r,i=ci.ce;return n.ee({index:Ui},(([e,n],{path:a,sequenceNumber:o})=>{e===0?(i!==ci.ce&&t(new R(_i(r)),i),i=o,r=a):i=ci.ce})).next((()=>{i!==ci.ce&&t(new R(_i(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Gu(e,t){return Iu(e).put(function(e,t){return{targetId:0,path:mi(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Ku=class{constructor(){this.changes=new Os((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,No.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):B.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},qu=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Zu(e).put(n)}removeEntry(e,t,n){return Zu(e).delete(function(e,t){let n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Al(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=No.newInvalidDocument(t);return Zu(e).ee({index:V,range:IDBKeyRange.only(Qu(t))},((e,r)=>{n=this.Cr(t,r)})).next((()=>n))}vr(e,t){let n={size:0,document:No.newInvalidDocument(t)};return Zu(e).ee({index:V,range:IDBKeyRange.only(Qu(t))},((e,r)=>{n={document:this.Cr(t,r),size:Eu(r)}})).next((()=>n))}getEntries(e,t){let n=As();return this.Fr(e,t,((e,t)=>{let r=this.Cr(e,t);n=n.insert(e,r)})).next((()=>n))}Mr(e,t){let n=As(),r=new Pa(R.comparator);return this.Fr(e,t,((e,t)=>{let i=this.Cr(e,t);n=n.insert(e,i),r=r.insert(e,Eu(t))})).next((()=>({documents:n,Or:r})))}Fr(e,t,n){if(t.isEmpty())return B.resolve();let r=new La(ed);t.forEach((e=>r=r.add(e)));let i=IDBKeyRange.bound(Qu(r.first()),Qu(r.last())),a=r.getIterator(),o=a.getNext();return Zu(e).ee({index:V,range:i},((e,t,r)=>{let i=R.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&ed(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Qu(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){let a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Al(n.readTime),n.documentKey.path.isEmpty()?``:n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[2**53-1,2**53-1],``];return Zu(e).J(IDBKeyRange.bound(o,s,!0)).next((e=>{i?.incrementDocumentReadCount(e.length);let n=As();for(let i of e){let e=this.Cr(R.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(ws(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=As(),a=$u(t,n),o=$u(t,Ur.max());return Zu(e).ee({index:Pi,range:IDBKeyRange.bound(a,o,!0)},((e,t,n)=>{let a=this.Cr(R.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(a.key,a),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Yu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Xu(e).get(Li).next((e=>(N(!!e,20021),e)))}Dr(e,t){return Xu(e).put(Li,t)}Cr(e,t){if(t){let e=Ol(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(z.min())))return e}return No.newInvalidDocument(e)}};function Ju(e){return new qu(e)}var Yu=class extends Ku{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Os((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){let t=[],n=0,r=new La(((e,t)=>L(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,a)=>{let o=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,o.readTime)),a.isValidDocument()){let s=kl(this.Nr.serializer,a);r=r.add(i.path.popLast());let c=Eu(s);n+=c-o.size,t.push(this.Nr.addEntry(e,i,s))}else if(n-=o.size,this.trackRemovals){let n=kl(this.Nr.serializer,a.convertToNoDocument(z.min()));t.push(this.Nr.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Nr.updateMetadata(e,n)),B.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((e=>(this.Br.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:e,Or:t})=>(t.forEach(((t,n)=>{this.Br.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}};function Xu(e){return Aa(e,Ii)}function Zu(e){return Aa(e,ji)}function Qu(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $u(e,t){let n=t.documentKey.path.toArray();return[e,Al(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:``]}function ed(e,t){let n=e.path.toArray(),r=t.path.toArray(),i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=L(n[e],r[e]),i)return i;return i=L(n.length,r.length),i||(i=L(n[n.length-2],r[r.length-2]),i||L(n[n.length-1],r[r.length-1]))}var td=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},nd=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&uc(n.mutation,e,Ba.empty(),Pr.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,G()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=G()){let r=Ps();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Ms();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Ps();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,G())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=As(),a=Is(),o=function(){return Is()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof mc)?i=i.insert(t.key,t):o===void 0?a.set(t.key,Ba.empty()):(a.set(t.key,o.mutation.getFieldMask()),uc(o.mutation,t,o.mutation.getFieldMask(),Pr.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new td(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=Is(),r=new Pa(((e,t)=>e-t)),i=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||Ba.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||G()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Fs();c.forEach((e=>{if(!i.has(e)){let r=cc(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return B.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return R.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hs(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):B.resolve(Ps()),o=Fr,s=i;return a.next((t=>B.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?B.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,G()))).next((e=>({batchId:o,changes:Ns(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new R(t)).next((e=>{let t=Ms();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=Ms();return this.indexManager.getCollectionParents(e,i).next((o=>B.forEach(o,(o=>{let s=function(e,t){return new ds(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,No.newInvalidDocument(r)))}));let n=Ms();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&uc(a.mutation,r,Ba.empty(),Pr.now()),ws(t,r)&&(n=n.insert(e,r))})),n}))}},rd=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return B.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Zc(e.createTime)}}(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Il(e.bundledQuery),readTime:Zc(e.readTime)}}(t)),B.resolve()}},id=class{constructor(){this.overlays=new Pa(R.comparator),this.qr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Ps();return B.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),B.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.qr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.qr.delete(n)),B.resolve()}getOverlaysForCollection(e,t,n){let r=Ps(),i=t.length+1,a=new R(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return B.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Pa(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Ps(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Ps(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return B.resolve(o)}St(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Sc(t,n));let i=this.qr.get(t);i===void 0&&(i=G(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}},ad=class{constructor(){this.sessionToken=Ha.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}},od=class{constructor(){this.Qr=new La(sd.$r),this.Ur=new La(sd.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let n=new sd(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Gr(new sd(e,t))}zr(e,t){e.forEach((e=>this.removeReference(e,t)))}jr(e){let t=new R(new yr([])),n=new sd(t,e),r=new sd(t,e+1),i=[];return this.Ur.forEachInRange([n,r],(e=>{this.Gr(e),i.push(e.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new R(new yr([])),n=new sd(t,e),r=new sd(t,e+1),i=G();return this.Ur.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new sd(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},sd=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return R.comparator(e.key,t.key)||L(e.Yr,t.Yr)}static Kr(e,t){return L(e.Yr,t.Yr)||R.comparator(e.key,t.key)}},cd=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new La(sd.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new bc(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Zr=this.Zr.add(new sd(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,t){return B.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.ei(n),i=r<0?0:r;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?li:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new sd(t,0),r=new sd(t,1/0),i=[];return this.Zr.forEachInRange([n,r],(e=>{let t=this.Xr(e.Yr);i.push(t)})),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new La(L);return t.forEach((e=>{let t=new sd(e,0),r=new sd(e,1/0);this.Zr.forEachInRange([t,r],(e=>{n=n.add(e.Yr)}))})),B.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;R.isDocumentKey(i)||(i=i.child(``));let a=new sd(new R(i),0),o=new La(L);return this.Zr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)}),a),B.resolve(this.ti(o))}ti(e){let t=[];return e.forEach((e=>{let n=this.Xr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){N(this.ni(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Zr;return B.forEach(t.mutations,(r=>{let i=new sd(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){let n=new sd(t,0),r=this.Zr.firstAfterOrEqual(n);return B.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},ld=class{constructor(e){this.ri=e,this.docs=function(){return new Pa(R.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return B.resolve(n?n.document.mutableCopy():No.newInvalidDocument(t))}getEntries(e,t){let n=As();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():No.newInvalidDocument(e))})),B.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=As(),a=t.path,o=new R(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Wr(Hr(o),n)<=0||(r.has(o.key)||ws(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,t,n,r){M(9500)}ii(e,t){return B.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ud(this)}getSize(e){return B.resolve(this.size)}},ud=class extends Ku{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),B.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}},dd=class{constructor(e){this.persistence=e,this.si=new Os((e=>as(e)),os),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.oi=0,this._i=new od,this.targetCount=0,this.ai=Mu.ur()}forEachTarget(e,t){return this.si.forEach(((e,n)=>t(n))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),B.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Mu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.Pr(t),B.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),--this.targetCount,B.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),B.waitFor(i).next((()=>r))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){let n=this.si.get(t)||null;return B.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),B.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),B.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),B.resolve()}getMatchingKeysForTargetId(e,t){let n=this._i.Hr(t);return B.resolve(n)}containsKey(e,t){return B.resolve(this._i.containsKey(t))}},fd=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new ci(0),this.li=!1,this.li=!0,this.hi=new ad,this.referenceDelegate=e(this),this.Pi=new dd(this),this.indexManager=new fu,this.remoteDocumentCache=function(e){return new ld(e)}((e=>this.referenceDelegate.Ti(e))),this.serializer=new Dl(t),this.Ii=new rd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new id,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new cd(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){j(`MemoryPersistence`,`Starting transaction:`,e);let r=new pd(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ai(e,t){return B.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}},pd=class extends Kr{constructor(e){super(),this.currentSequenceNumber=e}},md=class e{constructor(e){this.persistence=e,this.Ri=new od,this.Vi=null}static mi(t){return new e(t)}get fi(){if(this.Vi)return this.Vi;throw M(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),B.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((e=>this.fi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.fi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,(n=>{let r=R.fromPath(n);return this.gi(e,r).next((e=>{e||t.removeEntry(r,z.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},hd=class e{constructor(e,t){this.persistence=e,this.pi=new Os((e=>mi(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Uu(this,t)}static mi(t,n){return new e(t,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}pr(e,t){return B.forEach(this.pi,((n,r)=>this.br(e,n,r).next((e=>e?B.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(r=>this.br(e,r,t).next((e=>{e||(n++,i.removeEntry(r,z.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=go(e.data.value)),t}br(e,t,n){return B.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return B.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},gd=class{constructor(e){this.serializer=e}k(e,t,n,r){let i=new Yr(`createOrUpgrade`,t);n<1&&r>=1&&(function(e){e.createObjectStore(yi)}(e),function(e){e.createObjectStore(xi,{keyPath:Si}),e.createObjectStore(Ci,{keyPath:wi,autoIncrement:!0}).createIndex(Ti,Ei,{unique:!0}),e.createObjectStore(Ai)}(e),_d(e),function(e){e.createObjectStore(vi)}(e));let a=B.resolve();return n<3&&r>=3&&(n!==0&&(function(e){e.deleteObjectStore(Vi),e.deleteObjectStore(Ri),e.deleteObjectStore(Ki)}(e),_d(e)),a=a.next((()=>function(e){let t=e.store(Ki),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:z.min().toTimestamp(),targetCount:0};return t.put(Gi,n)}(i)))),n<4&&r>=4&&(n!==0&&(a=a.next((()=>function(e,t){return t.store(Ci).J().next((n=>{e.deleteObjectStore(Ci),e.createObjectStore(Ci,{keyPath:wi,autoIncrement:!0}).createIndex(Ti,Ei,{unique:!0});let r=t.store(Ci),i=n.map((e=>r.put(e)));return B.waitFor(i)}))}(e,i)))),a=a.next((()=>{(function(e){e.createObjectStore(Yi,{keyPath:Xi})})(e)}))),n<5&&r>=5&&(a=a.next((()=>this.yi(i)))),n<6&&r>=6&&(a=a.next((()=>(function(e){e.createObjectStore(Ii)}(e),this.wi(i))))),n<7&&r>=7&&(a=a.next((()=>this.Si(i)))),n<8&&r>=8&&(a=a.next((()=>this.bi(e,i)))),n<9&&r>=9&&(a=a.next((()=>{(function(e){e.objectStoreNames.contains(`remoteDocumentChanges`)&&e.deleteObjectStore(`remoteDocumentChanges`)})(e)}))),n<10&&r>=10&&(a=a.next((()=>this.Di(i)))),n<11&&r>=11&&(a=a.next((()=>{(function(e){e.createObjectStore(Zi,{keyPath:Qi})})(e),function(e){e.createObjectStore($i,{keyPath:ea})}(e)}))),n<12&&r>=12&&(a=a.next((()=>{(function(e){let t=e.createObjectStore(pa,{keyPath:ma});t.createIndex(ha,ga,{unique:!1}),t.createIndex(_a,va,{unique:!1})})(e)}))),n<13&&r>=13&&(a=a.next((()=>function(e){let t=e.createObjectStore(ji,{keyPath:Mi});t.createIndex(V,Ni),t.createIndex(Pi,Fi)}(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(vi)))),n<14&&r>=14&&(a=a.next((()=>this.Fi(e,i)))),n<15&&r>=15&&(a=a.next((()=>function(e){e.createObjectStore(ta,{keyPath:na,autoIncrement:!0}).createIndex(ra,ia,{unique:!1}),e.createObjectStore(aa,{keyPath:oa}).createIndex(sa,ca,{unique:!1}),e.createObjectStore(la,{keyPath:ua}).createIndex(da,fa,{unique:!1})}(e)))),n<16&&r>=16&&(a=a.next((()=>{t.objectStore(aa).clear()})).next((()=>{t.objectStore(la).clear()}))),n<17&&r>=17&&(a=a.next((()=>{(function(e){e.createObjectStore(ya,{keyPath:ba})})(e)}))),n<18&&r>=18&&Se()&&(a=a.next((()=>{t.objectStore(aa).clear()})).next((()=>{t.objectStore(la).clear()}))),a}wi(e){let t=0;return e.store(vi).ee(((e,n)=>{t+=Eu(n)})).next((()=>{let n={byteSize:t};return e.store(Ii).put(Li,n)}))}yi(e){let t=e.store(xi),n=e.store(Ci);return t.J().next((t=>B.forEach(t,(t=>{let r=IDBKeyRange.bound([t.userId,li],[t.userId,t.lastAcknowledgedBatchId]);return n.J(Ti,r).next((n=>B.forEach(n,(n=>{N(n.userId===t.userId,18650,`Cannot process batch from unexpected user`,{batchId:n.batchId});let r=Nl(this.serializer,n);return Tu(e,t.userId,r).next((()=>{}))}))))}))))}Si(e){let t=e.store(Vi),n=e.store(vi);return e.store(Ki).get(Gi).next((e=>{let r=[];return n.ee(((n,i)=>{let a=new yr(n),o=function(e){return[0,mi(e)]}(a);r.push(t.get(o).next((n=>n?B.resolve():(n=>t.put({targetId:0,path:mi(n),sequenceNumber:e.highestListenSequenceNumber}))(a))))})).next((()=>B.waitFor(r)))}))}bi(e,t){e.createObjectStore(qi,{keyPath:Ji});let n=t.store(qi),r=new pu,i=e=>{if(r.add(e)){let t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:mi(r)})}};return t.store(vi).ee({X:!0},((e,t)=>i(new yr(e).popLast()))).next((()=>t.store(Ai).ee({X:!0},(([e,t,n],r)=>i(_i(t).popLast())))))}Di(e){let t=e.store(Ri);return t.ee(((e,n)=>{let r=Pl(n),i=Fl(this.serializer,r);return t.put(i)}))}Ci(e,t){let n=t.store(vi),r=[];return n.ee(((e,n)=>{let i=t.store(ji),a=function(e){return e.document?new R(yr.fromString(e.document.name).popFirst(5)):e.noDocument?R.fromSegments(e.noDocument.path):e.unknownDocument?R.fromSegments(e.unknownDocument.path):M(36783)}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>B.waitFor(r)))}Fi(e,t){let n=t.store(Ci),r=Ju(this.serializer),i=new fd(md.mi,this.serializer.yt);return n.J().next((e=>{let n=new Map;return e.forEach((e=>{let t=n.get(e.userId)??G();Nl(this.serializer,e).keys().forEach((e=>t=t.add(e))),n.set(e.userId,t)})),B.forEach(n,((e,n)=>{let a=new qn(n),o=Bl.wt(this.serializer,a),s=i.getIndexManager(a);return new nd(r,Du.wt(a,this.serializer,s,i.referenceDelegate),o,s).recalculateAndSaveOverlaysForDocumentKeys(new ka(t,ci.ce),e).next()}))}))}};function _d(e){e.createObjectStore(Vi,{keyPath:Hi}).createIndex(Ui,Wi,{unique:!0}),e.createObjectStore(Ri,{keyPath:`targetId`}).createIndex(zi,Bi,{unique:!0}),e.createObjectStore(Ki)}var vd=`IndexedDbPersistence`,yd=18e5,bd=5e3,xd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",X=`main`,Sd=class e{constructor(t,n,r,i,a,o,s,c,l,u,d=18){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=o,this.document=s,this.xi=l,this.Oi=u,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=-1/0,this.Qi=e=>Promise.resolve(),!e.v())throw new I(F.UNIMPLEMENTED,`This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.`);this.referenceDelegate=new Wu(this,i),this.$i=n+X,this.serializer=new Dl(c),this.Ui=new Xr(this.$i,this.Ni,new gd(this.serializer)),this.hi=new Hl,this.Pi=new Nu(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ju(this.serializer),this.Ii=new J,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,!1===u&&Zn(vd,`LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page.`))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new I(F.FAILED_PRECONDITION,xd);return this.Gi(),this.zi(),this.ji(),this.runTransaction(`getHighestListenSequenceNumber`,`readonly`,(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new ci(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction(`updateClientMetadataAndTryBecomePrimary`,`readwrite`,(e=>wd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ei(e))return j(vd,`Failed to extend owner lease: `,e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j(vd,`Releasing owner lease after error during lease refresh`,e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Cd(e).get(bi).next((e=>B.resolve(this.es(e))))}ts(e){return wd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,yd)){this.qi=Date.now();let e=await this.runTransaction(`maybeGarbageCollectMultiClientState`,`readwrite-primary`,(e=>{let t=Aa(e,Yi);return t.J().next((e=>{let n=this.ss(e,yd),r=e.filter((e=>n.indexOf(e)===-1));return B.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ki)for(let t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay(`client_metadata_refresh`,4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?B.resolve(!0):Cd(e).get(bi).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,bd)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new I(F.FAILED_PRECONDITION,xd);return!1}}return!(!this.networkEnabled||!this.inForeground)||wd(e).J().next((e=>this.ss(e,bd).find((e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&j(vd,`Client ${e?`is`:`is not`} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&=(this.ki.cancel(),null),this.ls(),this.hs(),await this.Ui.runTransaction(`shutdown`,`readwrite`,[yi,Yi],(e=>{let t=new ka(e,ci.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((e=>this.rs(e.updateTimeMs,t)&&!this.us(e.clientId)))}Ts(){return this.runTransaction(`getActiveClients`,`readonly`,(e=>wd(e).J().next((e=>this.ss(e,yd).map((e=>e.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Du.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gu(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Bl.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){j(vd,`Starting transaction:`,e);let r=t===`readonly`?`readonly`:`readwrite`,i=function(e){return e===18?Oa:e===17?Da:e===16?Ea:e===15?Ta:e===14?wa:e===13?Ca:e===12?Sa:e===11?xa:void M(60245)}(this.Ni),a;return this.Ui.runTransaction(e,r,i,(r=>(a=new ka(r,this.ci?this.ci.next():ci.ce),t===`readwrite-primary`?this.Hi(a).next((e=>!!e||this.Yi(a))).next((t=>{if(!t)throw Zn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new I(F.FAILED_PRECONDITION,Gr);return n(a)})).next((e=>this.Xi(a).next((()=>e)))):this.Is(a).next((()=>n(a)))))).then((e=>(a.raiseOnCommittedEvent(),e)))}Is(e){return Cd(e).get(bi).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,bd)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new I(F.FAILED_PRECONDITION,xd)}))}Xi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cd(e).put(bi,t)}static v(){return Xr.v()}Zi(e){let t=Cd(e);return t.get(bi).next((e=>this.es(e)?(j(vd,`Releasing primary lease.`),t.delete(bi)):B.resolve()))}rs(e,t){let n=Date.now();return!(e<n-t)&&(!(e>n)||(Zn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener==`function`&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState===`visible`,this.Wi())))},this.document.addEventListener(`visibilitychange`,this.Li),this.inForeground=this.document.visibilityState===`visible`)}ls(){this.Li&&=(this.document.removeEventListener(`visibilitychange`,this.Li),null)}zi(){typeof this.window?.addEventListener==`function`&&(this.Bi=()=>{this.cs();let e=/(?:Version|Mobile)\/1[456]/;xe()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener(`pagehide`,this.Bi))}hs(){this.Bi&&=(this.window.removeEventListener(`pagehide`,this.Bi),null)}us(e){try{let t=this.Ki?.getItem(this._s(e))!==null;return j(vd,`Client '${e}' ${t?`is`:`is not`} zombied in LocalStorage`),t}catch(e){return Zn(vd,`Failed to get zombied client id.`,e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Zn(`Failed to set zombie client id.`,e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Cd(e){return Aa(e,yi)}function wd(e){return Aa(e,Yi)}function Td(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+=`.`+e.database),`firestore/`+t+`/`+n+`/`}var Ed=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(t,n){let r=G(),i=G();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},Dd=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},Od=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return xe()?8:Zr(E())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ys(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ws(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new Dd;return this.Ss(e,t,n).next((r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)}))})).next((()=>i.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(Xn()<=k.DEBUG&&j(`QueryEngine`,`SDK will not create cache indexes for query:`,Cs(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.fs,`documents`),B.resolve()):(Xn()<=k.DEBUG&&j(`QueryEngine`,`Query:`,Cs(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.gs*r?(Xn()<=k.DEBUG&&j(`QueryEngine`,`The SDK decides to create cache indexes for query:`,Cs(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,_s(t))):B.resolve())}ys(e,t){if(ms(t))return B.resolve(null);let n=_s(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=bs(t,null,`F`),n=_s(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=G(...r);return this.ps.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,bs(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ws(e,t,n,r){return ms(t)||r.isEqual(z.min())?B.resolve(null):this.ps.getDocuments(e,n).next((i=>{let a=this.Ds(t,i);return this.Cs(t,a,n,r)?B.resolve(null):(Xn()<=k.DEBUG&&j(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),Cs(t)),this.vs(e,a,t,Vr(r,Fr)).next((e=>e)))}))}Ds(e,t){let n=new La(Es(e));return t.forEach(((t,r)=>{ws(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Xn()<=k.DEBUG&&j(`QueryEngine`,`Using full collection scan to execute query:`,Cs(t)),this.ps.getDocumentsMatchingQuery(e,t,Ur.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},kd=`LocalStore`,Ad=3e8,jd=class{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Pa(L),this.xs=new Os((e=>as(e)),os),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nd(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Ms)))}};function Md(e,t,n,r){return new jd(e,t,n,r)}async function Nd(e,t){let n=P(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=G();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ls:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function Pd(e,t){let n=P(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=B.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);N(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=G();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function Fd(e){let t=P(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function Id(e,t){let n=P(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.Pi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(Ha.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Ad?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.Pi.updateTargetData(e,l))}));let s=As(),c=G();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ld(e,a,t.documentUpdates).next((e=>{s=e.ks,c=e.qs}))),!r.isEqual(z.min())){let t=n.Pi.getLastRemoteSnapshotVersion(e).next((t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return B.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Ms=i,e)))}function Ld(e,t,n){let r=G(),i=G();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=As();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(z.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):j(kd,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{ks:r,qs:i}}))}function Rd(e,t){let n=P(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=li),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function zd(e,t){let n=P(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.Pi.getTargetData(e,t).next((i=>i?(r=i,B.resolve(r)):n.Pi.allocateTargetId(e).next((i=>(r=new El(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.Pi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Ms.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e}))}async function Bd(e,t,n){let r=P(e),i=r.Ms.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ei(e))throw e;j(kd,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Vd(e,t,n){let r=P(e),i=z.min(),a=G();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=P(e),i=r.xs.get(n);return i===void 0?r.Pi.getTargetData(t,n):B.resolve(r.Ms.get(i))}(r,e,_s(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:z.min(),n?a:G()))).next((e=>(Wd(r,Ts(t),e),{documents:e,Qs:a})))))}function Hd(e,t){let n=P(e),r=P(n.Pi),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction(`Get target data`,`readonly`,(e=>r.At(e,t).next((e=>e?e.target:null))))}function Ud(e,t){let n=P(e),r=n.Os.get(t)||z.min();return n.persistence.runTransaction(`Get new document changes`,`readonly`,(e=>n.Ns.getAllFromCollectionGroup(e,t,Vr(r,Fr),2**53-1))).then((e=>(Wd(n,t,e),e)))}function Wd(e,t,n){let r=e.Os.get(t)||z.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Os.set(t,r)}var Gd=`firestore_clients`;function Kd(e,t){return`${Gd}_${e}_${t}`}var qd=`firestore_mutations`;function Jd(e,t,n){let r=`${qd}_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}var Yd=`firestore_targets`;function Xd(e,t){return`${Yd}_${e}_${t}`}var Zd=`SharedClientState`,Qd=class e{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ws(t,n,r){let i=JSON.parse(r),a,o=typeof i==`object`&&[`pending`,`acknowledged`,`rejected`].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error==`object`);return o&&i.error&&(o=typeof i.error.message==`string`&&typeof i.error.code==`string`,o&&(a=new I(i.error.code,i.error.message))),o?new e(t,n,i.state,a):(Zn(Zd,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},$d=class e{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(t,n){let r=JSON.parse(n),i,a=typeof r==`object`&&[`not-current`,`current`,`rejected`].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error==`object`);return a&&r.error&&(a=typeof r.error.message==`string`&&typeof r.error.code==`string`,a&&(i=new I(r.error.code,r.error.message))),a?new e(t,r.state,i):(Zn(Zd,`Failed to parse target state for ID '${t}': ${n}`),null)}Gs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ef=class e{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(t,n){let r=JSON.parse(n),i=typeof r==`object`&&r.activeTargetIds instanceof Array,a=Bs();for(let e=0;i&&e<r.activeTargetIds.length;++e)i=fi(r.activeTargetIds[e]),a=a.add(r.activeTargetIds[e]);return i?new e(t,a):(Zn(Zd,`Failed to parse client data for instance '${t}': ${n}`),null)}},tf=class e{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(t){let n=JSON.parse(t);return typeof n==`object`&&[`Unknown`,`Online`,`Offline`].indexOf(n.onlineState)!==-1&&typeof n.clientId==`string`?new e(n.clientId,n.onlineState):(Zn(Zd,`Failed to parse online state: ${t}`),null)}},nf=class{constructor(){this.activeTargetIds=Bs()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},rf=class{constructor(e,t,n,r,i){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Pa(L),this.started=!1,this.Xs=[];let a=n.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`);this.storage=this.window.localStorage,this.currentUser=i,this.eo=Kd(this.persistenceKey,this.Js),this.no=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new nf),this.ro=RegExp(`^${Gd}_${a}_([^_]*)$`),this.io=RegExp(`^${qd}_${a}_(\\d+)(?:_(.*))?$`),this.so=RegExp(`^${Yd}_${a}_(\\d+)$`),this.oo=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this._o=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener(`storage`,this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){let e=await this.syncEngine.Ts();for(let t of e){if(t===this.Js)continue;let e=this.getItem(Kd(this.persistenceKey,t));if(e){let n=ef.Ws(t,e);n&&(this.Zs=this.Zs.insert(n.clientId,n))}}this.ao();let t=this.storage.getItem(this.oo);if(t){let e=this.uo(t);e&&this.co(e)}for(let e of this.Xs)this.Ys(e);this.Xs=[],this.window.addEventListener(`pagehide`,(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,`pending`)}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e,t=!0){let n=`not-current`;if(this.isActiveQueryTarget(e)){let t=this.storage.getItem(Xd(this.persistenceKey,e));if(t){let r=$d.Ws(e,t);r&&(n=r.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xd(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Po(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&=(this.window.removeEventListener(`storage`,this.Hs),this.removeItem(this.eo),!1)}getItem(e){let t=this.storage.getItem(e);return j(Zd,`READ`,e,t),t}setItem(e,t){j(Zd,`SET`,e,t),this.storage.setItem(e,t)}removeItem(e){j(Zd,`REMOVE`,e),this.storage.removeItem(e)}Ys(e){let t=e;if(t.storageArea===this.storage){if(j(Zd,`EVENT`,t.key,t.newValue),t.key===this.eo)return void Zn(`Received WebStorage notification for local change. Another client might have garbage-collected our state`);this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){let e=this.Ro(t.key);return this.Vo(e,null)}{let e=this.mo(t.key,t.newValue);if(e)return this.Vo(e.clientId,e)}}else if(this.io.test(t.key)){if(t.newValue!==null){let e=this.fo(t.key,t.newValue);if(e)return this.po(e)}}else if(this.so.test(t.key)){if(t.newValue!==null){let e=this.yo(t.key,t.newValue);if(e)return this.wo(e)}}else if(t.key===this.oo){if(t.newValue!==null){let e=this.uo(t.newValue);if(e)return this.co(e)}}else if(t.key===this.no){let e=function(e){let t=ci.ce;if(e!=null)try{let n=JSON.parse(e);N(typeof n==`number`,30636,{So:e}),t=n}catch(e){Zn(Zd,`Failed to read sequence number from WebStorage`,e)}return t}(t.newValue);e!==ci.ce&&this.sequenceNumberHandler(e)}else if(t.key===this._o){let e=this.bo(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Do(e))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){let r=new Qd(this.currentUser,e,t,n),i=Jd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Gs())}Po(e){let t=Jd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){let t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){let r=Xd(this.persistenceKey,e),i=new $d(e,t,n);this.setItem(r,i.Gs())}Ao(e){let t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){let t=this.ro.exec(e);return t?t[1]:null}mo(e,t){let n=this.Ro(e);return ef.Ws(n,t)}fo(e,t){let n=this.io.exec(e),r=Number(n[1]),i=n[2]===void 0?null:n[2];return Qd.Ws(new qn(i),r,t)}yo(e,t){let n=this.so.exec(e),r=Number(n[1]);return $d.Ws(r,t)}uo(e){return tf.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);j(Zd,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){let n=t?this.Zs.insert(e,t):this.Zs.remove(e),r=this.lo(this.Zs),i=this.lo(n),a=[],o=[];return i.forEach((e=>{r.has(e)||a.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Fo(a,o).then((()=>{this.Zs=n}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Bs();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}},af=class{constructor(){this.Mo=new nf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||`not-current`}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},of=class{Oo(e){}shutdown(){}},sf=`ConnectivityMonitor`,cf=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener(`online`,this.No),window.removeEventListener(`offline`,this.Lo)}Qo(){window.addEventListener(`online`,this.No),window.addEventListener(`offline`,this.Lo)}Bo(){j(sf,`Network connectivity changed: AVAILABLE`);for(let e of this.qo)e(0)}ko(){j(sf,`Network connectivity changed: UNAVAILABLE`);for(let e of this.qo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},lf=null;function uf(){return lf===null?lf=function(){return 268435456+Math.round(2147483648*Math.random())}():lf++,`0x`+lf.toString(16)}var df=`RestConnection`,ff={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},pf=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+`://`+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===to?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){let a=uf(),o=this.zo(e,t.toUriEncodedString());j(df,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);let{host:c}=new URL(o),l=de(c);return this.Jo(e,o,s,n,l).then((t=>(j(df,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Qn(df,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Jn}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}zo(e,t){let n=ff[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}},mf=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}},hf=`WebChannelConnection`,gf=class extends pf{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){let a=uf();return new Promise(((i,o)=>{let s=new Ln;s.setWithCredentials(!0),s.listenOnce(zn.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case Bn.NO_ERROR:let t=s.getResponseJson();j(hf,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case Bn.TIMEOUT:j(hf,`RPC '${e}' ${a} timed out`),o(new I(F.DEADLINE_EXCEEDED,`Request time out`));break;case Bn.HTTP_ERROR:let n=s.getStatus();if(j(hf,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new I(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(F).indexOf(t)>=0?t:F.UNKNOWN}(t.status),t.message)):o(new I(F.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new I(F.UNAVAILABLE,`Connection failed.`));break;default:M(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{j(hf,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);j(hf,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(e,t,n){let r=uf(),i=[this.Uo,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=Wn(),o=Un(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);j(hf,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new mf({Yo:t=>{f?j(hf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(j(hf,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),j(hf,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,Rn.EventType.OPEN,(()=>{f||(j(hf,`RPC '${e}' stream ${r} transport opened.`),p.o_())})),m(u,Rn.EventType.CLOSE,(()=>{f||(f=!0,j(hf,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))})),m(u,Rn.EventType.ERROR,(t=>{f||(f=!0,Qn(hf,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.a_(new I(F.UNAVAILABLE,`The operation could not be completed`)))})),m(u,Rn.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];N(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){j(hf,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=wc[e];if(t!==void 0)return Ec(t)}(t),i=a.message;n===void 0&&(n=F.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.a_(new I(n,i)),u.close()}else j(hf,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}})),m(o,Hn.STAT_EVENT,(t=>{t.stat===Vn.PROXY?j(hf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Vn.NOPROXY&&j(hf,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function _f(){return typeof window<`u`?window:null}function vf(){return typeof document<`u`?document:null}function yf(e){return new Kc(e,!0)}var bf=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&j(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}},xf=`PersistentStream`,Sf=class{constructor(e,t,n,r,i,a,o,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bf(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===F.RESOURCE_EXHAUSTED?(Zn(t.toString()),Zn(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new I(F.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.J_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return j(xf,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(j(xf,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},Cf=class extends Sf{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=ll(this.serializer,e),n=function(e){if(!(`targetChange`in e))return z.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?z.min():t.readTime?Zc(t.readTime):z.min()}(e);return this.listener.H_(t,n)}Y_(e){let t={};t.database=al(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=ss(r)?{documents:pl(e,r)}:{query:ml(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Yc(e,t.resumeToken);let r=qc(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(z.min())>0){n.readTime=Jc(e,t.snapshotVersion.toTimestamp());let r=qc(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=gl(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){let t={};t.database=al(this.serializer),t.removeTarget=e,this.q_(t)}},wf=class extends Sf{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}J_(e){return N(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,N(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){N(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=fl(e.writeResults,e.commitTime),n=Zc(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=al(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>ul(this.serializer,e)))};this.q_(t)}},Tf=class{},Ef=class extends Tf{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new I(F.FAILED_PRECONDITION,`The client has already been terminated.`)}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,$c(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new I(F.UNKNOWN,e.toString())}))}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,$c(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new I(F.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},Df=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zn(t),this.aa=!1):j(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},Of=`RemoteStore`,kf=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((e=>{n.enqueueAndForget((async()=>{Rf(this)&&(j(Of,`Restarting streams for network reachability change.`),await async function(e){let t=P(e);t.Ea.add(4),await jf(t),t.Ra.set(`Unknown`),t.Ea.delete(4),await Af(t)}(this))}))})),this.Ra=new Df(n,r)}};async function Af(e){if(Rf(e))for(let t of e.da)await t(!0)}async function jf(e){for(let t of e.da)await t(!1)}function Mf(e,t){let n=P(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Lf(n)?If(n):rp(n).O_()&&Pf(n,t))}function Nf(e,t){let n=P(e),r=rp(n);n.Ia.delete(t),r.O_()&&Ff(n,t),n.Ia.size===0&&(r.O_()?r.L_():Rf(n)&&n.Ra.set(`Unknown`))}function Pf(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(z.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rp(e).Y_(t)}function Ff(e,t){e.Va.Ue(t),rp(e).Z_(t)}function If(e){e.Va=new Bc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),rp(e).start(),e.Ra.ua()}function Lf(e){return Rf(e)&&!rp(e).x_()&&e.Ia.size>0}function Rf(e){return P(e).Ea.size===0}function zf(e){e.Va=void 0}async function Bf(e){e.Ra.set(`Online`)}async function Vf(e){e.Ia.forEach(((t,n)=>{Pf(e,t)}))}async function Hf(e,t){zf(e),Lf(e)?(e.Ra.ha(t),If(e)):e.Ra.set(`Unknown`)}async function Uf(e,t,n){if(e.Ra.set(`Online`),t instanceof Rc&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){j(Of,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await Wf(e,n)}else if(t instanceof Ic?e.Va.Ze(t):t instanceof Lc?e.Va.st(t):e.Va.tt(t),!n.isEqual(z.min()))try{let t=await Fd(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Va.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(Ha.EMPTY_BYTE_STRING,r.snapshotVersion)),Ff(e,t),Pf(e,new El(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){j(Of,`Failed to raise snapshot:`,t),await Wf(e,t)}}async function Wf(e,t,n){if(!ei(t))throw t;e.Ea.add(1),await jf(e),e.Ra.set(`Offline`),n||=()=>Fd(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{j(Of,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await Af(e)}))}function Gf(e,t){return t().catch((n=>Wf(e,n,t)))}async function Kf(e){let t=P(e),n=ip(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:li;for(;qf(t);)try{let e=await Rd(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,Jf(t,e)}catch(e){await Wf(t,e)}Yf(t)&&Xf(t)}function qf(e){return Rf(e)&&e.Ta.length<10}function Jf(e,t){e.Ta.push(t);let n=ip(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Yf(e){return Rf(e)&&!ip(e).x_()&&e.Ta.length>0}function Xf(e){ip(e).start()}async function Zf(e){ip(e).ra()}async function Qf(e){let t=ip(e);for(let n of e.Ta)t.ea(n.mutations)}async function $f(e,t,n){let r=e.Ta.shift(),i=xc.from(r,t,n);await Gf(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Kf(e)}async function ep(e,t){t&&ip(e).X_&&await async function(e,t){if(function(e){return Tc(e)&&e!==F.ABORTED}(t.code)){let n=e.Ta.shift();ip(e).B_(),await Gf(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Kf(e)}}(e,t),Yf(e)&&Xf(e)}async function tp(e,t){let n=P(e);n.asyncQueue.verifyOperationInProgress(),j(Of,`RemoteStore received new credentials`);let r=Rf(n);n.Ea.add(3),await jf(n),r&&n.Ra.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Af(n)}async function np(e,t){let n=P(e);t?(n.Ea.delete(2),await Af(n)):t||(n.Ea.add(2),await jf(n),n.Ra.set(`Unknown`))}function rp(e){return e.ma||(e.ma=function(e,t,n){let r=P(e);return r.sa(),new Cf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Bf.bind(null,e),t_:Vf.bind(null,e),r_:Hf.bind(null,e),H_:Uf.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Lf(e)?If(e):e.Ra.set(`Unknown`)):(await e.ma.stop(),zf(e))}))),e.ma}function ip(e){return e.fa||(e.fa=function(e,t,n){let r=P(e);return r.sa(),new wf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Zf.bind(null,e),r_:ep.bind(null,e),ta:Qf.bind(null,e),na:$f.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await Kf(e)):(await e.fa.stop(),e.Ta.length>0&&(j(Of,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}var ap=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new I(F.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function op(e,t){if(Zn(`AsyncQueue`,`${t}: ${e}`),ei(e))return new I(F.UNAVAILABLE,`${t}: ${e}`);throw e}var sp=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||R.comparator(t.key,n.key):(e,t)=>R.comparator(e.key,t.key),this.keyedMap=Ms(),this.sortedSet=new Pa(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},cp=class{constructor(){this.ga=new Pa(R.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):M(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},lp=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,sp.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},up=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}},dp=class{constructor(){this.queries=fp(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=P(e),r=n.queries;n.queries=fp(),r.forEach(((e,n)=>{for(let e of n.Sa)e.onError(t)}))})(this,new I(F.ABORTED,`Firestore shutting down`))}};function fp(){return new Os((e=>Ss(e)),xs)}async function pp(e,t){let n=P(e),r=3,i=t.query,a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new up,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=op(e,`Initialization of query '${Cs(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&_p(n)}async function mp(e,t){let n=P(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hp(e,t){let n=P(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.Sa)t.Fa(e)&&(r=!0);i.wa=e}}r&&_p(n)}function gp(e,t,n){let r=P(e),i=r.queries.get(t);if(i)for(let e of i.Sa)e.onError(n);r.queries.delete(t)}function _p(e){e.Ca.forEach((e=>{e.next()}))}var vp,yp;(yp=vp||={}).Ma=`default`,yp.Cache=`cache`;var bp=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new lp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=lp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vp.Cache}},xp=class{constructor(e){this.key=e}},Sp=class{constructor(e){this.key=e}},Cp=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=G(),this.mutatedKeys=G(),this.eu=Es(e),this.tu=new sp(this.eu)}get nu(){return this.Ya}ru(e,t){let n=t?t.iu:new cp,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=ws(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,a.length!==0||c?{snapshot:new lp(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=G(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))}));let t=[];return e.forEach((e=>{this.Xa.has(e)||t.push(new Sp(e))})),this.Xa.forEach((n=>{e.has(n)||t.push(new xp(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=G();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return lp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},wp=`SyncEngine`,Tp=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},Ep=class{constructor(e){this.key=e,this.hu=!1}},Dp=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Os((e=>Ss(e)),xs),this.Iu=new Map,this.Eu=new Set,this.du=new Pa(R.comparator),this.Au=new Map,this.Ru=new od,this.Vu={},this.mu=new Map,this.fu=Mu.cr(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function Op(e,t,n=!0){let r=am(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Ap(r,t,n,!0),i}async function kp(e,t){await Ap(am(e),t,!0,!1)}async function Ap(e,t,n,r){let i=await zd(e.localStore,_s(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await jp(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&Mf(e.remoteStore,i),s}async function jp(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Vd(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return Wp(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await Vd(e.localStore,t,!0),o=new Cp(t,a.Qs),s=o.ru(a.documents),c=Fc.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);Wp(e,n,l.au);let u=new Tp(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function Mp(e,t,n){let r=P(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!xs(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Bd(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Nf(r.remoteStore,i.targetId),Hp(r,i.targetId)})).catch(qr)):(Hp(r,i.targetId),await Bd(r.localStore,i.targetId,!0))}async function Np(e,t){let n=P(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Nf(n.remoteStore,r.targetId))}async function Pp(e,t,n){let r=om(e);try{let e=await function(e,t){let n=P(e),r=Pr.now(),i=t.reduce(((e,t)=>e.add(t.key)),G()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=As(),c=G();return n.Ns.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=dc(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new mc(e.key,t,Mo(t.value.mapValue),ac.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Ns(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||=new Pa(L),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await qp(r,e.changes),await Kf(r.remoteStore)}catch(e){let t=op(e,`Failed to persist write`);n.reject(t)}}async function Fp(e,t){let n=P(e);try{let e=await Id(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(N(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?N(r.hu,14607):e.removedDocuments.size>0&&(N(r.hu,42227),r.hu=!1))})),await qp(n,e,t)}catch(e){await qr(e)}}function Ip(e,t,n){let r=P(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=P(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.Sa)e.va(t)&&(r=!0)})),r&&_p(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Lp(e,t,n){let r=P(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new Pa(R.comparator);e=e.insert(a,No.newNoDocument(a,z.min()));let n=G().add(a);await Fp(r,new Pc(z.min(),new Map,new Pa(L),e,n)),r.du=r.du.remove(a),r.Au.delete(t),Kp(r)}else await Bd(r.localStore,t,!1).then((()=>Hp(r,t,n))).catch(qr)}async function Rp(e,t){let n=P(e),r=t.batch.batchId;try{let e=await Pd(n.localStore,t);Vp(n,r,null),Bp(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await qp(n,e)}catch(e){await qr(e)}}async function zp(e,t,n){let r=P(e);try{let e=await function(e,t){let n=P(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(N(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Vp(r,t,n),Bp(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await qp(r,e)}catch(e){await qr(e)}}function Bp(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function Vp(e,t,n){let r=P(e),i=r.Vu[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Hp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((t=>{e.Ru.containsKey(t)||Up(e,t)}))}function Up(e,t){e.Eu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(Nf(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Kp(e))}function Wp(e,t,n){for(let r of n)r instanceof xp?(e.Ru.addReference(r.key,t),Gp(e,r)):r instanceof Sp?(j(wp,`Document no longer in limbo: `+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Up(e,r.key)):M(19791,{wu:r})}function Gp(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(j(wp,`New document in limbo: `+n),e.Eu.add(r),Kp(e))}function Kp(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new R(yr.fromString(t)),r=e.fu.next();e.Au.set(r,new Ep(n)),e.du=e.du.insert(n,r),Mf(e.remoteStore,new El(_s(ps(n.path)),r,`TargetPurposeLimboResolution`,ci.ce))}}async function qp(e,t,n){let r=P(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=Ed.As(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.H_(i),await async function(e,t){let n=P(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>B.forEach(t,(t=>B.forEach(t.Es,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>B.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ei(e))throw e;j(kd,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,a))}async function Jp(e,t){let n=P(e);if(!n.currentUser.isEqual(t)){j(wp,`User change. New user:`,t.toKey());let e=await Nd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new I(F.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await qp(n,e.Ls)}}function Yp(e,t){let n=P(e),r=n.Au.get(t);if(r&&r.hu)return G().add(r.key);{let e=G(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}async function Xp(e,t){let n=P(e),r=await Vd(n.localStore,t.query,!0),i=t.view.cu(r);return n.isPrimaryClient&&Wp(n,t.targetId,i.au),i}async function Zp(e,t){let n=P(e);return Ud(n.localStore,t).then((e=>qp(n,e)))}async function Qp(e,t,n,r){let i=P(e),a=await function(e,t){let n=P(e),r=P(n.mutationQueue);return n.persistence.runTransaction(`Lookup mutation documents`,`readonly`,(e=>r.er(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):B.resolve(null)))))}(i.localStore,t);a===null?j(wp,`Cannot apply mutation batch with id: `+t):(n===`pending`?await Kf(i.remoteStore):n===`acknowledged`||n===`rejected`?(Vp(i,t,r||null),Bp(i,t),function(e,t){P(P(e).mutationQueue).ir(t)}(i.localStore,t)):M(6720,`Unknown batchState`,{Su:n}),await qp(i,a))}async function $p(e,t){let n=P(e);if(am(n),om(n),!0===t&&!0!==n.gu){let e=await em(n,n.sharedClientState.getAllActiveQueryTargets().toArray());n.gu=!0,await np(n.remoteStore,!0);for(let t of e)Mf(n.remoteStore,t)}else if(!1===t&&!1!==n.gu){let e=[],t=Promise.resolve();n.Iu.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Hp(n,i),Bd(n.localStore,i,!0)))),Nf(n.remoteStore,i)})),await t,await em(n,e),function(e){let t=P(e);t.Au.forEach(((e,n)=>{Nf(t.remoteStore,n)})),t.Ru.Jr(),t.Au=new Map,t.du=new Pa(R.comparator)}(n),n.gu=!1,await np(n.remoteStore,!1)}}async function em(e,t,n){let r=P(e),i=[],a=[];for(let e of t){let t,n=r.Iu.get(e);if(n&&n.length!==0){t=await zd(r.localStore,_s(n[0]));for(let e of n){let t=await Xp(r,r.Tu.get(e));t.snapshot&&a.push(t.snapshot)}}else{let n=await Hd(r.localStore,e);t=await zd(r.localStore,n),await jp(r,tm(n),e,!1,t.resumeToken)}i.push(t)}return r.Pu.H_(a),i}function tm(e){return fs(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,`F`,e.startAt,e.endAt)}function nm(e){return function(e){return P(P(e).persistence).Ts()}(P(e).localStore)}async function rm(e,t,n,r){let i=P(e);if(i.gu)return void j(wp,`Ignoring unexpected query state notification.`);let a=i.Iu.get(t);if(a&&a.length>0)switch(n){case`current`:case`not-current`:await qp(i,await Ud(i.localStore,Ts(a[0])),Pc.createSynthesizedRemoteEventForCurrentChange(t,n===`current`,Ha.EMPTY_BYTE_STRING));break;case`rejected`:await Bd(i.localStore,t,!0),Hp(i,t,r);break;default:M(64155,n)}}async function im(e,t,n){let r=am(e);if(r.gu){for(let e of t){if(r.Iu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){j(wp,`Adding an already active target `+e);continue}let t=await Hd(r.localStore,e),n=await zd(r.localStore,t);await jp(r,tm(t),n.targetId,!1,n.resumeToken),Mf(r.remoteStore,n)}for(let e of n)r.Iu.has(e)&&await Bd(r.localStore,e,!1).then((()=>{Nf(r.remoteStore,e),Hp(r,e)})).catch(qr)}}function am(e){let t=P(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lp.bind(null,t),t.Pu.H_=hp.bind(null,t.eventManager),t.Pu.yu=gp.bind(null,t.eventManager),t}function om(e){let t=P(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zp.bind(null,t),t}var sm=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=yf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Md(this.persistence,new Od,e.initialUser,this.serializer)}Cu(e){return new fd(md.mi,this.serializer)}Du(e){return new af}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};sm.provider={build:()=>new sm};var cm=class extends sm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){N(this.persistence.referenceDelegate instanceof hd,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new Vu(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?wu.DEFAULT:wu.withCacheSize(this.cacheSizeBytes);return new fd((e=>hd.mi(e,t)),this.serializer)}},lm=class extends sm{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind=`persistent`,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await om(this.xu.syncEngine),await Kf(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Md(this.persistence,new Od,e.initialUser,this.serializer)}Fu(e,t){let n=this.persistence.referenceDelegate.garbageCollector;return new Vu(n,e.asyncQueue,t)}Mu(e,t){let n=new si(t,this.persistence);return new oi(e.asyncQueue,n)}Cu(e){let t=Td(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes===void 0?wu.DEFAULT:wu.withCacheSize(this.cacheSizeBytes);return new Sd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,_f(),vf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new af}},um=class extends lm{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);let t=this.xu.syncEngine;this.sharedClientState instanceof rf&&(this.sharedClientState.syncEngine={Co:Qp.bind(null,t),vo:rm.bind(null,t),Fo:im.bind(null,t),Ts:nm.bind(null,t),Do:Zp.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async e=>{await $p(this.xu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}Du(e){let t=_f();if(!rf.v(t))throw new I(F.UNIMPLEMENTED,`IndexedDB persistence is only available on platforms that support LocalStorage.`);let n=Td(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rf(t,e.asyncQueue,n,e.clientId,e.initialUser)}},dm=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ip(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jp.bind(null,this.syncEngine),await np(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dp}()}createDatastore(e){let t=yf(e.databaseInfo.databaseId),n=function(e){return new gf(e)}(e.databaseInfo);return function(e,t,n,r){return new Ef(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new kf(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Ip(this.syncEngine,e,0)),function(){return cf.v()?new cf:new of}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new Dp(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=P(e);j(Of,`RemoteStore shutting down.`),t.Ea.add(5),await jf(t),t.Aa.shutdown(),t.Ra.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};dm.provider={build:()=>new dm};var fm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zn(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},pm=`FirestoreClient`,mm=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=qn.UNAUTHENTICATED,this.clientId=ur.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{j(pm,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(j(pm,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=op(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function hm(e,t){e.asyncQueue.verifyOperationInProgress(),j(pm,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Nd(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function gm(e,t){e.asyncQueue.verifyOperationInProgress();let n=await _m(e);j(pm,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>tp(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>tp(t.remoteStore,n))),e._onlineComponents=t}async function _m(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){j(pm,`Using user provided OfflineComponentProvider`);try{await hm(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===F.FAILED_PRECONDITION||e.code===F.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;Qn(`Error using user provided cache. Falling back to memory cache: `+n),await hm(e,new sm)}}else j(pm,`Using default OfflineComponentProvider`),await hm(e,new cm(void 0));return e._offlineComponents}async function vm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(j(pm,`Using user provided OnlineComponentProvider`),await gm(e,e._uninitializedComponentsProvider._online)):(j(pm,`Using default OnlineComponentProvider`),await gm(e,new dm))),e._onlineComponents}function ym(e){return vm(e).then((e=>e.syncEngine))}async function bm(e){let t=await vm(e),n=t.eventManager;return n.onListen=Op.bind(null,t.syncEngine),n.onUnlisten=Mp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=kp.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Np.bind(null,t.syncEngine),n}function xm(e,t,n={}){let r=new tr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new fm({next:n=>{a.Nu(),t.enqueueAndForget((()=>mp(e,o))),n.fromCache&&r.source===`server`?i.reject(new I(F.UNAVAILABLE,`Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)`)):i.resolve(n)},error:e=>i.reject(e)}),o=new bp(n,a,{includeMetadataChanges:!0,qa:!0});return pp(e,o)}(await bm(e),e.asyncQueue,t,n,r))),r.promise}function Sm(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var Cm=new Map,wm=`firestore.googleapis.com`,Tm=!0,Em=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new I(F.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=wm,this.ssl=Tm}else this.host=e.host,this.ssl=e.ssl??Tm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cu;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ru)throw new I(F.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}Cr(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sm(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new I(F.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new I(F.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new I(F.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Dm=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new Em({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new I(F.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new I(F.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new Em(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new rr;switch(e.type){case`firstParty`:return new or(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new I(F.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=Cm.get(e);t&&(j(`ComponentProvider`,`Removing Datastore`),Cm.delete(e),t.terminate())}(this),Promise.resolve()}},Om=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},km=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Am(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(jr(n,e._jsonSchema))return new e(t,r||null,new R(yr.fromString(n.referencePath)))}};km._jsonSchemaVersion=`firestore/documentReference/1.0`,km._jsonSchema={type:Ar(`string`,km._jsonSchemaVersion),referencePath:Ar(`string`)};var Am=class e extends Om{constructor(e,t,n){super(e,t,ps(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new km(this.firestore,null,new R(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function jm(e,t,...n){if(e=O(e),Sr(`collection`,`path`,t),e instanceof Dm){let r=yr.fromString(t,...n);return Tr(r),new Am(e,null,r)}{if(!(e instanceof km||e instanceof Am))throw new I(F.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(yr.fromString(t,...n));return Tr(r),new Am(e.firestore,null,r)}}function Mm(e,t,...n){if(e=O(e),arguments.length===1&&(t=ur.newId()),Sr(`doc`,`path`,t),e instanceof Dm){let r=yr.fromString(t,...n);return wr(r),new km(e,null,new R(r))}{if(!(e instanceof km||e instanceof Am))throw new I(F.INVALID_ARGUMENT,`Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(yr.fromString(t,...n));return wr(r),new km(e.firestore,e instanceof Am?e.converter:null,new R(r))}}var Nm=`AsyncQueue`,Pm=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bf(this,`async_queue_retry`),this._c=()=>{let e=vf();e&&j(Nm,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=vf();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=vf();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new tr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ei(e))throw e;j(Nm,`Operation failed with retryable error: `+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Zn(`INTERNAL UNHANDLED ERROR: `,Fm(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=ap.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&M(47125,{Pc:Fm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function Fm(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}function Im(e){return function(e,t){if(typeof e!=`object`||!e)return!1;let n=e;for(let e of t)if(e in n&&typeof n[e]==`function`)return!0;return!1}(e,[`next`,`error`,`complete`])}var Lm=class extends Dm{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new Pm,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Pm(e),this._firestoreClient=void 0,await e}}};function Rm(e,t,n){n||=to;let r=on(e,`firestore`);if(r.isInitialized(n)){let e=r.getImmediate({identifier:n});if(je(r.getOptions(n),t))return e;throw new I(F.FAILED_PRECONDITION,`initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.`)}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new I(F.INVALID_ARGUMENT,`cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object`);if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Ru)throw new I(F.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);return t.host&&de(t.host)&&w(t.host),r.initialize({options:t,instanceIdentifier:n})}function zm(e){if(e._terminated)throw new I(F.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||Bm(e),e._firestoreClient}function Bm(e){let t=e._freezeSettings(),n=function(e,t,n,r){return new eo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Sm(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new mm(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var Vm=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(Ha.fromBase64String(t))}catch(e){throw new I(F.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(Ha.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(jr(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};Vm._jsonSchemaVersion=`firestore/bytes/1.0`,Vm._jsonSchema={type:Ar(`string`,Vm._jsonSchemaVersion),bytes:Ar(`string`)};var Hm=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new I(F.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},Um=class{constructor(e){this._methodName=e}},Wm=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new I(F.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new I(F.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return L(this._lat,e._lat)||L(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(jr(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};Wm._jsonSchemaVersion=`firestore/geoPoint/1.0`,Wm._jsonSchema={type:Ar(`string`,Wm._jsonSchemaVersion),latitude:Ar(`number`),longitude:Ar(`number`)};var Gm=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(jr(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new I(F.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};Gm._jsonSchemaVersion=`firestore/vectorValue/1.0`,Gm._jsonSchema={type:Ar(`string`,Gm._jsonSchemaVersion),vectorValues:Ar(`object`)};var Km=/^__.*__$/,qm=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new pc(e,this.data,t,this.fieldTransforms):new mc(e,this.data,this.fieldMask,t,this.fieldTransforms)}},Jm=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new mc(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Ym(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M(40011,{Ac:e})}}var Xm=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return fh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc(`Document fields must not be empty`);if(Ym(this.Ac)&&Km.test(e))throw this.Sc(`Document fields cannot begin and end with "__"`)}},Zm=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||yf(e)}Cc(e,t,n,r=!1){return new Xm({Ac:e,methodName:t,Dc:n,path:xr.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Qm(e){let t=e._freezeSettings(),n=yf(e._databaseId);return new Zm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $m(e,t,n,r,i,a={}){let o=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);ch(`Data must be an object, but it was:`,o,r);let s=oh(r,o),c,l;if(a.merge)c=new Ba(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=lh(t,r,n);if(!o.contains(i))throw new I(F.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);ph(e,i)||e.push(i)}c=new Ba(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new qm(new jo(s),c,l)}var eh=class e extends Um{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}},th=class e extends Um{_toFieldTransform(e){return new nc(e.path,new Js)}isEqual(t){return t instanceof e}};function nh(e,t,n,r){let i=e.Cc(1,t,n);ch(`Data must be an object, but it was:`,i,r);let a=[],o=jo.empty();return Ma(r,((e,r)=>{let s=dh(t,e,n);r=O(r);let c=i.yc(s);if(r instanceof eh)a.push(s);else{let e=ah(r,c);e!=null&&(a.push(s),o.set(s,e))}})),new Jm(o,new Ba(a),i.fieldTransforms)}function rh(e,t,n,r,i,a){let o=e.Cc(1,t,n),s=[lh(t,r,n)],c=[i];if(a.length%2!=0)throw new I(F.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(lh(t,a[e])),c.push(a[e+1]);let l=[],u=jo.empty();for(let e=s.length-1;e>=0;--e)if(!ph(l,s[e])){let t=s[e],n=c[e];n=O(n);let r=o.yc(t);if(n instanceof eh)l.push(t);else{let e=ah(n,r);e!=null&&(l.push(t),u.set(t,e))}}return new Jm(u,new Ba(l),o.fieldTransforms)}function ih(e,t,n,r=!1){return ah(n,e.Cc(r?4:3,t))}function ah(e,t){if(sh(e=O(e)))return ch(`Unsupported field value:`,t,e),oh(e,t);if(e instanceof Um)return function(e,t){if(!Ym(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=ah(i,t.wc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=O(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return Us(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=Pr.fromDate(e);return{timestampValue:Jc(t.serializer,n)}}if(e instanceof Pr){let n=new Pr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Jc(t.serializer,n)}}if(e instanceof Wm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Vm)return{bytesValue:Yc(t.serializer,e._byteString)};if(e instanceof km){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Qc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Gm)return function(e,t){return{mapValue:{fields:{[ro]:{stringValue:oo},[so]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.Sc(`VectorValues must only contain numeric values.`);return Vs(t.serializer,e)}))}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${Dr(e)}`)}(e,t)}function oh(e,t){let n={};return Na(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ma(e,((e,r)=>{let i=ah(r,t.mc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function sh(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof Pr||e instanceof Wm||e instanceof Vm||e instanceof km||e instanceof Um||e instanceof Gm)}function ch(e,t,n){if(!sh(n)||!Er(n)){let r=Dr(n);throw r===`an object`?t.Sc(e+` a custom object`):t.Sc(e+` `+r)}}function lh(e,t,n){if((t=O(t))instanceof Hm)return t._internalPath;if(typeof t==`string`)return dh(e,t);throw fh(`Field path arguments must be of type string or `,e,!1,void 0,n)}var uh=RegExp(`[~\\*/\\[\\]]`);function dh(e,t,n){if(t.search(uh)>=0)throw fh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Hm(...t.split(`.`))._internalPath}catch{throw fh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function fh(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new I(F.INVALID_ARGUMENT,s+e+c)}function ph(e,t){return e.some((e=>e.isEqual(t)))}var mh=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new km(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new hh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(gh(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},hh=class extends mh{data(){return super.data()}};function gh(e,t){return typeof t==`string`?dh(e,t):t instanceof Hm?t._internalPath:t._delegate._internalPath}function _h(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new I(F.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var vh=class{},yh=class extends vh{};function bh(e,t,...n){let r=[];t instanceof vh&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof Ch)).length,n=e.filter((e=>e instanceof xh)).length;if(t>1||t>0&&n>0)throw new I(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var xh=class e extends yh{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return Nh(e._query,t),new Om(e.firestore,e.converter,ys(e._query,t))}_parse(e){let t=Qm(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new I(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){Mh(o,a);let t=[];for(let n of o)t.push(jh(r,e,n));s={arrayValue:{values:t}}}else s=jh(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||Mh(o,a),s=ih(n,t,o,a===`in`||a===`not-in`);return W.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}};function Sh(e,t,n){let r=t,i=gh(`where`,e);return xh._create(i,r,n)}var Ch=class e extends vh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:Bo.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)Nh(n,e),n=ys(n,e)}(e._query,t),new Om(e.firestore,e.converter,ys(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},wh=class e extends yh{constructor(e,t){super(),this._field=e,this._direction=t,this.type=`orderBy`}static _create(t,n){return new e(t,n)}_apply(e){let t=function(e,t,n){if(e.startAt!==null)throw new I(F.INVALID_ARGUMENT,`Invalid query. You must not call startAt() or startAfter() before calling orderBy().`);if(e.endAt!==null)throw new I(F.INVALID_ARGUMENT,`Invalid query. You must not call endAt() or endBefore() before calling orderBy().`);return new Lo(t,n)}(e._query,this._field,this._direction);return new Om(e.firestore,e.converter,function(e,t){let n=e.explicitOrderBy.concat([t]);return new ds(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}};function Th(e,t=`asc`){let n=t,r=gh(`orderBy`,e);return wh._create(r,n)}var Eh=class e extends yh{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(t,n,r){return new e(t,n,r)}_apply(e){return new Om(e.firestore,e.converter,bs(e._query,this._limit,this._limitType))}};function Dh(e){return kr(`limit`,e),Eh._create(`limit`,e,`F`)}var Oh=class e extends yh{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=Ah(e,this.type,this._docOrFields,this._inclusive);return new Om(e.firestore,e.converter,function(e,t){return new ds(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}};function kh(...e){return Oh._create(`startAfter`,e,!1)}function Ah(e,t,n,r){if(n[0]=O(n[0]),n[0]instanceof mh)return function(e,t,n,r,i){if(!r)throw new I(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);let a=[];for(let n of gs(e))if(n.field.isKeyField())a.push(_o(t,r.key));else{let e=r.data.field(n.field);if(Za(e))throw new I(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field "`+n.field+`" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)`);if(e===null){let e=n.field.canonicalString();throw new I(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}a.push(e)}return new Po(a,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{let i=Qm(e.firestore);return function(e,t,n,r,i,a){let o=e.explicitOrderBy;if(i.length>o.length)throw new I(F.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let s=[];for(let a=0;a<i.length;a++){let c=i[a];if(o[a].field.isKeyField()){if(typeof c!=`string`)throw new I(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof c}`);if(!hs(e)&&c.indexOf(`/`)!==-1)throw new I(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${c}' contains a slash.`);let n=e.path.child(yr.fromString(c));if(!R.isDocumentKey(n))throw new I(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);let i=new R(n);s.push(_o(t,i))}else{let e=ih(n,r,c);s.push(e)}}return new Po(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}}function jh(e,t,n){if(typeof(n=O(n))==`string`){if(n===``)throw new I(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!hs(t)&&n.indexOf(`/`)!==-1)throw new I(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(yr.fromString(n));if(!R.isDocumentKey(r))throw new I(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _o(e,new R(r))}if(n instanceof km)return _o(e,n._key);throw new I(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dr(n)}.`)}function Mh(e,t){if(!Array.isArray(e)||e.length===0)throw new I(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Nh(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new I(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new I(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var Ph=class{convertValue(e,t=`none`){switch(lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ga(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ka(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw M(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return Ma(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[so].arrayValue?.values?.map((e=>Ga(e.doubleValue)));return new Gm(t)}convertGeoPoint(e){return new Wm(Ga(e.latitude),Ga(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=Qa(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp($a(e));default:return null}}convertTimestamp(e){let t=Wa(e);return new Pr(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=yr.fromString(e);N(Tl(n),9688,{name:e});let r=new no(n.get(1),n.get(3)),i=new R(n.popFirst(5));return r.isEqual(t)||Zn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};function Fh(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var Ih=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Lh=class e extends mh{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(gh(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new I(F.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};Lh._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,Lh._jsonSchema={type:Ar(`string`,Lh._jsonSchemaVersion),bundleSource:Ar(`string`,`DocumentSnapshot`),bundleName:Ar(`string`),bundle:Ar(`string`)};var Rh=class extends Lh{data(e={}){return super.data(e)}},zh=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ih(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Rh(this._firestore,this._userDataWriter,n.key,n,new Ih(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new I(F.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new Rh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ih(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new Rh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ih(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Bh(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new I(F.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=ur.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function Bh(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return M(61501,{type:e})}}zh._jsonSchemaVersion=`firestore/querySnapshot/1.0`,zh._jsonSchema={type:Ar(`string`,zh._jsonSchemaVersion),bundleSource:Ar(`string`,`QuerySnapshot`),bundleName:Ar(`string`),bundle:Ar(`string`)};var Vh=class extends Ph{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vm(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new km(this.firestore,null,t)}};function Hh(e){e=Or(e,Om);let t=Or(e.firestore,Lm),n=zm(t),r=new Vh(t);return _h(e._query),xm(n,e._query).then((n=>new zh(t,r,e,n)))}function Uh(e,t,n){e=Or(e,km);let r=Or(e.firestore,Lm),i=Fh(e.converter,t,n);return Jh(r,[$m(Qm(r),`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,ac.none())])}function Wh(e,t,n,...r){e=Or(e,km);let i=Or(e.firestore,Lm),a=Qm(i),o;return o=typeof(t=O(t))==`string`||t instanceof Hm?rh(a,`updateDoc`,e._key,t,n,r):nh(a,`updateDoc`,e._key,t),Jh(i,[o.toMutation(e._key,ac.exists(!0))])}function Gh(e){return Jh(Or(e.firestore,Lm),[new vc(e._key,ac.none())])}function Kh(e,t){let n=Or(e.firestore,Lm),r=Mm(e),i=Fh(e.converter,t);return Jh(n,[$m(Qm(e.firestore),`addDoc`,r._key,i,e.converter!==null,{}).toMutation(r._key,ac.exists(!1))]).then((()=>r))}function qh(e,...t){e=O(e);let n={includeMetadataChanges:!1,source:`default`},r=0;typeof t[r]!=`object`||Im(t[r])||(n=t[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Im(t[r])){let e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let a,o,s;if(e instanceof km)o=Or(e.firestore,Lm),s=ps(e._key.path),a={next:n=>{t[r]&&t[r](Yh(o,e,n))},error:t[r+1],complete:t[r+2]};else{let n=Or(e,Om);o=Or(n.firestore,Lm),s=n._query;let i=new Vh(o);a={next:e=>{t[r]&&t[r](new zh(o,i,n,e))},error:t[r+1],complete:t[r+2]},_h(e._query)}return function(e,t,n,r){let i=new fm(r),a=new bp(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>pp(await bm(e),a))),()=>{i.Nu(),e.asyncQueue.enqueueAndForget((async()=>mp(await bm(e),a)))}}(zm(o),s,i,a)}function Jh(e,t){return function(e,t){let n=new tr;return e.asyncQueue.enqueueAndForget((async()=>Pp(await ym(e),t,n))),n.promise}(zm(e),t)}function Yh(e,t,n){let r=n.docs.get(t._key);return new Lh(e,new Vh(e),t._key,r,new Ih(n.hasPendingWrites,n.fromCache),t.converter)}var Xh=class{constructor(e){let t;this.kind=`persistent`,e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=eg(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function Zh(e){return new Xh(e)}var Qh=class{constructor(e){this.forceOwnership=e,this.kind=`persistentSingleTab`}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=dm.provider,this._offlineComponentProvider={build:t=>new lm(t,e?.cacheSizeBytes,this.forceOwnership)}}},$h=class{constructor(){this.kind=`PersistentMultipleTab`}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=dm.provider,this._offlineComponentProvider={build:t=>new um(t,e?.cacheSizeBytes)}}};function eg(e){return new Qh(e?.forceOwnership)}function tg(){return new $h}var ng=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qm(e)}set(e,t,n){this._verifyNotCommitted();let r=rg(e,this._firestore),i=Fh(r.converter,t,n),a=$m(this._dataReader,`WriteBatch.set`,r._key,i,r.converter!==null,n);return this._mutations.push(a.toMutation(r._key,ac.none())),this}update(e,t,n,...r){this._verifyNotCommitted();let i=rg(e,this._firestore),a;return a=typeof(t=O(t))==`string`||t instanceof Hm?rh(this._dataReader,`WriteBatch.update`,i._key,t,n,r):nh(this._dataReader,`WriteBatch.update`,i._key,t),this._mutations.push(a.toMutation(i._key,ac.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=rg(e,this._firestore);return this._mutations=this._mutations.concat(new vc(t._key,ac.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new I(F.FAILED_PRECONDITION,`A write batch can no longer be used after commit() has been called.`)}};function rg(e,t){if((e=O(e)).firestore!==t)throw new I(F.INVALID_ARGUMENT,`Provided document reference is from a different Firestore instance.`);return e}function ig(){return new th(`serverTimestamp`)}function ag(e){return zm(e=Or(e,Lm)),new ng(e,(t=>Jh(e,t)))}(function(e,t=!0){(function(e){Jn=e})(un),an(new Be(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new Lm(new ir(e.getProvider(`auth-internal`)),new cr(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new I(F.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new no(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),pn(Gn,Kn,e),pn(Gn,Kn,`esm2020`)})();var og=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.forward_ref`);Symbol.iterator;var r={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i=Object.assign,a={};function o(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||r}o.prototype.isReactComponent={},o.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function s(){}s.prototype=o.prototype;function c(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||r}var l=c.prototype=new s;l.constructor=c,i(l,o.prototype),l.isPureReactComponent=!0,Array.isArray;var u=Object.prototype.hasOwnProperty;function d(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)u.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return d(e,a,i)},e.forwardRef=function(e){return{$$typeof:n,render:e}}})),sg=o(((e,t)=>{t.exports=og()})),cg=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),lg=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),ug=e=>{let t=lg(e);return t.charAt(0).toUpperCase()+t.slice(1)},dg=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),fg=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0},pg={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},mg=sg(),hg=(0,mg.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,mg.createElement)(`svg`,{ref:c,...pg,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:dg(`lucide`,i),...!a&&!fg(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,mg.createElement)(e,t)),...Array.isArray(a)?a:[a]])),Z=(e,t)=>{let n=(0,mg.forwardRef)(({className:n,...r},i)=>(0,mg.createElement)(hg,{ref:i,iconNode:t,className:dg(`lucide-${cg(ug(e))}`,`lucide-${e}`,n),...r}));return n.displayName=ug(e),n},gg=Z(`activity`,[[`path`,{d:`M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2`,key:`169zse`}]]),_g=Z(`arrow-right`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`m12 5 7 7-7 7`,key:`xquz4c`}]]),vg=Z(`box`,[[`path`,{d:`M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z`,key:`hh9hay`}],[`path`,{d:`m3.3 7 8.7 5 8.7-5`,key:`g66t2b`}],[`path`,{d:`M12 22V12`,key:`d0xqtd`}]]),yg=Z(`briefcase`,[[`path`,{d:`M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16`,key:`jecpp`}],[`rect`,{width:`20`,height:`14`,x:`2`,y:`6`,rx:`2`,key:`i6l2r4`}]]),bg=Z(`building`,[[`path`,{d:`M12 10h.01`,key:`1nrarc`}],[`path`,{d:`M12 14h.01`,key:`1etili`}],[`path`,{d:`M12 6h.01`,key:`1vi96p`}],[`path`,{d:`M16 10h.01`,key:`1m94wz`}],[`path`,{d:`M16 14h.01`,key:`1gbofw`}],[`path`,{d:`M16 6h.01`,key:`1x0f13`}],[`path`,{d:`M8 10h.01`,key:`19clt8`}],[`path`,{d:`M8 14h.01`,key:`6423bh`}],[`path`,{d:`M8 6h.01`,key:`1dz90k`}],[`path`,{d:`M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3`,key:`cabbwy`}],[`rect`,{x:`4`,y:`2`,width:`16`,height:`20`,rx:`2`,key:`1uxh74`}]]),xg=Z(`calendar`,[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}]]),Sg=Z(`check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),Cg=Z(`chevron-down`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),wg=Z(`chevron-up`,[[`path`,{d:`m18 15-6-6-6 6`,key:`153udz`}]]),Tg=Z(`circle-alert`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]]),Eg=Z(`circle-arrow-down`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 8v8`,key:`napkw2`}],[`path`,{d:`m8 12 4 4 4-4`,key:`k98ssh`}]]),Dg=Z(`circle-check-big`,[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),Og=Z(`circle-play`,[[`path`,{d:`M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z`,key:`kmsa83`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),kg=Z(`circle-x`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m15 9-6 6`,key:`1uzhvr`}],[`path`,{d:`m9 9 6 6`,key:`z0biqf`}]]),Ag=Z(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),jg=Z(`cloud`,[[`path`,{d:`M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z`,key:`p7xjir`}]]),Mg=Z(`download`,[[`path`,{d:`M12 15V3`,key:`m9g1x1`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`path`,{d:`m7 10 5 5 5-5`,key:`brsn70`}]]),Ng=Z(`file-braces`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1`,key:`1oajmo`}],[`path`,{d:`M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1`,key:`mpwhp6`}]]),Pg=Z(`file-spreadsheet`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M8 13h2`,key:`yr2amv`}],[`path`,{d:`M14 13h2`,key:`un5t4a`}],[`path`,{d:`M8 17h2`,key:`2yhykz`}],[`path`,{d:`M14 17h2`,key:`10kma7`}]]),Fg=Z(`file-text`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10 9H8`,key:`b1mrlr`}],[`path`,{d:`M16 13H8`,key:`t4e002`}],[`path`,{d:`M16 17H8`,key:`z1uh3a`}]]),Ig=Z(`flame`,[[`path`,{d:`M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4`,key:`1slcih`}]]),Lg=Z(`folder-cog`,[[`path`,{d:`M10.3 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.98a2 2 0 0 1 1.69.9l.66 1.2A2 2 0 0 0 12 6h8a2 2 0 0 1 2 2v3.3`,key:`128dxu`}],[`path`,{d:`m14.305 19.53.923-.382`,key:`3m78fa`}],[`path`,{d:`m15.228 16.852-.923-.383`,key:`npixar`}],[`path`,{d:`m16.852 15.228-.383-.923`,key:`5xggr7`}],[`path`,{d:`m16.852 20.772-.383.924`,key:`dpfhf9`}],[`path`,{d:`m19.148 15.228.383-.923`,key:`1reyyz`}],[`path`,{d:`m19.53 21.696-.382-.924`,key:`1goivc`}],[`path`,{d:`m20.772 16.852.924-.383`,key:`htqkph`}],[`path`,{d:`m20.772 19.148.924.383`,key:`9w9pjp`}],[`circle`,{cx:`18`,cy:`18`,r:`3`,key:`1xkwt0`}]]),Rg=Z(`funnel`,[[`path`,{d:`M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z`,key:`sc7q7i`}]]),zg=Z(`layers`,[[`path`,{d:`M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z`,key:`zw3jo`}],[`path`,{d:`M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12`,key:`1wduqc`}],[`path`,{d:`M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17`,key:`kqbvx6`}]]),Bg=Z(`loader-circle`,[[`path`,{d:`M21 12a9 9 0 1 1-6.219-8.56`,key:`13zald`}]]),Vg=Z(`log-in`,[[`path`,{d:`m10 17 5-5-5-5`,key:`1bsop3`}],[`path`,{d:`M15 12H3`,key:`6jk70r`}],[`path`,{d:`M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4`,key:`u53s6r`}]]),Hg=Z(`log-out`,[[`path`,{d:`m16 17 5-5-5-5`,key:`1bji2h`}],[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`,key:`1uf3rs`}]]),Ug=Z(`monitor`,[[`rect`,{width:`20`,height:`14`,x:`2`,y:`3`,rx:`2`,key:`48i651`}],[`line`,{x1:`8`,x2:`16`,y1:`21`,y2:`21`,key:`1svkeh`}],[`line`,{x1:`12`,x2:`12`,y1:`17`,y2:`21`,key:`vw1qmm`}]]),Wg=Z(`pen`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}]]),Gg=Z(`plus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`M12 5v14`,key:`s699le`}]]),Kg=Z(`refresh-cw`,[[`path`,{d:`M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8`,key:`v9h5vc`}],[`path`,{d:`M21 3v5h-5`,key:`1q7to0`}],[`path`,{d:`M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16`,key:`3uifl3`}],[`path`,{d:`M8 16H3v5`,key:`1cv678`}]]),qg=Z(`rotate-ccw`,[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}]]),Jg=Z(`save`,[[`path`,{d:`M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z`,key:`1c8476`}],[`path`,{d:`M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7`,key:`1ydtos`}],[`path`,{d:`M7 3v4a1 1 0 0 0 1 1h7`,key:`t51u73`}]]),Yg=Z(`school`,[[`path`,{d:`M14 21v-3a2 2 0 0 0-4 0v3`,key:`1rgiei`}],[`path`,{d:`M18 5v16`,key:`1ethyx`}],[`path`,{d:`m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6`,key:`zywc2d`}],[`path`,{d:`m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11`,key:`1d4ql0`}],[`path`,{d:`M6 5v16`,key:`1sn0nx`}],[`circle`,{cx:`12`,cy:`9`,r:`2`,key:`1092wv`}]]),Xg=Z(`search`,[[`path`,{d:`m21 21-4.34-4.34`,key:`14j7rj`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]]),Zg=Z(`settings`,[[`path`,{d:`M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915`,key:`1i5ecw`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),Qg=Z(`shopping-cart`,[[`circle`,{cx:`8`,cy:`21`,r:`1`,key:`jimo8o`}],[`circle`,{cx:`19`,cy:`21`,r:`1`,key:`13723u`}],[`path`,{d:`M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12`,key:`9zh506`}]]),$g=Z(`square-check-big`,[[`path`,{d:`M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344`,key:`2acyp4`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),e_=Z(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),t_=Z(`triangle-alert`,[[`path`,{d:`m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3`,key:`wmoenq`}],[`path`,{d:`M12 9v4`,key:`juzpu7`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),n_=Z(`truck`,[[`path`,{d:`M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2`,key:`wrbu53`}],[`path`,{d:`M15 18H9`,key:`1lyqi6`}],[`path`,{d:`M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14`,key:`lysw3i`}],[`circle`,{cx:`17`,cy:`18`,r:`2`,key:`332jqn`}],[`circle`,{cx:`7`,cy:`18`,r:`2`,key:`19iecd`}]]),r_=Z(`upload`,[[`path`,{d:`M12 3v12`,key:`1x0j5s`}],[`path`,{d:`m17 8-5-5-5 5`,key:`7q97r8`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}]]),i_=Z(`user-check`,[[`path`,{d:`m16 11 2 2 4-4`,key:`9rsbq5`}],[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),a_=Z(`user`,[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]]),o_=Z(`users`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`path`,{d:`M16 3.128a4 4 0 0 1 0 7.744`,key:`16gr8j`}],[`path`,{d:`M22 21v-2a4 4 0 0 0-3-3.87`,key:`kshegd`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),s_=Z(`wrench`,[[`path`,{d:`M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z`,key:`1ngwbx`}]]),c_=Z(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]);pn(`firebase`,`12.7.0`,`app`);function l_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var u_=l_,d_=new De(`auth`,`Firebase`,l_()),f_=new Ze(`@firebase/auth`);function p_(e,...t){f_.logLevel<=k.WARN&&f_.warn(`Auth (${un}): ${e}`,...t)}function m_(e,...t){f_.logLevel<=k.ERROR&&f_.error(`Auth (${un}): ${e}`,...t)}function h_(e,...t){throw y_(e,...t)}function g_(e,...t){return y_(e,...t)}function __(e,t,n){return new De(`auth`,`Firebase`,{...u_(),[t]:n}).create(t,{appName:e.name})}function v_(e){return __(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function y_(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return d_.create(e,...t)}function Q(e,t,...n){if(!e)throw y_(t,...n)}function b_(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw m_(t),Error(t)}function x_(e,t){e||b_(t)}function S_(){return typeof self<`u`&&self.location?.href||``}function C_(){return w_()===`http:`||w_()===`https:`}function w_(){return typeof self<`u`&&self.location?.protocol||null}function T_(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(C_()||ve()||`connection`in navigator)?navigator.onLine:!0}function E_(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var D_=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,x_(t>e,`Short delay should be less than long delay!`),this.isMobile=D()||ye()}get(){return T_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function O_(e,t){x_(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var k_=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;b_(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;b_(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;b_(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},A_={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},j_=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],M_=new D_(3e4,6e4);function N_(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function P_(e,t,n,r,i={}){return F_(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=Ne({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return _e()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&de(e.emulatorConfig.host)&&(c.credentials=`include`),k_.fetch()(await L_(e,e.config.apiHost,n,o),c)})}async function F_(e,t,n){e._canInitEmulator=!1;let r={...A_,...t};try{let t=new z_(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw B_(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw B_(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw B_(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw B_(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw __(e,o,n);h_(e,o)}}catch(t){if(t instanceof Ee)throw t;h_(e,`network-request-failed`,{message:String(t)})}}async function I_(e,t,n,r,i={}){let a=await P_(e,t,n,r,i);return`mfaPendingCredential`in a&&h_(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function L_(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?O_(e.config,i):`${e.config.apiScheme}://${i}`;return j_.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function R_(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var z_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(g_(this.auth,`network-request-failed`)),M_.get())})}};function B_(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=g_(e,t,r);return i.customData._tokenResponse=n,i}function V_(e){return e!==void 0&&e.enterprise!==void 0}var H_=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return R_(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function U_(e,t){return P_(e,`GET`,`/v2/recaptchaConfig`,N_(e,t))}async function W_(e,t){return P_(e,`POST`,`/v1/accounts:delete`,t)}async function G_(e,t){return P_(e,`POST`,`/v1/accounts:lookup`,t)}function K_(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function q_(e,t=!1){let n=O(e),r=await n.getIdToken(t),i=Y_(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:K_(J_(i.auth_time)),issuedAtTime:K_(J_(i.iat)),expirationTime:K_(J_(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function J_(e){return Number(e)*1e3}function Y_(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return m_(`JWT malformed, contained fewer than 3 sections`),null;try{let e=ne(n);return e?JSON.parse(e):(m_(`Failed to decode base64 JWT payload`),null)}catch(e){return m_(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function X_(e){let t=Y_(e);return Q(t,`internal-error`),Q(t.exp!==void 0,`internal-error`),Q(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function Z_(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Ee&&Q_(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function Q_({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var $_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},ev=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=K_(this.lastLoginAt),this.creationTime=K_(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function tv(e){let t=e.auth,n=await Z_(e,G_(t,{idToken:await e.getIdToken()}));Q(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?iv(r.providerUserInfo):[],a=rv(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new ev(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function nv(e){let t=O(e);await tv(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function rv(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function iv(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function av(e,t){let n=await F_(e,{},async()=>{let n=Ne({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await L_(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&de(e.emulatorConfig.host)&&(s.credentials=`include`),k_.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ov(e,t){return P_(e,`POST`,`/v2/accounts:revokeToken`,N_(e,t))}var sv=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,`internal-error`),Q(e.idToken!==void 0,`internal-error`),Q(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):X_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,`internal-error`);let t=X_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await av(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(Q(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(Q(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(Q(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return b_(`not implemented`)}};function cv(e,t){Q(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var lv=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new $_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ev(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await Z_(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return q_(this,e)}reload(){return nv(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await tv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(v_(this.auth));let e=await this.getIdToken();return await Z_(this,W_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;Q(d&&h,t,`internal-error`);let g=sv.fromJSON(this.name,h);Q(typeof d==`string`,t,`internal-error`),cv(r,t.name),cv(i,t.name),Q(typeof f==`boolean`,t,`internal-error`),Q(typeof p==`boolean`,t,`internal-error`),cv(a,t.name),cv(o,t.name),cv(s,t.name),cv(c,t.name),cv(l,t.name),cv(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new sv;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await tv(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];Q(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:iv(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new sv;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ev(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},uv=new Map;function dv(e){x_(e instanceof Function,`Expected a class definition`);let t=uv.get(e);return t?(x_(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,uv.set(e,t),t)}var fv=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};fv.type=`NONE`;var pv=fv;function mv(e,t,n){return`firebase:${e}:${t}:${n}`}var hv=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=mv(this.userKey,r.apiKey,i),this.fullPersistenceKey=mv(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await G_(this.auth,{idToken:e}).catch(()=>void 0);return t?lv._fromGetAccountInfoResponse(this.auth,t,e):null}return lv._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(dv(pv),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||dv(pv),o=mv(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await G_(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await lv._fromGetAccountInfoResponse(t,e,n)}else r=lv._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function gv(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(bv(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(_v(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(Sv(t))return`Blackberry`;if(Cv(t))return`Webos`;if(vv(t))return`Safari`;if((t.includes(`chrome/`)||yv(t))&&!t.includes(`edge/`))return`Chrome`;if(xv(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function _v(e=E()){return/firefox\//i.test(e)}function vv(e=E()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function yv(e=E()){return/crios\//i.test(e)}function bv(e=E()){return/iemobile/i.test(e)}function xv(e=E()){return/android/i.test(e)}function Sv(e=E()){return/blackberry/i.test(e)}function Cv(e=E()){return/webos/i.test(e)}function wv(e=E()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Tv(e=E()){return wv(e)&&!!window.navigator?.standalone}function Ev(){return be()&&document.documentMode===10}function Dv(e=E()){return wv(e)||xv(e)||Cv(e)||Sv(e)||/windows phone/i.test(e)||bv(e)}function Ov(e,t=[]){let n;switch(e){case`Browser`:n=gv(E());break;case`Worker`:n=`${gv(E())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${un}/${r}`}var kv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function Av(e,t={}){return P_(e,`GET`,`/v2/passwordPolicy`,N_(e,t))}var jv=6,Mv=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??jv,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},Nv=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fv(this),this.idTokenSubscription=new Fv(this),this.beforeStateQueue=new kv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=dv(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await hv.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await G_(this,{idToken:e}),n=await lv._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(sn(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await tv(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E_()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(v_(this));let t=e?O(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(v_(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(v_(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dv(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new Mv(await Av(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new De(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await ov(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&dv(e)||this._popupRedirectResolver;Q(t,this,`argument-error`),this.redirectPersistenceManager=await hv.create(this,[dv(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ov(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&p_(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Pv(e){return O(e)}var Fv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ie(e=>this.observer=e)}get next(){return Q(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},Iv={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function Lv(e){Iv=e}function Rv(e){return Iv.loadJS(e)}function zv(){return Iv.recaptchaEnterpriseScript}function Bv(){return Iv.gapiScript}function Vv(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var Hv=class{constructor(){this.enterprise=new Uv}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Uv=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Wv=`recaptcha-enterprise`,Gv=`NO_RECAPTCHA`,Kv=class{constructor(e){this.type=Wv,this.auth=Pv(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{U_(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new H_(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;V_(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Gv)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new Hv().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&V_(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=zv();t.length!==0&&(t+=n),Rv(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function qv(e,t,n,r=!1,i=!1){let a=new Kv(e),o;if(i)o=Gv;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function Jv(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await qv(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await qv(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await qv(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await qv(e,t,n,!1,!0))):Promise.reject(i)):r(e,await qv(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function Yv(e){let t=Pv(e),n=new H_(await U_(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new Kv(t).verify()}function Xv(e,t){let n=on(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(je(n.getOptions(),t??{}))return e;h_(e,`already-initialized`)}return n.initialize({options:t})}function Zv(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(dv);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function Qv(e,t,n){let r=Pv(e);Q(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=$v(t),{host:o,port:s}=ey(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),Q(je(l,r.config.emulator)&&je(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,de(o)?(w(`${a}//${o}${c}`),he(`Auth`,!0)):i||ny()}function $v(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function ey(e){let t=$v(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:ty(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:ty(t)}}}function ty(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function ny(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var ry=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b_(`not implemented`)}_getIdTokenResponse(e){return b_(`not implemented`)}_linkToIdToken(e,t){return b_(`not implemented`)}_getReauthenticationResolver(e){return b_(`not implemented`)}};async function iy(e,t){return P_(e,`POST`,`/v1/accounts:signUp`,t)}async function ay(e,t){return I_(e,`POST`,`/v1/accounts:signInWithPassword`,N_(e,t))}async function oy(e,t){return I_(e,`POST`,`/v1/accounts:signInWithEmailLink`,N_(e,t))}async function sy(e,t){return I_(e,`POST`,`/v1/accounts:signInWithEmailLink`,N_(e,t))}var cy=class e extends ry{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return Jv(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,ay,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return oy(e,{email:this._email,oobCode:this._password});default:h_(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return Jv(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,iy,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return sy(e,{idToken:t,email:this._email,oobCode:this._password});default:h_(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function ly(e,t){return I_(e,`POST`,`/v1/accounts:signInWithIdp`,N_(e,t))}var uy=`http://localhost`,dy=class e extends ry{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):h_(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return ly(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,ly(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ly(e,t)}buildRequest(){let e={requestUri:uy,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ne(t)}return e}};async function fy(e,t){return P_(e,`POST`,`/v1/accounts:sendVerificationCode`,N_(e,t))}async function py(e,t){return I_(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,N_(e,t))}async function my(e,t){let n=await I_(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,N_(e,t));if(n.temporaryProof)throw B_(e,`account-exists-with-different-credential`,n);return n}var hy={USER_NOT_FOUND:`user-not-found`};async function gy(e,t){return I_(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,N_(e,{...t,operation:`REAUTH`}),hy)}var _y=class e extends ry{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return py(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return my(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return gy(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function vy(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function yy(e){let t=Pe(Fe(e)).link,n=t?Pe(Fe(t)).deep_link_id:null,r=Pe(Fe(e)).deep_link_id;return(r?Pe(Fe(r)).link:null)||r||n||t||e}var by=class e{constructor(e){let t=Pe(Fe(e)),n=t.apiKey??null,r=t.oobCode??null,i=vy(t.mode??null);Q(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=yy(t);try{return new e(n)}catch{return null}}},xy=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return cy._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=by.parseLink(t);return Q(n,`argument-error`),cy._fromEmailAndCode(e,n.code,n.tenantId)}};xy.PROVIDER_ID=`password`,xy.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,xy.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var Sy=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},Cy=class extends Sy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},wy=class e extends Cy{constructor(){super(`facebook.com`)}static credential(t){return dy._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};wy.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,wy.PROVIDER_ID=`facebook.com`;var Ty=class e extends Cy{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return dy._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};Ty.GOOGLE_SIGN_IN_METHOD=`google.com`,Ty.PROVIDER_ID=`google.com`;var Ey=class e extends Cy{constructor(){super(`github.com`)}static credential(t){return dy._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Ey.GITHUB_SIGN_IN_METHOD=`github.com`,Ey.PROVIDER_ID=`github.com`;var Dy=class e extends Cy{constructor(){super(`twitter.com`)}static credential(t,n){return dy._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};Dy.TWITTER_SIGN_IN_METHOD=`twitter.com`,Dy.PROVIDER_ID=`twitter.com`;async function Oy(e,t){return I_(e,`POST`,`/v1/accounts:signUp`,N_(e,t))}var ky=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await lv._fromIdTokenResponse(t,r,i),providerId:Ay(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:Ay(r),_tokenResponse:r,operationType:n})}};function Ay(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}async function jy(e){if(sn(e.app))return Promise.reject(v_(e));let t=Pv(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new ky({user:t.currentUser,providerId:null,operationType:`signIn`});let n=await Oy(t,{returnSecureToken:!0}),r=await ky._fromIdTokenResponse(t,`signIn`,n,!0);return await t._updateCurrentUser(r.user),r}var My=class e extends Ee{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function Ny(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?My._fromErrorAndOperation(e,n,t,r):n})}async function Py(e,t,n=!1){let r=await Z_(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ky._forOperation(e,`link`,r)}async function Fy(e,t,n=!1){let{auth:r}=e;if(sn(r.app))return Promise.reject(v_(r));let i=`reauthenticate`;try{let a=await Z_(e,Ny(r,i,t,e),n);Q(a.idToken,r,`internal-error`);let o=Y_(a.idToken);Q(o,r,`internal-error`);let{sub:s}=o;return Q(e.uid===s,r,`user-mismatch`),ky._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&h_(r,`user-mismatch`),e}}async function Iy(e,t,n=!1){if(sn(e.app))return Promise.reject(v_(e));let r=`signIn`,i=await Ny(e,r,t),a=await ky._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function Ly(e,t){return Iy(Pv(e),t)}async function Ry(e){let t=Pv(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function zy(e,t,n){return sn(e.app)?Promise.reject(v_(e)):Ly(O(e),xy.credential(t,n)).catch(async t=>{throw t.code===`auth/password-does-not-meet-requirements`&&Ry(e),t})}function By(e,t,n,r){return O(e).onIdTokenChanged(t,n,r)}function Vy(e,t,n){return O(e).beforeAuthStateChanged(t,n)}function Hy(e,t,n,r){return O(e).onAuthStateChanged(t,n,r)}function Uy(e){return O(e).signOut()}function Wy(e,t){return P_(e,`POST`,`/v2/accounts/mfaEnrollment:start`,N_(e,t))}function Gy(e,t){return P_(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,N_(e,t))}function Ky(e,t){return P_(e,`POST`,`/v2/accounts/mfaEnrollment:start`,N_(e,t))}function qy(e,t){return P_(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,N_(e,t))}var Jy=`__sak`,Yy=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jy,`1`),this.storage.removeItem(Jy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},Xy=1e3,Zy=10,Qy=class extends Yy{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);Ev()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Zy):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},Xy)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};Qy.type=`LOCAL`;var $y=Qy,eb=1e3;function tb(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function nb(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var rb=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=nb(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:tb(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=nb(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=nb(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=tb(n),i=setInterval(()=>{let e=tb(n);e!==r&&(t(e),r=e)},eb);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};rb.type=`COOKIE`;var ib=class extends Yy{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};ib.type=`SESSION`;var ab=ib;function ob(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var sb=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await ob(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};sb.receivers=[];function cb(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var lb=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=cb(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function ub(){return window}function db(e){ub().location.href=e}function fb(){return ub().WorkerGlobalScope!==void 0&&typeof ub().importScripts==`function`}async function pb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mb(){return navigator?.serviceWorker?.controller||null}function hb(){return fb()?self:null}var gb=`firebaseLocalStorageDb`,_b=1,vb=`firebaseLocalStorage`,yb=`fbase_key`,bb=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function xb(e,t){return e.transaction([vb],t?`readwrite`:`readonly`).objectStore(vb)}function Sb(){return new bb(indexedDB.deleteDatabase(gb)).toPromise()}function Cb(){let e=indexedDB.open(gb,_b);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(vb,{keyPath:yb})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(vb)?t(n):(n.close(),await Sb(),t(await Cb()))})})}async function wb(e,t,n){return new bb(xb(e,!0).put({[yb]:t,value:n})).toPromise()}async function Tb(e,t){let n=await new bb(xb(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function Eb(e,t){return new bb(xb(e,!0).delete(t)).toPromise()}var Db=800,Ob=3,kb=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await Cb(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>Ob)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sb._getInstance(hb()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await pb(),!this.activeServiceWorker)return;this.sender=new lb(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mb()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Cb();return await wb(e,Jy,`1`),await Eb(e,Jy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>wb(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>Tb(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Eb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new bb(xb(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Db)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};kb.type=`LOCAL`;var Ab=kb;function jb(e,t){return P_(e,`POST`,`/v2/accounts/mfaSignIn:start`,N_(e,t))}function Mb(e,t){return P_(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,N_(e,t))}function Nb(e,t){return P_(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,N_(e,t))}Vv(`rcb`),new D_(3e4,6e4);var Pb=`recaptcha`;async function Fb(e,t,n){if(!e._getRecaptchaConfig())try{await Yv(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return Q(t.type===`enroll`,e,`internal-error`),(await Jv(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===Gv?(Q(n?.type===Pb,e,`argument-error`),Wy(e,await Ib(e,t,n))):Wy(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{Q(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return Q(i,e,`missing-multi-factor-info`),(await Jv(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===Gv?(Q(n?.type===Pb,e,`argument-error`),jb(e,await Ib(e,t,n))):jb(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await Jv(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===Gv?(Q(n?.type===Pb,e,`argument-error`),fy(e,await Ib(e,t,n))):fy(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function Ib(e,t,n){Q(n.type===Pb,e,`argument-error`);let r=await n.verify();Q(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var Lb=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Pv(t)}verifyPhoneNumber(e,t){return Fb(this.auth,e,O(t))}static credential(e,t){return _y._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?_y._fromTokenResponse(t,n):null}};Lb.PROVIDER_ID=`phone`,Lb.PHONE_SIGN_IN_METHOD=`phone`;function Rb(e,t){return t?dv(t):(Q(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var zb=class extends ry{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return ly(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ly(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ly(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Bb(e){return Iy(e.auth,new zb(e),e.bypassAuthState)}function Vb(e){let{auth:t,user:n}=e;return Q(n,t,`internal-error`),Fy(n,new zb(e),e.bypassAuthState)}async function Hb(e){let{auth:t,user:n}=e;return Q(n,t,`internal-error`),Py(n,new zb(e),e.bypassAuthState)}var Ub=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return Bb;case`linkViaPopup`:case`linkViaRedirect`:return Hb;case`reauthViaPopup`:case`reauthViaRedirect`:return Vb;default:h_(this.auth,`internal-error`)}}resolve(e){x_(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){x_(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},Wb=new D_(2e3,1e4),Gb=class e extends Ub{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return Q(e,this.auth,`internal-error`),e}async onExecution(){x_(this.filter.length===1,`Popup operations only handle one event`);let e=cb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(g_(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(g_(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(g_(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,Wb.get())};e()}};Gb.currentPopupAction=null;var Kb=`pendingRedirect`,qb=new Map,Jb=class extends Ub{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=qb.get(this.auth._key());if(!e){try{let t=await Yb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}qb.set(this.auth._key(),e)}return this.bypassAuthState||qb.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Yb(e,t){let n=Qb(t),r=Zb(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function Xb(e,t){qb.set(e._key(),t)}function Zb(e){return dv(e._redirectPersistence)}function Qb(e){return mv(Kb,e.config.apiKey,e.name)}async function $b(e,t,n=!1){if(sn(e.app))return Promise.reject(v_(e));let r=Pv(e),i=await new Jb(r,Rb(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var ex=600*1e3,tx=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ix(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!rx(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(g_(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ex&&this.cachedEventUids.clear(),this.cachedEventUids.has(nx(e))}saveEventToCache(e){this.cachedEventUids.add(nx(e)),this.lastProcessedEventTime=Date.now()}};function nx(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function rx({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function ix(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return rx(e);default:return!1}}async function ax(e,t={}){return P_(e,`GET`,`/v1/projects`,t)}var ox=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sx=/^https?/;async function cx(e){if(e.config.emulator)return;let{authorizedDomains:t}=await ax(e);for(let e of t)try{if(lx(e))return}catch{}h_(e,`unauthorized-domain`)}function lx(e){let t=S_(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!sx.test(n))return!1;if(ox.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var ux=new D_(3e4,6e4);function dx(){let e=ub().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function fx(e){return new Promise((t,n)=>{function r(){dx(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dx(),n(g_(e,`network-request-failed`))},timeout:ux.get()})}if(ub().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ub().gapi?.load)r();else{let t=Vv(`iframefcb`);return ub()[t]=()=>{gapi.load?r():n(g_(e,`network-request-failed`))},Rv(`${Bv()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw px=null,e})}var px=null;function mx(e){return px||=fx(e),px}var hx=new D_(5e3,15e3),gx=`__/auth/iframe`,_x=`emulator/auth/iframe`,vx={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},yx=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function bx(e){let t=e.config;Q(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?O_(t,_x):`https://${e.config.authDomain}/${gx}`,r={apiKey:t.apiKey,appName:e.name,v:un},i=yx.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${Ne(r).slice(1)}`}async function xx(e){let t=await mx(e),n=ub().gapi;return Q(n,e,`internal-error`),t.open({where:document.body,url:bx(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vx,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=g_(e,`network-request-failed`),a=ub().setTimeout(()=>{r(i)},hx.get());function o(){ub().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var Sx={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},Cx=500,wx=600,Tx=`_blank`,Ex=`http://localhost`,Dx=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Ox(e,t,n,r=Cx,i=wx){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...Sx,width:r.toString(),height:i.toString(),top:a,left:o},l=E().toLowerCase();n&&(s=yv(l)?Tx:n),_v(l)&&(t||=Ex,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(Tv(l)&&s!==`_self`)return kx(t||``,s),new Dx(null);let d=window.open(t||``,s,u);Q(d,e,`popup-blocked`);try{d.focus()}catch{}return new Dx(d)}function kx(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Ax=`__/auth/handler`,jx=`emulator/auth/handler`,Mx=`fac`;async function Nx(e,t,n,r,i,a){Q(e.config.authDomain,e,`auth-domain-config-required`),Q(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:un,eventId:i};if(t instanceof Sy){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,Ae(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof Cy){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${Mx}=${encodeURIComponent(c)}`:``;return`${Px(e)}?${Ne(s).slice(1)}${l}`}function Px({config:e}){return e.emulator?O_(e,jx):`https://${e.authDomain}/${Ax}`}var Fx=`webStorageSupport`,Ix=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ab,this._completeRedirectFn=$b,this._overrideRedirectResult=Xb}async _openPopup(e,t,n,r){return x_(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),Ox(e,await Nx(e,t,n,S_(),r),cb())}async _openRedirect(e,t,n,r){return await this._originValidation(e),db(await Nx(e,t,n,S_(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(x_(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await xx(e),n=new tx(e);return t.register(`authEvent`,t=>(Q(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fx,{type:Fx},n=>{let r=n?.[0]?.[Fx];r!==void 0&&t(!!r),h_(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Dv()||vv()||wv()}},Lx=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return b_(`unexpected MultiFactorSessionType`)}}},Rx=class e extends Lx{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return Gy(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Mb(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},zx=class{constructor(){}static assertion(e){return Rx._fromCredential(e)}};zx.FACTOR_ID=`phone`;var Bx=class{static assertionForEnrollment(e,t){return Vx._fromSecret(e,t)}static assertionForSignIn(e,t){return Vx._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;Q(t.user?.auth!==void 0,`internal-error`);let n=await Ky(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return Hx._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};Bx.FACTOR_ID=`totp`;var Vx=class e extends Lx{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return Q(this.secret!==void 0,e,`argument-error`),qy(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){Q(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return Nb(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},Hx=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(Ux(e)||Ux(t))&&(n=!0),n&&(Ux(e)&&(e=this.auth.currentUser?.email||`unknownuser`),Ux(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function Ux(e){return e===void 0||e?.length===0}var Wx=`@firebase/auth`,Gx=`1.12.0`,Kx=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function qx(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function Jx(e){an(new Be(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;Q(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new Nv(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:Ov(e)});return Zv(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),an(new Be(`auth-internal`,e=>(e=>new Kx(e))(Pv(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),pn(Wx,Gx,qx(e)),pn(Wx,Gx,`esm2020`)}var Yx=ue(`authIdTokenMaxAge`)||300,Xx=null,Zx=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Yx)return;let i=n?.token;Xx!==i&&(Xx=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Qx(e=fn()){let t=on(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=Xv(e,{popupRedirectResolver:Ix,persistence:[Ab,$y,ab]}),r=ue(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=Zx(e.toString());Vy(n,t,()=>t(n.currentUser)),By(n,e=>t(e))}}let i=ce(`auth`);return i&&Qv(n,`http://${i}`),n}function $x(){return document.getElementsByTagName(`head`)?.[0]??document}Lv({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=g_(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,$x().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),Jx(`Browser`);var eS=dn({apiKey:`AIzaSyDQ23aUdEpDYGyGFahYOUR4pgSIA2VvGFM`,authDomain:`school-tracker-98dd9.firebaseapp.com`,projectId:`school-tracker-98dd9`,storageBucket:`school-tracker-98dd9.firebasestorage.app`,messagingSenderId:`117526132618`,appId:`1:117526132618:web:4d27295dd136461700fa73`,measurementId:`G-X2FBLKBS9G`}),tS=Qx(eS),nS=Rm(eS,{localCache:Zh({tabManager:tg()})}),rS=`school-admin-v1`;const iS=`@school.admin`,aS={P1_RECEIVED:{label:``,color:`bg-blue-100 text-blue-800`,nextAction:``,phase:1},P1_ACCOUNTING:{label:``,color:`bg-yellow-100 text-yellow-800`,nextAction:``,phase:1,requirePickupName:!0},P1_RETURNED:{label:` ()`,color:`bg-purple-100 text-purple-800`,nextAction:``,phase:1},P2_RECEIVED:{label:`/`,color:`bg-blue-100 text-blue-800`,nextAction:``,phase:2},P2_ACCOUNTING:{label:``,color:`bg-yellow-100 text-yellow-800`,nextAction:``,phase:2},COMPLETED:{label:``,color:`bg-gray-800 text-white`,nextAction:null,phase:3}};Object.entries(aS).reduce((e,[t,n])=>(e[n.label]=t,e),{});const oS={P1_ACCOUNTING:`P1_RECEIVED`,P1_RETURNED:`P1_ACCOUNTING`,P2_RECEIVED:`P1_RETURNED`,P2_ACCOUNTING:`P2_RECEIVED`,COMPLETED:`P2_ACCOUNTING`},sS=[],cS=[],lS=[],uS=e=>{if(!e)return``;let t=e.split(`-`);return t.length===3?`${parseInt(t[0])-1911}-${t[1]}/${t[2]}`:e},dS=e=>{if(!e)return`-`;try{let t=new Date(e);return isNaN(t.getTime())?`-`:`${t.getFullYear()-1911}/${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)} ${String(t.getHours()).padStart(2,`0`)}:${String(t.getMinutes()).padStart(2,`0`)}`}catch{return`-`}},fS=e=>!e||isNaN(e.getTime())?`-`:`${e.getFullYear()-1911}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`,pS=()=>{let e=[],t=new Date;for(let n=-12;n<=1;n++){let r=new Date(t.getFullYear(),t.getMonth()+n,1),i=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,`0`)}`,a=`${r.getFullYear()-1911}${r.getMonth()+1}`;e.push({value:i,label:a})}return e.reverse()},mS=e=>e?e.isAnonymous?``:e.email?e.email.split(`@`)[0]:``:``,hS=e=>{let t=[``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``],n=[],r=e=>e==null?`""`:`"${String(e).replace(/"/g,`""`)}"`,i=e=>{if(!e)return null;if(typeof e.toDate==`function`)return e.toDate();if(e?.seconds)return new Date(e.seconds*1e3);let t=new Date(e);return isNaN(t.getTime())?null:t};return e.forEach(e=>{let t=i(e.createdAt),a=t?fS(t):`-`,o=uS(e.applicationDate),s=aS[e.status]?.label||e.status,c=i(e.updatedAt),l=c?dS(c.toISOString()):`-`;if(e.items&&e.items.length>0)e.items.forEach(t=>{let i=[e.serialId,o,e.isUrgent?``:``,a,e.unit,e.applicant,e.subsidy,e.vendor||``,t.subject,t.quantity,t.measureUnit,t.unitPrice,t.subtotal,e.receiverName||``,s,l,e.globalRemark||``].map(r).join(`,`);n.push(i)});else{let t=[e.serialId,o,e.isUrgent?``:``,a,e.unit,e.applicant,e.subsidy,e.vendor||``,e.subject,`1`,``,e.totalPrice,e.totalPrice,e.receiverName||``,s,l,e.globalRemark||``].map(r).join(`,`);n.push(t)}}),``+[t.map(r).join(`,`),...n].join(`
`)},gS=(e,t)=>{let n=new Blob([e],{type:`text/csv;charset=utf-8;`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=t,i.click()},_S=e=>JSON.stringify(e,null,2),vS=(e,t)=>{let n=new Blob([e],{type:`application/json`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=t,i.click()},yS=(e,t)=>{let n=new Map(e.map(e=>[e.id,e])),r=[],i=new Date().toISOString();return t.forEach(e=>{let t={status:e.status,timestamp:i,note:` ()`,operator:``},a={...e,updatedAt:i,logs:[...e.logs||[],t]};n.has(e.id)?(r.push(a),n.delete(e.id)):r.push(a)}),n.forEach(e=>{r.push(e)}),r},bS={LOGIN:`LOGIN`,LOGOUT:`LOGOUT`,CREATE:`CREATE`,UPDATE:`UPDATE`,DELETE:`DELETE`,STATUS_CHANGE:`STATUS_CHANGE`,EXPORT:`EXPORT`,IMPORT:`IMPORT`,BATCH_DELETE:`BATCH_DELETE`};var xS=e=>e?e.isAnonymous?``:e.email?e.email.split(`@`)[0]:``:``;const SS=async(e,t,n,r,i)=>{if(!(!e||!t))try{let a=xS(n),o={action:r||`DEFAULT`,detail:i||``,user:a,uid:n?.uid||`guest`,timestamp:new Date().toISOString(),userAgent:navigator.userAgent};await Kh(jm(e,`artifacts`,t,`public`,`data`,`logs`),o),console.log(`[System Log] ${a} | ${r} | ${i}`)}catch(e){console.error(`:`,e)}},CS=()=>{let[e,t]=(0,_.useState)(null),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(``);return(0,_.useEffect)(()=>{let e=Hy(tS,e=>{t(e),r(!1)});return()=>e()},[]),{user:e,loading:n,error:i,login:async(e,t)=>{r(!0),a(``);try{await zy(tS,`${e}${iS}`,t),SS(nS,rS,tS.currentUser,bS.LOGIN,` ${e} `)}catch(e){console.error(`Login failed:`,e),a(``)}finally{r(!1)}},loginAnonymous:async()=>{r(!0),a(``);try{await jy(tS),SS(nS,rS,tS.currentUser,bS.LOGIN,``)}catch(e){console.error(`Anon login failed:`,e),a(``)}finally{r(!1)}},logout:async()=>{if(window.confirm(``)){let t=e;try{await Uy(tS),SS(nS,rS,t,bS.LOGOUT,``)}catch(e){console.error(e),alert(``)}}}}},wS=e=>{let[t,n]=(0,_.useState)(sS),[r,i]=(0,_.useState)(cS),[a,o]=(0,_.useState)(lS);return(0,_.useEffect)(()=>{if(!e)return;let t=Mm(nS,`artifacts`,rS,`public`,`data`,`school_settings`,`config1`),r=qh(t,e=>{if(e.exists()){let t=e.data();t.units&&n(t.units),t.projects&&i(t.projects),t.vendors&&o(t.vendors)}else Uh(t,{units:sS,projects:cS,vendors:lS}).catch(e=>console.error(`Init settings failed`,e))});return()=>r()},[e]),{unitOptions:t,projectOptions:r,vendorOptions:a}},TS=e=>{let[t,n]=(0,_.useState)([]),[r,i]=(0,_.useState)(!0);return(0,_.useEffect)(()=>{if(!e){n([]);return}i(!0);let t=qh(bh(jm(nS,`artifacts`,rS,`public`,`data`,`school_forms`),Th(`createdAt`,`desc`),Dh(300)),e=>{n(t=>{let n=e.docs.map(e=>({id:e.id,...e.data()})),r=new Map(t.map(e=>[e.id,e]));e.docChanges().forEach(e=>{e.type===`removed`&&r.delete(e.doc.id)}),n.forEach(e=>r.set(e.id,e));let i=Array.from(r.values());return i.sort((e,t)=>{let n=e.createdAt?.seconds||0,r=t.createdAt?.seconds||0;if(r!==n)return r-n;let i=e.serialId||``;return(t.serialId||``).localeCompare(i)}),i}),i(!1)});return()=>t()},[e]),{forms:t,setForms:n,loading:r}};var ES=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=o(((e,t)=>{t.exports=ES()}))(),DS=({onLogin:e,loading:t,error:n,isPreview:r})=>{let[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``);return(0,$.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-100 to-blue-50 p-4`,children:(0,$.jsxs)(`div`,{className:`bg-white p-8 rounded-2xl shadow-xl w-full max-w-md border border-white/50 backdrop-blur-sm`,children:[(0,$.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,$.jsx)(`div`,{className:`bg-blue-600 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-200`,children:(0,$.jsx)(Yg,{className:`text-white w-10 h-10`})}),(0,$.jsx)(`h1`,{className:`text-2xl font-black text-slate-800 tracking-tight`,children:``}),(0,$.jsx)(`p`,{className:`text-slate-500 mt-2 text-sm font-medium`,children:``})]}),(0,$.jsxs)(`form`,{onSubmit:t=>{t.preventDefault(),i&&o&&e(i,o)},className:`space-y-5`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1`,children:``}),(0,$.jsx)(`input`,{type:`text`,value:i,onChange:e=>a(e.target.value),className:`w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all outline-none font-medium text-slate-700 placeholder:text-slate-400`,placeholder:``,required:!0,autoFocus:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1`,children:``}),(0,$.jsx)(`input`,{type:`password`,value:o,onChange:e=>s(e.target.value),className:`w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all outline-none font-medium text-slate-700 placeholder:text-slate-400`,placeholder:``,required:!0})]}),n&&(0,$.jsxs)(`div`,{className:`p-3 rounded-lg bg-red-50 border border-red-100 flex items-center gap-2 text-red-600 text-sm font-bold animate-in slide-in-from-top-2`,children:[(0,$.jsx)(`span`,{className:`w-1.5 h-1.5 rounded-full bg-red-500`}),n]}),(0,$.jsxs)(`button`,{type:`submit`,disabled:t,className:`w-full bg-blue-600 text-white p-3.5 rounded-xl font-bold hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 transition-all disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg shadow-blue-200`,children:[t?(0,$.jsx)(Bg,{className:`animate-spin`,size:20}):(0,$.jsx)(Vg,{size:20}),t?`...`:``]})]}),(0,$.jsx)(`div`,{className:`mt-8 text-center`,children:(0,$.jsx)(`p`,{className:`text-xs text-slate-400 font-mono`,children:`Internal System v1.0`})})]})})},OS=({value:e,onChange:t,className:n=``})=>{let r=e?uS(e):``;return(0,$.jsxs)(`div`,{className:`relative w-full ${n}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between w-full px-3 border border-slate-300 rounded-lg bg-white h-12 cursor-pointer hover:border-blue-400 transition-colors group`,children:[(0,$.jsx)(`span`,{className:`text-base font-mono ${r?`text-slate-800`:`text-slate-400`}`,children:r||``}),(0,$.jsx)(xg,{size:20,className:`text-slate-400 group-hover:text-blue-500 transition-colors`})]}),(0,$.jsx)(`input`,{type:`date`,value:e||``,onChange:e=>t(e.target.value),className:`absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10 date-full-trigger`,style:{opacity:0}}),(0,$.jsx)(`style`,{children:`
                .date-full-trigger::-webkit-calendar-picker-indicator {
                    position: absolute; top: 0; left: 0; width: 100%; height: 100%; margin: 0; padding: 0; opacity: 0; cursor: pointer;
                }
              `})]})},kS=({options:e,value:t,onChange:n,placeholder:r,onCustomClick:i})=>{let[a,o]=(0,_.useState)(!1),[s,c]=(0,_.useState)(``),l=(0,_.useRef)(null);(0,_.useEffect)(()=>{let e=e=>{l.current&&!l.current.contains(e.target)&&o(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]);let u=e.filter(e=>e.toLowerCase().includes(s.toLowerCase()));return(0,$.jsxs)(`div`,{className:`relative`,ref:l,children:[(0,$.jsxs)(`div`,{onClick:()=>o(!a),className:`w-full px-3 border border-slate-300 rounded-lg bg-white flex justify-between items-center cursor-pointer hover:border-blue-400 transition-colors h-12`,children:[(0,$.jsx)(`span`,{className:`truncate text-base ${t?`text-slate-800`:`text-gray-400`}`,children:t||r}),(0,$.jsx)(Cg,{size:20,className:`text-gray-500 ml-2`})]}),a&&(0,$.jsxs)(`div`,{className:`absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-80 overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-100`,children:[(0,$.jsx)(`div`,{className:`p-2 border-b border-slate-100 bg-slate-50 sticky top-0`,children:(0,$.jsxs)(`div`,{className:`flex items-center bg-white border border-slate-200 rounded-md px-2 focus-within:ring-2 focus-within:ring-blue-100`,children:[(0,$.jsx)(Xg,{size:16,className:`text-gray-400 mr-2`}),(0,$.jsx)(`input`,{type:`text`,className:`w-full p-2 bg-transparent outline-none text-base placeholder-slate-400`,placeholder:` Enter ...`,value:s,onChange:e=>c(e.target.value),onKeyDown:e=>{e.key===`Enter`&&(e.preventDefault(),s.trim()&&(i(s),o(!1),c(``)))},autoFocus:!0})]})}),(0,$.jsx)(`div`,{className:`overflow-y-auto flex-1`,children:u.length>0?u.map((e,r)=>(0,$.jsx)(`div`,{className:`p-3 px-4 hover:bg-blue-50 cursor-pointer text-base transition-colors border-b border-slate-50 last:border-0 ${t===e?`bg-blue-50 text-blue-600 font-medium`:`text-slate-700`}`,onClick:()=>{n(e),o(!1),c(``)},children:e},r)):(0,$.jsx)(`div`,{className:`p-4 text-gray-400 text-sm text-center italic`,children:` Enter `})}),(0,$.jsxs)(`div`,{className:`p-3 border-t border-slate-100 bg-slate-50 text-blue-600 font-bold cursor-pointer hover:bg-blue-100 text-base flex items-center justify-center gap-2 transition-colors`,onClick:()=>{i(s),o(!1),c(``)},children:[(0,$.jsx)(Gg,{size:16}),` ...`]})]})]})},AS=({isOpen:e,onClose:t,initialData:n,onSave:r,db:i,appId:a,openAlert:o,openConfirm:s})=>{let[c,l]=(0,_.useState)(`units`),[u,d]=(0,_.useState)({units:[],projects:[],vendors:[]}),[f,p]=(0,_.useState)(``),[m,h]=(0,_.useState)(!1),[g,v]=(0,_.useState)(null),[y,b]=(0,_.useState)(``);if((0,_.useEffect)(()=>{e&&n&&d(n)},[e,n]),!e)return null;let x=[{id:`units`,label:``,icon:(0,$.jsx)(zg,{size:18})},{id:`projects`,label:``,icon:(0,$.jsx)(yg,{size:18})},{id:`vendors`,label:``,icon:(0,$.jsx)(o_,{size:18})}],ee=()=>{if(f.trim()){if(u[c].includes(f.trim())){o(``,``,`warning`);return}d(e=>({...e,[c]:[...e[c],f.trim()]})),p(``)}},te=e=>{d(t=>({...t,[c]:t[c].filter(t=>t!==e)}))},S=(e,t)=>{v(e),b(t)},ne=()=>{v(null),b(``)},re=e=>{if(!y.trim())return;let t=u[c][e];if(y.trim()===t){ne();return}if(u[c].filter((t,n)=>n!==e).includes(y.trim())){o(``,``,`warning`);return}d(t=>{let n=[...t[c]];return n[e]=y.trim(),{...t,[c]:n}}),ne()};return(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-lg flex flex-col max-h-[90vh]`,children:[(0,$.jsxs)(`div`,{className:`p-4 md:p-6 border-b flex justify-between items-center bg-slate-50 rounded-t-xl shrink-0`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`h3`,{className:`text-lg md:text-xl font-bold text-slate-800 flex items-center gap-2`,children:[(0,$.jsx)(Zg,{className:`text-slate-600`}),` `]}),(0,$.jsx)(`p`,{className:`text-xs md:text-sm text-slate-500 mt-1`,children:``})]}),(0,$.jsx)(`button`,{onClick:t,className:`p-2 hover:bg-slate-200 rounded-full transition-colors`,children:(0,$.jsx)(c_,{size:24,className:`text-slate-500`})})]}),(0,$.jsx)(`div`,{className:`flex border-b border-slate-200 overflow-x-auto shrink-0 no-scrollbar`,children:x.map(e=>(0,$.jsxs)(`button`,{onClick:()=>{l(e.id),ne()},className:`flex items-center gap-2 px-6 py-4 text-sm font-bold whitespace-nowrap border-b-2 transition-colors flex-1 justify-center
                ${c===e.id?`border-blue-600 text-blue-600 bg-blue-50/50`:`border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-50`}
              `,children:[e.icon,` `,e.label,(0,$.jsx)(`span`,{className:`ml-1 bg-slate-200 text-slate-600 px-1.5 py-0.5 rounded-full text-xs`,children:u[e.id]?.length||0})]},e.id))}),(0,$.jsxs)(`div`,{className:`flex-1 overflow-hidden flex flex-col p-4 md:p-6`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-2 mb-4 shrink-0`,children:[(0,$.jsx)(`input`,{type:`text`,value:f,onChange:e=>p(e.target.value),onKeyDown:e=>e.key===`Enter`&&ee(),placeholder:`${x.find(e=>e.id===c)?.label}...`,className:`flex-1 p-3 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500`}),(0,$.jsxs)(`button`,{onClick:ee,disabled:!f.trim(),className:`bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-lg font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-sm active:transform active:scale-95 transition-all`,children:[(0,$.jsx)(Gg,{size:20}),` `]})]}),(0,$.jsx)(`div`,{className:`flex-1 overflow-y-auto border border-slate-200 rounded-xl bg-slate-50 p-2 space-y-2`,children:u[c]?.length===0?(0,$.jsxs)(`div`,{className:`h-full flex flex-col items-center justify-center text-slate-400 gap-2 min-h-[200px]`,children:[(0,$.jsx)(Tg,{size:32,className:`opacity-20`}),(0,$.jsx)(`p`,{children:``})]}):u[c]?.map((e,t)=>(0,$.jsx)(`div`,{className:`flex justify-between items-center p-3 bg-white rounded-lg border shadow-sm transition-all ${g===t?`border-blue-500 ring-1 ring-blue-200`:`border-slate-200 hover:border-blue-300`}`,children:g===t?(0,$.jsxs)(`div`,{className:`flex flex-1 gap-2 items-center`,children:[(0,$.jsx)(`input`,{type:`text`,value:y,onChange:e=>b(e.target.value),className:`flex-1 p-1.5 border border-slate-300 rounded bg-white outline-none focus:border-blue-500`,autoFocus:!0,onKeyDown:e=>{e.key===`Enter`&&re(t),e.key===`Escape`&&ne()}}),(0,$.jsx)(`button`,{onClick:()=>re(t),className:`p-1.5 bg-blue-100 text-blue-600 rounded hover:bg-blue-200`,children:(0,$.jsx)(Sg,{size:18})}),(0,$.jsx)(`button`,{onClick:ne,className:`p-1.5 bg-slate-100 text-slate-500 rounded hover:bg-slate-200`,children:(0,$.jsx)(c_,{size:18})})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`span`,{className:`font-medium text-slate-700 break-all pr-2 flex-1`,children:e}),(0,$.jsxs)(`div`,{className:`flex gap-1 shrink-0`,children:[(0,$.jsx)(`button`,{onClick:()=>S(t,e),className:`p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors`,title:``,children:(0,$.jsx)(Wg,{size:18})}),(0,$.jsx)(`button`,{onClick:()=>te(e),className:`p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors`,title:``,children:(0,$.jsx)(e_,{size:18})})]})]})},t))})]}),(0,$.jsxs)(`div`,{className:`p-4 border-t bg-slate-50 rounded-b-xl flex justify-end gap-3 shrink-0`,children:[(0,$.jsx)(`button`,{onClick:t,className:`px-6 py-2.5 text-slate-500 font-bold hover:bg-slate-200 rounded-lg transition-colors`,children:``}),(0,$.jsxs)(`button`,{onClick:async()=>{h(!0);try{await Wh(Mm(i,`artifacts`,a,`public`,`data`,`school_settings`,`config1`),u),r(u),o(``,``),t()}catch(e){console.error(`Save settings error:`,e),o(``,``,`danger`)}finally{h(!1)}},disabled:m,className:`px-6 py-2.5 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-md flex items-center gap-2 disabled:opacity-50 transition-colors`,children:[(0,$.jsx)(Jg,{size:18}),` `,m?`...`:``]})]})]})})},jS=({isOpen:e,onClose:t,forms:n,onDeleteMonth:r,onExport:i,statusSteps:a})=>{if(!e)return null;let o=n.filter(e=>a?.[e.status]?.phase===3),s={};o.forEach(e=>{let t;t=e.applicationDate?new Date(e.applicationDate):e.createdAt?.toDate?e.createdAt.toDate():new Date,isNaN(t.getTime())&&(t=new Date);let n=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,`0`)}`;s[n]||(s[n]=[]),s[n].push(e)});let c=Object.keys(s).sort((e,t)=>t.localeCompare(e));return(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-2xl flex flex-col max-h-[85vh]`,children:[(0,$.jsxs)(`div`,{className:`p-4 md:p-6 border-b flex justify-between items-center bg-slate-50 rounded-t-xl`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`h3`,{className:`text-lg md:text-xl font-bold text-slate-800 flex items-center gap-2`,children:[(0,$.jsx)(Lg,{className:`text-indigo-600`}),` `]}),(0,$.jsx)(`p`,{className:`text-xs md:text-sm text-slate-500 mt-1`,children:``})]}),(0,$.jsx)(`button`,{onClick:t,className:`p-2 hover:bg-slate-200 rounded-full transition-colors`,children:(0,$.jsx)(c_,{size:24,className:`text-slate-500`})})]}),(0,$.jsxs)(`div`,{className:`flex-1 overflow-y-auto p-4 md:p-6 space-y-4`,children:[(0,$.jsxs)(`div`,{className:`bg-blue-50 p-4 rounded-lg border border-blue-100 flex items-start gap-3`,children:[(0,$.jsx)(t_,{className:`text-blue-600 shrink-0 mt-0.5`,size:20}),(0,$.jsxs)(`div`,{className:`text-sm text-blue-800`,children:[(0,$.jsx)(`strong`,{children:``}),` `,(0,$.jsx)(`br`,{}),(0,$.jsx)(`span`,{className:`text-xs text-blue-600 opacity-80`,children:`()`})]})]}),c.length===0?(0,$.jsx)(`div`,{className:`text-center py-12 text-slate-400`,children:``}):c.map(e=>(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-300 transition-colors shadow-sm gap-3 sm:gap-0`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,$.jsx)(`div`,{className:`bg-slate-100 p-3 rounded-lg font-mono font-bold text-slate-600`,children:e}),(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`font-bold text-slate-800`,children:[s[e].length,` `]}),(0,$.jsx)(`div`,{className:`text-xs text-slate-400`,children:``})]})]}),(0,$.jsxs)(`button`,{onClick:()=>r(e,s[e]),className:`flex items-center justify-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg border border-slate-200 sm:border-transparent hover:border-red-100 transition-all text-sm font-bold w-full sm:w-auto`,title:``,children:[(0,$.jsx)(e_,{size:18}),` `]})]},e))]}),(0,$.jsxs)(`div`,{className:`p-4 border-t bg-slate-50 rounded-b-xl flex flex-col-reverse sm:flex-row justify-between items-center gap-3 sm:gap-0`,children:[(0,$.jsxs)(`button`,{onClick:i,className:`w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-white border border-slate-300 text-slate-700 font-bold rounded-lg hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-200 transition-all shadow-sm order-2 sm:order-1`,children:[(0,$.jsx)(Mg,{size:18}),` `]}),(0,$.jsx)(`button`,{onClick:t,className:`w-full sm:w-auto px-6 py-2 bg-slate-800 text-white font-bold rounded-lg hover:bg-slate-900 transition-colors shadow-md order-1 sm:order-2`,children:``})]})]})})},MS=({isOpen:e,onClose:t,forms:n,onDeleteMonth:r})=>{if(!e)return null;let i=(0,_.useMemo)(()=>{if(!n)return[];let e=n.filter(e=>{if(!aS)return!1;let t=aS[e.status];return t?t.phase!==3:e.status!==`COMPLETED`}),t={};return e.forEach(e=>{let n=e.createdAt?.toDate?e.createdAt.toDate():new Date,r=`${n.getFullYear()-1911}${String(n.getMonth()+1).padStart(2,`0`)}`;t[r]||(t[r]={key:r,count:0,items:[]}),t[r].count++,t[r].items.push(e)}),Object.values(t).sort((e,t)=>t.key.localeCompare(e.key))},[n]);return(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1200] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col border-4 border-red-500 overflow-hidden`,children:[(0,$.jsxs)(`div`,{className:`p-6 border-b flex justify-between items-center bg-red-50 shrink-0 z-10 relative`,children:[(0,$.jsxs)(`h3`,{className:`text-xl font-black text-red-700 flex items-center gap-2`,children:[(0,$.jsx)(t_,{className:`w-6 h-6`}),` ()`]}),(0,$.jsx)(`button`,{onClick:t,children:(0,$.jsx)(c_,{className:`w-6 h-6 text-slate-400 hover:text-slate-600`})})]}),(0,$.jsx)(`div`,{className:`p-6 pb-0 shrink-0 bg-white z-10 relative`,children:(0,$.jsxs)(`div`,{className:`bg-red-50 p-4 rounded-lg text-sm text-red-800 border border-red-200 shadow-sm`,children:[(0,$.jsxs)(`p`,{className:`font-bold mb-2 flex items-center gap-2`,children:[(0,$.jsx)(t_,{size:16}),``]}),(0,$.jsxs)(`ul`,{className:`list-disc list-inside space-y-1 ml-1`,children:[(0,$.jsxs)(`li`,{children:[``,(0,$.jsx)(`b`,{children:``}),``]}),(0,$.jsxs)(`li`,{children:[``,(0,$.jsx)(`b`,{children:``}),``]})]})]})}),(0,$.jsx)(`div`,{className:`p-6 overflow-y-auto flex-1 bg-white`,children:i.length===0?(0,$.jsx)(`div`,{className:`text-center text-slate-400 py-10`,children:``}):(0,$.jsxs)(`table`,{className:`w-full text-left border-collapse`,children:[(0,$.jsx)(`thead`,{className:`sticky top-0 bg-white z-0`,children:(0,$.jsxs)(`tr`,{className:`border-b border-slate-200 text-slate-500 text-sm`,children:[(0,$.jsx)(`th`,{className:`py-3 px-4`,children:``}),(0,$.jsx)(`th`,{className:`py-3 px-4`,children:` ()`}),(0,$.jsx)(`th`,{className:`py-3 px-4 text-right`,children:``})]})}),(0,$.jsx)(`tbody`,{children:i.map(e=>(0,$.jsxs)(`tr`,{className:`border-b border-slate-100 hover:bg-slate-50`,children:[(0,$.jsx)(`td`,{className:`py-3 px-4 font-bold text-slate-700`,children:e.key}),(0,$.jsxs)(`td`,{className:`py-3 px-4 text-slate-600`,children:[e.count,` `]}),(0,$.jsx)(`td`,{className:`py-3 px-4 text-right`,children:(0,$.jsxs)(`button`,{onClick:()=>r(e.key,e.items),className:`inline-flex items-center gap-1.5 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-bold shadow-sm`,children:[(0,$.jsx)(e_,{size:14}),` `]})})]},e.key))})]})}),(0,$.jsx)(`div`,{className:`p-4 border-t bg-slate-50 flex justify-end shrink-0`,children:(0,$.jsx)(`button`,{onClick:t,className:`px-6 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg`,children:``})})]})})},NS=({isOpen:e,onClose:t,onConfirm:n,mode:r,setMode:i,startDate:a,setStartDate:o,endDate:s,setEndDate:c})=>e?(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-sm p-6`,children:[(0,$.jsxs)(`div`,{className:`text-center mb-4`,children:[(0,$.jsx)(`h3`,{className:`text-xl font-bold text-slate-800`,children:``}),(0,$.jsx)(`p`,{className:`text-slate-500 text-sm mt-1`,children:``})]}),(0,$.jsxs)(`div`,{className:`space-y-4 mb-6`,children:[(0,$.jsxs)(`label`,{className:`flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors`,children:[(0,$.jsx)(`input`,{type:`radio`,name:`exportMode`,value:`all`,checked:r===`all`,onChange:()=>i(`all`),className:`w-5 h-5 text-blue-600`}),(0,$.jsx)(`span`,{className:`font-bold text-slate-700 text-lg`,children:``})]}),(0,$.jsxs)(`label`,{className:`flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors`,children:[(0,$.jsx)(`input`,{type:`radio`,name:`exportMode`,value:`completed`,checked:r===`completed`,onChange:()=>i(`completed`),className:`w-5 h-5 text-blue-600`}),(0,$.jsx)(`span`,{className:`font-bold text-slate-700 text-lg`,children:``})]}),(0,$.jsxs)(`label`,{className:`flex flex-col gap-2 p-3 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`input`,{type:`radio`,name:`exportMode`,value:`date`,checked:r===`date`,onChange:()=>i(`date`),className:`w-5 h-5 text-blue-600`}),(0,$.jsx)(`span`,{className:`font-bold text-slate-700 text-lg`,children:``})]}),r===`date`&&(0,$.jsxs)(`div`,{className:`mt-2 space-y-2`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`text-sm text-slate-500 w-8`,children:``}),(0,$.jsx)(OS,{value:a,onChange:o,className:`flex-1`})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`text-sm text-slate-500 w-8`,children:``}),(0,$.jsx)(OS,{value:s,onChange:c,className:`flex-1`})]})]})]})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 justify-center`,children:[(0,$.jsx)(`button`,{onClick:t,className:`px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium`,children:``}),(0,$.jsxs)(`button`,{onClick:n,className:`px-6 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 flex items-center gap-2`,children:[(0,$.jsx)(Mg,{size:20}),``]})]})]})}):null,PS=({modal:e,onClose:t,onConfirm:n})=>{if(!e||!e.isOpen)return null;let[r,i]=(0,_.useState)(``),[a,o]=(0,_.useState)(``),[s,c]=(0,_.useState)(``),[l,u]=(0,_.useState)(!1),d=(0,_.useRef)(null),f=(0,_.useRef)(null);(0,_.useEffect)(()=>{e.isOpen&&(i(``),o(``),c(``),u(!1),setTimeout(()=>{f.current?f.current.focus():d.current&&d.current.focus()},50))},[e.isOpen]);let p=async()=>{if(e.type===`action`){if(e.noteRequired&&!r.trim()){c(``);return}if(e.showPickupInput&&!a.trim()){c(``);return}}if(n){u(!0);try{await n({note:r,pickupName:a})}catch(e){console.error(`[GlobalModal] Error:`,e)}finally{u(!1),t()}}else t()},m=e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),p())},h=e.alertType===`danger`;return(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1300] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,onKeyDown:e=>{e.key===`Escape`&&t()},children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-sm p-6 animate-in zoom-in-95 duration-200 border-t-4 border-blue-600`,style:{borderColor:h?`#ef4444`:`#2563eb`},children:[(0,$.jsxs)(`div`,{className:`text-center mb-4`,children:[(0,$.jsx)(`h3`,{className:`text-xl font-bold ${h?`text-red-600`:`text-slate-800`}`,children:String(e.title)}),(0,$.jsx)(`p`,{className:`text-slate-600 mt-2 text-sm break-all whitespace-pre-wrap`,children:String(e.message)})]}),e.type===`action`&&(0,$.jsxs)(`div`,{className:`space-y-3 mb-4`,children:[e.showPickupInput&&(0,$.jsx)(`input`,{ref:f,type:`text`,className:`w-full border rounded p-2 text-sm`,placeholder:`* `,value:a,onChange:e=>o(e.target.value),onKeyDown:m}),e.showNoteInput&&(0,$.jsx)(`textarea`,{ref:e.showPickupInput?null:f,className:`w-full border rounded p-2 text-sm`,rows:`2`,placeholder:e.noteRequired?`*  ()`:` ()`,value:r,onChange:e=>i(e.target.value),onKeyDown:m}),s&&(0,$.jsx)(`p`,{className:`text-red-500 text-xs font-bold text-center`,children:String(s)})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 justify-center`,children:[(e.type===`confirm`||e.type===`action`)&&(0,$.jsx)(`button`,{onClick:t,className:`px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg`,disabled:l,children:``}),(0,$.jsxs)(`button`,{ref:d,onClick:p,className:`px-6 py-2 text-white rounded-lg font-medium flex items-center gap-2 ${h?`bg-red-600 hover:bg-red-700`:`bg-blue-600 hover:bg-blue-700`} disabled:opacity-70`,disabled:l,children:[l&&(0,$.jsx)(Bg,{className:`animate-spin`,size:16}),h&&!e.onConfirm?``:``]})]})]})})},FS=e=>{if(!e)return``;let t=e.split(`-`);return t.length===3?`${parseInt(t[0])-1911}-${t[1]}/${t[2]}`:e},IS=({form:e,expandedId:t,setExpandedId:n,onAction:r,selected:i,onSelect:a,statusSteps:o,canRevert:s})=>{let c=t===e.id,l=o?.[e.status]||{},u=e=>e===1?`bg-blue-100 text-blue-700 border-blue-200`:e===2?`bg-orange-100 text-orange-700 border-orange-200`:e===3?`bg-slate-900 text-white border-slate-700`:`bg-slate-100 text-slate-700 border-slate-200`,d=e=>e===1?(0,$.jsx)(Og,{size:16}):e===2?(0,$.jsx)(Ag,{size:16}):e===3?(0,$.jsx)(Dg,{size:16}):(0,$.jsx)(Tg,{size:16}),f=e=>{if(!e)return null;if(typeof e.toDate==`function`)return e.toDate();if(e?.seconds)return new Date(e.seconds*1e3);let t=new Date(e);return isNaN(t.getTime())?null:t},p=e=>{let t=f(e);if(!t)return`-`;try{return`${t.getFullYear()-1911}/${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)} ${String(t.getHours()).padStart(2,`0`)}:${String(t.getMinutes()).padStart(2,`0`)}`}catch{return`-`}},m=e=>e?.includes(``)?`text-red-600 font-bold`:e?.includes(``)?`text-purple-600 font-bold`:`text-slate-900 font-medium`;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`tr`,{className:`
            border-b border-slate-100 transition-colors 
            ${c?`bg-blue-50/30`:``} 
            ${e.isUrgent?`bg-red-50 hover:bg-red-100`:`hover:bg-blue-50/50`}
        `,children:[(0,$.jsx)(`td`,{className:`p-4 text-center w-12`,children:(0,$.jsx)(`input`,{type:`checkbox`,checked:i,onChange:t=>a(e.id,t.target.checked),className:`w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer`})}),(0,$.jsxs)(`td`,{className:`p-4 align-top cursor-pointer`,onClick:()=>n(c?null:e.id),children:[(0,$.jsx)(`div`,{className:`font-mono font-bold text-slate-700 text-base`,children:e.serialId}),(0,$.jsx)(`div`,{className:`text-xs text-slate-500 mt-1`,children:e.unit}),(0,$.jsx)(`div`,{className:`text-xs text-slate-400`,children:e.applicant}),e.isUrgent&&(0,$.jsx)(`span`,{className:`inline-block mt-2 px-2 py-0.5 bg-red-100 text-red-600 text-xs font-bold rounded border border-red-200 animate-pulse`,children:``})]}),(0,$.jsxs)(`td`,{className:`p-4 align-top cursor-pointer`,onClick:()=>n(c?null:e.id),children:[(0,$.jsx)(`div`,{className:`font-bold text-slate-800 text-lg mb-1 line-clamp-2`,children:e.subject}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-slate-500 flex-wrap`,children:[(0,$.jsxs)(`span`,{className:`bg-slate-100 px-2 py-0.5 rounded text-xs`,children:[`: $`,parseInt(e.totalPrice||0).toLocaleString()]}),e.subsidy&&(0,$.jsx)(`span`,{className:`bg-green-50 text-green-700 px-2 py-0.5 rounded text-xs border border-green-100`,children:e.subsidy})]}),e.vendor&&(0,$.jsxs)(`div`,{className:`text-xs text-slate-400 mt-1`,children:[`: `,e.vendor]})]}),(0,$.jsx)(`td`,{className:`p-4 align-top cursor-pointer`,onClick:()=>n(c?null:e.id),children:(0,$.jsxs)(`div`,{className:`flex flex-col gap-1.5`,children:[(0,$.jsxs)(`span`,{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-bold border w-fit ${u(l.phase)}`,children:[d(l.phase),l.label]}),(0,$.jsx)(`div`,{className:`text-xs text-slate-400 font-mono pl-1`,children:p(e.updatedAt)}),e.receiverName&&(0,$.jsxs)(`div`,{className:`text-xs text-indigo-600 font-bold bg-indigo-50 px-2 py-0.5 rounded w-fit border border-indigo-100`,children:[`: `,e.receiverName]})]})}),(0,$.jsx)(`td`,{className:`p-4 align-top`,children:(0,$.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[l.phase<3&&(0,$.jsxs)(`button`,{onClick:t=>{t.stopPropagation(),r(`advance`,e)},className:`flex items-center justify-center gap-1 px-3 py-1.5 bg-emerald-600 text-white rounded hover:bg-emerald-700 text-xs font-bold shadow-sm transition-all whitespace-nowrap`,children:[l.nextAction,` `,(0,$.jsx)(_g,{size:14})]}),s&&(0,$.jsxs)(`button`,{onClick:t=>{t.stopPropagation(),r(`revert`,e)},className:`flex items-center justify-center gap-1 px-3 py-1.5 bg-red-50 border border-red-200 text-red-600 rounded hover:bg-red-100 text-xs font-bold transition-all whitespace-nowrap`,children:[(0,$.jsx)(qg,{size:14}),` `]})]})}),(0,$.jsx)(`td`,{className:`p-4 text-center align-top`,children:(0,$.jsx)(`div`,{className:`flex flex-col gap-2 items-center`,children:(0,$.jsx)(`button`,{onClick:t=>{t.stopPropagation(),r(`delete`,e)},className:`p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded transition-colors`,title:``,children:(0,$.jsx)(kg,{size:18})})})})]}),c&&(0,$.jsx)(`tr`,{className:`border-b border-slate-200 ${e.isUrgent?`bg-red-50`:`bg-slate-50/50`}`,children:(0,$.jsx)(`td`,{colSpan:`6`,className:`p-0`,children:(0,$.jsxs)(`div`,{className:`flex flex-col md:flex-row`,children:[(0,$.jsxs)(`div`,{className:`flex-1 p-6 relative`,children:[(0,$.jsx)(`button`,{onClick:t=>{t.stopPropagation(),r(`edit`,e)},className:`absolute top-4 right-4 p-2 bg-white text-blue-600 border border-blue-200 rounded-full hover:bg-blue-50 hover:shadow-md transition-all z-10`,title:``,children:(0,$.jsx)(Wg,{size:18})}),(0,$.jsxs)(`h4`,{className:`font-bold text-slate-700 text-xl mb-6 flex items-center gap-2 border-b border-slate-200 pb-3`,children:[(0,$.jsx)(Fg,{size:24,className:`text-blue-500`}),``,(0,$.jsx)(`span`,{className:`text-base font-normal text-slate-500 bg-white border border-slate-200 px-2 py-0.5 rounded font-mono ml-2`,children:e.serialId})]}),(0,$.jsxs)(`div`,{className:`space-y-4 mb-6`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`span`,{className:`w-24 text-sm font-bold text-slate-500 text-right uppercase tracking-wider`,children:``}),(0,$.jsx)(`span`,{className:`font-mono text-slate-800 text-base font-medium bg-white px-2 py-1 rounded border border-slate-200`,children:e.applicationDate?FS(e.applicationDate):`-`})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`span`,{className:`w-24 text-sm font-bold text-slate-500 text-right uppercase tracking-wider`,children:``}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 text-base`,children:[(0,$.jsx)(bg,{size:18,className:`text-slate-400`}),(0,$.jsx)(`span`,{className:`text-slate-900 font-medium`,children:e.unit}),(0,$.jsx)(`span`,{className:`text-slate-300`,children:`|`}),(0,$.jsx)(a_,{size:18,className:`text-slate-400`}),(0,$.jsx)(`span`,{className:`text-slate-900 font-medium`,children:e.applicant})]})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`span`,{className:`w-24 text-sm font-bold text-slate-500 text-right uppercase tracking-wider`,children:``}),(0,$.jsxs)(`span`,{className:`bg-green-50 text-green-700 px-3 py-1 rounded-full text-base font-bold border border-green-100 flex items-center gap-1.5`,children:[(0,$.jsx)(yg,{size:16}),e.subsidy||``]})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`span`,{className:`w-24 text-sm font-bold text-slate-500 text-right uppercase tracking-wider`,children:``}),(0,$.jsxs)(`span`,{className:`bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-base font-bold border border-blue-100 flex items-center gap-1.5`,children:[(0,$.jsx)(n_,{size:16}),e.vendor||`-`]})]}),e.receiverName&&(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`span`,{className:`w-24 text-sm font-bold text-slate-500 text-right uppercase tracking-wider`,children:``}),(0,$.jsxs)(`span`,{className:`bg-purple-50 text-purple-700 px-3 py-1 rounded-full text-base font-bold border border-purple-100 flex items-center gap-1.5`,children:[(0,$.jsx)($g,{size:16}),e.receiverName]})]})]}),(0,$.jsx)(`div`,{className:`bg-white rounded border border-slate-200 overflow-hidden mb-4 shadow-sm`,children:(0,$.jsxs)(`table`,{className:`w-full text-base`,children:[(0,$.jsx)(`thead`,{className:`bg-slate-50 text-slate-600 font-bold border-b border-slate-200`,children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{className:`p-3 text-left`,children:``}),(0,$.jsx)(`th`,{className:`p-3 text-right`,children:``}),(0,$.jsx)(`th`,{className:`p-3 text-center`,children:``}),(0,$.jsx)(`th`,{className:`p-3 text-right`,children:``})]})}),(0,$.jsxs)(`tbody`,{className:`divide-y divide-slate-100`,children:[(e.items||[]).map((e,t)=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`p-3 text-slate-800 font-medium`,children:e.subject}),(0,$.jsxs)(`td`,{className:`p-3 text-right font-mono text-slate-600`,children:[`$`,parseInt(e.unitPrice).toLocaleString()]}),(0,$.jsxs)(`td`,{className:`p-3 text-center text-slate-700`,children:[e.quantity,` `,e.measureUnit]}),(0,$.jsxs)(`td`,{className:`p-3 text-right font-bold text-slate-900`,children:[`$`,parseInt(e.subtotal).toLocaleString()]})]},t)),(0,$.jsxs)(`tr`,{className:`bg-slate-50/50 font-bold border-t border-slate-200`,children:[(0,$.jsx)(`td`,{colSpan:`3`,className:`p-3 text-right text-slate-600`,children:``}),(0,$.jsxs)(`td`,{className:`p-3 text-right text-blue-700 text-xl`,children:[`$`,parseInt(e.totalPrice||0).toLocaleString()]})]})]})]})}),e.globalRemark&&(0,$.jsxs)(`div`,{className:`bg-yellow-50 p-4 rounded border border-yellow-200 text-yellow-900 text-base flex gap-3 items-start`,children:[(0,$.jsx)(`strong`,{className:`shrink-0 bg-yellow-100 px-2 py-0.5 rounded text-sm text-yellow-800`,children:``}),(0,$.jsx)(`span`,{className:`leading-relaxed`,children:e.globalRemark})]})]}),(0,$.jsxs)(`div`,{className:`w-full md:w-1/3 border-l border-slate-200 p-6 ${e.isUrgent?`bg-red-50`:`bg-slate-50`}`,children:[(0,$.jsxs)(`h4`,{className:`font-bold text-slate-600 border-b border-slate-200 pb-3 mb-5 flex items-center gap-2 text-lg`,children:[(0,$.jsx)(Ag,{size:20}),` `]}),(0,$.jsxs)(`div`,{className:`space-y-8 relative pl-2`,children:[(0,$.jsx)(`div`,{className:`absolute top-3 bottom-3 left-[7px] w-0.5 bg-slate-200`}),(e.logs||[]).slice().reverse().map((t,n)=>(0,$.jsxs)(`div`,{className:`relative pl-6`,children:[(0,$.jsx)(`div`,{className:`absolute left-0 top-1.5 w-3.5 h-3.5 rounded-full border-2 ring-4 ${e.isUrgent?`ring-red-100`:`ring-slate-50`} ${n===0?`bg-blue-500 border-blue-500`:`bg-white border-slate-300`}`}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-1.5`,children:[(0,$.jsx)(`span`,{className:`text-lg font-bold font-mono tracking-tight ${n===0?`text-slate-900`:`text-slate-500`}`,children:p(t.timestamp)}),(0,$.jsx)(`div`,{className:`text-base ${m(t.note||t.status)}`,children:t.note||t.status}),(0,$.jsxs)(`div`,{className:`text-sm text-slate-500 flex items-center gap-1 mt-0.5`,children:[(0,$.jsx)(a_,{size:14}),t.operator]})]})]},n))]})]})]})})})]})},LS=({form:e,expandedId:t,setExpandedId:n,onAction:r,statusSteps:i,selected:a,onSelect:o,canRevert:s})=>{let c=t===e.id,l=i?.[e.status]||{},u=e=>e===1?`bg-blue-100 text-blue-700 border-blue-200`:e===2?`bg-orange-100 text-orange-700 border-orange-200`:e===3?`bg-slate-900 text-white border-slate-700`:`bg-slate-100 text-slate-700 border-slate-200`,d=e=>e===1?(0,$.jsx)(Og,{size:16}):e===2?(0,$.jsx)(Ag,{size:16}):e===3?(0,$.jsx)(Dg,{size:16}):(0,$.jsx)(Tg,{size:16}),f=e=>{if(!e)return`-`;try{return new Date(e).toLocaleString(`zh-TW`,{year:`numeric`,month:`2-digit`,day:`2-digit`,hour:`2-digit`,minute:`2-digit`,hour12:!1})}catch{return`-`}};return(0,$.jsxs)(`div`,{className:`rounded-xl border shadow-sm transition-all duration-200 ${c?`ring-1`:``} ${e.isUrgent?`bg-red-50 border-red-200`:`bg-white border-slate-200`} ${c&&e.isUrgent?`ring-red-300`:c?`border-blue-400 ring-blue-100`:``} ${a?`ring-2 ring-blue-500 border-blue-500`:``}`,children:[(0,$.jsx)(`div`,{className:`p-4`,children:(0,$.jsxs)(`div`,{className:`flex gap-3`,children:[(0,$.jsx)(`div`,{className:`pt-1`,children:(0,$.jsx)(`input`,{type:`checkbox`,checked:a,onChange:t=>o(e.id,t.target.checked),className:`w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer`})}),(0,$.jsx)(`div`,{className:`flex-1 cursor-pointer`,onClick:()=>n(c?null:e.id),children:(0,$.jsxs)(`div`,{className:`flex justify-between items-start gap-3`,children:[(0,$.jsxs)(`div`,{className:`flex-1 space-y-2`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2 flex-wrap`,children:[(0,$.jsx)(`span`,{className:`font-mono text-xs px-2 py-0.5 rounded border ${e.isUrgent?`bg-white/50 text-red-800 border-red-200`:`bg-slate-100 text-slate-500 border-slate-200`}`,children:e.serialId}),e.isUrgent&&(0,$.jsx)(`span`,{className:`text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded font-bold border border-red-200 animate-pulse`,children:``}),(0,$.jsxs)(`span`,{className:`text-xs px-2 py-0.5 rounded border font-bold flex items-center gap-1 ${u(l.phase)}`,children:[d(l.phase),l.label]})]}),(0,$.jsx)(`h3`,{className:`font-bold text-slate-800 text-base leading-tight`,children:e.subject||``}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-slate-500`,children:[(0,$.jsx)(bg,{size:14}),(0,$.jsx)(`span`,{children:e.unit}),(0,$.jsx)(`span`,{className:`text-slate-300`,children:`|`}),(0,$.jsx)(a_,{size:14}),(0,$.jsx)(`span`,{children:e.applicant})]})]}),(0,$.jsxs)(`div`,{className:`flex flex-col items-end gap-3`,children:[(0,$.jsxs)(`div`,{className:`text-right`,children:[(0,$.jsx)(`div`,{className:`text-xs text-slate-400`,children:``}),(0,$.jsxs)(`div`,{className:`font-bold text-blue-600 text-lg`,children:[`$`,(e.totalPrice||0).toLocaleString()]})]}),c?(0,$.jsx)(wg,{size:20,className:`text-slate-400`}):(0,$.jsx)(Cg,{size:20,className:`text-slate-400`})]})]})})]})}),c&&(0,$.jsxs)(`div`,{className:`px-4 pb-4 pt-0 border-t border-slate-100 animate-in slide-in-from-top-2 duration-200 relative`,children:[(0,$.jsx)(`button`,{onClick:()=>r(`edit`,e),className:`absolute top-4 right-4 p-2 bg-white text-blue-600 border border-blue-200 rounded-full hover:bg-blue-50 hover:shadow-md transition-all z-10`,title:``,children:(0,$.jsx)(Wg,{size:18})}),(0,$.jsxs)(`div`,{className:`py-3 space-y-3 text-base`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-3 p-3 rounded-lg pr-12 ${e.isUrgent?`bg-red-100/50`:`bg-slate-50`}`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400 block mb-1`,children:``}),(0,$.jsx)(`span`,{className:`font-medium text-slate-800`,children:e.applicationDate?e.applicationDate.replace(/-/g,`/`):`-`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400 block mb-1`,children:``}),(0,$.jsx)(`span`,{className:`font-medium text-slate-800`,children:e.vendor||`-`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400 block mb-1`,children:``}),(0,$.jsx)(`span`,{className:`font-medium text-slate-800`,children:e.subsidy||``})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400 block mb-1`,children:``}),(0,$.jsx)(`span`,{className:`font-medium text-slate-800`,children:e.receiverName||`-`})]})]}),e.globalRemark&&(0,$.jsxs)(`div`,{className:`bg-yellow-50 p-3 rounded-lg border border-yellow-100 text-yellow-900 text-sm`,children:[(0,$.jsx)(`strong`,{children:``}),` `,e.globalRemark]}),(0,$.jsxs)(`div`,{className:`mt-4`,children:[(0,$.jsx)(`h4`,{className:`text-sm font-bold text-slate-600 mb-2 uppercase tracking-wider`,children:``}),(0,$.jsx)(`div`,{className:`space-y-2 relative pl-2 border-l-2 border-slate-200 ml-1`,children:(e.logs||[]).slice().reverse().slice(0,3).map((e,t)=>(0,$.jsxs)(`div`,{className:`pl-3 relative`,children:[(0,$.jsx)(`div`,{className:`absolute -left-[13px] top-1.5 w-2.5 h-2.5 rounded-full bg-white border-2 border-blue-400`}),(0,$.jsx)(`div`,{className:`text-xs text-slate-400`,children:f(e.timestamp)}),(0,$.jsx)(`div`,{className:`text-base font-medium text-slate-800`,children:e.note||e.status}),(0,$.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[`: `,e.operator]})]},t))})]})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 mt-2 pt-3 border-t border-slate-100 overflow-x-auto pb-1 no-scrollbar`,children:[l.phase<3&&(0,$.jsxs)(`button`,{onClick:()=>r(`advance`,e),className:`flex-[2] min-w-[120px] py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold shadow-sm active:bg-emerald-700 flex items-center justify-center gap-1`,children:[l.nextAction,` `,(0,$.jsx)(_g,{size:16})]}),s&&(0,$.jsxs)(`button`,{onClick:()=>r(`revert`,e),className:`flex-1 min-w-[80px] py-2 bg-white border border-red-200 text-red-600 rounded-lg text-sm font-bold active:bg-red-50 flex items-center justify-center gap-1`,children:[(0,$.jsx)(qg,{size:16}),` `]}),(0,$.jsx)(`button`,{onClick:()=>r(`delete`,e),className:`flex-none px-3 py-2 bg-white border border-red-200 text-red-500 rounded-lg active:bg-red-50`,children:(0,$.jsx)(kg,{size:20})})]})]})]})},RS={[bS.LOGIN]:{icon:(0,$.jsx)(a_,{size:16}),color:`bg-green-100 text-green-700 border-green-200`,label:``},[bS.LOGOUT]:{icon:(0,$.jsx)(a_,{size:16}),color:`bg-slate-100 text-slate-600 border-slate-200`,label:``},[bS.CREATE]:{icon:(0,$.jsx)(Fg,{size:16}),color:`bg-blue-100 text-blue-700 border-blue-200`,label:``},[bS.UPDATE]:{icon:(0,$.jsx)(Fg,{size:16}),color:`bg-indigo-100 text-indigo-700 border-indigo-200`,label:``},[bS.DELETE]:{icon:(0,$.jsx)(c_,{size:16}),color:`bg-red-100 text-red-700 border-red-200`,label:``},[bS.STATUS_CHANGE]:{icon:(0,$.jsx)(gg,{size:16}),color:`bg-orange-100 text-orange-700 border-orange-200`,label:``},[bS.EXPORT]:{icon:(0,$.jsx)(Eg,{size:16}),color:`bg-emerald-100 text-emerald-700 border-emerald-200`,label:``},[bS.IMPORT]:{icon:(0,$.jsx)(Eg,{size:16}),color:`bg-teal-100 text-teal-700 border-teal-200`,label:``},[bS.BATCH_DELETE]:{icon:(0,$.jsx)(c_,{size:16}),color:`bg-red-50 text-red-600 border-red-200`,label:``},DEFAULT:{icon:(0,$.jsx)(Ug,{size:16}),color:`bg-slate-100 text-slate-700 border-slate-200`,label:``}},zS=({isOpen:e,onClose:t,db:n,appId:r})=>{let[i,a]=(0,_.useState)([]),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(null),[u,d]=(0,_.useState)(!0),f=async(e=!1)=>{if(!o){s(!0);try{let t=bh(jm(n,`artifacts`,r,`public`,`data`,`logs`),Th(`timestamp`,`desc`),Dh(50));!e&&c&&(t=bh(t,kh(c)));let i=await Hh(t),o=i.docs.map(e=>({id:e.id,...e.data()}));a(e?o:e=>[...e,...o]),l(i.docs[i.docs.length-1]),d(i.docs.length===50)}catch(e){console.error(`Fetch logs error:`,e)}finally{s(!1)}}};return(0,_.useEffect)(()=>{e&&f(!0)},[e]),e?(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-4xl flex flex-col h-[85vh] md:h-[80vh]`,children:[(0,$.jsxs)(`div`,{className:`p-4 md:p-6 border-b flex justify-between items-center bg-slate-50 rounded-t-xl shrink-0`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`h3`,{className:`text-lg md:text-xl font-bold text-slate-800 flex items-center gap-2`,children:[(0,$.jsx)(gg,{className:`text-slate-600`}),` `]}),(0,$.jsx)(`p`,{className:`text-xs md:text-sm text-slate-500 mt-1`,children:``})]}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>f(!0),className:`p-2 hover:bg-white rounded-lg text-slate-500 border border-transparent hover:border-slate-200 hover:shadow-sm transition-all`,title:``,children:(0,$.jsx)(Kg,{size:20,className:o?`animate-spin`:``})}),(0,$.jsx)(`button`,{onClick:t,className:`p-2 hover:bg-slate-200 rounded-full transition-colors`,children:(0,$.jsx)(c_,{size:24,className:`text-slate-500`})})]})]}),(0,$.jsxs)(`div`,{className:`flex-1 overflow-y-auto bg-slate-50/50 p-2 md:p-0`,children:[(0,$.jsxs)(`table`,{className:`w-full text-left hidden md:table`,children:[(0,$.jsx)(`thead`,{className:`bg-slate-50 text-sm text-slate-600 font-bold border-b sticky top-0 shadow-sm z-10`,children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{className:`p-4 w-48`,children:``}),(0,$.jsx)(`th`,{className:`p-4 w-32`,children:``}),(0,$.jsx)(`th`,{className:`p-4 w-32`,children:``}),(0,$.jsx)(`th`,{className:`p-4`,children:``})]})}),(0,$.jsx)(`tbody`,{className:`divide-y divide-slate-100 bg-white`,children:i.map(e=>{let t=RS[e.action]||RS.DEFAULT;return(0,$.jsxs)(`tr`,{className:`hover:bg-slate-50 transition-colors`,children:[(0,$.jsx)(`td`,{className:`p-4 text-sm text-slate-500 font-mono`,children:new Date(e.timestamp).toLocaleString()}),(0,$.jsx)(`td`,{className:`p-4 text-sm font-bold text-slate-700`,children:e.user||``}),(0,$.jsx)(`td`,{className:`p-4`,children:(0,$.jsxs)(`span`,{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-bold border ${t.color}`,children:[t.icon,` `,t.label]})}),(0,$.jsx)(`td`,{className:`p-4 text-sm text-slate-600`,children:e.detail})]},e.id)})})]}),(0,$.jsx)(`div`,{className:`md:hidden space-y-3 p-2`,children:i.map(e=>{let t=RS[e.action]||RS.DEFAULT;return(0,$.jsxs)(`div`,{className:`bg-white p-4 rounded-xl border border-slate-200 shadow-sm space-y-3`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2 text-xs text-slate-400 font-mono`,children:[(0,$.jsx)(Ag,{size:12}),new Date(e.timestamp).toLocaleString()]}),(0,$.jsx)(`span`,{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-bold border ${t.color}`,children:t.label})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-sm font-bold text-slate-800 leading-snug mb-1`,children:e.detail}),(0,$.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-slate-500 mt-2`,children:[(0,$.jsx)(`div`,{className:`bg-slate-100 p-1 rounded-full`,children:(0,$.jsx)(a_,{size:12})}),(0,$.jsx)(`span`,{children:e.user||``})]})]})]},e.id)})}),i.length===0&&!o&&(0,$.jsxs)(`div`,{className:`p-12 text-center text-slate-400`,children:[(0,$.jsx)(gg,{className:`mx-auto mb-2 opacity-20`,size:48}),(0,$.jsx)(`p`,{children:``})]}),u&&(0,$.jsx)(`div`,{className:`p-4 text-center`,children:(0,$.jsx)(`button`,{onClick:()=>f(!1),disabled:o,className:`bg-white border border-slate-300 text-slate-600 px-6 py-2 rounded-full text-sm font-bold hover:bg-slate-50 hover:text-blue-600 hover:border-blue-300 shadow-sm transition-all disabled:opacity-50 w-full md:w-auto`,children:o?`...`:``})})]})]})}):null},BS=[`268${iS}`],VS=({user:e,onImportFile:t,onOpenLog:n,onDebugClear:r,onOpenSettings:i,onLogout:a,onOpenCreate:o})=>(0,$.jsxs)(`header`,{className:`mb-6 flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl shadow-sm`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`div`,{className:`p-2 bg-blue-600 text-white rounded-lg`,children:(0,$.jsx)(Fg,{size:24})}),(0,$.jsx)(`h1`,{className:`text-xl font-bold`,children:``})]}),(0,$.jsxs)(`div`,{className:`flex flex-wrap gap-2 justify-center md:justify-end`,children:[(0,$.jsxs)(`label`,{className:`flex items-center gap-2 bg-slate-50 border px-2 md:px-3 py-2 rounded-lg cursor-pointer hover:bg-slate-100 text-xs md:text-sm font-medium transition-colors h-auto md:h-10`,children:[(0,$.jsx)(r_,{size:16}),` `,(0,$.jsx)(`input`,{type:`file`,accept:`.json`,className:`hidden`,onChange:t})]}),(0,$.jsxs)(`button`,{onClick:n,className:`flex items-center gap-2 bg-slate-600 text-white px-2 md:px-3 py-2 rounded-lg hover:bg-slate-700 text-xs md:text-sm font-bold transition-colors h-auto md:h-10`,title:``,children:[(0,$.jsx)(gg,{size:16}),` `]}),e&&BS.includes(e.email)&&(0,$.jsx)(`button`,{onClick:r,className:`p-2 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 text-red-600 h-10 w-10 flex items-center justify-center`,title:``,children:(0,$.jsx)(s_,{size:20})}),(0,$.jsx)(`button`,{onClick:i,className:`p-2 bg-white border rounded-lg hover:bg-slate-50 h-10 w-10 flex items-center justify-center`,children:(0,$.jsx)(Zg,{size:20})}),(0,$.jsx)(`button`,{onClick:a,className:`p-2 bg-white border rounded-lg hover:bg-red-50 text-red-500 h-10 w-10 flex items-center justify-center`,title:``,children:(0,$.jsx)(Hg,{size:20})}),(0,$.jsxs)(`button`,{onClick:o,className:`flex items-center gap-2 bg-blue-600 text-white px-3 md:px-4 py-2 rounded-lg hover:bg-blue-700 shadow-md font-bold transition-all h-auto md:h-10 text-xs md:text-base`,children:[(0,$.jsx)(Gg,{size:18}),` `]})]})]}),HS=({searchTerm:e,setSearchTerm:t,onCloudSearch:n,isSearchingCloud:r,filterMonth:i,setFilterMonth:a,monthTabs:o,showUrgentOnly:s,setShowUrgentOnly:c,filterVendor:l,setFilterVendor:u,vendorOptions:d,filterPhase:f,setFilterPhase:p,filterStartDate:m,setFilterStartDate:h,filterEndDate:g,setFilterEndDate:_,onManageCompleted:v,onExport:y})=>(0,$.jsxs)(`div`,{className:`mb-6 bg-white p-4 rounded-xl shadow-sm space-y-4`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col md:flex-row gap-4 items-stretch`,children:[(0,$.jsxs)(`div`,{className:`relative flex-1`,children:[(0,$.jsx)(Xg,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-slate-400`,size:18}),(0,$.jsx)(`input`,{type:`text`,placeholder:`...`,value:e,onChange:e=>t(e.target.value),onKeyDown:e=>e.key===`Enter`&&n(),className:`w-full pl-10 pr-12 py-2.5 rounded-xl border border-slate-200 bg-white shadow-sm focus:ring-2 focus:ring-blue-500 outline-none h-12`}),(0,$.jsx)(`button`,{onClick:n,disabled:r||!e,className:`absolute right-2 top-1/2 -translate-y-1/2 p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50`,title:` ( 300 )`,children:r?(0,$.jsx)(Bg,{size:20,className:`animate-spin`}):(0,$.jsx)(jg,{size:20})})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 items-center flex-wrap md:flex-nowrap`,children:[(0,$.jsxs)(`select`,{value:i,onChange:e=>a(e.target.value),className:`w-full md:w-auto p-2.5 border border-slate-200 rounded-xl font-bold text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none h-12 bg-slate-50`,children:[(0,$.jsx)(`option`,{value:`all`,children:` `}),o.map(e=>(0,$.jsx)(`option`,{value:e.value,children:e.label},e.value))]}),(0,$.jsxs)(`button`,{onClick:()=>c(!s),className:`flex items-center gap-2 px-3 md:px-4 py-2 rounded-xl border font-medium transition-all h-12 whitespace-nowrap ${s?`bg-red-50 border-red-200 text-red-600 shadow-sm`:`bg-white text-slate-600 border-slate-200 shadow-sm`}`,children:[(0,$.jsx)(Ig,{size:18,className:s?`fill-red-600`:``}),s?``:``]})]})]}),(0,$.jsxs)(`div`,{className:`flex flex-col md:flex-row gap-4 items-center border-t border-slate-100 pt-4`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2 w-full md:w-auto text-sm text-slate-500 font-bold whitespace-nowrap`,children:[(0,$.jsx)(Rg,{size:16}),` :`]}),(0,$.jsxs)(`div`,{className:`flex flex-wrap gap-2 w-full items-center`,children:[(0,$.jsxs)(`select`,{value:l,onChange:e=>u(e.target.value),className:`p-2 border border-slate-200 rounded-lg text-sm h-10 bg-white min-w-[120px]`,children:[(0,$.jsx)(`option`,{value:`all`,children:``}),d.map((e,t)=>(0,$.jsx)(`option`,{value:e,children:e},t))]}),(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsxs)(`select`,{value:f,onChange:e=>p(e.target.value),className:`appearance-none bg-white border border-slate-200 text-slate-700 py-2 pl-3 pr-8 rounded-lg text-sm h-10 font-medium`,children:[(0,$.jsx)(`option`,{value:`all`,children:``}),(0,$.jsx)(`option`,{value:`phase1`,children:` ()`}),(0,$.jsx)(`option`,{value:`phase2`,children:` ()`}),(0,$.jsx)(`option`,{value:`phase3`,children:` ()`})]}),(0,$.jsx)(`div`,{className:`pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-slate-500`,children:(0,$.jsx)(Rg,{size:12})})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 bg-slate-50 px-2 py-1 rounded-lg border border-slate-200 ml-auto md:ml-0`,children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400`,children:`:`}),(0,$.jsx)(`input`,{type:`date`,value:m,onChange:e=>h(e.target.value),className:`bg-transparent text-sm outline-none w-28 text-slate-600`}),(0,$.jsx)(`span`,{className:`text-slate-300`,children:`-`}),(0,$.jsx)(`input`,{type:`date`,value:g,onChange:e=>_(e.target.value),className:`bg-transparent text-sm outline-none w-28 text-slate-600`}),(m||g)&&(0,$.jsx)(`button`,{onClick:()=>{h(``),_(``)},className:`text-slate-400 hover:text-red-500`,children:(0,$.jsx)(c_,{size:14})})]})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 ml-auto`,children:[f===`phase3`&&(0,$.jsxs)(`button`,{onClick:v,className:`flex items-center gap-1 px-3 bg-indigo-50 text-indigo-600 border border-indigo-100 rounded-lg hover:bg-indigo-100 font-bold transition-all h-10 whitespace-nowrap text-sm`,children:[(0,$.jsx)(Lg,{size:16}),` `]}),(0,$.jsxs)(`button`,{onClick:y,className:`flex items-center gap-1 px-3 bg-emerald-50 text-emerald-600 border border-emerald-100 rounded-lg hover:bg-emerald-100 font-bold transition-all h-10 whitespace-nowrap text-sm`,children:[(0,$.jsx)(Mg,{size:16}),` `]})]})]})]});`${iS}`;function US(){let{user:e,loading:t,error:n,login:r,logout:i}=CS(),{unitOptions:a,projectOptions:o,vendorOptions:s}=wS(e),{forms:c,setForms:l,loading:u}=TS(e),[d,f]=(0,_.useState)(!1),[p]=(0,_.useState)(pS()),[m,h]=(0,_.useState)(``),[g,v]=(0,_.useState)(`all`),[y,b]=(0,_.useState)(()=>{let e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}`}),[x,ee]=(0,_.useState)(`all`),[te,S]=(0,_.useState)(``),[ne,re]=(0,_.useState)(``),[ie,ae]=(0,_.useState)(!1),[oe,se]=(0,_.useState)(new Set),[ce,le]=(0,_.useState)(null),[ue,C]=(0,_.useState)({isOpen:!1,type:`alert`,title:``,message:``}),[de,w]=(0,_.useState)(!1),[T,fe]=(0,_.useState)(!1),[pe,me]=(0,_.useState)(!1),[he,E]=(0,_.useState)(!1),[D,ge]=(0,_.useState)(!1),[_e,ve]=(0,_.useState)(``),[ye,be]=(0,_.useState)(``),[xe,Se]=(0,_.useState)(`all`),[Ce,we]=(0,_.useState)(``),[Te,Ee]=(0,_.useState)(``),[De,Oe]=(0,_.useState)(``),[ke,Ae]=(0,_.useState)(``),[je,Me]=(0,_.useState)(``),[Ne,Pe]=(0,_.useState)(``),[Fe,Ie]=(0,_.useState)(!1),[Le,Re]=(0,_.useState)(``),[ze,O]=(0,_.useState)([{id:Date.now(),subject:``,quantity:1,measureUnit:``,unitPrice:``}]),[Be,Ve]=(0,_.useState)(!1),[He,Ue]=(0,_.useState)(!1),[We,Ge]=(0,_.useState)(null),[Ke,k]=(0,_.useState)(!1),[qe,Je]=(0,_.useState)(!1),[Ye,Xe]=(0,_.useState)(!1),[Ze,Qe]=(0,_.useState)(!1),$e=ze.reduce((e,t)=>e+(parseFloat(t.quantity)||0)*(parseFloat(t.unitPrice)||0),0);(0,_.useEffect)(()=>(d||Be||de||ue.isOpen||pe||he||D||T?document.body.style.overflow=`hidden`:document.body.style.overflow=``,()=>{document.body.style.overflow=``}),[d,Be,de,ue.isOpen,pe,he,D,T]);let et=(e,t)=>{se(n=>{let r=new Set(n);return t?r.add(e):r.delete(e),r})},tt=e=>{se(e?new Set(at.map(e=>e.id)):new Set)},nt=e=>{if(oe.size===0)return;let t=c.filter(e=>oe.has(e.id));if(t.length!==0){if(e===`advance`){if(t.some(e=>aS[e.status]?.label===``)){C({isOpen:!0,type:`alert`,alertType:`warning`,title:``,message:`



`});return}C({isOpen:!0,type:`action`,title:` (${t.length} )`,message:`
()`,onConfirm:async({note:e})=>{await rt(t,`advance`,e)}})}else if(e===`revert`){let e=t.filter(e=>oS[e.status]);if(e.length===0){C({isOpen:!0,type:`alert`,alertType:`warning`,title:``,message:``});return}C({isOpen:!0,type:`action`,alertType:`danger`,title:` (${e.length} )`,message:` ${e.length} \n( ${t.length-e.length} )\n\n`,showNoteInput:!0,noteRequired:!0,onConfirm:async({note:t})=>{await rt(e,`revert`,t)}})}else if(e===`receiver`){let e=t.filter(e=>aS[e.status]?.label===``);if(e.length===0){C({isOpen:!0,type:`alert`,alertType:`warning`,title:``,message:`

`});return}C({isOpen:!0,type:`action`,title:` (${e.length} )`,message:` ${e.length} \n\n( ${t.length-e.length} )`,showPickupInput:!0,onConfirm:async({pickupName:t})=>{await rt(e,`receiver`,null,t)}})}}},rt=async(t,n,r,i)=>{let a=ag(nS),o=new Date().toISOString(),s=0,c=0;t.forEach(t=>{let l=Mm(nS,`artifacts`,rS,`public`,`data`,`school_forms`,t.id),u=null;if(n===`advance`){let n=aS[t.status];if(n&&n.nextAction){let n=Object.keys(aS),i=n.indexOf(t.status),a=i!==-1&&i<n.length-1?n[i+1]:null;a&&(u={status:a,logs:[...t.logs||[],{status:a,timestamp:o,note:r?`${aS[a].label} [: ${r}]`:aS[a].label,operator:mS(e)}],updatedAt:ig(),[`time_${a}`]:o})}}else if(n===`revert`){let n=oS[t.status];n&&(u={status:n,logs:[...t.logs||[],{status:n,timestamp:o,note:`${aS[n].label} [: ${r}]`,operator:mS(e)}],updatedAt:ig()})}else if(n===`receiver`&&i){let n=Object.keys(aS),r=n.indexOf(t.status),a=r!==-1&&r<n.length-1?n[r+1]:null;a&&(u={receiverName:i,status:a,logs:[...t.logs||[],{status:a,timestamp:o,note:`${aS[a].label} [: ${i}]`,operator:mS(e)}],updatedAt:ig(),[`time_${a}`]:o})}u?(a.update(l,u),s++):c++}),s>0?(await a.commit(),SS(nS,rS,e,n===`advance`||n===`revert`||n===`receiver`?bS.STATUS_CHANGE:bS.UPDATE,` (${n}):  ${s} ,  ${c} `),C({isOpen:!0,title:``,message:`: ${s} \n: ${c}  ()`}),se(new Set)):C({isOpen:!0,type:`alert`,alertType:`warning`,title:``,message:``})},it=async()=>{if(!m.trim()){C({isOpen:!0,type:`alert`,title:``,message:` 11201-01`});return}Qe(!0);try{let e=bh(jm(nS,`artifacts`,rS,`public`,`data`,`school_forms`),Sh(`serialId`,`==`,m.trim())),t=bh(jm(nS,`artifacts`,rS,`public`,`data`,`school_forms`),Sh(`serialId`,`==`,`(${m.trim()})`)),[n,r]=await Promise.all([Hh(e),Hh(t)]),i=[];n.forEach(e=>i.push({id:e.id,...e.data()})),r.forEach(e=>{i.some(t=>t.id===e.id)||i.push({id:e.id,...e.data()})}),i.length>0?(l(e=>{let t=[...e];return i.forEach(e=>{t.some(t=>t.id===e.id)||t.push(e)}),t.sort((e,t)=>{let n=e.createdAt?.seconds||0,r=t.createdAt?.seconds||0;return r===n?(t.serialId||``).localeCompare(e.serialId||``):r-n}),t}),C({isOpen:!0,title:``,message:` ${i.length} `}),b(`all`)):C({isOpen:!0,type:`alert`,alertType:`warning`,title:``,message:``})}catch(e){console.error(`Cloud search error:`,e),C({isOpen:!0,type:`alert`,alertType:`danger`,title:``,message:``})}finally{Qe(!1)}},at=(0,_.useMemo)(()=>c.filter(e=>{if(y!==`all`){let t=e.createdAt?.toDate?e.createdAt.toDate():new Date;if(`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,`0`)}`!==y)return!1}if(x!==`all`&&e.vendor!==x)return!1;if(te&&ne){let t=e.applicationDate||(e.createdAt?.toDate?e.createdAt.toDate().toISOString().split(`T`)[0]:``);if(t<te||t>ne)return!1}if(ie&&!e.isUrgent)return!1;let t=m.toLowerCase();return!t||e.serialId&&e.serialId.toLowerCase().includes(t)||e.subject&&e.subject.toLowerCase().includes(t)||e.unit&&e.unit.toLowerCase().includes(t)||e.applicant&&e.applicant.toLowerCase().includes(t)||e.vendor&&e.vendor.toLowerCase().includes(t)||e.globalRemark&&e.globalRemark.toLowerCase().includes(t)?g===`phase1`?aS[e.status]?.phase===1&&e.status!==`P1_RETURNED`:g===`phase2`?(aS[e.status]?.phase===2||e.status===`P1_RETURNED`)&&e.status!==`COMPLETED`:g===`phase3`?aS[e.status]?.phase===3:!0:!1}),[c,m,g,y,ie,x,te,ne]),ot=()=>{let e=new Date,t=`${(e.getMonth()+1).toString().padStart(2,`0`)}-${e.getDate().toString().padStart(2,`0`)}`,n=c.filter(e=>e.serialId&&e.serialId.startsWith(`(${t}`)),r=0;return n.forEach(e=>{let t=e.serialId.replace(/[()]/g,``).split(`-`);if(t.length===3){let e=parseInt(t[2],10);!isNaN(e)&&e>r&&(r=e)}}),`(${t}-${(r+1).toString().padStart(2,`0`)})`};(0,_.useEffect)(()=>{Be&&!He&&Re(ot())},[Be,c,He]);let st=()=>O([...ze,{id:Date.now(),subject:``,quantity:1,measureUnit:``,unitPrice:``}]),ct=e=>{if(ze.length>1){let t=[...ze];t.splice(e,1),O(t)}},lt=(e,t,n)=>{let r=[...ze];r[e][t]=n,O(r)},ut=()=>{we(``),Ee(``),Oe(``),k(!1),Ae(``),Je(!1),Me(``),Ie(!1),Pe(``),O([{id:Date.now(),subject:``,quantity:1,measureUnit:``,unitPrice:``}]),Ue(!1),Ge(null),Re(``)},dt=()=>{ut(),Ue(!1),Ve(!0)},ft=e=>{we(e.unit||``),Ee(e.applicant||``),Oe(e.subsidy||``),Ae(e.vendor||``),Me(e.globalRemark||``),Pe(e.applicationDate||``),Ie(e.isUrgent||!1);let t=(e.items||[]).map((e,t)=>({...e,id:e.id||Date.now()+t}));O(t.length>0?t:[{id:Date.now(),subject:``,quantity:1,measureUnit:``,unitPrice:``}]),Re(e.serialId),Ge(e.id),Ue(!0),e.subsidy&&!o.includes(e.subsidy)&&e.subsidy!==` ()`?k(!0):k(!1),e.vendor&&!s.includes(e.vendor)?Je(!0):Je(!1),Ve(!0)},pt=async t=>{if(t.preventDefault(),!Ye){if(!Ce||ze.some(e=>!e.subject.trim()||!e.quantity||e.quantity<=0||e.unitPrice===``||e.unitPrice===void 0)){C({isOpen:!0,type:`alert`,alertType:`danger`,title:``,message:``});return}if(!e){C({isOpen:!0,type:`alert`,alertType:`danger`,title:``,message:``});return}Xe(!0);try{let t={},n=De.trim();n&&!o.includes(n)&&n!==` ()`&&window.confirm(`${n}`)&&(t.projects=[...o,n]);let r=ke.trim();r&&!s.includes(r)&&window.confirm(`${r}`)&&(t.vendors=[...s,r]),Object.keys(t).length>0&&await Uh(Mm(nS,`artifacts`,rS,`public`,`data`,`school_settings`,`config1`),t,{merge:!0});let i=new Date().toISOString(),a=ze.map(e=>e.subject).join(``),c={unit:Ce,applicant:Te,isUrgent:Fe,globalRemark:je,vendor:ke,applicationDate:Ne,items:ze.map(e=>({subject:e.subject,quantity:parseInt(e.quantity)||1,measureUnit:e.measureUnit||``,unitPrice:parseInt(e.unitPrice)||0,subtotal:(parseInt(e.quantity)||0)*(parseInt(e.unitPrice)||0)})),subject:a,totalPrice:$e,subsidy:De,updatedAt:ig()},l,u;if(He&&We)await Wh(Mm(nS,`artifacts`,rS,`public`,`data`,`school_forms`,We),c),l=bS.UPDATE,u=`${Le} (: ${$e})`;else{let t=ot();c.serialId=t,c.status=`P1_RECEIVED`,c.logs=[{status:`P1_RECEIVED`,timestamp:i,note:``,operator:mS(e)}],c.time_P1_RECEIVED=i,c.createdAt=ig(),await Kh(jm(nS,`artifacts`,rS,`public`,`data`,`school_forms`),c),l=bS.CREATE,u=`${t} (: ${$e})`}SS(nS,rS,e,l,u),He?(Ve(!1),C({isOpen:!0,title:``,message:` ${Le} `})):(ut(),C({isOpen:!0,title:``,message:``}))}catch(e){console.error(`Submit error`,e),C({isOpen:!0,type:`alert`,alertType:`danger`,title:``,message:``})}finally{Xe(!1)}}},mt=(t,n)=>{C({isOpen:!0,type:`confirm`,alertType:`danger`,title:` `,message:`${t} ${n.length} \n\n()`,onConfirm:async()=>{try{let r=0;for(let e of n)await Gh(Mm(nS,`artifacts`,rS,`public`,`data`,`school_forms`,e.id)),r++;l(e=>e.filter(e=>!n.some(t=>t.id===e.id))),SS(nS,rS,e,bS.BATCH_DELETE,` [${t}] ${r} `),setTimeout(()=>St(``,` ${t} `),500)}catch(e){console.error(`Delete process error`,e),setTimeout(()=>St(``,``,`danger`),500)}}})},ht=()=>w(!0),gt=()=>{w(!1),ve(``),be(``)},_t=()=>{let e=c;if(xe===`date`&&_e&&ye?e=c.filter(e=>{if(!e.serialId)return!1;let t=e.serialId.replace(/[()]/g,``).split(`-`);if(t.length<2)return!1;let n=`${(e.createdAt?.toDate?e.createdAt.toDate():new Date).getFullYear()}-${t[0]}-${t[1]}`;return n>=_e&&n<=ye}):xe===`completed`&&(e=c.filter(e=>aS[e.status]?.phase===3)),e.length===0){St(``,``,`danger`);return}fe(!0)},vt=t=>{let n=c;xe===`date`&&_e&&ye?n=c.filter(e=>{if(!e.serialId)return!1;let t=e.serialId.replace(/[()]/g,``).split(`-`),n=`${(e.createdAt?.toDate?e.createdAt.toDate():new Date).getFullYear()}-${t[0]}-${t[1]}`;return n>=_e&&n<=ye}):xe===`completed`&&(n=c.filter(e=>aS[e.status]?.phase===3)),n.sort((e,t)=>(t.serialId||``).localeCompare(e.serialId||``));let r=xe===`date`?`${uS(_e).replace(/-/g,``)}-${uS(ye).replace(/-/g,``)}`:xe===`completed`?``:``;t===`json`?(vS(_S(n),`_${r}.json`),SS(nS,rS,e,bS.EXPORT,`(JSON) [${xe}] ${n.length} `)):(gS(hS(n),`_${r}.csv`),SS(nS,rS,e,bS.EXPORT,`(CSV) [${xe}] ${n.length} `)),fe(!1),gt()},yt=()=>me(!0),bt=()=>E(!0),xt=t=>{let n=t.target.files[0];if(!n)return;if(!n.name.toLowerCase().endsWith(`.json`)){St(``,` JSON 

CSV `,`warning`),t.target.value=``;return}let r=new FileReader;r.onload=async n=>{let r=n.target.result;try{let t=JSON.parse(r);if(!Array.isArray(t))throw Error(``);C({isOpen:!0,type:`confirm`,title:``,message:` JSON  ${t.length} \n\n`,onConfirm:async()=>{try{let n=yS(c,t),r=ag(nS),i=0;n.forEach(e=>{e.id&&(r.set(Mm(nS,`artifacts`,rS,`public`,`data`,`school_forms`,e.id),e,{merge:!0}),i++)}),await r.commit(),SS(nS,rS,e,bS.IMPORT,`JSON  ${i} `),St(``,`/ ${i}  ()`)}catch(e){console.error(`JSON Import Error:`,e),St(``,``,`danger`)}}})}catch{St(``,` JSON `,`danger`)}t.target.value=``},r.readAsText(n),t.target.value=``},St=(e,t,n=`info`)=>C({isOpen:!0,type:`alert`,title:e,message:t,alertType:n}),Ct=(e,t,n)=>C({isOpen:!0,type:`confirm`,title:e,message:t,onConfirm:n}),wt=(t,n)=>{if(t===`edit`)ft(n);else if(t===`delete`)C({isOpen:!0,type:`confirm`,title:``,message:``,alertType:`danger`,onConfirm:async()=>{await Gh(Mm(nS,`artifacts`,rS,`public`,`data`,`school_forms`,n.id)),l(e=>e.filter(e=>e.id!==n.id)),SS(nS,rS,e,bS.DELETE,`${n.serialId} (${n.applicant})`)}});else if(t===`revert`){let t=oS[n.status];t&&C({isOpen:!0,type:`action`,title:``,message:``,showNoteInput:!0,noteRequired:!0,alertType:`danger`,onConfirm:async({note:r})=>{let i=new Date().toISOString();await Wh(Mm(nS,`artifacts`,rS,`public`,`data`,`school_forms`,n.id),{status:t,logs:[...n.logs||[],{status:t,timestamp:i,note:`${aS[t].label} [: ${r}]`,operator:mS(e)}],updatedAt:ig()}),SS(nS,rS,e,bS.STATUS_CHANGE,` ${n.serialId}  ${aS[t].label}${r}`)}})}else if(t===`advance`){let t=aS[n.status];t&&t.nextAction&&C({isOpen:!0,type:`action`,title:`${t.nextAction}`,message:`${t.nextAction}`,showPickupInput:t.requirePickupName,onConfirm:async({note:t,pickupName:r})=>{let i=null,a=Object.keys(aS),o=a.indexOf(n.status);if(o!==-1&&o<a.length-1&&(i=a[o+1]),i){let a=new Date().toISOString(),o={status:i,logs:[...n.logs||[],{status:i,timestamp:a,note:t?`${aS[i].label} [: ${t}]`:aS[i].label,operator:mS(e)}],updatedAt:ig(),[`time_${i}`]:a};r&&(o.receiverName=r),await Wh(Mm(nS,`artifacts`,rS,`public`,`data`,`school_forms`,n.id),o),SS(nS,rS,e,bS.STATUS_CHANGE,` ${n.serialId}  ${aS[i].label}${t?`:`+t:``}`)}}})}};return t?(0,$.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-slate-100`,children:(0,$.jsx)(Ag,{className:`text-blue-600 animate-spin`,size:40})}):e?(0,$.jsxs)(`div`,{className:`min-h-screen bg-slate-100 text-slate-800 font-sans pb-20 md:pb-0`,children:[(0,$.jsx)(PS,{modal:ue,onClose:()=>C({...ue,isOpen:!1}),onConfirm:ue.onConfirm}),(0,$.jsx)(jS,{isOpen:pe,onClose:()=>me(!1),forms:c,onDeleteMonth:mt,onExport:()=>{if(!c.some(e=>aS[e.status]?.phase===3)){St(``,``,`danger`);return}Se(`completed`),fe(!0)},statusSteps:aS}),(0,$.jsx)(MS,{isOpen:he,onClose:()=>E(!1),forms:c,onDeleteMonth:mt}),(0,$.jsx)(zS,{isOpen:D,onClose:()=>ge(!1),db:nS,appId:rS}),(0,$.jsx)(AS,{isOpen:d,onClose:()=>f(!1),initialData:{units:a,projects:o,vendors:s},onSave:()=>{},db:nS,appId:rS,openAlert:St,openConfirm:Ct}),(0,$.jsx)(NS,{isOpen:de,onClose:gt,onConfirm:_t,mode:xe,setMode:Se,startDate:_e,setStartDate:ve,endDate:ye,setEndDate:be}),T&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-[1100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 border border-slate-200`,children:[(0,$.jsxs)(`div`,{className:`text-center mb-6`,children:[(0,$.jsx)(`div`,{className:`bg-blue-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-600`,children:(0,$.jsx)(Mg,{size:32})}),(0,$.jsx)(`h3`,{className:`text-2xl font-bold text-slate-800`,children:``}),(0,$.jsx)(`p`,{className:`text-slate-500 mt-2`,children:``})]}),(0,$.jsxs)(`div`,{className:`space-y-3 mb-6`,children:[(0,$.jsxs)(`button`,{onClick:()=>vt(`json`),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 border-blue-100 bg-blue-50/50 hover:bg-blue-100 hover:border-blue-300 transition-all group text-left`,children:[(0,$.jsx)(`div`,{className:`bg-white p-3 rounded-lg shadow-sm text-blue-600 group-hover:scale-110 transition-transform`,children:(0,$.jsx)(Ng,{size:28})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`font-bold text-slate-800 text-lg`,children:` (JSON)`}),(0,$.jsx)(`div`,{className:`text-sm text-slate-500`,children:``})]})]}),(0,$.jsxs)(`button`,{onClick:()=>vt(`csv`),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 border-slate-100 hover:bg-slate-50 hover:border-slate-300 transition-all group text-left`,children:[(0,$.jsx)(`div`,{className:`bg-white p-3 rounded-lg shadow-sm text-emerald-600 group-hover:scale-110 transition-transform`,children:(0,$.jsx)(Pg,{size:28})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`font-bold text-slate-800 text-lg`,children:` (CSV)`}),(0,$.jsx)(`div`,{className:`text-sm text-slate-500`,children:`Excel `})]})]})]}),(0,$.jsx)(`button`,{onClick:()=>fe(!1),className:`w-full py-3 text-slate-400 font-bold hover:text-slate-600 hover:bg-slate-50 rounded-xl transition-colors`,children:``})]})}),Be&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto p-6 border border-blue-200`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-center mb-6 pb-4 border-b`,children:[(0,$.jsxs)(`h3`,{className:`font-bold text-lg flex items-center gap-2 text-blue-800`,children:[He?(0,$.jsx)(Wg,{size:20}):(0,$.jsx)(vg,{size:20}),` `,He?``:``]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsxs)(`div`,{className:`bg-blue-50 text-blue-700 px-3 py-1.5 rounded-full text-xs font-mono border border-blue-100`,children:[``,Le]}),(0,$.jsx)(`button`,{onClick:()=>Ve(!1),className:`text-slate-400 hover:text-slate-600`,children:(0,$.jsx)(c_,{size:24})})]})]}),(0,$.jsxs)(`form`,{onSubmit:pt,className:`space-y-4`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-12 gap-4`,children:[(0,$.jsxs)(`div`,{className:`col-span-12 md:col-span-3`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` *`}),(0,$.jsxs)(`select`,{value:Ce,onChange:e=>we(e.target.value),className:`w-full p-2 border rounded-lg bg-white h-12`,required:!0,children:[(0,$.jsx)(`option`,{value:``,disabled:!0,children:`...`}),a.map((e,t)=>(0,$.jsx)(`option`,{value:e,children:String(e)},t))]})]}),(0,$.jsxs)(`div`,{className:`col-span-12 md:col-span-3`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:``,value:Te,onChange:e=>Ee(e.target.value),className:`w-full p-2 border rounded-lg h-12`,required:!0})]}),(0,$.jsxs)(`div`,{className:`col-span-12 md:col-span-6`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` ()`}),Ke?(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`input`,{type:`text`,value:De,onChange:e=>Oe(e.target.value),placeholder:`...`,className:`w-full p-2 border rounded-lg h-12`,autoFocus:!0}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>{k(!1),Oe(``)},className:`p-2 text-gray-500 hover:bg-gray-100 rounded h-12 w-12 flex items-center justify-center`,children:(0,$.jsx)(c_,{size:20})})]}):(0,$.jsx)(kS,{options:o,value:De,onChange:e=>Oe(e),placeholder:`...`,onCustomClick:e=>{k(!0),Oe(e||``)}})]})]}),(0,$.jsxs)(`div`,{className:`flex flex-col md:flex-row gap-4`,children:[(0,$.jsxs)(`div`,{className:`w-full md:w-[70%]`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` ()`}),qe?(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`input`,{type:`text`,value:ke,onChange:e=>Ae(e.target.value),placeholder:`...`,className:`w-full p-2 border rounded-lg h-12`,autoFocus:!0}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>{Je(!1),Ae(``)},className:`p-2 text-gray-500 hover:bg-gray-100 rounded h-12 w-12 flex items-center justify-center`,children:(0,$.jsx)(c_,{size:20})})]}):(0,$.jsx)(kS,{options:s,value:ke,onChange:e=>Ae(e),placeholder:`...`,onCustomClick:e=>{Je(!0),Ae(e||``)}})]}),(0,$.jsxs)(`div`,{className:`w-full md:w-[30%]`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` ()`}),(0,$.jsx)(OS,{value:Ne,onChange:Pe})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:` ()`}),(0,$.jsx)(`input`,{type:`text`,placeholder:``,value:je,onChange:e=>Me(e.target.value),className:`w-full p-2 border rounded-lg h-12`})]}),(0,$.jsx)(`div`,{className:`flex items-center`,children:(0,$.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer bg-red-50 px-3 py-2 rounded border border-red-100 h-12`,children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:Fe,onChange:e=>Ie(e.target.checked),className:`w-5 h-5 text-red-600 rounded`}),(0,$.jsx)(`span`,{className:`text-sm font-bold ${Fe?`text-red-600`:`text-slate-500`}`,children:Fe?` `:``})]})}),(0,$.jsxs)(`div`,{className:`bg-slate-50 p-4 rounded-xl border border-slate-200`,children:[(0,$.jsxs)(`label`,{className:`block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2`,children:[(0,$.jsx)(Qg,{size:16}),` `]}),(0,$.jsx)(`div`,{className:`space-y-3`,children:ze.map((e,t)=>(0,$.jsxs)(`div`,{className:`group relative flex flex-col md:flex-row gap-3 bg-white p-4 rounded-xl border border-slate-200 shadow-sm transition-all hover:border-blue-300`,children:[(0,$.jsxs)(`div`,{className:`hidden md:flex items-center justify-center w-6 text-slate-400 font-mono text-sm self-center`,children:[t+1,`.`]}),(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`label`,{className:`block md:hidden text-xs font-bold text-slate-500 mb-1`,children:``}),(0,$.jsx)(`input`,{type:`text`,placeholder:` *`,value:e.subject,onChange:e=>lt(t,`subject`,e.target.value),className:`w-full p-3 border border-slate-300 rounded-lg text-base focus:ring-2 focus:ring-blue-500 outline-none transition-all placeholder:text-slate-300`,required:!0})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 w-full md:w-auto`,children:[(0,$.jsxs)(`div`,{className:`w-28 shrink-0`,children:[(0,$.jsx)(`label`,{className:`block md:hidden text-xs font-bold text-slate-500 mb-1`,children:``}),(0,$.jsx)(`input`,{type:`number`,placeholder:` *`,value:e.quantity,onChange:e=>lt(t,`quantity`,e.target.value),className:`w-full p-3 border border-slate-300 rounded-lg text-center text-base focus:ring-2 focus:ring-blue-500 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none`,required:!0})]}),(0,$.jsxs)(`div`,{className:`w-20 shrink-0`,children:[(0,$.jsx)(`label`,{className:`block md:hidden text-xs font-bold text-slate-500 mb-1`,children:``}),(0,$.jsx)(`input`,{type:`text`,placeholder:``,value:e.measureUnit,onChange:e=>lt(t,`measureUnit`,e.target.value),className:`w-full p-3 border border-slate-300 rounded-lg text-center text-base focus:ring-2 focus:ring-blue-500 outline-none`})]}),(0,$.jsxs)(`div`,{className:`flex-1 md:w-40`,children:[(0,$.jsx)(`label`,{className:`block md:hidden text-xs font-bold text-slate-500 mb-1`,children:``}),(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(`span`,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-slate-400`,children:`$`}),(0,$.jsx)(`input`,{type:`number`,placeholder:` *`,value:e.unitPrice,onChange:e=>lt(t,`unitPrice`,e.target.value),className:`w-full pl-6 pr-3 py-3 border border-slate-300 rounded-lg text-right text-base focus:ring-2 focus:ring-blue-500 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none`,required:!0})]})]})]}),(0,$.jsxs)(`div`,{className:`flex items-center justify-between md:justify-end gap-4 mt-2 md:mt-0 pt-2 md:pt-0 border-t md:border-t-0 border-slate-100 w-full md:w-auto`,children:[(0,$.jsx)(`div`,{className:`md:hidden text-sm text-slate-500 font-medium`,children:``}),(0,$.jsxs)(`div`,{className:`text-lg font-bold text-blue-600 w-24 text-right`,children:[`$`,((parseInt(e.quantity)||0)*(parseInt(e.unitPrice)||0)).toLocaleString()]}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>ct(t),className:`p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all ${ze.length===1?`invisible`:``}`,title:``,children:(0,$.jsx)(c_,{size:20})})]})]},e.id))}),(0,$.jsxs)(`div`,{className:`flex justify-between items-center mt-4 pt-4 border-t border-slate-200`,children:[(0,$.jsxs)(`button`,{type:`button`,onClick:st,className:`text-sm text-blue-600 flex items-center gap-1 font-bold hover:underline`,children:[(0,$.jsx)(Gg,{size:16}),` `]}),(0,$.jsxs)(`div`,{className:`text-xl font-black`,children:[`: `,(0,$.jsxs)(`span`,{className:`text-blue-600`,children:[`$`,$e.toLocaleString()]})]})]})]}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2 pt-2`,children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>Ve(!1),className:`px-6 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg h-12`,disabled:Ye,children:``}),(0,$.jsx)(`button`,{type:`submit`,className:`px-8 py-2 text-white rounded-lg font-bold shadow-md flex items-center gap-2 ${Ye?`bg-gray-400 cursor-not-allowed`:`bg-blue-600 hover:bg-blue-700`} h-12`,disabled:Ye,children:Ye?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Bg,{className:`animate-spin`,size:20}),`...`]}):He?``:` ()`})]})]})]})}),(0,$.jsxs)(`div`,{className:`max-w-7xl mx-auto p-4 md:p-6 text-center`,children:[(0,$.jsx)(VS,{user:e,onImportFile:xt,onOpenLog:()=>ge(!0),onDebugClear:bt,onOpenSettings:()=>f(!0),onLogout:i,onOpenCreate:dt}),(0,$.jsx)(HS,{searchTerm:m,setSearchTerm:h,onCloudSearch:it,isSearchingCloud:Ze,filterMonth:y,setFilterMonth:b,monthTabs:p,showUrgentOnly:ie,setShowUrgentOnly:ae,filterVendor:x,setFilterVendor:ee,vendorOptions:s,filterPhase:g,setFilterPhase:v,filterStartDate:te,setFilterStartDate:S,filterEndDate:ne,setFilterEndDate:re,onManageCompleted:yt,onExport:ht}),(0,$.jsx)(`div`,{className:`space-y-4`,children:u?(0,$.jsxs)(`div`,{className:`bg-white p-12 rounded-2xl text-center shadow-sm`,children:[(0,$.jsx)(Ag,{className:`mx-auto mb-4 text-blue-200 animate-spin`,size:40}),(0,$.jsx)(`p`,{className:`text-slate-400 font-medium`,children:`...`})]}):at.length===0?(0,$.jsxs)(`div`,{className:`bg-white p-20 rounded-2xl text-center shadow-sm border border-dashed border-slate-300`,children:[(0,$.jsx)(Fg,{className:`mx-auto mb-4 text-slate-200`,size:48}),(0,$.jsx)(`p`,{className:`text-slate-400`,children:``})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`hidden md:block bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden`,children:(0,$.jsxs)(`table`,{className:`w-full text-left table-fixed`,children:[(0,$.jsx)(`thead`,{className:`bg-slate-50 text-sm text-slate-600 font-bold border-b`,children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{className:`p-4 w-12 text-center`,children:(0,$.jsx)(`input`,{type:`checkbox`,onChange:e=>tt(e.target.checked),checked:oe.size>0&&oe.size===at.length,className:`w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer`})}),(0,$.jsx)(`th`,{className:`p-4 w-32 lg:w-1/6`,children:`/`}),(0,$.jsx)(`th`,{className:`p-4 w-1/3`,children:`/`}),(0,$.jsx)(`th`,{className:`p-4 whitespace-nowrap`,children:`/`}),(0,$.jsx)(`th`,{className:`p-4 whitespace-nowrap`,children:``}),(0,$.jsx)(`th`,{className:`p-4 w-14`})]})}),(0,$.jsx)(`tbody`,{className:`divide-y divide-slate-100`,children:at.map(e=>(0,$.jsx)(IS,{form:e,expandedId:ce,setExpandedId:le,onAction:wt,selected:oe.has(e.id),onSelect:et,statusSteps:aS,canRevert:!!oS[e.status]},e.id))})]})}),(0,$.jsxs)(`div`,{className:`block md:hidden space-y-3`,children:[(0,$.jsx)(`div`,{className:`flex justify-between items-center px-2 pb-2`,children:(0,$.jsxs)(`label`,{className:`flex items-center gap-2 text-sm font-bold text-slate-600`,children:[(0,$.jsx)(`input`,{type:`checkbox`,onChange:e=>tt(e.target.checked),checked:oe.size>0&&oe.size===at.length,className:`w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500`}),` (`,at.length,`)`]})}),at.map(e=>(0,$.jsx)(LS,{form:e,expandedId:ce,setExpandedId:le,onAction:wt,statusSteps:aS,selected:oe.has(e.id),onSelect:et,canRevert:!!oS[e.status]},e.id))]})]})}),oe.size>0&&(0,$.jsxs)(`div`,{className:`fixed bottom-0 left-0 right-0 bg-white border-t border-blue-200 p-3 shadow-lg flex justify-center gap-4 items-center z-40`,children:[(0,$.jsxs)(`div`,{className:`text-sm font-bold text-slate-600 bg-slate-100 px-3 py-1.5 rounded-full flex items-center gap-2`,children:[(0,$.jsx)($g,{size:16}),` `,oe.size,` `]}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsxs)(`button`,{onClick:()=>nt(`advance`),className:`flex items-center gap-1 px-3 py-2 bg-blue-600 text-white text-sm font-bold rounded-lg shadow-sm active:scale-95 transition-transform`,children:[(0,$.jsx)(_g,{size:16}),` `]}),(0,$.jsxs)(`button`,{onClick:()=>nt(`revert`),className:`flex items-center gap-1 px-3 py-2 bg-orange-500 text-white text-sm font-bold rounded-lg shadow-sm active:scale-95 transition-transform`,children:[(0,$.jsx)(qg,{size:16}),` `]}),(0,$.jsxs)(`button`,{onClick:()=>nt(`receiver`),className:`flex items-center gap-1 px-3 py-2 bg-indigo-500 text-white text-sm font-bold rounded-lg shadow-sm active:scale-95 transition-transform`,children:[(0,$.jsx)(i_,{size:16}),` `]}),(0,$.jsx)(`button`,{onClick:()=>se(new Set),className:`p-2 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100`,children:(0,$.jsx)(c_,{size:20})})]})]})]})]}):(0,$.jsx)(DS,{onLogin:r,loading:t,error:n,isPreview:!1})}g.createRoot(document.getElementById(`root`)).render((0,$.jsx)(_.StrictMode,{children:(0,$.jsx)(US,{})}));